function rI(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in e)){const a=Object.getOwnPropertyDescriptor(n,o);a&&Object.defineProperty(e,o,a.get?a:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();var an=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nI(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ip(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){if(this instanceof n){var o=[null];o.push.apply(o,arguments);var a=Function.bind.apply(t,o);return new a}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),r}var Mc={},iI={get exports(){return Mc},set exports(e){Mc=e}},op={},bt={},oI={get exports(){return bt},set exports(e){bt=e}},qr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var od=Symbol.for("react.element"),sI=Symbol.for("react.portal"),aI=Symbol.for("react.fragment"),lI=Symbol.for("react.strict_mode"),uI=Symbol.for("react.profiler"),cI=Symbol.for("react.provider"),dI=Symbol.for("react.context"),fI=Symbol.for("react.forward_ref"),hI=Symbol.for("react.suspense"),pI=Symbol.for("react.memo"),gI=Symbol.for("react.lazy"),RS=Symbol.iterator;function yI(e){return e===null||typeof e!="object"?null:(e=RS&&e[RS]||e["@@iterator"],typeof e=="function"?e:null)}var RA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},CA=Object.assign,xA={};function kl(e,t,r){this.props=e,this.context=t,this.refs=xA,this.updater=r||RA}kl.prototype.isReactComponent={};kl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};kl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function PA(){}PA.prototype=kl.prototype;function b0(e,t,r){this.props=e,this.context=t,this.refs=xA,this.updater=r||RA}var A0=b0.prototype=new PA;A0.constructor=b0;CA(A0,kl.prototype);A0.isPureReactComponent=!0;var CS=Array.isArray,TA=Object.prototype.hasOwnProperty,R0={current:null},IA={key:!0,ref:!0,__self:!0,__source:!0};function FA(e,t,r){var n,o={},a=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)TA.call(t,n)&&!IA.hasOwnProperty(n)&&(o[n]=t[n]);var u=arguments.length-2;if(u===1)o.children=r;else if(1<u){for(var h=Array(u),c=0;c<u;c++)h[c]=arguments[c+2];o.children=h}if(e&&e.defaultProps)for(n in u=e.defaultProps,u)o[n]===void 0&&(o[n]=u[n]);return{$$typeof:od,type:e,key:a,ref:s,props:o,_owner:R0.current}}function mI(e,t){return{$$typeof:od,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function C0(e){return typeof e=="object"&&e!==null&&e.$$typeof===od}function vI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var xS=/\/+/g;function Wg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?vI(""+e.key):t.toString(36)}function ih(e,t,r,n,o){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case od:case sI:s=!0}}if(s)return s=e,o=o(s),e=n===""?"."+Wg(s,0):n,CS(o)?(r="",e!=null&&(r=e.replace(xS,"$&/")+"/"),ih(o,t,r,"",function(c){return c})):o!=null&&(C0(o)&&(o=mI(o,r+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(xS,"$&/")+"/")+e)),t.push(o)),1;if(s=0,n=n===""?".":n+":",CS(e))for(var u=0;u<e.length;u++){a=e[u];var h=n+Wg(a,u);s+=ih(a,t,r,h,o)}else if(h=yI(e),typeof h=="function")for(e=h.call(e),u=0;!(a=e.next()).done;)a=a.value,h=n+Wg(a,u++),s+=ih(a,t,r,h,o);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Cf(e,t,r){if(e==null)return e;var n=[],o=0;return ih(e,n,"","",function(a){return t.call(r,a,o++)}),n}function wI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ei={current:null},oh={transition:null},_I={ReactCurrentDispatcher:Ei,ReactCurrentBatchConfig:oh,ReactCurrentOwner:R0};qr.Children={map:Cf,forEach:function(e,t,r){Cf(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Cf(e,function(){t++}),t},toArray:function(e){return Cf(e,function(t){return t})||[]},only:function(e){if(!C0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};qr.Component=kl;qr.Fragment=aI;qr.Profiler=uI;qr.PureComponent=b0;qr.StrictMode=lI;qr.Suspense=hI;qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_I;qr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=CA({},e.props),o=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=R0.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(h in t)TA.call(t,h)&&!IA.hasOwnProperty(h)&&(n[h]=t[h]===void 0&&u!==void 0?u[h]:t[h])}var h=arguments.length-2;if(h===1)n.children=r;else if(1<h){u=Array(h);for(var c=0;c<h;c++)u[c]=arguments[c+2];n.children=u}return{$$typeof:od,type:e.type,key:o,ref:a,props:n,_owner:s}};qr.createContext=function(e){return e={$$typeof:dI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cI,_context:e},e.Consumer=e};qr.createElement=FA;qr.createFactory=function(e){var t=FA.bind(null,e);return t.type=e,t};qr.createRef=function(){return{current:null}};qr.forwardRef=function(e){return{$$typeof:fI,render:e}};qr.isValidElement=C0;qr.lazy=function(e){return{$$typeof:gI,_payload:{_status:-1,_result:e},_init:wI}};qr.memo=function(e,t){return{$$typeof:pI,type:e,compare:t===void 0?null:t}};qr.startTransition=function(e){var t=oh.transition;oh.transition={};try{e()}finally{oh.transition=t}};qr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};qr.useCallback=function(e,t){return Ei.current.useCallback(e,t)};qr.useContext=function(e){return Ei.current.useContext(e)};qr.useDebugValue=function(){};qr.useDeferredValue=function(e){return Ei.current.useDeferredValue(e)};qr.useEffect=function(e,t){return Ei.current.useEffect(e,t)};qr.useId=function(){return Ei.current.useId()};qr.useImperativeHandle=function(e,t,r){return Ei.current.useImperativeHandle(e,t,r)};qr.useInsertionEffect=function(e,t){return Ei.current.useInsertionEffect(e,t)};qr.useLayoutEffect=function(e,t){return Ei.current.useLayoutEffect(e,t)};qr.useMemo=function(e,t){return Ei.current.useMemo(e,t)};qr.useReducer=function(e,t,r){return Ei.current.useReducer(e,t,r)};qr.useRef=function(e){return Ei.current.useRef(e)};qr.useState=function(e){return Ei.current.useState(e)};qr.useSyncExternalStore=function(e,t,r){return Ei.current.useSyncExternalStore(e,t,r)};qr.useTransition=function(){return Ei.current.useTransition()};qr.version="18.2.0";(function(e){e.exports=qr})(oI);const OA=nI(bt),ym=rI({__proto__:null,default:OA},[bt]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SI=bt,EI=Symbol.for("react.element"),bI=Symbol.for("react.fragment"),AI=Object.prototype.hasOwnProperty,RI=SI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CI={key:!0,ref:!0,__self:!0,__source:!0};function NA(e,t,r){var n,o={},a=null,s=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)AI.call(t,n)&&!CI.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:EI,type:e,key:a,ref:s,props:o,_owner:RI.current}}op.Fragment=bI;op.jsx=NA;op.jsxs=NA;(function(e){e.exports=op})(iI);const sp=Mc.Fragment,Qe=Mc.jsx,Ar=Mc.jsxs;var mm={},vm={},xI={get exports(){return vm},set exports(e){vm=e}},qi={},wm={},PI={get exports(){return wm},set exports(e){wm=e}},kA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(we,Oe){var me=we.length;we.push(Oe);e:for(;0<me;){var We=me-1>>>1,et=we[We];if(0<o(et,Oe))we[We]=Oe,we[me]=et,me=We;else break e}}function r(we){return we.length===0?null:we[0]}function n(we){if(we.length===0)return null;var Oe=we[0],me=we.pop();if(me!==Oe){we[0]=me;e:for(var We=0,et=we.length,Et=et>>>1;We<Et;){var Bt=2*(We+1)-1,Vt=we[Bt],Ke=Bt+1,St=we[Ke];if(0>o(Vt,me))Ke<et&&0>o(St,Vt)?(we[We]=St,we[Ke]=me,We=Ke):(we[We]=Vt,we[Bt]=me,We=Bt);else if(Ke<et&&0>o(St,me))we[We]=St,we[Ke]=me,We=Ke;else break e}}return Oe}function o(we,Oe){var me=we.sortIndex-Oe.sortIndex;return me!==0?me:we.id-Oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var h=[],c=[],p=1,y=null,m=3,_=!1,C=!1,R=!1,F=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(we){for(var Oe=r(c);Oe!==null;){if(Oe.callback===null)n(c);else if(Oe.startTime<=we)n(c),Oe.sortIndex=Oe.expirationTime,t(h,Oe);else break;Oe=r(c)}}function j(we){if(R=!1,P(we),!C)if(r(h)!==null)C=!0,Ve(H);else{var Oe=r(c);Oe!==null&&$e(j,Oe.startTime-we)}}function H(we,Oe){C=!1,R&&(R=!1,b(ne),ne=-1),_=!0;var me=m;try{for(P(Oe),y=r(h);y!==null&&(!(y.expirationTime>Oe)||we&&!Q());){var We=y.callback;if(typeof We=="function"){y.callback=null,m=y.priorityLevel;var et=We(y.expirationTime<=Oe);Oe=e.unstable_now(),typeof et=="function"?y.callback=et:y===r(h)&&n(h),P(Oe)}else n(h);y=r(h)}if(y!==null)var Et=!0;else{var Bt=r(c);Bt!==null&&$e(j,Bt.startTime-Oe),Et=!1}return Et}finally{y=null,m=me,_=!1}}var $=!1,O=null,ne=-1,ee=5,D=-1;function Q(){return!(e.unstable_now()-D<ee)}function De(){if(O!==null){var we=e.unstable_now();D=we;var Oe=!0;try{Oe=O(!0,we)}finally{Oe?ae():($=!1,O=null)}}else $=!1}var ae;if(typeof E=="function")ae=function(){E(De)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Be=Ce.port2;Ce.port1.onmessage=De,ae=function(){Be.postMessage(null)}}else ae=function(){F(De,0)};function Ve(we){O=we,$||($=!0,ae())}function $e(we,Oe){ne=F(function(){we(e.unstable_now())},Oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(we){we.callback=null},e.unstable_continueExecution=function(){C||_||(C=!0,Ve(H))},e.unstable_forceFrameRate=function(we){0>we||125<we?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<we?Math.floor(1e3/we):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(we){switch(m){case 1:case 2:case 3:var Oe=3;break;default:Oe=m}var me=m;m=Oe;try{return we()}finally{m=me}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(we,Oe){switch(we){case 1:case 2:case 3:case 4:case 5:break;default:we=3}var me=m;m=we;try{return Oe()}finally{m=me}},e.unstable_scheduleCallback=function(we,Oe,me){var We=e.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?We+me:We):me=We,we){case 1:var et=-1;break;case 2:et=250;break;case 5:et=1073741823;break;case 4:et=1e4;break;default:et=5e3}return et=me+et,we={id:p++,callback:Oe,priorityLevel:we,startTime:me,expirationTime:et,sortIndex:-1},me>We?(we.sortIndex=me,t(c,we),r(h)===null&&we===r(c)&&(R?(b(ne),ne=-1):R=!0,$e(j,me-We))):(we.sortIndex=et,t(h,we),C||_||(C=!0,Ve(H))),we},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(we){var Oe=m;return function(){var me=m;m=Oe;try{return we.apply(this,arguments)}finally{m=me}}}})(kA);(function(e){e.exports=kA})(PI);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DA=bt,Gi=wm;function vt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var LA=new Set,Bc={};function ga(e,t){xl(e,t),xl(e+"Capture",t)}function xl(e,t){for(Bc[e]=t,e=0;e<t.length;e++)LA.add(t[e])}var Go=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_m=Object.prototype.hasOwnProperty,TI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,PS={},TS={};function II(e){return _m.call(TS,e)?!0:_m.call(PS,e)?!1:TI.test(e)?TS[e]=!0:(PS[e]=!0,!1)}function FI(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function OI(e,t,r,n){if(t===null||typeof t>"u"||FI(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function bi(e,t,r,n,o,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var ai={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ai[e]=new bi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ai[t]=new bi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ai[e]=new bi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ai[e]=new bi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ai[e]=new bi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ai[e]=new bi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ai[e]=new bi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ai[e]=new bi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ai[e]=new bi(e,5,!1,e.toLowerCase(),null,!1,!1)});var x0=/[\-:]([a-z])/g;function P0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x0,P0);ai[t]=new bi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x0,P0);ai[t]=new bi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x0,P0);ai[t]=new bi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ai[e]=new bi(e,1,!1,e.toLowerCase(),null,!1,!1)});ai.xlinkHref=new bi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ai[e]=new bi(e,1,!1,e.toLowerCase(),null,!0,!0)});function T0(e,t,r,n){var o=ai.hasOwnProperty(t)?ai[t]:null;(o!==null?o.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(OI(t,r,o,n)&&(r=null),n||o===null?II(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,n=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Xo=DA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xf=Symbol.for("react.element"),ll=Symbol.for("react.portal"),ul=Symbol.for("react.fragment"),I0=Symbol.for("react.strict_mode"),Sm=Symbol.for("react.profiler"),UA=Symbol.for("react.provider"),MA=Symbol.for("react.context"),F0=Symbol.for("react.forward_ref"),Em=Symbol.for("react.suspense"),bm=Symbol.for("react.suspense_list"),O0=Symbol.for("react.memo"),cs=Symbol.for("react.lazy"),BA=Symbol.for("react.offscreen"),IS=Symbol.iterator;function gu(e){return e===null||typeof e!="object"?null:(e=IS&&e[IS]||e["@@iterator"],typeof e=="function"?e:null)}var In=Object.assign,Gg;function Ec(e){if(Gg===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Gg=t&&t[1]||""}return`
`+Gg+e}var qg=!1;function zg(e,t){if(!e||qg)return"";qg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),a=n.stack.split(`
`),s=o.length-1,u=a.length-1;1<=s&&0<=u&&o[s]!==a[u];)u--;for(;1<=s&&0<=u;s--,u--)if(o[s]!==a[u]){if(s!==1||u!==1)do if(s--,u--,0>u||o[s]!==a[u]){var h=`
`+o[s].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=s&&0<=u);break}}}finally{qg=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ec(e):""}function NI(e){switch(e.tag){case 5:return Ec(e.type);case 16:return Ec("Lazy");case 13:return Ec("Suspense");case 19:return Ec("SuspenseList");case 0:case 2:case 15:return e=zg(e.type,!1),e;case 11:return e=zg(e.type.render,!1),e;case 1:return e=zg(e.type,!0),e;default:return""}}function Am(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ul:return"Fragment";case ll:return"Portal";case Sm:return"Profiler";case I0:return"StrictMode";case Em:return"Suspense";case bm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case MA:return(e.displayName||"Context")+".Consumer";case UA:return(e._context.displayName||"Context")+".Provider";case F0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case O0:return t=e.displayName||null,t!==null?t:Am(e.type)||"Memo";case cs:t=e._payload,e=e._init;try{return Am(e(t))}catch{}}return null}function kI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Am(t);case 8:return t===I0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function jA(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function DI(e){var t=jA(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pf(e){e._valueTracker||(e._valueTracker=DI(e))}function HA(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=jA(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function _h(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Rm(e,t){var r=t.checked;return In({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function FS(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=xs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $A(e,t){t=t.checked,t!=null&&T0(e,"checked",t,!1)}function Cm(e,t){$A(e,t);var r=xs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xm(e,t.type,r):t.hasOwnProperty("defaultValue")&&xm(e,t.type,xs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function OS(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function xm(e,t,r){(t!=="number"||_h(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var bc=Array.isArray;function Sl(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+xs(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,n&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Pm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(vt(91));return In({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function NS(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(vt(92));if(bc(r)){if(1<r.length)throw Error(vt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:xs(r)}}function VA(e,t){var r=xs(t.value),n=xs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function kS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function KA(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?KA(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Tf,WA=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Tf=Tf||document.createElement("div"),Tf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Tf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function jc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Cc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LI=["Webkit","ms","Moz","O"];Object.keys(Cc).forEach(function(e){LI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Cc[t]=Cc[e]})});function GA(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Cc.hasOwnProperty(e)&&Cc[e]?(""+t).trim():t+"px"}function qA(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=GA(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}var UI=In({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Im(e,t){if(t){if(UI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(vt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(vt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(vt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(vt(62))}}function Fm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Om=null;function N0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Nm=null,El=null,bl=null;function DS(e){if(e=ld(e)){if(typeof Nm!="function")throw Error(vt(280));var t=e.stateNode;t&&(t=dp(t),Nm(e.stateNode,e.type,t))}}function zA(e){El?bl?bl.push(e):bl=[e]:El=e}function JA(){if(El){var e=El,t=bl;if(bl=El=null,DS(e),t)for(e=0;e<t.length;e++)DS(t[e])}}function QA(e,t){return e(t)}function YA(){}var Jg=!1;function XA(e,t,r){if(Jg)return e(t,r);Jg=!0;try{return QA(e,t,r)}finally{Jg=!1,(El!==null||bl!==null)&&(YA(),JA())}}function Hc(e,t){var r=e.stateNode;if(r===null)return null;var n=dp(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(vt(231,t,typeof r));return r}var km=!1;if(Go)try{var yu={};Object.defineProperty(yu,"passive",{get:function(){km=!0}}),window.addEventListener("test",yu,yu),window.removeEventListener("test",yu,yu)}catch{km=!1}function MI(e,t,r,n,o,a,s,u,h){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(p){this.onError(p)}}var xc=!1,Sh=null,Eh=!1,Dm=null,BI={onError:function(e){xc=!0,Sh=e}};function jI(e,t,r,n,o,a,s,u,h){xc=!1,Sh=null,MI.apply(BI,arguments)}function HI(e,t,r,n,o,a,s,u,h){if(jI.apply(this,arguments),xc){if(xc){var c=Sh;xc=!1,Sh=null}else throw Error(vt(198));Eh||(Eh=!0,Dm=c)}}function ya(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function ZA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function LS(e){if(ya(e)!==e)throw Error(vt(188))}function $I(e){var t=e.alternate;if(!t){if(t=ya(e),t===null)throw Error(vt(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(o===null)break;var a=o.alternate;if(a===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===r)return LS(o),e;if(a===n)return LS(o),t;a=a.sibling}throw Error(vt(188))}if(r.return!==n.return)r=o,n=a;else{for(var s=!1,u=o.child;u;){if(u===r){s=!0,r=o,n=a;break}if(u===n){s=!0,n=o,r=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===r){s=!0,r=a,n=o;break}if(u===n){s=!0,n=a,r=o;break}u=u.sibling}if(!s)throw Error(vt(189))}}if(r.alternate!==n)throw Error(vt(190))}if(r.tag!==3)throw Error(vt(188));return r.stateNode.current===r?e:t}function eR(e){return e=$I(e),e!==null?tR(e):null}function tR(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=tR(e);if(t!==null)return t;e=e.sibling}return null}var rR=Gi.unstable_scheduleCallback,US=Gi.unstable_cancelCallback,VI=Gi.unstable_shouldYield,KI=Gi.unstable_requestPaint,Mn=Gi.unstable_now,WI=Gi.unstable_getCurrentPriorityLevel,k0=Gi.unstable_ImmediatePriority,nR=Gi.unstable_UserBlockingPriority,bh=Gi.unstable_NormalPriority,GI=Gi.unstable_LowPriority,iR=Gi.unstable_IdlePriority,ap=null,To=null;function qI(e){if(To&&typeof To.onCommitFiberRoot=="function")try{To.onCommitFiberRoot(ap,e,void 0,(e.current.flags&128)===128)}catch{}}var wo=Math.clz32?Math.clz32:QI,zI=Math.log,JI=Math.LN2;function QI(e){return e>>>=0,e===0?32:31-(zI(e)/JI|0)|0}var If=64,Ff=4194304;function Ac(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ah(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,o=e.suspendedLanes,a=e.pingedLanes,s=r&268435455;if(s!==0){var u=s&~o;u!==0?n=Ac(u):(a&=s,a!==0&&(n=Ac(a)))}else s=r&~o,s!==0?n=Ac(s):a!==0&&(n=Ac(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&o)&&(o=n&-n,a=t&-t,o>=a||o===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-wo(t),o=1<<r,n|=e[r],t&=~o;return n}function YI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XI(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-wo(a),u=1<<s,h=o[s];h===-1?(!(u&r)||u&n)&&(o[s]=YI(u,t)):h<=t&&(e.expiredLanes|=u),a&=~u}}function Lm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oR(){var e=If;return If<<=1,!(If&4194240)&&(If=64),e}function Qg(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function sd(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wo(t),e[t]=r}function ZI(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-wo(r),a=1<<o;t[o]=0,n[o]=-1,e[o]=-1,r&=~a}}function D0(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-wo(r),o=1<<n;o&t|e[n]&t&&(e[n]|=t),r&=~o}}var ln=0;function sR(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var aR,L0,lR,uR,cR,Um=!1,Of=[],ms=null,vs=null,ws=null,$c=new Map,Vc=new Map,fs=[],e2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function MS(e,t){switch(e){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":vs=null;break;case"mouseover":case"mouseout":ws=null;break;case"pointerover":case"pointerout":$c.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vc.delete(t.pointerId)}}function mu(e,t,r,n,o,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[o]},t!==null&&(t=ld(t),t!==null&&L0(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function t2(e,t,r,n,o){switch(t){case"focusin":return ms=mu(ms,e,t,r,n,o),!0;case"dragenter":return vs=mu(vs,e,t,r,n,o),!0;case"mouseover":return ws=mu(ws,e,t,r,n,o),!0;case"pointerover":var a=o.pointerId;return $c.set(a,mu($c.get(a)||null,e,t,r,n,o)),!0;case"gotpointercapture":return a=o.pointerId,Vc.set(a,mu(Vc.get(a)||null,e,t,r,n,o)),!0}return!1}function dR(e){var t=ia(e.target);if(t!==null){var r=ya(t);if(r!==null){if(t=r.tag,t===13){if(t=ZA(r),t!==null){e.blockedOn=t,cR(e.priority,function(){lR(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function sh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Mm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Om=n,r.target.dispatchEvent(n),Om=null}else return t=ld(r),t!==null&&L0(t),e.blockedOn=r,!1;t.shift()}return!0}function BS(e,t,r){sh(e)&&r.delete(t)}function r2(){Um=!1,ms!==null&&sh(ms)&&(ms=null),vs!==null&&sh(vs)&&(vs=null),ws!==null&&sh(ws)&&(ws=null),$c.forEach(BS),Vc.forEach(BS)}function vu(e,t){e.blockedOn===t&&(e.blockedOn=null,Um||(Um=!0,Gi.unstable_scheduleCallback(Gi.unstable_NormalPriority,r2)))}function Kc(e){function t(o){return vu(o,e)}if(0<Of.length){vu(Of[0],e);for(var r=1;r<Of.length;r++){var n=Of[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ms!==null&&vu(ms,e),vs!==null&&vu(vs,e),ws!==null&&vu(ws,e),$c.forEach(t),Vc.forEach(t),r=0;r<fs.length;r++)n=fs[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<fs.length&&(r=fs[0],r.blockedOn===null);)dR(r),r.blockedOn===null&&fs.shift()}var Al=Xo.ReactCurrentBatchConfig,Rh=!0;function n2(e,t,r,n){var o=ln,a=Al.transition;Al.transition=null;try{ln=1,U0(e,t,r,n)}finally{ln=o,Al.transition=a}}function i2(e,t,r,n){var o=ln,a=Al.transition;Al.transition=null;try{ln=4,U0(e,t,r,n)}finally{ln=o,Al.transition=a}}function U0(e,t,r,n){if(Rh){var o=Mm(e,t,r,n);if(o===null)sy(e,t,n,Ch,r),MS(e,n);else if(t2(o,e,t,r,n))n.stopPropagation();else if(MS(e,n),t&4&&-1<e2.indexOf(e)){for(;o!==null;){var a=ld(o);if(a!==null&&aR(a),a=Mm(e,t,r,n),a===null&&sy(e,t,n,Ch,r),a===o)break;o=a}o!==null&&n.stopPropagation()}else sy(e,t,n,null,r)}}var Ch=null;function Mm(e,t,r,n){if(Ch=null,e=N0(n),e=ia(e),e!==null)if(t=ya(e),t===null)e=null;else if(r=t.tag,r===13){if(e=ZA(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ch=e,null}function fR(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WI()){case k0:return 1;case nR:return 4;case bh:case GI:return 16;case iR:return 536870912;default:return 16}default:return 16}}var ps=null,M0=null,ah=null;function hR(){if(ah)return ah;var e,t=M0,r=t.length,n,o="value"in ps?ps.value:ps.textContent,a=o.length;for(e=0;e<r&&t[e]===o[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===o[a-n];n++);return ah=o.slice(e,1<n?1-n:void 0)}function lh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nf(){return!0}function jS(){return!1}function zi(e){function t(r,n,o,a,s){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(a):a[u]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Nf:jS,this.isPropagationStopped=jS,this}return In(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Nf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Nf)},persist:function(){},isPersistent:Nf}),t}var Dl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B0=zi(Dl),ad=In({},Dl,{view:0,detail:0}),o2=zi(ad),Yg,Xg,wu,lp=In({},ad,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:j0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wu&&(wu&&e.type==="mousemove"?(Yg=e.screenX-wu.screenX,Xg=e.screenY-wu.screenY):Xg=Yg=0,wu=e),Yg)},movementY:function(e){return"movementY"in e?e.movementY:Xg}}),HS=zi(lp),s2=In({},lp,{dataTransfer:0}),a2=zi(s2),l2=In({},ad,{relatedTarget:0}),Zg=zi(l2),u2=In({},Dl,{animationName:0,elapsedTime:0,pseudoElement:0}),c2=zi(u2),d2=In({},Dl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),f2=zi(d2),h2=In({},Dl,{data:0}),$S=zi(h2),p2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m2(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=y2[e])?!!t[e]:!1}function j0(){return m2}var v2=In({},ad,{key:function(e){if(e.key){var t=p2[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=lh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?g2[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:j0,charCode:function(e){return e.type==="keypress"?lh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?lh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),w2=zi(v2),_2=In({},lp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),VS=zi(_2),S2=In({},ad,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:j0}),E2=zi(S2),b2=In({},Dl,{propertyName:0,elapsedTime:0,pseudoElement:0}),A2=zi(b2),R2=In({},lp,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),C2=zi(R2),x2=[9,13,27,32],H0=Go&&"CompositionEvent"in window,Pc=null;Go&&"documentMode"in document&&(Pc=document.documentMode);var P2=Go&&"TextEvent"in window&&!Pc,pR=Go&&(!H0||Pc&&8<Pc&&11>=Pc),KS=String.fromCharCode(32),WS=!1;function gR(e,t){switch(e){case"keyup":return x2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yR(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cl=!1;function T2(e,t){switch(e){case"compositionend":return yR(t);case"keypress":return t.which!==32?null:(WS=!0,KS);case"textInput":return e=t.data,e===KS&&WS?null:e;default:return null}}function I2(e,t){if(cl)return e==="compositionend"||!H0&&gR(e,t)?(e=hR(),ah=M0=ps=null,cl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pR&&t.locale!=="ko"?null:t.data;default:return null}}var F2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function GS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!F2[e.type]:t==="textarea"}function mR(e,t,r,n){zA(n),t=xh(t,"onChange"),0<t.length&&(r=new B0("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Tc=null,Wc=null;function O2(e){PR(e,0)}function up(e){var t=hl(e);if(HA(t))return e}function N2(e,t){if(e==="change")return t}var vR=!1;if(Go){var ey;if(Go){var ty="oninput"in document;if(!ty){var qS=document.createElement("div");qS.setAttribute("oninput","return;"),ty=typeof qS.oninput=="function"}ey=ty}else ey=!1;vR=ey&&(!document.documentMode||9<document.documentMode)}function zS(){Tc&&(Tc.detachEvent("onpropertychange",wR),Wc=Tc=null)}function wR(e){if(e.propertyName==="value"&&up(Wc)){var t=[];mR(t,Wc,e,N0(e)),XA(O2,t)}}function k2(e,t,r){e==="focusin"?(zS(),Tc=t,Wc=r,Tc.attachEvent("onpropertychange",wR)):e==="focusout"&&zS()}function D2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return up(Wc)}function L2(e,t){if(e==="click")return up(t)}function U2(e,t){if(e==="input"||e==="change")return up(t)}function M2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var So=typeof Object.is=="function"?Object.is:M2;function Gc(e,t){if(So(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!_m.call(t,o)||!So(e[o],t[o]))return!1}return!0}function JS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function QS(e,t){var r=JS(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=JS(r)}}function _R(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_R(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function SR(){for(var e=window,t=_h();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=_h(e.document)}return t}function $0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function B2(e){var t=SR(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&_R(r.ownerDocument.documentElement,r)){if(n!==null&&$0(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=r.textContent.length,a=Math.min(n.start,o);n=n.end===void 0?a:Math.min(n.end,o),!e.extend&&a>n&&(o=n,n=a,a=o),o=QS(r,a);var s=QS(r,n);o&&s&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var j2=Go&&"documentMode"in document&&11>=document.documentMode,dl=null,Bm=null,Ic=null,jm=!1;function YS(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;jm||dl==null||dl!==_h(n)||(n=dl,"selectionStart"in n&&$0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ic&&Gc(Ic,n)||(Ic=n,n=xh(Bm,"onSelect"),0<n.length&&(t=new B0("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=dl)))}function kf(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var fl={animationend:kf("Animation","AnimationEnd"),animationiteration:kf("Animation","AnimationIteration"),animationstart:kf("Animation","AnimationStart"),transitionend:kf("Transition","TransitionEnd")},ry={},ER={};Go&&(ER=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function cp(e){if(ry[e])return ry[e];if(!fl[e])return e;var t=fl[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ER)return ry[e]=t[r];return e}var bR=cp("animationend"),AR=cp("animationiteration"),RR=cp("animationstart"),CR=cp("transitionend"),xR=new Map,XS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(e,t){xR.set(e,t),ga(t,[e])}for(var ny=0;ny<XS.length;ny++){var iy=XS[ny],H2=iy.toLowerCase(),$2=iy[0].toUpperCase()+iy.slice(1);Is(H2,"on"+$2)}Is(bR,"onAnimationEnd");Is(AR,"onAnimationIteration");Is(RR,"onAnimationStart");Is("dblclick","onDoubleClick");Is("focusin","onFocus");Is("focusout","onBlur");Is(CR,"onTransitionEnd");xl("onMouseEnter",["mouseout","mouseover"]);xl("onMouseLeave",["mouseout","mouseover"]);xl("onPointerEnter",["pointerout","pointerover"]);xl("onPointerLeave",["pointerout","pointerover"]);ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ga("onBeforeInput",["compositionend","keypress","textInput","paste"]);ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rc));function ZS(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,HI(n,t,void 0,e),e.currentTarget=null}function PR(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],o=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var s=n.length-1;0<=s;s--){var u=n[s],h=u.instance,c=u.currentTarget;if(u=u.listener,h!==a&&o.isPropagationStopped())break e;ZS(o,u,c),a=h}else for(s=0;s<n.length;s++){if(u=n[s],h=u.instance,c=u.currentTarget,u=u.listener,h!==a&&o.isPropagationStopped())break e;ZS(o,u,c),a=h}}}if(Eh)throw e=Dm,Eh=!1,Dm=null,e}function _n(e,t){var r=t[Wm];r===void 0&&(r=t[Wm]=new Set);var n=e+"__bubble";r.has(n)||(TR(t,e,2,!1),r.add(n))}function oy(e,t,r){var n=0;t&&(n|=4),TR(r,e,n,t)}var Df="_reactListening"+Math.random().toString(36).slice(2);function qc(e){if(!e[Df]){e[Df]=!0,LA.forEach(function(r){r!=="selectionchange"&&(V2.has(r)||oy(r,!1,e),oy(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Df]||(t[Df]=!0,oy("selectionchange",!1,t))}}function TR(e,t,r,n){switch(fR(t)){case 1:var o=n2;break;case 4:o=i2;break;default:o=U0}r=o.bind(null,t,r,e),o=void 0,!km||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),n?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function sy(e,t,r,n,o){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var u=n.stateNode.containerInfo;if(u===o||u.nodeType===8&&u.parentNode===o)break;if(s===4)for(s=n.return;s!==null;){var h=s.tag;if((h===3||h===4)&&(h=s.stateNode.containerInfo,h===o||h.nodeType===8&&h.parentNode===o))return;s=s.return}for(;u!==null;){if(s=ia(u),s===null)return;if(h=s.tag,h===5||h===6){n=a=s;continue e}u=u.parentNode}}n=n.return}XA(function(){var c=a,p=N0(r),y=[];e:{var m=xR.get(e);if(m!==void 0){var _=B0,C=e;switch(e){case"keypress":if(lh(r)===0)break e;case"keydown":case"keyup":_=w2;break;case"focusin":C="focus",_=Zg;break;case"focusout":C="blur",_=Zg;break;case"beforeblur":case"afterblur":_=Zg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=HS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=a2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=E2;break;case bR:case AR:case RR:_=c2;break;case CR:_=A2;break;case"scroll":_=o2;break;case"wheel":_=C2;break;case"copy":case"cut":case"paste":_=f2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=VS}var R=(t&4)!==0,F=!R&&e==="scroll",b=R?m!==null?m+"Capture":null:m;R=[];for(var E=c,P;E!==null;){P=E;var j=P.stateNode;if(P.tag===5&&j!==null&&(P=j,b!==null&&(j=Hc(E,b),j!=null&&R.push(zc(E,j,P)))),F)break;E=E.return}0<R.length&&(m=new _(m,C,null,r,p),y.push({event:m,listeners:R}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",m&&r!==Om&&(C=r.relatedTarget||r.fromElement)&&(ia(C)||C[qo]))break e;if((_||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,_?(C=r.relatedTarget||r.toElement,_=c,C=C?ia(C):null,C!==null&&(F=ya(C),C!==F||C.tag!==5&&C.tag!==6)&&(C=null)):(_=null,C=c),_!==C)){if(R=HS,j="onMouseLeave",b="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(R=VS,j="onPointerLeave",b="onPointerEnter",E="pointer"),F=_==null?m:hl(_),P=C==null?m:hl(C),m=new R(j,E+"leave",_,r,p),m.target=F,m.relatedTarget=P,j=null,ia(p)===c&&(R=new R(b,E+"enter",C,r,p),R.target=P,R.relatedTarget=F,j=R),F=j,_&&C)t:{for(R=_,b=C,E=0,P=R;P;P=il(P))E++;for(P=0,j=b;j;j=il(j))P++;for(;0<E-P;)R=il(R),E--;for(;0<P-E;)b=il(b),P--;for(;E--;){if(R===b||b!==null&&R===b.alternate)break t;R=il(R),b=il(b)}R=null}else R=null;_!==null&&e1(y,m,_,R,!1),C!==null&&F!==null&&e1(y,F,C,R,!0)}}e:{if(m=c?hl(c):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var H=N2;else if(GS(m))if(vR)H=U2;else{H=D2;var $=k2}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(H=L2);if(H&&(H=H(e,c))){mR(y,H,r,p);break e}$&&$(e,m,c),e==="focusout"&&($=m._wrapperState)&&$.controlled&&m.type==="number"&&xm(m,"number",m.value)}switch($=c?hl(c):window,e){case"focusin":(GS($)||$.contentEditable==="true")&&(dl=$,Bm=c,Ic=null);break;case"focusout":Ic=Bm=dl=null;break;case"mousedown":jm=!0;break;case"contextmenu":case"mouseup":case"dragend":jm=!1,YS(y,r,p);break;case"selectionchange":if(j2)break;case"keydown":case"keyup":YS(y,r,p)}var O;if(H0)e:{switch(e){case"compositionstart":var ne="onCompositionStart";break e;case"compositionend":ne="onCompositionEnd";break e;case"compositionupdate":ne="onCompositionUpdate";break e}ne=void 0}else cl?gR(e,r)&&(ne="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ne="onCompositionStart");ne&&(pR&&r.locale!=="ko"&&(cl||ne!=="onCompositionStart"?ne==="onCompositionEnd"&&cl&&(O=hR()):(ps=p,M0="value"in ps?ps.value:ps.textContent,cl=!0)),$=xh(c,ne),0<$.length&&(ne=new $S(ne,e,null,r,p),y.push({event:ne,listeners:$}),O?ne.data=O:(O=yR(r),O!==null&&(ne.data=O)))),(O=P2?T2(e,r):I2(e,r))&&(c=xh(c,"onBeforeInput"),0<c.length&&(p=new $S("onBeforeInput","beforeinput",null,r,p),y.push({event:p,listeners:c}),p.data=O))}PR(y,t)})}function zc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function xh(e,t){for(var r=t+"Capture",n=[];e!==null;){var o=e,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=Hc(e,r),a!=null&&n.unshift(zc(e,a,o)),a=Hc(e,t),a!=null&&n.push(zc(e,a,o))),e=e.return}return n}function il(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function e1(e,t,r,n,o){for(var a=t._reactName,s=[];r!==null&&r!==n;){var u=r,h=u.alternate,c=u.stateNode;if(h!==null&&h===n)break;u.tag===5&&c!==null&&(u=c,o?(h=Hc(r,a),h!=null&&s.unshift(zc(r,h,u))):o||(h=Hc(r,a),h!=null&&s.push(zc(r,h,u)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var K2=/\r\n?/g,W2=/\u0000|\uFFFD/g;function t1(e){return(typeof e=="string"?e:""+e).replace(K2,`
`).replace(W2,"")}function Lf(e,t,r){if(t=t1(t),t1(e)!==t&&r)throw Error(vt(425))}function Ph(){}var Hm=null,$m=null;function Vm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Km=typeof setTimeout=="function"?setTimeout:void 0,G2=typeof clearTimeout=="function"?clearTimeout:void 0,r1=typeof Promise=="function"?Promise:void 0,q2=typeof queueMicrotask=="function"?queueMicrotask:typeof r1<"u"?function(e){return r1.resolve(null).then(e).catch(z2)}:Km;function z2(e){setTimeout(function(){throw e})}function ay(e,t){var r=t,n=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(n===0){e.removeChild(o),Kc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=o}while(r);Kc(t)}function _s(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function n1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ll=Math.random().toString(36).slice(2),Po="__reactFiber$"+Ll,Jc="__reactProps$"+Ll,qo="__reactContainer$"+Ll,Wm="__reactEvents$"+Ll,J2="__reactListeners$"+Ll,Q2="__reactHandles$"+Ll;function ia(e){var t=e[Po];if(t)return t;for(var r=e.parentNode;r;){if(t=r[qo]||r[Po]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=n1(e);e!==null;){if(r=e[Po])return r;e=n1(e)}return t}e=r,r=e.parentNode}return null}function ld(e){return e=e[Po]||e[qo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(vt(33))}function dp(e){return e[Jc]||null}var Gm=[],pl=-1;function Fs(e){return{current:e}}function Sn(e){0>pl||(e.current=Gm[pl],Gm[pl]=null,pl--)}function vn(e,t){pl++,Gm[pl]=e.current,e.current=t}var Ps={},hi=Fs(Ps),Ni=Fs(!1),ca=Ps;function Pl(e,t){var r=e.type.contextTypes;if(!r)return Ps;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in r)o[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ki(e){return e=e.childContextTypes,e!=null}function Th(){Sn(Ni),Sn(hi)}function i1(e,t,r){if(hi.current!==Ps)throw Error(vt(168));vn(hi,t),vn(Ni,r)}function IR(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in t))throw Error(vt(108,kI(e)||"Unknown",o));return In({},r,n)}function Ih(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ps,ca=hi.current,vn(hi,e),vn(Ni,Ni.current),!0}function o1(e,t,r){var n=e.stateNode;if(!n)throw Error(vt(169));r?(e=IR(e,t,ca),n.__reactInternalMemoizedMergedChildContext=e,Sn(Ni),Sn(hi),vn(hi,e)):Sn(Ni),vn(Ni,r)}var Ho=null,fp=!1,ly=!1;function FR(e){Ho===null?Ho=[e]:Ho.push(e)}function Y2(e){fp=!0,FR(e)}function Os(){if(!ly&&Ho!==null){ly=!0;var e=0,t=ln;try{var r=Ho;for(ln=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ho=null,fp=!1}catch(o){throw Ho!==null&&(Ho=Ho.slice(e+1)),rR(k0,Os),o}finally{ln=t,ly=!1}}return null}var gl=[],yl=0,Fh=null,Oh=0,to=[],ro=0,da=null,Vo=1,Ko="";function ea(e,t){gl[yl++]=Oh,gl[yl++]=Fh,Fh=e,Oh=t}function OR(e,t,r){to[ro++]=Vo,to[ro++]=Ko,to[ro++]=da,da=e;var n=Vo;e=Ko;var o=32-wo(n)-1;n&=~(1<<o),r+=1;var a=32-wo(t)+o;if(30<a){var s=o-o%5;a=(n&(1<<s)-1).toString(32),n>>=s,o-=s,Vo=1<<32-wo(t)+o|r<<o|n,Ko=a+e}else Vo=1<<a|r<<o|n,Ko=e}function V0(e){e.return!==null&&(ea(e,1),OR(e,1,0))}function K0(e){for(;e===Fh;)Fh=gl[--yl],gl[yl]=null,Oh=gl[--yl],gl[yl]=null;for(;e===da;)da=to[--ro],to[ro]=null,Ko=to[--ro],to[ro]=null,Vo=to[--ro],to[ro]=null}var Wi=null,Ki=null,Rn=!1,mo=null;function NR(e,t){var r=no(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function s1(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wi=e,Ki=_s(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wi=e,Ki=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=da!==null?{id:Vo,overflow:Ko}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=no(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Wi=e,Ki=null,!0):!1;default:return!1}}function qm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zm(e){if(Rn){var t=Ki;if(t){var r=t;if(!s1(e,t)){if(qm(e))throw Error(vt(418));t=_s(r.nextSibling);var n=Wi;t&&s1(e,t)?NR(n,r):(e.flags=e.flags&-4097|2,Rn=!1,Wi=e)}}else{if(qm(e))throw Error(vt(418));e.flags=e.flags&-4097|2,Rn=!1,Wi=e}}}function a1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wi=e}function Uf(e){if(e!==Wi)return!1;if(!Rn)return a1(e),Rn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Vm(e.type,e.memoizedProps)),t&&(t=Ki)){if(qm(e))throw kR(),Error(vt(418));for(;t;)NR(e,t),t=_s(t.nextSibling)}if(a1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(vt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ki=_s(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ki=null}}else Ki=Wi?_s(e.stateNode.nextSibling):null;return!0}function kR(){for(var e=Ki;e;)e=_s(e.nextSibling)}function Tl(){Ki=Wi=null,Rn=!1}function W0(e){mo===null?mo=[e]:mo.push(e)}var X2=Xo.ReactCurrentBatchConfig;function go(e,t){if(e&&e.defaultProps){t=In({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Nh=Fs(null),kh=null,ml=null,G0=null;function q0(){G0=ml=kh=null}function z0(e){var t=Nh.current;Sn(Nh),e._currentValue=t}function Jm(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Rl(e,t){kh=e,G0=ml=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Oi=!0),e.firstContext=null)}function oo(e){var t=e._currentValue;if(G0!==e)if(e={context:e,memoizedValue:t,next:null},ml===null){if(kh===null)throw Error(vt(308));ml=e,kh.dependencies={lanes:0,firstContext:e}}else ml=ml.next=e;return t}var oa=null;function J0(e){oa===null?oa=[e]:oa.push(e)}function DR(e,t,r,n){var o=t.interleaved;return o===null?(r.next=r,J0(t)):(r.next=o.next,o.next=r),t.interleaved=r,zo(e,n)}function zo(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ds=!1;function Q0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LR(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ss(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Qr&2){var o=n.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),n.pending=t,zo(e,r)}return o=n.interleaved,o===null?(t.next=t,J0(n)):(t.next=o.next,o.next=t),n.interleaved=t,zo(e,r)}function uh(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,D0(e,r)}}function l1(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?o=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?o=a=t:a=a.next=t}else o=a=t;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Dh(e,t,r,n){var o=e.updateQueue;ds=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var h=u,c=h.next;h.next=null,s===null?a=c:s.next=c,s=h;var p=e.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==s&&(u===null?p.firstBaseUpdate=c:u.next=c,p.lastBaseUpdate=h))}if(a!==null){var y=o.baseState;s=0,p=c=h=null,u=a;do{var m=u.lane,_=u.eventTime;if((n&m)===m){p!==null&&(p=p.next={eventTime:_,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var C=e,R=u;switch(m=t,_=r,R.tag){case 1:if(C=R.payload,typeof C=="function"){y=C.call(_,y,m);break e}y=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=R.payload,m=typeof C=="function"?C.call(_,y,m):C,m==null)break e;y=In({},y,m);break e;case 2:ds=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,m=o.effects,m===null?o.effects=[u]:m.push(u))}else _={eventTime:_,lane:m,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(c=p=_,h=y):p=p.next=_,s|=m;if(u=u.next,u===null){if(u=o.shared.pending,u===null)break;m=u,u=m.next,m.next=null,o.lastBaseUpdate=m,o.shared.pending=null}}while(1);if(p===null&&(h=y),o.baseState=h,o.firstBaseUpdate=c,o.lastBaseUpdate=p,t=o.shared.interleaved,t!==null){o=t;do s|=o.lane,o=o.next;while(o!==t)}else a===null&&(o.shared.lanes=0);ha|=s,e.lanes=s,e.memoizedState=y}}function u1(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(vt(191,o));o.call(n)}}}var UR=new DA.Component().refs;function Qm(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:In({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var hp={isMounted:function(e){return(e=e._reactInternals)?ya(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=_i(),o=bs(e),a=Wo(n,o);a.payload=t,r!=null&&(a.callback=r),t=Ss(e,a,o),t!==null&&(_o(t,e,o,n),uh(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=_i(),o=bs(e),a=Wo(n,o);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Ss(e,a,o),t!==null&&(_o(t,e,o,n),uh(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=_i(),n=bs(e),o=Wo(r,n);o.tag=2,t!=null&&(o.callback=t),t=Ss(e,o,n),t!==null&&(_o(t,e,n,r),uh(t,e,n))}};function c1(e,t,r,n,o,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,s):t.prototype&&t.prototype.isPureReactComponent?!Gc(r,n)||!Gc(o,a):!0}function MR(e,t,r){var n=!1,o=Ps,a=t.contextType;return typeof a=="object"&&a!==null?a=oo(a):(o=ki(t)?ca:hi.current,n=t.contextTypes,a=(n=n!=null)?Pl(e,o):Ps),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=hp,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function d1(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&hp.enqueueReplaceState(t,t.state,null)}function Ym(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=UR,Q0(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=oo(a):(a=ki(t)?ca:hi.current,o.context=Pl(e,a)),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Qm(e,t,a,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&hp.enqueueReplaceState(o,o.state,null),Dh(e,r,o,n),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function _u(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(vt(309));var n=r.stateNode}if(!n)throw Error(vt(147,e));var o=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var u=o.refs;u===UR&&(u=o.refs={}),s===null?delete u[a]:u[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(vt(284));if(!r._owner)throw Error(vt(290,e))}return e}function Mf(e,t){throw e=Object.prototype.toString.call(t),Error(vt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function f1(e){var t=e._init;return t(e._payload)}function BR(e){function t(b,E){if(e){var P=b.deletions;P===null?(b.deletions=[E],b.flags|=16):P.push(E)}}function r(b,E){if(!e)return null;for(;E!==null;)t(b,E),E=E.sibling;return null}function n(b,E){for(b=new Map;E!==null;)E.key!==null?b.set(E.key,E):b.set(E.index,E),E=E.sibling;return b}function o(b,E){return b=As(b,E),b.index=0,b.sibling=null,b}function a(b,E,P){return b.index=P,e?(P=b.alternate,P!==null?(P=P.index,P<E?(b.flags|=2,E):P):(b.flags|=2,E)):(b.flags|=1048576,E)}function s(b){return e&&b.alternate===null&&(b.flags|=2),b}function u(b,E,P,j){return E===null||E.tag!==6?(E=gy(P,b.mode,j),E.return=b,E):(E=o(E,P),E.return=b,E)}function h(b,E,P,j){var H=P.type;return H===ul?p(b,E,P.props.children,j,P.key):E!==null&&(E.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===cs&&f1(H)===E.type)?(j=o(E,P.props),j.ref=_u(b,E,P),j.return=b,j):(j=gh(P.type,P.key,P.props,null,b.mode,j),j.ref=_u(b,E,P),j.return=b,j)}function c(b,E,P,j){return E===null||E.tag!==4||E.stateNode.containerInfo!==P.containerInfo||E.stateNode.implementation!==P.implementation?(E=yy(P,b.mode,j),E.return=b,E):(E=o(E,P.children||[]),E.return=b,E)}function p(b,E,P,j,H){return E===null||E.tag!==7?(E=la(P,b.mode,j,H),E.return=b,E):(E=o(E,P),E.return=b,E)}function y(b,E,P){if(typeof E=="string"&&E!==""||typeof E=="number")return E=gy(""+E,b.mode,P),E.return=b,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case xf:return P=gh(E.type,E.key,E.props,null,b.mode,P),P.ref=_u(b,null,E),P.return=b,P;case ll:return E=yy(E,b.mode,P),E.return=b,E;case cs:var j=E._init;return y(b,j(E._payload),P)}if(bc(E)||gu(E))return E=la(E,b.mode,P,null),E.return=b,E;Mf(b,E)}return null}function m(b,E,P,j){var H=E!==null?E.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return H!==null?null:u(b,E,""+P,j);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case xf:return P.key===H?h(b,E,P,j):null;case ll:return P.key===H?c(b,E,P,j):null;case cs:return H=P._init,m(b,E,H(P._payload),j)}if(bc(P)||gu(P))return H!==null?null:p(b,E,P,j,null);Mf(b,P)}return null}function _(b,E,P,j,H){if(typeof j=="string"&&j!==""||typeof j=="number")return b=b.get(P)||null,u(E,b,""+j,H);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case xf:return b=b.get(j.key===null?P:j.key)||null,h(E,b,j,H);case ll:return b=b.get(j.key===null?P:j.key)||null,c(E,b,j,H);case cs:var $=j._init;return _(b,E,P,$(j._payload),H)}if(bc(j)||gu(j))return b=b.get(P)||null,p(E,b,j,H,null);Mf(E,j)}return null}function C(b,E,P,j){for(var H=null,$=null,O=E,ne=E=0,ee=null;O!==null&&ne<P.length;ne++){O.index>ne?(ee=O,O=null):ee=O.sibling;var D=m(b,O,P[ne],j);if(D===null){O===null&&(O=ee);break}e&&O&&D.alternate===null&&t(b,O),E=a(D,E,ne),$===null?H=D:$.sibling=D,$=D,O=ee}if(ne===P.length)return r(b,O),Rn&&ea(b,ne),H;if(O===null){for(;ne<P.length;ne++)O=y(b,P[ne],j),O!==null&&(E=a(O,E,ne),$===null?H=O:$.sibling=O,$=O);return Rn&&ea(b,ne),H}for(O=n(b,O);ne<P.length;ne++)ee=_(O,b,ne,P[ne],j),ee!==null&&(e&&ee.alternate!==null&&O.delete(ee.key===null?ne:ee.key),E=a(ee,E,ne),$===null?H=ee:$.sibling=ee,$=ee);return e&&O.forEach(function(Q){return t(b,Q)}),Rn&&ea(b,ne),H}function R(b,E,P,j){var H=gu(P);if(typeof H!="function")throw Error(vt(150));if(P=H.call(P),P==null)throw Error(vt(151));for(var $=H=null,O=E,ne=E=0,ee=null,D=P.next();O!==null&&!D.done;ne++,D=P.next()){O.index>ne?(ee=O,O=null):ee=O.sibling;var Q=m(b,O,D.value,j);if(Q===null){O===null&&(O=ee);break}e&&O&&Q.alternate===null&&t(b,O),E=a(Q,E,ne),$===null?H=Q:$.sibling=Q,$=Q,O=ee}if(D.done)return r(b,O),Rn&&ea(b,ne),H;if(O===null){for(;!D.done;ne++,D=P.next())D=y(b,D.value,j),D!==null&&(E=a(D,E,ne),$===null?H=D:$.sibling=D,$=D);return Rn&&ea(b,ne),H}for(O=n(b,O);!D.done;ne++,D=P.next())D=_(O,b,ne,D.value,j),D!==null&&(e&&D.alternate!==null&&O.delete(D.key===null?ne:D.key),E=a(D,E,ne),$===null?H=D:$.sibling=D,$=D);return e&&O.forEach(function(De){return t(b,De)}),Rn&&ea(b,ne),H}function F(b,E,P,j){if(typeof P=="object"&&P!==null&&P.type===ul&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case xf:e:{for(var H=P.key,$=E;$!==null;){if($.key===H){if(H=P.type,H===ul){if($.tag===7){r(b,$.sibling),E=o($,P.props.children),E.return=b,b=E;break e}}else if($.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===cs&&f1(H)===$.type){r(b,$.sibling),E=o($,P.props),E.ref=_u(b,$,P),E.return=b,b=E;break e}r(b,$);break}else t(b,$);$=$.sibling}P.type===ul?(E=la(P.props.children,b.mode,j,P.key),E.return=b,b=E):(j=gh(P.type,P.key,P.props,null,b.mode,j),j.ref=_u(b,E,P),j.return=b,b=j)}return s(b);case ll:e:{for($=P.key;E!==null;){if(E.key===$)if(E.tag===4&&E.stateNode.containerInfo===P.containerInfo&&E.stateNode.implementation===P.implementation){r(b,E.sibling),E=o(E,P.children||[]),E.return=b,b=E;break e}else{r(b,E);break}else t(b,E);E=E.sibling}E=yy(P,b.mode,j),E.return=b,b=E}return s(b);case cs:return $=P._init,F(b,E,$(P._payload),j)}if(bc(P))return C(b,E,P,j);if(gu(P))return R(b,E,P,j);Mf(b,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,E!==null&&E.tag===6?(r(b,E.sibling),E=o(E,P),E.return=b,b=E):(r(b,E),E=gy(P,b.mode,j),E.return=b,b=E),s(b)):r(b,E)}return F}var Il=BR(!0),jR=BR(!1),ud={},Io=Fs(ud),Qc=Fs(ud),Yc=Fs(ud);function sa(e){if(e===ud)throw Error(vt(174));return e}function Y0(e,t){switch(vn(Yc,t),vn(Qc,e),vn(Io,ud),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Tm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Tm(t,e)}Sn(Io),vn(Io,t)}function Fl(){Sn(Io),Sn(Qc),Sn(Yc)}function HR(e){sa(Yc.current);var t=sa(Io.current),r=Tm(t,e.type);t!==r&&(vn(Qc,e),vn(Io,r))}function X0(e){Qc.current===e&&(Sn(Io),Sn(Qc))}var Pn=Fs(0);function Lh(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uy=[];function Z0(){for(var e=0;e<uy.length;e++)uy[e]._workInProgressVersionPrimary=null;uy.length=0}var ch=Xo.ReactCurrentDispatcher,cy=Xo.ReactCurrentBatchConfig,fa=0,Tn=null,zn=null,ei=null,Uh=!1,Fc=!1,Xc=0,Z2=0;function ui(){throw Error(vt(321))}function ev(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!So(e[r],t[r]))return!1;return!0}function tv(e,t,r,n,o,a){if(fa=a,Tn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ch.current=e===null||e.memoizedState===null?nF:iF,e=r(n,o),Fc){a=0;do{if(Fc=!1,Xc=0,25<=a)throw Error(vt(301));a+=1,ei=zn=null,t.updateQueue=null,ch.current=oF,e=r(n,o)}while(Fc)}if(ch.current=Mh,t=zn!==null&&zn.next!==null,fa=0,ei=zn=Tn=null,Uh=!1,t)throw Error(vt(300));return e}function rv(){var e=Xc!==0;return Xc=0,e}function xo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ei===null?Tn.memoizedState=ei=e:ei=ei.next=e,ei}function so(){if(zn===null){var e=Tn.alternate;e=e!==null?e.memoizedState:null}else e=zn.next;var t=ei===null?Tn.memoizedState:ei.next;if(t!==null)ei=t,zn=e;else{if(e===null)throw Error(vt(310));zn=e,e={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},ei===null?Tn.memoizedState=ei=e:ei=ei.next=e}return ei}function Zc(e,t){return typeof t=="function"?t(e):t}function dy(e){var t=so(),r=t.queue;if(r===null)throw Error(vt(311));r.lastRenderedReducer=e;var n=zn,o=n.baseQueue,a=r.pending;if(a!==null){if(o!==null){var s=o.next;o.next=a.next,a.next=s}n.baseQueue=o=a,r.pending=null}if(o!==null){a=o.next,n=n.baseState;var u=s=null,h=null,c=a;do{var p=c.lane;if((fa&p)===p)h!==null&&(h=h.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var y={lane:p,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};h===null?(u=h=y,s=n):h=h.next=y,Tn.lanes|=p,ha|=p}c=c.next}while(c!==null&&c!==a);h===null?s=n:h.next=u,So(n,t.memoizedState)||(Oi=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=h,r.lastRenderedState=n}if(e=r.interleaved,e!==null){o=e;do a=o.lane,Tn.lanes|=a,ha|=a,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function fy(e){var t=so(),r=t.queue;if(r===null)throw Error(vt(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,a=t.memoizedState;if(o!==null){r.pending=null;var s=o=o.next;do a=e(a,s.action),s=s.next;while(s!==o);So(a,t.memoizedState)||(Oi=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function $R(){}function VR(e,t){var r=Tn,n=so(),o=t(),a=!So(n.memoizedState,o);if(a&&(n.memoizedState=o,Oi=!0),n=n.queue,nv(GR.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||ei!==null&&ei.memoizedState.tag&1){if(r.flags|=2048,ed(9,WR.bind(null,r,n,o,t),void 0,null),ti===null)throw Error(vt(349));fa&30||KR(r,t,o)}return o}function KR(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Tn.updateQueue,t===null?(t={lastEffect:null,stores:null},Tn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function WR(e,t,r,n){t.value=r,t.getSnapshot=n,qR(t)&&zR(e)}function GR(e,t,r){return r(function(){qR(t)&&zR(e)})}function qR(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!So(e,r)}catch{return!0}}function zR(e){var t=zo(e,1);t!==null&&_o(t,e,1,-1)}function h1(e){var t=xo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zc,lastRenderedState:e},t.queue=e,e=e.dispatch=rF.bind(null,Tn,e),[t.memoizedState,e]}function ed(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Tn.updateQueue,t===null?(t={lastEffect:null,stores:null},Tn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function JR(){return so().memoizedState}function dh(e,t,r,n){var o=xo();Tn.flags|=e,o.memoizedState=ed(1|t,r,void 0,n===void 0?null:n)}function pp(e,t,r,n){var o=so();n=n===void 0?null:n;var a=void 0;if(zn!==null){var s=zn.memoizedState;if(a=s.destroy,n!==null&&ev(n,s.deps)){o.memoizedState=ed(t,r,a,n);return}}Tn.flags|=e,o.memoizedState=ed(1|t,r,a,n)}function p1(e,t){return dh(8390656,8,e,t)}function nv(e,t){return pp(2048,8,e,t)}function QR(e,t){return pp(4,2,e,t)}function YR(e,t){return pp(4,4,e,t)}function XR(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ZR(e,t,r){return r=r!=null?r.concat([e]):null,pp(4,4,XR.bind(null,t,e),r)}function iv(){}function eC(e,t){var r=so();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ev(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function tC(e,t){var r=so();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ev(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function rC(e,t,r){return fa&21?(So(r,t)||(r=oR(),Tn.lanes|=r,ha|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Oi=!0),e.memoizedState=r)}function eF(e,t){var r=ln;ln=r!==0&&4>r?r:4,e(!0);var n=cy.transition;cy.transition={};try{e(!1),t()}finally{ln=r,cy.transition=n}}function nC(){return so().memoizedState}function tF(e,t,r){var n=bs(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},iC(e))oC(t,r);else if(r=DR(e,t,r,n),r!==null){var o=_i();_o(r,e,n,o),sC(r,t,n)}}function rF(e,t,r){var n=bs(e),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(iC(e))oC(t,o);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,u=a(s,r);if(o.hasEagerState=!0,o.eagerState=u,So(u,s)){var h=t.interleaved;h===null?(o.next=o,J0(t)):(o.next=h.next,h.next=o),t.interleaved=o;return}}catch{}finally{}r=DR(e,t,o,n),r!==null&&(o=_i(),_o(r,e,n,o),sC(r,t,n))}}function iC(e){var t=e.alternate;return e===Tn||t!==null&&t===Tn}function oC(e,t){Fc=Uh=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function sC(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,D0(e,r)}}var Mh={readContext:oo,useCallback:ui,useContext:ui,useEffect:ui,useImperativeHandle:ui,useInsertionEffect:ui,useLayoutEffect:ui,useMemo:ui,useReducer:ui,useRef:ui,useState:ui,useDebugValue:ui,useDeferredValue:ui,useTransition:ui,useMutableSource:ui,useSyncExternalStore:ui,useId:ui,unstable_isNewReconciler:!1},nF={readContext:oo,useCallback:function(e,t){return xo().memoizedState=[e,t===void 0?null:t],e},useContext:oo,useEffect:p1,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,dh(4194308,4,XR.bind(null,t,e),r)},useLayoutEffect:function(e,t){return dh(4194308,4,e,t)},useInsertionEffect:function(e,t){return dh(4,2,e,t)},useMemo:function(e,t){var r=xo();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=xo();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=tF.bind(null,Tn,e),[n.memoizedState,e]},useRef:function(e){var t=xo();return e={current:e},t.memoizedState=e},useState:h1,useDebugValue:iv,useDeferredValue:function(e){return xo().memoizedState=e},useTransition:function(){var e=h1(!1),t=e[0];return e=eF.bind(null,e[1]),xo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Tn,o=xo();if(Rn){if(r===void 0)throw Error(vt(407));r=r()}else{if(r=t(),ti===null)throw Error(vt(349));fa&30||KR(n,t,r)}o.memoizedState=r;var a={value:r,getSnapshot:t};return o.queue=a,p1(GR.bind(null,n,a,e),[e]),n.flags|=2048,ed(9,WR.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=xo(),t=ti.identifierPrefix;if(Rn){var r=Ko,n=Vo;r=(n&~(1<<32-wo(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Xc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Z2++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iF={readContext:oo,useCallback:eC,useContext:oo,useEffect:nv,useImperativeHandle:ZR,useInsertionEffect:QR,useLayoutEffect:YR,useMemo:tC,useReducer:dy,useRef:JR,useState:function(){return dy(Zc)},useDebugValue:iv,useDeferredValue:function(e){var t=so();return rC(t,zn.memoizedState,e)},useTransition:function(){var e=dy(Zc)[0],t=so().memoizedState;return[e,t]},useMutableSource:$R,useSyncExternalStore:VR,useId:nC,unstable_isNewReconciler:!1},oF={readContext:oo,useCallback:eC,useContext:oo,useEffect:nv,useImperativeHandle:ZR,useInsertionEffect:QR,useLayoutEffect:YR,useMemo:tC,useReducer:fy,useRef:JR,useState:function(){return fy(Zc)},useDebugValue:iv,useDeferredValue:function(e){var t=so();return zn===null?t.memoizedState=e:rC(t,zn.memoizedState,e)},useTransition:function(){var e=fy(Zc)[0],t=so().memoizedState;return[e,t]},useMutableSource:$R,useSyncExternalStore:VR,useId:nC,unstable_isNewReconciler:!1};function Ol(e,t){try{var r="",n=t;do r+=NI(n),n=n.return;while(n);var o=r}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:o,digest:null}}function hy(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Xm(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var sF=typeof WeakMap=="function"?WeakMap:Map;function aC(e,t,r){r=Wo(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){jh||(jh=!0,l0=n),Xm(e,t)},r}function lC(e,t,r){r=Wo(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var o=t.value;r.payload=function(){return n(o)},r.callback=function(){Xm(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Xm(e,t),typeof n!="function"&&(Es===null?Es=new Set([this]):Es.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function g1(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new sF;var o=new Set;n.set(t,o)}else o=n.get(t),o===void 0&&(o=new Set,n.set(t,o));o.has(r)||(o.add(r),e=_F.bind(null,e,t,r),t.then(e,e))}function y1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function m1(e,t,r,n,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Wo(-1,1),t.tag=2,Ss(r,t,1))),r.lanes|=1),e)}var aF=Xo.ReactCurrentOwner,Oi=!1;function wi(e,t,r,n){t.child=e===null?jR(t,null,r,n):Il(t,e.child,r,n)}function v1(e,t,r,n,o){r=r.render;var a=t.ref;return Rl(t,o),n=tv(e,t,r,n,a,o),r=rv(),e!==null&&!Oi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Jo(e,t,o)):(Rn&&r&&V0(t),t.flags|=1,wi(e,t,n,o),t.child)}function w1(e,t,r,n,o){if(e===null){var a=r.type;return typeof a=="function"&&!fv(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,uC(e,t,a,n,o)):(e=gh(r.type,null,n,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&o)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:Gc,r(s,n)&&e.ref===t.ref)return Jo(e,t,o)}return t.flags|=1,e=As(a,n),e.ref=t.ref,e.return=t,t.child=e}function uC(e,t,r,n,o){if(e!==null){var a=e.memoizedProps;if(Gc(a,n)&&e.ref===t.ref)if(Oi=!1,t.pendingProps=n=a,(e.lanes&o)!==0)e.flags&131072&&(Oi=!0);else return t.lanes=e.lanes,Jo(e,t,o)}return Zm(e,t,r,n,o)}function cC(e,t,r){var n=t.pendingProps,o=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},vn(wl,Vi),Vi|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,vn(wl,Vi),Vi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,vn(wl,Vi),Vi|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,vn(wl,Vi),Vi|=n;return wi(e,t,o,r),t.child}function dC(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Zm(e,t,r,n,o){var a=ki(r)?ca:hi.current;return a=Pl(t,a),Rl(t,o),r=tv(e,t,r,n,a,o),n=rv(),e!==null&&!Oi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Jo(e,t,o)):(Rn&&n&&V0(t),t.flags|=1,wi(e,t,r,o),t.child)}function _1(e,t,r,n,o){if(ki(r)){var a=!0;Ih(t)}else a=!1;if(Rl(t,o),t.stateNode===null)fh(e,t),MR(t,r,n),Ym(t,r,n,o),n=!0;else if(e===null){var s=t.stateNode,u=t.memoizedProps;s.props=u;var h=s.context,c=r.contextType;typeof c=="object"&&c!==null?c=oo(c):(c=ki(r)?ca:hi.current,c=Pl(t,c));var p=r.getDerivedStateFromProps,y=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function";y||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==n||h!==c)&&d1(t,s,n,c),ds=!1;var m=t.memoizedState;s.state=m,Dh(t,n,s,o),h=t.memoizedState,u!==n||m!==h||Ni.current||ds?(typeof p=="function"&&(Qm(t,r,p,n),h=t.memoizedState),(u=ds||c1(t,r,u,n,m,h,c))?(y||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=h),s.props=n,s.state=h,s.context=c,n=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,LR(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:go(t.type,u),s.props=c,y=t.pendingProps,m=s.context,h=r.contextType,typeof h=="object"&&h!==null?h=oo(h):(h=ki(r)?ca:hi.current,h=Pl(t,h));var _=r.getDerivedStateFromProps;(p=typeof _=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==y||m!==h)&&d1(t,s,n,h),ds=!1,m=t.memoizedState,s.state=m,Dh(t,n,s,o);var C=t.memoizedState;u!==y||m!==C||Ni.current||ds?(typeof _=="function"&&(Qm(t,r,_,n),C=t.memoizedState),(c=ds||c1(t,r,c,n,m,C,h)||!1)?(p||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,C,h),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,C,h)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=C),s.props=n,s.state=C,s.context=h,n=c):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return e0(e,t,r,n,a,o)}function e0(e,t,r,n,o,a){dC(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return o&&o1(t,r,!1),Jo(e,t,a);n=t.stateNode,aF.current=t;var u=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=Il(t,e.child,null,a),t.child=Il(t,null,u,a)):wi(e,t,u,a),t.memoizedState=n.state,o&&o1(t,r,!0),t.child}function fC(e){var t=e.stateNode;t.pendingContext?i1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&i1(e,t.context,!1),Y0(e,t.containerInfo)}function S1(e,t,r,n,o){return Tl(),W0(o),t.flags|=256,wi(e,t,r,n),t.child}var t0={dehydrated:null,treeContext:null,retryLane:0};function r0(e){return{baseLanes:e,cachePool:null,transitions:null}}function hC(e,t,r){var n=t.pendingProps,o=Pn.current,a=!1,s=(t.flags&128)!==0,u;if((u=s)||(u=e!==null&&e.memoizedState===null?!1:(o&2)!==0),u?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),vn(Pn,o&1),e===null)return zm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,a?(n=t.mode,a=t.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=mp(s,n,0,null),e=la(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=r0(r),t.memoizedState=t0,e):ov(t,s));if(o=e.memoizedState,o!==null&&(u=o.dehydrated,u!==null))return lF(e,t,s,n,u,o,r);if(a){a=n.fallback,s=t.mode,o=e.child,u=o.sibling;var h={mode:"hidden",children:n.children};return!(s&1)&&t.child!==o?(n=t.child,n.childLanes=0,n.pendingProps=h,t.deletions=null):(n=As(o,h),n.subtreeFlags=o.subtreeFlags&14680064),u!==null?a=As(u,a):(a=la(a,s,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,s=e.child.memoizedState,s=s===null?r0(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~r,t.memoizedState=t0,n}return a=e.child,e=a.sibling,n=As(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function ov(e,t){return t=mp({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bf(e,t,r,n){return n!==null&&W0(n),Il(t,e.child,null,r),e=ov(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lF(e,t,r,n,o,a,s){if(r)return t.flags&256?(t.flags&=-257,n=hy(Error(vt(422))),Bf(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,o=t.mode,n=mp({mode:"visible",children:n.children},o,0,null),a=la(a,o,s,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Il(t,e.child,null,s),t.child.memoizedState=r0(s),t.memoizedState=t0,a);if(!(t.mode&1))return Bf(e,t,s,null);if(o.data==="$!"){if(n=o.nextSibling&&o.nextSibling.dataset,n)var u=n.dgst;return n=u,a=Error(vt(419)),n=hy(a,n,void 0),Bf(e,t,s,n)}if(u=(s&e.childLanes)!==0,Oi||u){if(n=ti,n!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(n.suspendedLanes|s)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,zo(e,o),_o(n,e,o,-1))}return dv(),n=hy(Error(vt(421))),Bf(e,t,s,n)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=SF.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,Ki=_s(o.nextSibling),Wi=t,Rn=!0,mo=null,e!==null&&(to[ro++]=Vo,to[ro++]=Ko,to[ro++]=da,Vo=e.id,Ko=e.overflow,da=t),t=ov(t,n.children),t.flags|=4096,t)}function E1(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Jm(e.return,t,r)}function py(e,t,r,n,o){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=o)}function pC(e,t,r){var n=t.pendingProps,o=n.revealOrder,a=n.tail;if(wi(e,t,n.children,r),n=Pn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&E1(e,r,t);else if(e.tag===19)E1(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(vn(Pn,n),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&Lh(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),py(t,!1,o,r,a);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Lh(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}py(t,!0,r,null,a);break;case"together":py(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function fh(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ha|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(vt(153));if(t.child!==null){for(e=t.child,r=As(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=As(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function uF(e,t,r){switch(t.tag){case 3:fC(t),Tl();break;case 5:HR(t);break;case 1:ki(t.type)&&Ih(t);break;case 4:Y0(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,o=t.memoizedProps.value;vn(Nh,n._currentValue),n._currentValue=o;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(vn(Pn,Pn.current&1),t.flags|=128,null):r&t.child.childLanes?hC(e,t,r):(vn(Pn,Pn.current&1),e=Jo(e,t,r),e!==null?e.sibling:null);vn(Pn,Pn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return pC(e,t,r);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),vn(Pn,Pn.current),n)break;return null;case 22:case 23:return t.lanes=0,cC(e,t,r)}return Jo(e,t,r)}var gC,n0,yC,mC;gC=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};n0=function(){};yC=function(e,t,r,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,sa(Io.current);var a=null;switch(r){case"input":o=Rm(e,o),n=Rm(e,n),a=[];break;case"select":o=In({},o,{value:void 0}),n=In({},n,{value:void 0}),a=[];break;case"textarea":o=Pm(e,o),n=Pm(e,n),a=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ph)}Im(r,n);var s;r=null;for(c in o)if(!n.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var u=o[c];for(s in u)u.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Bc.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var h=n[c];if(u=o!=null?o[c]:void 0,n.hasOwnProperty(c)&&h!==u&&(h!=null||u!=null))if(c==="style")if(u){for(s in u)!u.hasOwnProperty(s)||h&&h.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in h)h.hasOwnProperty(s)&&u[s]!==h[s]&&(r||(r={}),r[s]=h[s])}else r||(a||(a=[]),a.push(c,r)),r=h;else c==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(a=a||[]).push(c,h)):c==="children"?typeof h!="string"&&typeof h!="number"||(a=a||[]).push(c,""+h):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Bc.hasOwnProperty(c)?(h!=null&&c==="onScroll"&&_n("scroll",e),a||u===h||(a=[])):(a=a||[]).push(c,h))}r&&(a=a||[]).push("style",r);var c=a;(t.updateQueue=c)&&(t.flags|=4)}};mC=function(e,t,r,n){r!==n&&(t.flags|=4)};function Su(e,t){if(!Rn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ci(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags&14680064,n|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function cF(e,t,r){var n=t.pendingProps;switch(K0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ci(t),null;case 1:return ki(t.type)&&Th(),ci(t),null;case 3:return n=t.stateNode,Fl(),Sn(Ni),Sn(hi),Z0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Uf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,mo!==null&&(d0(mo),mo=null))),n0(e,t),ci(t),null;case 5:X0(t);var o=sa(Yc.current);if(r=t.type,e!==null&&t.stateNode!=null)yC(e,t,r,n,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(vt(166));return ci(t),null}if(e=sa(Io.current),Uf(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Po]=t,n[Jc]=a,e=(t.mode&1)!==0,r){case"dialog":_n("cancel",n),_n("close",n);break;case"iframe":case"object":case"embed":_n("load",n);break;case"video":case"audio":for(o=0;o<Rc.length;o++)_n(Rc[o],n);break;case"source":_n("error",n);break;case"img":case"image":case"link":_n("error",n),_n("load",n);break;case"details":_n("toggle",n);break;case"input":FS(n,a),_n("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},_n("invalid",n);break;case"textarea":NS(n,a),_n("invalid",n)}Im(r,a),o=null;for(var s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="children"?typeof u=="string"?n.textContent!==u&&(a.suppressHydrationWarning!==!0&&Lf(n.textContent,u,e),o=["children",u]):typeof u=="number"&&n.textContent!==""+u&&(a.suppressHydrationWarning!==!0&&Lf(n.textContent,u,e),o=["children",""+u]):Bc.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&_n("scroll",n)}switch(r){case"input":Pf(n),OS(n,a,!0);break;case"textarea":Pf(n),kS(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Ph)}n=o,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=KA(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[Po]=t,e[Jc]=n,gC(e,t,!1,!1),t.stateNode=e;e:{switch(s=Fm(r,n),r){case"dialog":_n("cancel",e),_n("close",e),o=n;break;case"iframe":case"object":case"embed":_n("load",e),o=n;break;case"video":case"audio":for(o=0;o<Rc.length;o++)_n(Rc[o],e);o=n;break;case"source":_n("error",e),o=n;break;case"img":case"image":case"link":_n("error",e),_n("load",e),o=n;break;case"details":_n("toggle",e),o=n;break;case"input":FS(e,n),o=Rm(e,n),_n("invalid",e);break;case"option":o=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=In({},n,{value:void 0}),_n("invalid",e);break;case"textarea":NS(e,n),o=Pm(e,n),_n("invalid",e);break;default:o=n}Im(r,o),u=o;for(a in u)if(u.hasOwnProperty(a)){var h=u[a];a==="style"?qA(e,h):a==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&WA(e,h)):a==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&jc(e,h):typeof h=="number"&&jc(e,""+h):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Bc.hasOwnProperty(a)?h!=null&&a==="onScroll"&&_n("scroll",e):h!=null&&T0(e,a,h,s))}switch(r){case"input":Pf(e),OS(e,n,!1);break;case"textarea":Pf(e),kS(e);break;case"option":n.value!=null&&e.setAttribute("value",""+xs(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Sl(e,!!n.multiple,a,!1):n.defaultValue!=null&&Sl(e,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Ph)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ci(t),null;case 6:if(e&&t.stateNode!=null)mC(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(vt(166));if(r=sa(Yc.current),sa(Io.current),Uf(t)){if(n=t.stateNode,r=t.memoizedProps,n[Po]=t,(a=n.nodeValue!==r)&&(e=Wi,e!==null))switch(e.tag){case 3:Lf(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Lf(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Po]=t,t.stateNode=n}return ci(t),null;case 13:if(Sn(Pn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Rn&&Ki!==null&&t.mode&1&&!(t.flags&128))kR(),Tl(),t.flags|=98560,a=!1;else if(a=Uf(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(vt(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(vt(317));a[Po]=t}else Tl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ci(t),a=!1}else mo!==null&&(d0(mo),mo=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Pn.current&1?Qn===0&&(Qn=3):dv())),t.updateQueue!==null&&(t.flags|=4),ci(t),null);case 4:return Fl(),n0(e,t),e===null&&qc(t.stateNode.containerInfo),ci(t),null;case 10:return z0(t.type._context),ci(t),null;case 17:return ki(t.type)&&Th(),ci(t),null;case 19:if(Sn(Pn),a=t.memoizedState,a===null)return ci(t),null;if(n=(t.flags&128)!==0,s=a.rendering,s===null)if(n)Su(a,!1);else{if(Qn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Lh(e),s!==null){for(t.flags|=128,Su(a,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return vn(Pn,Pn.current&1|2),t.child}e=e.sibling}a.tail!==null&&Mn()>Nl&&(t.flags|=128,n=!0,Su(a,!1),t.lanes=4194304)}else{if(!n)if(e=Lh(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Su(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Rn)return ci(t),null}else 2*Mn()-a.renderingStartTime>Nl&&r!==1073741824&&(t.flags|=128,n=!0,Su(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(r=a.last,r!==null?r.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Mn(),t.sibling=null,r=Pn.current,vn(Pn,n?r&1|2:r&1),t):(ci(t),null);case 22:case 23:return cv(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Vi&1073741824&&(ci(t),t.subtreeFlags&6&&(t.flags|=8192)):ci(t),null;case 24:return null;case 25:return null}throw Error(vt(156,t.tag))}function dF(e,t){switch(K0(t),t.tag){case 1:return ki(t.type)&&Th(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fl(),Sn(Ni),Sn(hi),Z0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return X0(t),null;case 13:if(Sn(Pn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(vt(340));Tl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Sn(Pn),null;case 4:return Fl(),null;case 10:return z0(t.type._context),null;case 22:case 23:return cv(),null;case 24:return null;default:return null}}var jf=!1,fi=!1,fF=typeof WeakSet=="function"?WeakSet:Set,zt=null;function vl(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){On(e,t,n)}else r.current=null}function i0(e,t,r){try{r()}catch(n){On(e,t,n)}}var b1=!1;function hF(e,t){if(Hm=Rh,e=SR(),$0(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var o=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,u=-1,h=-1,c=0,p=0,y=e,m=null;t:for(;;){for(var _;y!==r||o!==0&&y.nodeType!==3||(u=s+o),y!==a||n!==0&&y.nodeType!==3||(h=s+n),y.nodeType===3&&(s+=y.nodeValue.length),(_=y.firstChild)!==null;)m=y,y=_;for(;;){if(y===e)break t;if(m===r&&++c===o&&(u=s),m===a&&++p===n&&(h=s),(_=y.nextSibling)!==null)break;y=m,m=y.parentNode}y=_}r=u===-1||h===-1?null:{start:u,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for($m={focusedElem:e,selectionRange:r},Rh=!1,zt=t;zt!==null;)if(t=zt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,zt=e;else for(;zt!==null;){t=zt;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var R=C.memoizedProps,F=C.memoizedState,b=t.stateNode,E=b.getSnapshotBeforeUpdate(t.elementType===t.type?R:go(t.type,R),F);b.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var P=t.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(vt(163))}}catch(j){On(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,zt=e;break}zt=t.return}return C=b1,b1=!1,C}function Oc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,a!==void 0&&i0(t,r,a)}o=o.next}while(o!==n)}}function gp(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function o0(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function vC(e){var t=e.alternate;t!==null&&(e.alternate=null,vC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Po],delete t[Jc],delete t[Wm],delete t[J2],delete t[Q2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wC(e){return e.tag===5||e.tag===3||e.tag===4}function A1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function s0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ph));else if(n!==4&&(e=e.child,e!==null))for(s0(e,t,r),e=e.sibling;e!==null;)s0(e,t,r),e=e.sibling}function a0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(a0(e,t,r),e=e.sibling;e!==null;)a0(e,t,r),e=e.sibling}var oi=null,yo=!1;function is(e,t,r){for(r=r.child;r!==null;)_C(e,t,r),r=r.sibling}function _C(e,t,r){if(To&&typeof To.onCommitFiberUnmount=="function")try{To.onCommitFiberUnmount(ap,r)}catch{}switch(r.tag){case 5:fi||vl(r,t);case 6:var n=oi,o=yo;oi=null,is(e,t,r),oi=n,yo=o,oi!==null&&(yo?(e=oi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):oi.removeChild(r.stateNode));break;case 18:oi!==null&&(yo?(e=oi,r=r.stateNode,e.nodeType===8?ay(e.parentNode,r):e.nodeType===1&&ay(e,r),Kc(e)):ay(oi,r.stateNode));break;case 4:n=oi,o=yo,oi=r.stateNode.containerInfo,yo=!0,is(e,t,r),oi=n,yo=o;break;case 0:case 11:case 14:case 15:if(!fi&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){o=n=n.next;do{var a=o,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&i0(r,t,s),o=o.next}while(o!==n)}is(e,t,r);break;case 1:if(!fi&&(vl(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(u){On(r,t,u)}is(e,t,r);break;case 21:is(e,t,r);break;case 22:r.mode&1?(fi=(n=fi)||r.memoizedState!==null,is(e,t,r),fi=n):is(e,t,r);break;default:is(e,t,r)}}function R1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new fF),t.forEach(function(n){var o=EF.bind(null,e,n);r.has(n)||(r.add(n),n.then(o,o))})}}function po(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var o=r[n];try{var a=e,s=t,u=s;e:for(;u!==null;){switch(u.tag){case 5:oi=u.stateNode,yo=!1;break e;case 3:oi=u.stateNode.containerInfo,yo=!0;break e;case 4:oi=u.stateNode.containerInfo,yo=!0;break e}u=u.return}if(oi===null)throw Error(vt(160));_C(a,s,o),oi=null,yo=!1;var h=o.alternate;h!==null&&(h.return=null),o.return=null}catch(c){On(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)SC(t,e),t=t.sibling}function SC(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(po(t,e),Co(e),n&4){try{Oc(3,e,e.return),gp(3,e)}catch(R){On(e,e.return,R)}try{Oc(5,e,e.return)}catch(R){On(e,e.return,R)}}break;case 1:po(t,e),Co(e),n&512&&r!==null&&vl(r,r.return);break;case 5:if(po(t,e),Co(e),n&512&&r!==null&&vl(r,r.return),e.flags&32){var o=e.stateNode;try{jc(o,"")}catch(R){On(e,e.return,R)}}if(n&4&&(o=e.stateNode,o!=null)){var a=e.memoizedProps,s=r!==null?r.memoizedProps:a,u=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{u==="input"&&a.type==="radio"&&a.name!=null&&$A(o,a),Fm(u,s);var c=Fm(u,a);for(s=0;s<h.length;s+=2){var p=h[s],y=h[s+1];p==="style"?qA(o,y):p==="dangerouslySetInnerHTML"?WA(o,y):p==="children"?jc(o,y):T0(o,p,y,c)}switch(u){case"input":Cm(o,a);break;case"textarea":VA(o,a);break;case"select":var m=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var _=a.value;_!=null?Sl(o,!!a.multiple,_,!1):m!==!!a.multiple&&(a.defaultValue!=null?Sl(o,!!a.multiple,a.defaultValue,!0):Sl(o,!!a.multiple,a.multiple?[]:"",!1))}o[Jc]=a}catch(R){On(e,e.return,R)}}break;case 6:if(po(t,e),Co(e),n&4){if(e.stateNode===null)throw Error(vt(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(R){On(e,e.return,R)}}break;case 3:if(po(t,e),Co(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Kc(t.containerInfo)}catch(R){On(e,e.return,R)}break;case 4:po(t,e),Co(e);break;case 13:po(t,e),Co(e),o=e.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(lv=Mn())),n&4&&R1(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(fi=(c=fi)||p,po(t,e),fi=c):po(t,e),Co(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!p&&e.mode&1)for(zt=e,p=e.child;p!==null;){for(y=zt=p;zt!==null;){switch(m=zt,_=m.child,m.tag){case 0:case 11:case 14:case 15:Oc(4,m,m.return);break;case 1:vl(m,m.return);var C=m.stateNode;if(typeof C.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(R){On(n,r,R)}}break;case 5:vl(m,m.return);break;case 22:if(m.memoizedState!==null){x1(y);continue}}_!==null?(_.return=m,zt=_):x1(y)}p=p.sibling}e:for(p=null,y=e;;){if(y.tag===5){if(p===null){p=y;try{o=y.stateNode,c?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(u=y.stateNode,h=y.memoizedProps.style,s=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=GA("display",s))}catch(R){On(e,e.return,R)}}}else if(y.tag===6){if(p===null)try{y.stateNode.nodeValue=c?"":y.memoizedProps}catch(R){On(e,e.return,R)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;p===y&&(p=null),y=y.return}p===y&&(p=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:po(t,e),Co(e),n&4&&R1(e);break;case 21:break;default:po(t,e),Co(e)}}function Co(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(wC(r)){var n=r;break e}r=r.return}throw Error(vt(160))}switch(n.tag){case 5:var o=n.stateNode;n.flags&32&&(jc(o,""),n.flags&=-33);var a=A1(e);a0(e,a,o);break;case 3:case 4:var s=n.stateNode.containerInfo,u=A1(e);s0(e,u,s);break;default:throw Error(vt(161))}}catch(h){On(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pF(e,t,r){zt=e,EC(e)}function EC(e,t,r){for(var n=(e.mode&1)!==0;zt!==null;){var o=zt,a=o.child;if(o.tag===22&&n){var s=o.memoizedState!==null||jf;if(!s){var u=o.alternate,h=u!==null&&u.memoizedState!==null||fi;u=jf;var c=fi;if(jf=s,(fi=h)&&!c)for(zt=o;zt!==null;)s=zt,h=s.child,s.tag===22&&s.memoizedState!==null?P1(o):h!==null?(h.return=s,zt=h):P1(o);for(;a!==null;)zt=a,EC(a),a=a.sibling;zt=o,jf=u,fi=c}C1(e)}else o.subtreeFlags&8772&&a!==null?(a.return=o,zt=a):C1(e)}}function C1(e){for(;zt!==null;){var t=zt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:fi||gp(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!fi)if(r===null)n.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:go(t.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&u1(t,a,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}u1(t,s,r)}break;case 5:var u=t.stateNode;if(r===null&&t.flags&4){r=u;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var p=c.memoizedState;if(p!==null){var y=p.dehydrated;y!==null&&Kc(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(vt(163))}fi||t.flags&512&&o0(t)}catch(m){On(t,t.return,m)}}if(t===e){zt=null;break}if(r=t.sibling,r!==null){r.return=t.return,zt=r;break}zt=t.return}}function x1(e){for(;zt!==null;){var t=zt;if(t===e){zt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,zt=r;break}zt=t.return}}function P1(e){for(;zt!==null;){var t=zt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{gp(4,t)}catch(h){On(t,r,h)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var o=t.return;try{n.componentDidMount()}catch(h){On(t,o,h)}}var a=t.return;try{o0(t)}catch(h){On(t,a,h)}break;case 5:var s=t.return;try{o0(t)}catch(h){On(t,s,h)}}}catch(h){On(t,t.return,h)}if(t===e){zt=null;break}var u=t.sibling;if(u!==null){u.return=t.return,zt=u;break}zt=t.return}}var gF=Math.ceil,Bh=Xo.ReactCurrentDispatcher,sv=Xo.ReactCurrentOwner,io=Xo.ReactCurrentBatchConfig,Qr=0,ti=null,$n=null,si=0,Vi=0,wl=Fs(0),Qn=0,td=null,ha=0,yp=0,av=0,Nc=null,Ii=null,lv=0,Nl=1/0,jo=null,jh=!1,l0=null,Es=null,Hf=!1,gs=null,Hh=0,kc=0,u0=null,hh=-1,ph=0;function _i(){return Qr&6?Mn():hh!==-1?hh:hh=Mn()}function bs(e){return e.mode&1?Qr&2&&si!==0?si&-si:X2.transition!==null?(ph===0&&(ph=oR()),ph):(e=ln,e!==0||(e=window.event,e=e===void 0?16:fR(e.type)),e):1}function _o(e,t,r,n){if(50<kc)throw kc=0,u0=null,Error(vt(185));sd(e,r,n),(!(Qr&2)||e!==ti)&&(e===ti&&(!(Qr&2)&&(yp|=r),Qn===4&&hs(e,si)),Di(e,n),r===1&&Qr===0&&!(t.mode&1)&&(Nl=Mn()+500,fp&&Os()))}function Di(e,t){var r=e.callbackNode;XI(e,t);var n=Ah(e,e===ti?si:0);if(n===0)r!==null&&US(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&US(r),t===1)e.tag===0?Y2(T1.bind(null,e)):FR(T1.bind(null,e)),q2(function(){!(Qr&6)&&Os()}),r=null;else{switch(sR(n)){case 1:r=k0;break;case 4:r=nR;break;case 16:r=bh;break;case 536870912:r=iR;break;default:r=bh}r=IC(r,bC.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function bC(e,t){if(hh=-1,ph=0,Qr&6)throw Error(vt(327));var r=e.callbackNode;if(Cl()&&e.callbackNode!==r)return null;var n=Ah(e,e===ti?si:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=$h(e,n);else{t=n;var o=Qr;Qr|=2;var a=RC();(ti!==e||si!==t)&&(jo=null,Nl=Mn()+500,aa(e,t));do try{vF();break}catch(u){AC(e,u)}while(1);q0(),Bh.current=a,Qr=o,$n!==null?t=0:(ti=null,si=0,t=Qn)}if(t!==0){if(t===2&&(o=Lm(e),o!==0&&(n=o,t=c0(e,o))),t===1)throw r=td,aa(e,0),hs(e,n),Di(e,Mn()),r;if(t===6)hs(e,n);else{if(o=e.current.alternate,!(n&30)&&!yF(o)&&(t=$h(e,n),t===2&&(a=Lm(e),a!==0&&(n=a,t=c0(e,a))),t===1))throw r=td,aa(e,0),hs(e,n),Di(e,Mn()),r;switch(e.finishedWork=o,e.finishedLanes=n,t){case 0:case 1:throw Error(vt(345));case 2:ta(e,Ii,jo);break;case 3:if(hs(e,n),(n&130023424)===n&&(t=lv+500-Mn(),10<t)){if(Ah(e,0)!==0)break;if(o=e.suspendedLanes,(o&n)!==n){_i(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Km(ta.bind(null,e,Ii,jo),t);break}ta(e,Ii,jo);break;case 4:if(hs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,o=-1;0<n;){var s=31-wo(n);a=1<<s,s=t[s],s>o&&(o=s),n&=~a}if(n=o,n=Mn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*gF(n/1960))-n,10<n){e.timeoutHandle=Km(ta.bind(null,e,Ii,jo),n);break}ta(e,Ii,jo);break;case 5:ta(e,Ii,jo);break;default:throw Error(vt(329))}}}return Di(e,Mn()),e.callbackNode===r?bC.bind(null,e):null}function c0(e,t){var r=Nc;return e.current.memoizedState.isDehydrated&&(aa(e,t).flags|=256),e=$h(e,t),e!==2&&(t=Ii,Ii=r,t!==null&&d0(t)),e}function d0(e){Ii===null?Ii=e:Ii.push.apply(Ii,e)}function yF(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var o=r[n],a=o.getSnapshot;o=o.value;try{if(!So(a(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hs(e,t){for(t&=~av,t&=~yp,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-wo(t),n=1<<r;e[r]=-1,t&=~n}}function T1(e){if(Qr&6)throw Error(vt(327));Cl();var t=Ah(e,0);if(!(t&1))return Di(e,Mn()),null;var r=$h(e,t);if(e.tag!==0&&r===2){var n=Lm(e);n!==0&&(t=n,r=c0(e,n))}if(r===1)throw r=td,aa(e,0),hs(e,t),Di(e,Mn()),r;if(r===6)throw Error(vt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ta(e,Ii,jo),Di(e,Mn()),null}function uv(e,t){var r=Qr;Qr|=1;try{return e(t)}finally{Qr=r,Qr===0&&(Nl=Mn()+500,fp&&Os())}}function pa(e){gs!==null&&gs.tag===0&&!(Qr&6)&&Cl();var t=Qr;Qr|=1;var r=io.transition,n=ln;try{if(io.transition=null,ln=1,e)return e()}finally{ln=n,io.transition=r,Qr=t,!(Qr&6)&&Os()}}function cv(){Vi=wl.current,Sn(wl)}function aa(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,G2(r)),$n!==null)for(r=$n.return;r!==null;){var n=r;switch(K0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Th();break;case 3:Fl(),Sn(Ni),Sn(hi),Z0();break;case 5:X0(n);break;case 4:Fl();break;case 13:Sn(Pn);break;case 19:Sn(Pn);break;case 10:z0(n.type._context);break;case 22:case 23:cv()}r=r.return}if(ti=e,$n=e=As(e.current,null),si=Vi=t,Qn=0,td=null,av=yp=ha=0,Ii=Nc=null,oa!==null){for(t=0;t<oa.length;t++)if(r=oa[t],n=r.interleaved,n!==null){r.interleaved=null;var o=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=o,n.next=s}r.pending=n}oa=null}return e}function AC(e,t){do{var r=$n;try{if(q0(),ch.current=Mh,Uh){for(var n=Tn.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}Uh=!1}if(fa=0,ei=zn=Tn=null,Fc=!1,Xc=0,sv.current=null,r===null||r.return===null){Qn=1,td=t,$n=null;break}e:{var a=e,s=r.return,u=r,h=t;if(t=si,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var c=h,p=u,y=p.tag;if(!(p.mode&1)&&(y===0||y===11||y===15)){var m=p.alternate;m?(p.updateQueue=m.updateQueue,p.memoizedState=m.memoizedState,p.lanes=m.lanes):(p.updateQueue=null,p.memoizedState=null)}var _=y1(s);if(_!==null){_.flags&=-257,m1(_,s,u,a,t),_.mode&1&&g1(a,c,t),t=_,h=c;var C=t.updateQueue;if(C===null){var R=new Set;R.add(h),t.updateQueue=R}else C.add(h);break e}else{if(!(t&1)){g1(a,c,t),dv();break e}h=Error(vt(426))}}else if(Rn&&u.mode&1){var F=y1(s);if(F!==null){!(F.flags&65536)&&(F.flags|=256),m1(F,s,u,a,t),W0(Ol(h,u));break e}}a=h=Ol(h,u),Qn!==4&&(Qn=2),Nc===null?Nc=[a]:Nc.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var b=aC(a,h,t);l1(a,b);break e;case 1:u=h;var E=a.type,P=a.stateNode;if(!(a.flags&128)&&(typeof E.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Es===null||!Es.has(P)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=lC(a,u,t);l1(a,j);break e}}a=a.return}while(a!==null)}xC(r)}catch(H){t=H,$n===r&&r!==null&&($n=r=r.return);continue}break}while(1)}function RC(){var e=Bh.current;return Bh.current=Mh,e===null?Mh:e}function dv(){(Qn===0||Qn===3||Qn===2)&&(Qn=4),ti===null||!(ha&268435455)&&!(yp&268435455)||hs(ti,si)}function $h(e,t){var r=Qr;Qr|=2;var n=RC();(ti!==e||si!==t)&&(jo=null,aa(e,t));do try{mF();break}catch(o){AC(e,o)}while(1);if(q0(),Qr=r,Bh.current=n,$n!==null)throw Error(vt(261));return ti=null,si=0,Qn}function mF(){for(;$n!==null;)CC($n)}function vF(){for(;$n!==null&&!VI();)CC($n)}function CC(e){var t=TC(e.alternate,e,Vi);e.memoizedProps=e.pendingProps,t===null?xC(e):$n=t,sv.current=null}function xC(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=dF(r,t),r!==null){r.flags&=32767,$n=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qn=6,$n=null;return}}else if(r=cF(r,t,Vi),r!==null){$n=r;return}if(t=t.sibling,t!==null){$n=t;return}$n=t=e}while(t!==null);Qn===0&&(Qn=5)}function ta(e,t,r){var n=ln,o=io.transition;try{io.transition=null,ln=1,wF(e,t,r,n)}finally{io.transition=o,ln=n}return null}function wF(e,t,r,n){do Cl();while(gs!==null);if(Qr&6)throw Error(vt(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(vt(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(ZI(e,a),e===ti&&($n=ti=null,si=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Hf||(Hf=!0,IC(bh,function(){return Cl(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=io.transition,io.transition=null;var s=ln;ln=1;var u=Qr;Qr|=4,sv.current=null,hF(e,r),SC(r,e),B2($m),Rh=!!Hm,$m=Hm=null,e.current=r,pF(r),KI(),Qr=u,ln=s,io.transition=a}else e.current=r;if(Hf&&(Hf=!1,gs=e,Hh=o),a=e.pendingLanes,a===0&&(Es=null),qI(r.stateNode),Di(e,Mn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],n(o.value,{componentStack:o.stack,digest:o.digest});if(jh)throw jh=!1,e=l0,l0=null,e;return Hh&1&&e.tag!==0&&Cl(),a=e.pendingLanes,a&1?e===u0?kc++:(kc=0,u0=e):kc=0,Os(),null}function Cl(){if(gs!==null){var e=sR(Hh),t=io.transition,r=ln;try{if(io.transition=null,ln=16>e?16:e,gs===null)var n=!1;else{if(e=gs,gs=null,Hh=0,Qr&6)throw Error(vt(331));var o=Qr;for(Qr|=4,zt=e.current;zt!==null;){var a=zt,s=a.child;if(zt.flags&16){var u=a.deletions;if(u!==null){for(var h=0;h<u.length;h++){var c=u[h];for(zt=c;zt!==null;){var p=zt;switch(p.tag){case 0:case 11:case 15:Oc(8,p,a)}var y=p.child;if(y!==null)y.return=p,zt=y;else for(;zt!==null;){p=zt;var m=p.sibling,_=p.return;if(vC(p),p===c){zt=null;break}if(m!==null){m.return=_,zt=m;break}zt=_}}}var C=a.alternate;if(C!==null){var R=C.child;if(R!==null){C.child=null;do{var F=R.sibling;R.sibling=null,R=F}while(R!==null)}}zt=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,zt=s;else e:for(;zt!==null;){if(a=zt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Oc(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,zt=b;break e}zt=a.return}}var E=e.current;for(zt=E;zt!==null;){s=zt;var P=s.child;if(s.subtreeFlags&2064&&P!==null)P.return=s,zt=P;else e:for(s=E;zt!==null;){if(u=zt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:gp(9,u)}}catch(H){On(u,u.return,H)}if(u===s){zt=null;break e}var j=u.sibling;if(j!==null){j.return=u.return,zt=j;break e}zt=u.return}}if(Qr=o,Os(),To&&typeof To.onPostCommitFiberRoot=="function")try{To.onPostCommitFiberRoot(ap,e)}catch{}n=!0}return n}finally{ln=r,io.transition=t}}return!1}function I1(e,t,r){t=Ol(r,t),t=aC(e,t,1),e=Ss(e,t,1),t=_i(),e!==null&&(sd(e,1,t),Di(e,t))}function On(e,t,r){if(e.tag===3)I1(e,e,r);else for(;t!==null;){if(t.tag===3){I1(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Es===null||!Es.has(n))){e=Ol(r,e),e=lC(t,e,1),t=Ss(t,e,1),e=_i(),t!==null&&(sd(t,1,e),Di(t,e));break}}t=t.return}}function _F(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=_i(),e.pingedLanes|=e.suspendedLanes&r,ti===e&&(si&r)===r&&(Qn===4||Qn===3&&(si&130023424)===si&&500>Mn()-lv?aa(e,0):av|=r),Di(e,t)}function PC(e,t){t===0&&(e.mode&1?(t=Ff,Ff<<=1,!(Ff&130023424)&&(Ff=4194304)):t=1);var r=_i();e=zo(e,t),e!==null&&(sd(e,t,r),Di(e,r))}function SF(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),PC(e,r)}function EF(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(vt(314))}n!==null&&n.delete(t),PC(e,r)}var TC;TC=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ni.current)Oi=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Oi=!1,uF(e,t,r);Oi=!!(e.flags&131072)}else Oi=!1,Rn&&t.flags&1048576&&OR(t,Oh,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;fh(e,t),e=t.pendingProps;var o=Pl(t,hi.current);Rl(t,r),o=tv(null,t,n,e,o,r);var a=rv();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ki(n)?(a=!0,Ih(t)):a=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Q0(t),o.updater=hp,t.stateNode=o,o._reactInternals=t,Ym(t,n,e,r),t=e0(null,t,n,!0,a,r)):(t.tag=0,Rn&&a&&V0(t),wi(null,t,o,r),t=t.child),t;case 16:n=t.elementType;e:{switch(fh(e,t),e=t.pendingProps,o=n._init,n=o(n._payload),t.type=n,o=t.tag=AF(n),e=go(n,e),o){case 0:t=Zm(null,t,n,e,r);break e;case 1:t=_1(null,t,n,e,r);break e;case 11:t=v1(null,t,n,e,r);break e;case 14:t=w1(null,t,n,go(n.type,e),r);break e}throw Error(vt(306,n,""))}return t;case 0:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:go(n,o),Zm(e,t,n,o,r);case 1:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:go(n,o),_1(e,t,n,o,r);case 3:e:{if(fC(t),e===null)throw Error(vt(387));n=t.pendingProps,a=t.memoizedState,o=a.element,LR(e,t),Dh(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){o=Ol(Error(vt(423)),t),t=S1(e,t,n,r,o);break e}else if(n!==o){o=Ol(Error(vt(424)),t),t=S1(e,t,n,r,o);break e}else for(Ki=_s(t.stateNode.containerInfo.firstChild),Wi=t,Rn=!0,mo=null,r=jR(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Tl(),n===o){t=Jo(e,t,r);break e}wi(e,t,n,r)}t=t.child}return t;case 5:return HR(t),e===null&&zm(t),n=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,s=o.children,Vm(n,o)?s=null:a!==null&&Vm(n,a)&&(t.flags|=32),dC(e,t),wi(e,t,s,r),t.child;case 6:return e===null&&zm(t),null;case 13:return hC(e,t,r);case 4:return Y0(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Il(t,null,n,r):wi(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:go(n,o),v1(e,t,n,o,r);case 7:return wi(e,t,t.pendingProps,r),t.child;case 8:return wi(e,t,t.pendingProps.children,r),t.child;case 12:return wi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,vn(Nh,n._currentValue),n._currentValue=s,a!==null)if(So(a.value,s)){if(a.children===o.children&&!Ni.current){t=Jo(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var u=a.dependencies;if(u!==null){s=a.child;for(var h=u.firstContext;h!==null;){if(h.context===n){if(a.tag===1){h=Wo(-1,r&-r),h.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var p=c.pending;p===null?h.next=h:(h.next=p.next,p.next=h),c.pending=h}}a.lanes|=r,h=a.alternate,h!==null&&(h.lanes|=r),Jm(a.return,r,t),u.lanes|=r;break}h=h.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(vt(341));s.lanes|=r,u=s.alternate,u!==null&&(u.lanes|=r),Jm(s,r,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}wi(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,n=t.pendingProps.children,Rl(t,r),o=oo(o),n=n(o),t.flags|=1,wi(e,t,n,r),t.child;case 14:return n=t.type,o=go(n,t.pendingProps),o=go(n.type,o),w1(e,t,n,o,r);case 15:return uC(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:go(n,o),fh(e,t),t.tag=1,ki(n)?(e=!0,Ih(t)):e=!1,Rl(t,r),MR(t,n,o),Ym(t,n,o,r),e0(null,t,n,!0,e,r);case 19:return pC(e,t,r);case 22:return cC(e,t,r)}throw Error(vt(156,t.tag))};function IC(e,t){return rR(e,t)}function bF(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function no(e,t,r,n){return new bF(e,t,r,n)}function fv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function AF(e){if(typeof e=="function")return fv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===F0)return 11;if(e===O0)return 14}return 2}function As(e,t){var r=e.alternate;return r===null?(r=no(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function gh(e,t,r,n,o,a){var s=2;if(n=e,typeof e=="function")fv(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case ul:return la(r.children,o,a,t);case I0:s=8,o|=8;break;case Sm:return e=no(12,r,t,o|2),e.elementType=Sm,e.lanes=a,e;case Em:return e=no(13,r,t,o),e.elementType=Em,e.lanes=a,e;case bm:return e=no(19,r,t,o),e.elementType=bm,e.lanes=a,e;case BA:return mp(r,o,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case UA:s=10;break e;case MA:s=9;break e;case F0:s=11;break e;case O0:s=14;break e;case cs:s=16,n=null;break e}throw Error(vt(130,e==null?e:typeof e,""))}return t=no(s,r,t,o),t.elementType=e,t.type=n,t.lanes=a,t}function la(e,t,r,n){return e=no(7,e,n,t),e.lanes=r,e}function mp(e,t,r,n){return e=no(22,e,n,t),e.elementType=BA,e.lanes=r,e.stateNode={isHidden:!1},e}function gy(e,t,r){return e=no(6,e,null,t),e.lanes=r,e}function yy(e,t,r){return t=no(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function RF(e,t,r,n,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qg(0),this.expirationTimes=Qg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qg(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function hv(e,t,r,n,o,a,s,u,h){return e=new RF(e,t,r,u,h),t===1?(t=1,a===!0&&(t|=8)):t=0,a=no(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Q0(a),e}function CF(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ll,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function FC(e){if(!e)return Ps;e=e._reactInternals;e:{if(ya(e)!==e||e.tag!==1)throw Error(vt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ki(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(vt(171))}if(e.tag===1){var r=e.type;if(ki(r))return IR(e,r,t)}return t}function OC(e,t,r,n,o,a,s,u,h){return e=hv(r,n,!0,e,o,a,s,u,h),e.context=FC(null),r=e.current,n=_i(),o=bs(r),a=Wo(n,o),a.callback=t??null,Ss(r,a,o),e.current.lanes=o,sd(e,o,n),Di(e,n),e}function vp(e,t,r,n){var o=t.current,a=_i(),s=bs(o);return r=FC(r),t.context===null?t.context=r:t.pendingContext=r,t=Wo(a,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ss(o,t,s),e!==null&&(_o(e,o,s,a),uh(e,o,s)),s}function Vh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function F1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function pv(e,t){F1(e,t),(e=e.alternate)&&F1(e,t)}function xF(){return null}var NC=typeof reportError=="function"?reportError:function(e){console.error(e)};function gv(e){this._internalRoot=e}wp.prototype.render=gv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(vt(409));vp(e,t,null,null)};wp.prototype.unmount=gv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;pa(function(){vp(null,e,null,null)}),t[qo]=null}};function wp(e){this._internalRoot=e}wp.prototype.unstable_scheduleHydration=function(e){if(e){var t=uR();e={blockedOn:null,target:e,priority:t};for(var r=0;r<fs.length&&t!==0&&t<fs[r].priority;r++);fs.splice(r,0,e),r===0&&dR(e)}};function yv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _p(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function O1(){}function PF(e,t,r,n,o){if(o){if(typeof n=="function"){var a=n;n=function(){var c=Vh(s);a.call(c)}}var s=OC(t,n,e,0,null,!1,!1,"",O1);return e._reactRootContainer=s,e[qo]=s.current,qc(e.nodeType===8?e.parentNode:e),pa(),s}for(;o=e.lastChild;)e.removeChild(o);if(typeof n=="function"){var u=n;n=function(){var c=Vh(h);u.call(c)}}var h=hv(e,0,!1,null,null,!1,!1,"",O1);return e._reactRootContainer=h,e[qo]=h.current,qc(e.nodeType===8?e.parentNode:e),pa(function(){vp(t,h,r,n)}),h}function Sp(e,t,r,n,o){var a=r._reactRootContainer;if(a){var s=a;if(typeof o=="function"){var u=o;o=function(){var h=Vh(s);u.call(h)}}vp(t,s,e,o)}else s=PF(r,t,e,o,n);return Vh(s)}aR=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ac(t.pendingLanes);r!==0&&(D0(t,r|1),Di(t,Mn()),!(Qr&6)&&(Nl=Mn()+500,Os()))}break;case 13:pa(function(){var n=zo(e,1);if(n!==null){var o=_i();_o(n,e,1,o)}}),pv(e,1)}};L0=function(e){if(e.tag===13){var t=zo(e,134217728);if(t!==null){var r=_i();_o(t,e,134217728,r)}pv(e,134217728)}};lR=function(e){if(e.tag===13){var t=bs(e),r=zo(e,t);if(r!==null){var n=_i();_o(r,e,t,n)}pv(e,t)}};uR=function(){return ln};cR=function(e,t){var r=ln;try{return ln=e,t()}finally{ln=r}};Nm=function(e,t,r){switch(t){case"input":if(Cm(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=dp(n);if(!o)throw Error(vt(90));HA(n),Cm(n,o)}}}break;case"textarea":VA(e,r);break;case"select":t=r.value,t!=null&&Sl(e,!!r.multiple,t,!1)}};QA=uv;YA=pa;var TF={usingClientEntryPoint:!1,Events:[ld,hl,dp,zA,JA,uv]},Eu={findFiberByHostInstance:ia,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},IF={bundleType:Eu.bundleType,version:Eu.version,rendererPackageName:Eu.rendererPackageName,rendererConfig:Eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=eR(e),e===null?null:e.stateNode},findFiberByHostInstance:Eu.findFiberByHostInstance||xF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$f.isDisabled&&$f.supportsFiber)try{ap=$f.inject(IF),To=$f}catch{}}qi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TF;qi.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yv(t))throw Error(vt(200));return CF(e,t,null,r)};qi.createRoot=function(e,t){if(!yv(e))throw Error(vt(299));var r=!1,n="",o=NC;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=hv(e,1,!1,null,null,r,!1,n,o),e[qo]=t.current,qc(e.nodeType===8?e.parentNode:e),new gv(t)};qi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(vt(188)):(e=Object.keys(e).join(","),Error(vt(268,e)));return e=eR(t),e=e===null?null:e.stateNode,e};qi.flushSync=function(e){return pa(e)};qi.hydrate=function(e,t,r){if(!_p(t))throw Error(vt(200));return Sp(null,e,t,!0,r)};qi.hydrateRoot=function(e,t,r){if(!yv(e))throw Error(vt(405));var n=r!=null&&r.hydratedSources||null,o=!1,a="",s=NC;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=OC(t,null,e,1,r??null,o,!1,a,s),e[qo]=t.current,qc(e),n)for(e=0;e<n.length;e++)r=n[e],o=r._getVersion,o=o(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new wp(t)};qi.render=function(e,t,r){if(!_p(t))throw Error(vt(200));return Sp(null,e,t,!1,r)};qi.unmountComponentAtNode=function(e){if(!_p(e))throw Error(vt(40));return e._reactRootContainer?(pa(function(){Sp(null,null,e,!1,function(){e._reactRootContainer=null,e[qo]=null})}),!0):!1};qi.unstable_batchedUpdates=uv;qi.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!_p(r))throw Error(vt(200));if(e==null||e._reactInternals===void 0)throw Error(vt(38));return Sp(e,t,r,!1,n)};qi.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}t(),e.exports=qi})(xI);var N1=vm;mm.createRoot=N1.createRoot,mm.hydrateRoot=N1.hydrateRoot;/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rd(){return rd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rd.apply(this,arguments)}var ys;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ys||(ys={}));const k1="popstate";function FF(e){e===void 0&&(e={});function t(n,o){let{pathname:a,search:s,hash:u}=n.location;return f0("",{pathname:a,search:s,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(n,o){return typeof o=="string"?o:Kh(o)}return NF(t,r,null,e)}function Vn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function mv(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function OF(){return Math.random().toString(36).substr(2,8)}function D1(e,t){return{usr:e.state,key:e.key,idx:t}}function f0(e,t,r,n){return r===void 0&&(r=null),rd({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ul(t):t,{state:r,key:t&&t.key||n||OF()})}function Kh(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ul(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function NF(e,t,r,n){n===void 0&&(n={});let{window:o=document.defaultView,v5Compat:a=!1}=n,s=o.history,u=ys.Pop,h=null,c=p();c==null&&(c=0,s.replaceState(rd({},s.state,{idx:c}),""));function p(){return(s.state||{idx:null}).idx}function y(){u=ys.Pop;let F=p(),b=F==null?null:F-c;c=F,h&&h({action:u,location:R.location,delta:b})}function m(F,b){u=ys.Push;let E=f0(R.location,F,b);r&&r(E,F),c=p()+1;let P=D1(E,c),j=R.createHref(E);try{s.pushState(P,"",j)}catch{o.location.assign(j)}a&&h&&h({action:u,location:R.location,delta:1})}function _(F,b){u=ys.Replace;let E=f0(R.location,F,b);r&&r(E,F),c=p();let P=D1(E,c),j=R.createHref(E);s.replaceState(P,"",j),a&&h&&h({action:u,location:R.location,delta:0})}function C(F){let b=o.location.origin!=="null"?o.location.origin:o.location.href,E=typeof F=="string"?F:Kh(F);return Vn(b,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,b)}let R={get action(){return u},get location(){return e(o,s)},listen(F){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(k1,y),h=F,()=>{o.removeEventListener(k1,y),h=null}},createHref(F){return t(o,F)},createURL:C,encodeLocation(F){let b=C(F);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:_,go(F){return s.go(F)}};return R}var L1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(L1||(L1={}));function kF(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?Ul(t):t,o=vv(n.pathname||"/",r);if(o==null)return null;let a=kC(e);DF(a);let s=null;for(let u=0;s==null&&u<a.length;++u)s=KF(a[u],qF(o));return s}function kC(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let o=(a,s,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};h.relativePath.startsWith("/")&&(Vn(h.relativePath.startsWith(n),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(n.length));let c=Rs([n,h.relativePath]),p=r.concat(h);a.children&&a.children.length>0&&(Vn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),kC(a.children,t,p,c)),!(a.path==null&&!a.index)&&t.push({path:c,score:$F(c,a.index),routesMeta:p})};return e.forEach((a,s)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))o(a,s);else for(let h of DC(a.path))o(a,s,h)}),t}function DC(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,o=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return o?[a,""]:[a];let s=DC(n.join("/")),u=[];return u.push(...s.map(h=>h===""?a:[a,h].join("/"))),o&&u.push(...s),u.map(h=>e.startsWith("/")&&h===""?"/":h)}function DF(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:VF(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const LF=/^:\w+$/,UF=3,MF=2,BF=1,jF=10,HF=-2,U1=e=>e==="*";function $F(e,t){let r=e.split("/"),n=r.length;return r.some(U1)&&(n+=HF),t&&(n+=MF),r.filter(o=>!U1(o)).reduce((o,a)=>o+(LF.test(a)?UF:a===""?BF:jF),n)}function VF(e,t){return e.length===t.length&&e.slice(0,-1).every((n,o)=>n===t[o])?e[e.length-1]-t[t.length-1]:0}function KF(e,t){let{routesMeta:r}=e,n={},o="/",a=[];for(let s=0;s<r.length;++s){let u=r[s],h=s===r.length-1,c=o==="/"?t:t.slice(o.length)||"/",p=WF({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},c);if(!p)return null;Object.assign(n,p.params);let y=u.route;a.push({params:n,pathname:Rs([o,p.pathname]),pathnameBase:YF(Rs([o,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(o=Rs([o,p.pathnameBase]))}return a}function WF(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=GF(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let a=o[0],s=a.replace(/(.)\/+$/,"$1"),u=o.slice(1);return{params:n.reduce((c,p,y)=>{if(p==="*"){let m=u[y]||"";s=a.slice(0,a.length-m.length).replace(/(.)\/+$/,"$1")}return c[p]=zF(u[y]||"",p),c},{}),pathname:a,pathnameBase:s,pattern:e}}function GF(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),mv(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(s,u)=>(n.push(u),"/([^\\/]+)"));return e.endsWith("*")?(n.push("*"),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),n]}function qF(e){try{return decodeURI(e)}catch(t){return mv(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function zF(e,t){try{return decodeURIComponent(e)}catch(r){return mv(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function vv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function JF(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:o=""}=typeof e=="string"?Ul(e):e;return{pathname:r?r.startsWith("/")?r:QF(r,t):t,search:XF(n),hash:ZF(o)}}function QF(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function my(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LC(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function UC(e,t,r,n){n===void 0&&(n=!1);let o;typeof e=="string"?o=Ul(e):(o=rd({},e),Vn(!o.pathname||!o.pathname.includes("?"),my("?","pathname","search",o)),Vn(!o.pathname||!o.pathname.includes("#"),my("#","pathname","hash",o)),Vn(!o.search||!o.search.includes("#"),my("#","search","hash",o)));let a=e===""||o.pathname==="",s=a?"/":o.pathname,u;if(n||s==null)u=r;else{let y=t.length-1;if(s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),y-=1;o.pathname=m.join("/")}u=y>=0?t[y]:"/"}let h=JF(o,u),c=s&&s!=="/"&&s.endsWith("/"),p=(a||s===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(c||p)&&(h.pathname+="/"),h}const Rs=e=>e.join("/").replace(/\/\/+/g,"/"),YF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),XF=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ZF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function eO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}/**
 * React Router v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const rO=typeof Object.is=="function"?Object.is:tO,{useState:nO,useEffect:iO,useLayoutEffect:oO,useDebugValue:sO}=ym;function aO(e,t,r){const n=t(),[{inst:o},a]=nO({inst:{value:n,getSnapshot:t}});return oO(()=>{o.value=n,o.getSnapshot=t,vy(o)&&a({inst:o})},[e,n,t]),iO(()=>(vy(o)&&a({inst:o}),e(()=>{vy(o)&&a({inst:o})})),[e]),sO(n),n}function vy(e){const t=e.getSnapshot,r=e.value;try{const n=t();return!rO(r,n)}catch{return!0}}function lO(e,t,r){return t()}const uO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cO=!uO,dO=cO?lO:aO;"useSyncExternalStore"in ym&&(e=>e.useSyncExternalStore)(ym);const MC=bt.createContext(null),wv=bt.createContext(null),cd=bt.createContext(null),Ep=bt.createContext(null),Ml=bt.createContext({outlet:null,matches:[]}),BC=bt.createContext(null);function h0(){return h0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h0.apply(this,arguments)}function fO(e,t){let{relative:r}=t===void 0?{}:t;Bl()||Vn(!1);let{basename:n,navigator:o}=bt.useContext(cd),{hash:a,pathname:s,search:u}=HC(e,{relative:r}),h=s;return n!=="/"&&(h=s==="/"?n:Rs([n,s])),o.createHref({pathname:h,search:u,hash:a})}function Bl(){return bt.useContext(Ep)!=null}function jl(){return Bl()||Vn(!1),bt.useContext(Ep).location}function jC(){Bl()||Vn(!1);let{basename:e,navigator:t}=bt.useContext(cd),{matches:r}=bt.useContext(Ml),{pathname:n}=jl(),o=JSON.stringify(LC(r).map(u=>u.pathnameBase)),a=bt.useRef(!1);return bt.useEffect(()=>{a.current=!0}),bt.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){t.go(u);return}let c=UC(u,JSON.parse(o),n,h.relative==="path");e!=="/"&&(c.pathname=c.pathname==="/"?e:Rs([e,c.pathname])),(h.replace?t.replace:t.push)(c,h.state,h)},[e,t,o,n])}function HC(e,t){let{relative:r}=t===void 0?{}:t,{matches:n}=bt.useContext(Ml),{pathname:o}=jl(),a=JSON.stringify(LC(n).map(s=>s.pathnameBase));return bt.useMemo(()=>UC(e,JSON.parse(a),o,r==="path"),[e,a,o,r])}function hO(e,t){Bl()||Vn(!1);let{navigator:r}=bt.useContext(cd),n=bt.useContext(wv),{matches:o}=bt.useContext(Ml),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let h=jl(),c;if(t){var p;let R=typeof t=="string"?Ul(t):t;u==="/"||(p=R.pathname)!=null&&p.startsWith(u)||Vn(!1),c=R}else c=h;let y=c.pathname||"/",m=u==="/"?y:y.slice(u.length)||"/",_=kF(e,{pathname:m}),C=mO(_&&_.map(R=>Object.assign({},R,{params:Object.assign({},s,R.params),pathname:Rs([u,r.encodeLocation?r.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?u:Rs([u,r.encodeLocation?r.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),o,n||void 0);return t&&C?bt.createElement(Ep.Provider,{value:{location:h0({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:ys.Pop}},C):C}function pO(){let e=SO(),t=eO(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return bt.createElement(bt.Fragment,null,bt.createElement("h2",null,"Unexpected Application Error!"),bt.createElement("h3",{style:{fontStyle:"italic"}},t),r?bt.createElement("pre",{style:o},r):null,a)}class gO extends bt.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location?{error:t.error,location:t.location}:{error:t.error||r.error,location:r.location}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error?bt.createElement(Ml.Provider,{value:this.props.routeContext},bt.createElement(BC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yO(e){let{routeContext:t,match:r,children:n}=e,o=bt.useContext(MC);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),bt.createElement(Ml.Provider,{value:t},n)}function mO(e,t,r){if(t===void 0&&(t=[]),e==null)if(r!=null&&r.errors)e=r.matches;else return null;let n=e,o=r==null?void 0:r.errors;if(o!=null){let a=n.findIndex(s=>s.route.id&&(o==null?void 0:o[s.route.id]));a>=0||Vn(!1),n=n.slice(0,Math.min(n.length,a+1))}return n.reduceRight((a,s,u)=>{let h=s.route.id?o==null?void 0:o[s.route.id]:null,c=null;r&&(s.route.ErrorBoundary?c=bt.createElement(s.route.ErrorBoundary,null):s.route.errorElement?c=s.route.errorElement:c=bt.createElement(pO,null));let p=t.concat(n.slice(0,u+1)),y=()=>{let m=a;return h?m=c:s.route.Component?m=bt.createElement(s.route.Component,null):s.route.element&&(m=s.route.element),bt.createElement(yO,{match:s,routeContext:{outlet:a,matches:p},children:m})};return r&&(s.route.ErrorBoundary||s.route.errorElement||u===0)?bt.createElement(gO,{location:r.location,component:c,error:h,children:y(),routeContext:{outlet:null,matches:p}}):y()},null)}var M1;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(M1||(M1={}));var Wh;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(Wh||(Wh={}));function vO(e){let t=bt.useContext(wv);return t||Vn(!1),t}function wO(e){let t=bt.useContext(Ml);return t||Vn(!1),t}function _O(e){let t=wO(),r=t.matches[t.matches.length-1];return r.route.id||Vn(!1),r.route.id}function SO(){var e;let t=bt.useContext(BC),r=vO(Wh.UseRouteError),n=_O(Wh.UseRouteError);return t||((e=r.errors)==null?void 0:e[n])}function wy(e){let{to:t,replace:r,state:n,relative:o}=e;Bl()||Vn(!1);let a=bt.useContext(wv),s=jC();return bt.useEffect(()=>{a&&a.navigation.state!=="idle"||s(t,{replace:r,state:n,relative:o})}),null}function yh(e){Vn(!1)}function EO(e){let{basename:t="/",children:r=null,location:n,navigationType:o=ys.Pop,navigator:a,static:s=!1}=e;Bl()&&Vn(!1);let u=t.replace(/^\/*/,"/"),h=bt.useMemo(()=>({basename:u,navigator:a,static:s}),[u,a,s]);typeof n=="string"&&(n=Ul(n));let{pathname:c="/",search:p="",hash:y="",state:m=null,key:_="default"}=n,C=bt.useMemo(()=>{let R=vv(c,u);return R==null?null:{location:{pathname:R,search:p,hash:y,state:m,key:_},navigationType:o}},[u,c,p,y,m,_,o]);return C==null?null:bt.createElement(cd.Provider,{value:h},bt.createElement(Ep.Provider,{children:r,value:C}))}function bO(e){let{children:t,location:r}=e,n=bt.useContext(MC),o=n&&!t?n.router.routes:p0(t);return hO(o,r)}var B1;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(B1||(B1={}));new Promise(()=>{});function p0(e,t){t===void 0&&(t=[]);let r=[];return bt.Children.forEach(e,(n,o)=>{if(!bt.isValidElement(n))return;let a=[...t,o];if(n.type===bt.Fragment){r.push.apply(r,p0(n.props.children,a));return}n.type!==yh&&Vn(!1),!n.props.index||!n.props.children||Vn(!1);let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=p0(n.props.children,a)),r.push(s)}),r}/**
 * React Router DOM v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function g0(){return g0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g0.apply(this,arguments)}function AO(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function RO(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function CO(e,t){return e.button===0&&(!t||t==="_self")&&!RO(e)}const xO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function PO(e){let{basename:t,children:r,window:n}=e,o=bt.useRef();o.current==null&&(o.current=FF({window:n,v5Compat:!0}));let a=o.current,[s,u]=bt.useState({action:a.action,location:a.location});return bt.useLayoutEffect(()=>a.listen(u),[a]),bt.createElement(EO,{basename:t,children:r,location:s.location,navigationType:s.action,navigator:a})}const TO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,j1=bt.forwardRef(function(t,r){let{onClick:n,relative:o,reloadDocument:a,replace:s,state:u,target:h,to:c,preventScrollReset:p}=t,y=AO(t,xO),{basename:m}=bt.useContext(cd),_,C=!1;if(typeof c=="string"&&IO.test(c)&&(_=c,TO)){let E=new URL(window.location.href),P=c.startsWith("//")?new URL(E.protocol+c):new URL(c),j=vv(P.pathname,m);P.origin===E.origin&&j!=null?c=j+P.search+P.hash:C=!0}let R=fO(c,{relative:o}),F=FO(c,{replace:s,state:u,target:h,preventScrollReset:p,relative:o});function b(E){n&&n(E),E.defaultPrevented||F(E)}return bt.createElement("a",g0({},y,{href:_||R,onClick:C||a?n:b,ref:r,target:h}))});var H1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(H1||(H1={}));var $1;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})($1||($1={}));function FO(e,t){let{target:r,replace:n,state:o,preventScrollReset:a,relative:s}=t===void 0?{}:t,u=jC(),h=jl(),c=HC(e,{relative:s});return bt.useCallback(p=>{if(CO(p,r)){p.preventDefault();let y=n!==void 0?n:Kh(h)===Kh(c);u(e,{replace:y,state:o,preventScrollReset:a,relative:s})}},[h,u,c,n,o,r,e,a,s])}var Si={},OO={get exports(){return Si},set exports(e){Si=e}},Le={},_y={},bu={},Sy={},Au={},V1;function NO(){if(V1)return Au;V1=1,Au.byteLength=u,Au.toByteArray=c,Au.fromByteArray=m;for(var e=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)e[o]=n[o],t[n.charCodeAt(o)]=o;t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;function s(_){var C=_.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var R=_.indexOf("=");R===-1&&(R=C);var F=R===C?0:4-R%4;return[R,F]}function u(_){var C=s(_),R=C[0],F=C[1];return(R+F)*3/4-F}function h(_,C,R){return(C+R)*3/4-R}function c(_){var C,R=s(_),F=R[0],b=R[1],E=new r(h(_,F,b)),P=0,j=b>0?F-4:F,H;for(H=0;H<j;H+=4)C=t[_.charCodeAt(H)]<<18|t[_.charCodeAt(H+1)]<<12|t[_.charCodeAt(H+2)]<<6|t[_.charCodeAt(H+3)],E[P++]=C>>16&255,E[P++]=C>>8&255,E[P++]=C&255;return b===2&&(C=t[_.charCodeAt(H)]<<2|t[_.charCodeAt(H+1)]>>4,E[P++]=C&255),b===1&&(C=t[_.charCodeAt(H)]<<10|t[_.charCodeAt(H+1)]<<4|t[_.charCodeAt(H+2)]>>2,E[P++]=C>>8&255,E[P++]=C&255),E}function p(_){return e[_>>18&63]+e[_>>12&63]+e[_>>6&63]+e[_&63]}function y(_,C,R){for(var F,b=[],E=C;E<R;E+=3)F=(_[E]<<16&16711680)+(_[E+1]<<8&65280)+(_[E+2]&255),b.push(p(F));return b.join("")}function m(_){for(var C,R=_.length,F=R%3,b=[],E=16383,P=0,j=R-F;P<j;P+=E)b.push(y(_,P,P+E>j?j:P+E));return F===1?(C=_[R-1],b.push(e[C>>2]+e[C<<4&63]+"==")):F===2&&(C=(_[R-2]<<8)+_[R-1],b.push(e[C>>10]+e[C>>4&63]+e[C<<2&63]+"=")),b.join("")}return Au}var Vf={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var K1;function kO(){return K1||(K1=1,Vf.read=function(e,t,r,n,o){var a,s,u=o*8-n-1,h=(1<<u)-1,c=h>>1,p=-7,y=r?o-1:0,m=r?-1:1,_=e[t+y];for(y+=m,a=_&(1<<-p)-1,_>>=-p,p+=u;p>0;a=a*256+e[t+y],y+=m,p-=8);for(s=a&(1<<-p)-1,a>>=-p,p+=n;p>0;s=s*256+e[t+y],y+=m,p-=8);if(a===0)a=1-c;else{if(a===h)return s?NaN:(_?-1:1)*(1/0);s=s+Math.pow(2,n),a=a-c}return(_?-1:1)*s*Math.pow(2,a-n)},Vf.write=function(e,t,r,n,o,a){var s,u,h,c=a*8-o-1,p=(1<<c)-1,y=p>>1,m=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:a-1,C=n?1:-1,R=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,s=p):(s=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-s))<1&&(s--,h*=2),s+y>=1?t+=m/h:t+=m*Math.pow(2,1-y),t*h>=2&&(s++,h/=2),s+y>=p?(u=0,s=p):s+y>=1?(u=(t*h-1)*Math.pow(2,o),s=s+y):(u=t*Math.pow(2,y-1)*Math.pow(2,o),s=0));o>=8;e[r+_]=u&255,_+=C,u/=256,o-=8);for(s=s<<o|u,c+=o;c>0;e[r+_]=s&255,_+=C,s/=256,c-=8);e[r+_-C]|=R*128}),Vf}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var W1;function Ns(){return W1||(W1=1,function(e){const t=NO(),r=kO(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=E,e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=a(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const K=new Uint8Array(1),T={foo:function(){return 42}};return Object.setPrototypeOf(T,Uint8Array.prototype),Object.setPrototypeOf(K,T),K.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function s(K){if(K>o)throw new RangeError('The value "'+K+'" is invalid for option "size"');const T=new Uint8Array(K);return Object.setPrototypeOf(T,u.prototype),T}function u(K,T,U){if(typeof K=="number"){if(typeof T=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(K)}return h(K,T,U)}u.poolSize=8192;function h(K,T,U){if(typeof K=="string")return m(K,T);if(ArrayBuffer.isView(K))return C(K);if(K==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K);if(Xt(K,ArrayBuffer)||K&&Xt(K.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Xt(K,SharedArrayBuffer)||K&&Xt(K.buffer,SharedArrayBuffer)))return R(K,T,U);if(typeof K=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=K.valueOf&&K.valueOf();if(k!=null&&k!==K)return u.from(k,T,U);const ge=F(K);if(ge)return ge;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof K[Symbol.toPrimitive]=="function")return u.from(K[Symbol.toPrimitive]("string"),T,U);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K)}u.from=function(K,T,U){return h(K,T,U)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function c(K){if(typeof K!="number")throw new TypeError('"size" argument must be of type number');if(K<0)throw new RangeError('The value "'+K+'" is invalid for option "size"')}function p(K,T,U){return c(K),K<=0?s(K):T!==void 0?typeof U=="string"?s(K).fill(T,U):s(K).fill(T):s(K)}u.alloc=function(K,T,U){return p(K,T,U)};function y(K){return c(K),s(K<0?0:b(K)|0)}u.allocUnsafe=function(K){return y(K)},u.allocUnsafeSlow=function(K){return y(K)};function m(K,T){if((typeof T!="string"||T==="")&&(T="utf8"),!u.isEncoding(T))throw new TypeError("Unknown encoding: "+T);const U=P(K,T)|0;let k=s(U);const ge=k.write(K,T);return ge!==U&&(k=k.slice(0,ge)),k}function _(K){const T=K.length<0?0:b(K.length)|0,U=s(T);for(let k=0;k<T;k+=1)U[k]=K[k]&255;return U}function C(K){if(Xt(K,Uint8Array)){const T=new Uint8Array(K);return R(T.buffer,T.byteOffset,T.byteLength)}return _(K)}function R(K,T,U){if(T<0||K.byteLength<T)throw new RangeError('"offset" is outside of buffer bounds');if(K.byteLength<T+(U||0))throw new RangeError('"length" is outside of buffer bounds');let k;return T===void 0&&U===void 0?k=new Uint8Array(K):U===void 0?k=new Uint8Array(K,T):k=new Uint8Array(K,T,U),Object.setPrototypeOf(k,u.prototype),k}function F(K){if(u.isBuffer(K)){const T=b(K.length)|0,U=s(T);return U.length===0||K.copy(U,0,0,T),U}if(K.length!==void 0)return typeof K.length!="number"||dr(K.length)?s(0):_(K);if(K.type==="Buffer"&&Array.isArray(K.data))return _(K.data)}function b(K){if(K>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return K|0}function E(K){return+K!=K&&(K=0),u.alloc(+K)}u.isBuffer=function(T){return T!=null&&T._isBuffer===!0&&T!==u.prototype},u.compare=function(T,U){if(Xt(T,Uint8Array)&&(T=u.from(T,T.offset,T.byteLength)),Xt(U,Uint8Array)&&(U=u.from(U,U.offset,U.byteLength)),!u.isBuffer(T)||!u.isBuffer(U))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(T===U)return 0;let k=T.length,ge=U.length;for(let Pe=0,oe=Math.min(k,ge);Pe<oe;++Pe)if(T[Pe]!==U[Pe]){k=T[Pe],ge=U[Pe];break}return k<ge?-1:ge<k?1:0},u.isEncoding=function(T){switch(String(T).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(T,U){if(!Array.isArray(T))throw new TypeError('"list" argument must be an Array of Buffers');if(T.length===0)return u.alloc(0);let k;if(U===void 0)for(U=0,k=0;k<T.length;++k)U+=T[k].length;const ge=u.allocUnsafe(U);let Pe=0;for(k=0;k<T.length;++k){let oe=T[k];if(Xt(oe,Uint8Array))Pe+oe.length>ge.length?(u.isBuffer(oe)||(oe=u.from(oe)),oe.copy(ge,Pe)):Uint8Array.prototype.set.call(ge,oe,Pe);else if(u.isBuffer(oe))oe.copy(ge,Pe);else throw new TypeError('"list" argument must be an Array of Buffers');Pe+=oe.length}return ge};function P(K,T){if(u.isBuffer(K))return K.length;if(ArrayBuffer.isView(K)||Xt(K,ArrayBuffer))return K.byteLength;if(typeof K!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof K);const U=K.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&U===0)return 0;let ge=!1;for(;;)switch(T){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return Ee(K).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U*2;case"hex":return U>>>1;case"base64":return Nt(K).length;default:if(ge)return k?-1:Ee(K).length;T=(""+T).toLowerCase(),ge=!0}}u.byteLength=P;function j(K,T,U){let k=!1;if((T===void 0||T<0)&&(T=0),T>this.length||((U===void 0||U>this.length)&&(U=this.length),U<=0)||(U>>>=0,T>>>=0,U<=T))return"";for(K||(K="utf8");;)switch(K){case"hex":return Oe(this,T,U);case"utf8":case"utf-8":return Ce(this,T,U);case"ascii":return $e(this,T,U);case"latin1":case"binary":return we(this,T,U);case"base64":return ae(this,T,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,T,U);default:if(k)throw new TypeError("Unknown encoding: "+K);K=(K+"").toLowerCase(),k=!0}}u.prototype._isBuffer=!0;function H(K,T,U){const k=K[T];K[T]=K[U],K[U]=k}u.prototype.swap16=function(){const T=this.length;if(T%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let U=0;U<T;U+=2)H(this,U,U+1);return this},u.prototype.swap32=function(){const T=this.length;if(T%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let U=0;U<T;U+=4)H(this,U,U+3),H(this,U+1,U+2);return this},u.prototype.swap64=function(){const T=this.length;if(T%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let U=0;U<T;U+=8)H(this,U,U+7),H(this,U+1,U+6),H(this,U+2,U+5),H(this,U+3,U+4);return this},u.prototype.toString=function(){const T=this.length;return T===0?"":arguments.length===0?Ce(this,0,T):j.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(T){if(!u.isBuffer(T))throw new TypeError("Argument must be a Buffer");return this===T?!0:u.compare(this,T)===0},u.prototype.inspect=function(){let T="";const U=e.INSPECT_MAX_BYTES;return T=this.toString("hex",0,U).replace(/(.{2})/g,"$1 ").trim(),this.length>U&&(T+=" ... "),"<Buffer "+T+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(T,U,k,ge,Pe){if(Xt(T,Uint8Array)&&(T=u.from(T,T.offset,T.byteLength)),!u.isBuffer(T))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof T);if(U===void 0&&(U=0),k===void 0&&(k=T?T.length:0),ge===void 0&&(ge=0),Pe===void 0&&(Pe=this.length),U<0||k>T.length||ge<0||Pe>this.length)throw new RangeError("out of range index");if(ge>=Pe&&U>=k)return 0;if(ge>=Pe)return-1;if(U>=k)return 1;if(U>>>=0,k>>>=0,ge>>>=0,Pe>>>=0,this===T)return 0;let oe=Pe-ge,mt=k-U;const Ht=Math.min(oe,mt),wt=this.slice(ge,Pe),_t=T.slice(U,k);for(let Se=0;Se<Ht;++Se)if(wt[Se]!==_t[Se]){oe=wt[Se],mt=_t[Se];break}return oe<mt?-1:mt<oe?1:0};function $(K,T,U,k,ge){if(K.length===0)return-1;if(typeof U=="string"?(k=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),U=+U,dr(U)&&(U=ge?0:K.length-1),U<0&&(U=K.length+U),U>=K.length){if(ge)return-1;U=K.length-1}else if(U<0)if(ge)U=0;else return-1;if(typeof T=="string"&&(T=u.from(T,k)),u.isBuffer(T))return T.length===0?-1:O(K,T,U,k,ge);if(typeof T=="number")return T=T&255,typeof Uint8Array.prototype.indexOf=="function"?ge?Uint8Array.prototype.indexOf.call(K,T,U):Uint8Array.prototype.lastIndexOf.call(K,T,U):O(K,[T],U,k,ge);throw new TypeError("val must be string, number or Buffer")}function O(K,T,U,k,ge){let Pe=1,oe=K.length,mt=T.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(K.length<2||T.length<2)return-1;Pe=2,oe/=2,mt/=2,U/=2}function Ht(_t,Se){return Pe===1?_t[Se]:_t.readUInt16BE(Se*Pe)}let wt;if(ge){let _t=-1;for(wt=U;wt<oe;wt++)if(Ht(K,wt)===Ht(T,_t===-1?0:wt-_t)){if(_t===-1&&(_t=wt),wt-_t+1===mt)return _t*Pe}else _t!==-1&&(wt-=wt-_t),_t=-1}else for(U+mt>oe&&(U=oe-mt),wt=U;wt>=0;wt--){let _t=!0;for(let Se=0;Se<mt;Se++)if(Ht(K,wt+Se)!==Ht(T,Se)){_t=!1;break}if(_t)return wt}return-1}u.prototype.includes=function(T,U,k){return this.indexOf(T,U,k)!==-1},u.prototype.indexOf=function(T,U,k){return $(this,T,U,k,!0)},u.prototype.lastIndexOf=function(T,U,k){return $(this,T,U,k,!1)};function ne(K,T,U,k){U=Number(U)||0;const ge=K.length-U;k?(k=Number(k),k>ge&&(k=ge)):k=ge;const Pe=T.length;k>Pe/2&&(k=Pe/2);let oe;for(oe=0;oe<k;++oe){const mt=parseInt(T.substr(oe*2,2),16);if(dr(mt))return oe;K[U+oe]=mt}return oe}function ee(K,T,U,k){return Kt(Ee(T,K.length-U),K,U,k)}function D(K,T,U,k){return Kt(rt(T),K,U,k)}function Q(K,T,U,k){return Kt(Nt(T),K,U,k)}function De(K,T,U,k){return Kt(lt(T,K.length-U),K,U,k)}u.prototype.write=function(T,U,k,ge){if(U===void 0)ge="utf8",k=this.length,U=0;else if(k===void 0&&typeof U=="string")ge=U,k=this.length,U=0;else if(isFinite(U))U=U>>>0,isFinite(k)?(k=k>>>0,ge===void 0&&(ge="utf8")):(ge=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Pe=this.length-U;if((k===void 0||k>Pe)&&(k=Pe),T.length>0&&(k<0||U<0)||U>this.length)throw new RangeError("Attempt to write outside buffer bounds");ge||(ge="utf8");let oe=!1;for(;;)switch(ge){case"hex":return ne(this,T,U,k);case"utf8":case"utf-8":return ee(this,T,U,k);case"ascii":case"latin1":case"binary":return D(this,T,U,k);case"base64":return Q(this,T,U,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return De(this,T,U,k);default:if(oe)throw new TypeError("Unknown encoding: "+ge);ge=(""+ge).toLowerCase(),oe=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ae(K,T,U){return T===0&&U===K.length?t.fromByteArray(K):t.fromByteArray(K.slice(T,U))}function Ce(K,T,U){U=Math.min(K.length,U);const k=[];let ge=T;for(;ge<U;){const Pe=K[ge];let oe=null,mt=Pe>239?4:Pe>223?3:Pe>191?2:1;if(ge+mt<=U){let Ht,wt,_t,Se;switch(mt){case 1:Pe<128&&(oe=Pe);break;case 2:Ht=K[ge+1],(Ht&192)===128&&(Se=(Pe&31)<<6|Ht&63,Se>127&&(oe=Se));break;case 3:Ht=K[ge+1],wt=K[ge+2],(Ht&192)===128&&(wt&192)===128&&(Se=(Pe&15)<<12|(Ht&63)<<6|wt&63,Se>2047&&(Se<55296||Se>57343)&&(oe=Se));break;case 4:Ht=K[ge+1],wt=K[ge+2],_t=K[ge+3],(Ht&192)===128&&(wt&192)===128&&(_t&192)===128&&(Se=(Pe&15)<<18|(Ht&63)<<12|(wt&63)<<6|_t&63,Se>65535&&Se<1114112&&(oe=Se))}}oe===null?(oe=65533,mt=1):oe>65535&&(oe-=65536,k.push(oe>>>10&1023|55296),oe=56320|oe&1023),k.push(oe),ge+=mt}return Ve(k)}const Be=4096;function Ve(K){const T=K.length;if(T<=Be)return String.fromCharCode.apply(String,K);let U="",k=0;for(;k<T;)U+=String.fromCharCode.apply(String,K.slice(k,k+=Be));return U}function $e(K,T,U){let k="";U=Math.min(K.length,U);for(let ge=T;ge<U;++ge)k+=String.fromCharCode(K[ge]&127);return k}function we(K,T,U){let k="";U=Math.min(K.length,U);for(let ge=T;ge<U;++ge)k+=String.fromCharCode(K[ge]);return k}function Oe(K,T,U){const k=K.length;(!T||T<0)&&(T=0),(!U||U<0||U>k)&&(U=k);let ge="";for(let Pe=T;Pe<U;++Pe)ge+=dn[K[Pe]];return ge}function me(K,T,U){const k=K.slice(T,U);let ge="";for(let Pe=0;Pe<k.length-1;Pe+=2)ge+=String.fromCharCode(k[Pe]+k[Pe+1]*256);return ge}u.prototype.slice=function(T,U){const k=this.length;T=~~T,U=U===void 0?k:~~U,T<0?(T+=k,T<0&&(T=0)):T>k&&(T=k),U<0?(U+=k,U<0&&(U=0)):U>k&&(U=k),U<T&&(U=T);const ge=this.subarray(T,U);return Object.setPrototypeOf(ge,u.prototype),ge};function We(K,T,U){if(K%1!==0||K<0)throw new RangeError("offset is not uint");if(K+T>U)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(T,U,k){T=T>>>0,U=U>>>0,k||We(T,U,this.length);let ge=this[T],Pe=1,oe=0;for(;++oe<U&&(Pe*=256);)ge+=this[T+oe]*Pe;return ge},u.prototype.readUintBE=u.prototype.readUIntBE=function(T,U,k){T=T>>>0,U=U>>>0,k||We(T,U,this.length);let ge=this[T+--U],Pe=1;for(;U>0&&(Pe*=256);)ge+=this[T+--U]*Pe;return ge},u.prototype.readUint8=u.prototype.readUInt8=function(T,U){return T=T>>>0,U||We(T,1,this.length),this[T]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(T,U){return T=T>>>0,U||We(T,2,this.length),this[T]|this[T+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(T,U){return T=T>>>0,U||We(T,2,this.length),this[T]<<8|this[T+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(T,U){return T=T>>>0,U||We(T,4,this.length),(this[T]|this[T+1]<<8|this[T+2]<<16)+this[T+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(T,U){return T=T>>>0,U||We(T,4,this.length),this[T]*16777216+(this[T+1]<<16|this[T+2]<<8|this[T+3])},u.prototype.readBigUInt64LE=te(function(T){T=T>>>0,S(T,"offset");const U=this[T],k=this[T+7];(U===void 0||k===void 0)&&B(T,this.length-8);const ge=U+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24,Pe=this[++T]+this[++T]*2**8+this[++T]*2**16+k*2**24;return BigInt(ge)+(BigInt(Pe)<<BigInt(32))}),u.prototype.readBigUInt64BE=te(function(T){T=T>>>0,S(T,"offset");const U=this[T],k=this[T+7];(U===void 0||k===void 0)&&B(T,this.length-8);const ge=U*2**24+this[++T]*2**16+this[++T]*2**8+this[++T],Pe=this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+k;return(BigInt(ge)<<BigInt(32))+BigInt(Pe)}),u.prototype.readIntLE=function(T,U,k){T=T>>>0,U=U>>>0,k||We(T,U,this.length);let ge=this[T],Pe=1,oe=0;for(;++oe<U&&(Pe*=256);)ge+=this[T+oe]*Pe;return Pe*=128,ge>=Pe&&(ge-=Math.pow(2,8*U)),ge},u.prototype.readIntBE=function(T,U,k){T=T>>>0,U=U>>>0,k||We(T,U,this.length);let ge=U,Pe=1,oe=this[T+--ge];for(;ge>0&&(Pe*=256);)oe+=this[T+--ge]*Pe;return Pe*=128,oe>=Pe&&(oe-=Math.pow(2,8*U)),oe},u.prototype.readInt8=function(T,U){return T=T>>>0,U||We(T,1,this.length),this[T]&128?(255-this[T]+1)*-1:this[T]},u.prototype.readInt16LE=function(T,U){T=T>>>0,U||We(T,2,this.length);const k=this[T]|this[T+1]<<8;return k&32768?k|4294901760:k},u.prototype.readInt16BE=function(T,U){T=T>>>0,U||We(T,2,this.length);const k=this[T+1]|this[T]<<8;return k&32768?k|4294901760:k},u.prototype.readInt32LE=function(T,U){return T=T>>>0,U||We(T,4,this.length),this[T]|this[T+1]<<8|this[T+2]<<16|this[T+3]<<24},u.prototype.readInt32BE=function(T,U){return T=T>>>0,U||We(T,4,this.length),this[T]<<24|this[T+1]<<16|this[T+2]<<8|this[T+3]},u.prototype.readBigInt64LE=te(function(T){T=T>>>0,S(T,"offset");const U=this[T],k=this[T+7];(U===void 0||k===void 0)&&B(T,this.length-8);const ge=this[T+4]+this[T+5]*2**8+this[T+6]*2**16+(k<<24);return(BigInt(ge)<<BigInt(32))+BigInt(U+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24)}),u.prototype.readBigInt64BE=te(function(T){T=T>>>0,S(T,"offset");const U=this[T],k=this[T+7];(U===void 0||k===void 0)&&B(T,this.length-8);const ge=(U<<24)+this[++T]*2**16+this[++T]*2**8+this[++T];return(BigInt(ge)<<BigInt(32))+BigInt(this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+k)}),u.prototype.readFloatLE=function(T,U){return T=T>>>0,U||We(T,4,this.length),r.read(this,T,!0,23,4)},u.prototype.readFloatBE=function(T,U){return T=T>>>0,U||We(T,4,this.length),r.read(this,T,!1,23,4)},u.prototype.readDoubleLE=function(T,U){return T=T>>>0,U||We(T,8,this.length),r.read(this,T,!0,52,8)},u.prototype.readDoubleBE=function(T,U){return T=T>>>0,U||We(T,8,this.length),r.read(this,T,!1,52,8)};function et(K,T,U,k,ge,Pe){if(!u.isBuffer(K))throw new TypeError('"buffer" argument must be a Buffer instance');if(T>ge||T<Pe)throw new RangeError('"value" argument is out of bounds');if(U+k>K.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(T,U,k,ge){if(T=+T,U=U>>>0,k=k>>>0,!ge){const mt=Math.pow(2,8*k)-1;et(this,T,U,k,mt,0)}let Pe=1,oe=0;for(this[U]=T&255;++oe<k&&(Pe*=256);)this[U+oe]=T/Pe&255;return U+k},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(T,U,k,ge){if(T=+T,U=U>>>0,k=k>>>0,!ge){const mt=Math.pow(2,8*k)-1;et(this,T,U,k,mt,0)}let Pe=k-1,oe=1;for(this[U+Pe]=T&255;--Pe>=0&&(oe*=256);)this[U+Pe]=T/oe&255;return U+k},u.prototype.writeUint8=u.prototype.writeUInt8=function(T,U,k){return T=+T,U=U>>>0,k||et(this,T,U,1,255,0),this[U]=T&255,U+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(T,U,k){return T=+T,U=U>>>0,k||et(this,T,U,2,65535,0),this[U]=T&255,this[U+1]=T>>>8,U+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(T,U,k){return T=+T,U=U>>>0,k||et(this,T,U,2,65535,0),this[U]=T>>>8,this[U+1]=T&255,U+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(T,U,k){return T=+T,U=U>>>0,k||et(this,T,U,4,4294967295,0),this[U+3]=T>>>24,this[U+2]=T>>>16,this[U+1]=T>>>8,this[U]=T&255,U+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(T,U,k){return T=+T,U=U>>>0,k||et(this,T,U,4,4294967295,0),this[U]=T>>>24,this[U+1]=T>>>16,this[U+2]=T>>>8,this[U+3]=T&255,U+4};function Et(K,T,U,k,ge){I(T,k,ge,K,U,7);let Pe=Number(T&BigInt(4294967295));K[U++]=Pe,Pe=Pe>>8,K[U++]=Pe,Pe=Pe>>8,K[U++]=Pe,Pe=Pe>>8,K[U++]=Pe;let oe=Number(T>>BigInt(32)&BigInt(4294967295));return K[U++]=oe,oe=oe>>8,K[U++]=oe,oe=oe>>8,K[U++]=oe,oe=oe>>8,K[U++]=oe,U}function Bt(K,T,U,k,ge){I(T,k,ge,K,U,7);let Pe=Number(T&BigInt(4294967295));K[U+7]=Pe,Pe=Pe>>8,K[U+6]=Pe,Pe=Pe>>8,K[U+5]=Pe,Pe=Pe>>8,K[U+4]=Pe;let oe=Number(T>>BigInt(32)&BigInt(4294967295));return K[U+3]=oe,oe=oe>>8,K[U+2]=oe,oe=oe>>8,K[U+1]=oe,oe=oe>>8,K[U]=oe,U+8}u.prototype.writeBigUInt64LE=te(function(T,U=0){return Et(this,T,U,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=te(function(T,U=0){return Bt(this,T,U,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(T,U,k,ge){if(T=+T,U=U>>>0,!ge){const Ht=Math.pow(2,8*k-1);et(this,T,U,k,Ht-1,-Ht)}let Pe=0,oe=1,mt=0;for(this[U]=T&255;++Pe<k&&(oe*=256);)T<0&&mt===0&&this[U+Pe-1]!==0&&(mt=1),this[U+Pe]=(T/oe>>0)-mt&255;return U+k},u.prototype.writeIntBE=function(T,U,k,ge){if(T=+T,U=U>>>0,!ge){const Ht=Math.pow(2,8*k-1);et(this,T,U,k,Ht-1,-Ht)}let Pe=k-1,oe=1,mt=0;for(this[U+Pe]=T&255;--Pe>=0&&(oe*=256);)T<0&&mt===0&&this[U+Pe+1]!==0&&(mt=1),this[U+Pe]=(T/oe>>0)-mt&255;return U+k},u.prototype.writeInt8=function(T,U,k){return T=+T,U=U>>>0,k||et(this,T,U,1,127,-128),T<0&&(T=255+T+1),this[U]=T&255,U+1},u.prototype.writeInt16LE=function(T,U,k){return T=+T,U=U>>>0,k||et(this,T,U,2,32767,-32768),this[U]=T&255,this[U+1]=T>>>8,U+2},u.prototype.writeInt16BE=function(T,U,k){return T=+T,U=U>>>0,k||et(this,T,U,2,32767,-32768),this[U]=T>>>8,this[U+1]=T&255,U+2},u.prototype.writeInt32LE=function(T,U,k){return T=+T,U=U>>>0,k||et(this,T,U,4,2147483647,-2147483648),this[U]=T&255,this[U+1]=T>>>8,this[U+2]=T>>>16,this[U+3]=T>>>24,U+4},u.prototype.writeInt32BE=function(T,U,k){return T=+T,U=U>>>0,k||et(this,T,U,4,2147483647,-2147483648),T<0&&(T=4294967295+T+1),this[U]=T>>>24,this[U+1]=T>>>16,this[U+2]=T>>>8,this[U+3]=T&255,U+4},u.prototype.writeBigInt64LE=te(function(T,U=0){return Et(this,T,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=te(function(T,U=0){return Bt(this,T,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Vt(K,T,U,k,ge,Pe){if(U+k>K.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function Ke(K,T,U,k,ge){return T=+T,U=U>>>0,ge||Vt(K,T,U,4),r.write(K,T,U,k,23,4),U+4}u.prototype.writeFloatLE=function(T,U,k){return Ke(this,T,U,!0,k)},u.prototype.writeFloatBE=function(T,U,k){return Ke(this,T,U,!1,k)};function St(K,T,U,k,ge){return T=+T,U=U>>>0,ge||Vt(K,T,U,8),r.write(K,T,U,k,52,8),U+8}u.prototype.writeDoubleLE=function(T,U,k){return St(this,T,U,!0,k)},u.prototype.writeDoubleBE=function(T,U,k){return St(this,T,U,!1,k)},u.prototype.copy=function(T,U,k,ge){if(!u.isBuffer(T))throw new TypeError("argument should be a Buffer");if(k||(k=0),!ge&&ge!==0&&(ge=this.length),U>=T.length&&(U=T.length),U||(U=0),ge>0&&ge<k&&(ge=k),ge===k||T.length===0||this.length===0)return 0;if(U<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(ge<0)throw new RangeError("sourceEnd out of bounds");ge>this.length&&(ge=this.length),T.length-U<ge-k&&(ge=T.length-U+k);const Pe=ge-k;return this===T&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(U,k,ge):Uint8Array.prototype.set.call(T,this.subarray(k,ge),U),Pe},u.prototype.fill=function(T,U,k,ge){if(typeof T=="string"){if(typeof U=="string"?(ge=U,U=0,k=this.length):typeof k=="string"&&(ge=k,k=this.length),ge!==void 0&&typeof ge!="string")throw new TypeError("encoding must be a string");if(typeof ge=="string"&&!u.isEncoding(ge))throw new TypeError("Unknown encoding: "+ge);if(T.length===1){const oe=T.charCodeAt(0);(ge==="utf8"&&oe<128||ge==="latin1")&&(T=oe)}}else typeof T=="number"?T=T&255:typeof T=="boolean"&&(T=Number(T));if(U<0||this.length<U||this.length<k)throw new RangeError("Out of range index");if(k<=U)return this;U=U>>>0,k=k===void 0?this.length:k>>>0,T||(T=0);let Pe;if(typeof T=="number")for(Pe=U;Pe<k;++Pe)this[Pe]=T;else{const oe=u.isBuffer(T)?T:u.from(T,ge),mt=oe.length;if(mt===0)throw new TypeError('The value "'+T+'" is invalid for argument "value"');for(Pe=0;Pe<k-U;++Pe)this[Pe+U]=oe[Pe%mt]}return this};const jt={};function Yt(K,T,U){jt[K]=class extends U{constructor(){super(),Object.defineProperty(this,"message",{value:T.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${K}]`,this.stack,delete this.name}get code(){return K}set code(ge){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ge,writable:!0})}toString(){return`${this.name} [${K}]: ${this.message}`}}}Yt("ERR_BUFFER_OUT_OF_BOUNDS",function(K){return K?`${K} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Yt("ERR_INVALID_ARG_TYPE",function(K,T){return`The "${K}" argument must be of type number. Received type ${typeof T}`},TypeError),Yt("ERR_OUT_OF_RANGE",function(K,T,U){let k=`The value of "${K}" is out of range.`,ge=U;return Number.isInteger(U)&&Math.abs(U)>2**32?ge=ut(String(U)):typeof U=="bigint"&&(ge=String(U),(U>BigInt(2)**BigInt(32)||U<-(BigInt(2)**BigInt(32)))&&(ge=ut(ge)),ge+="n"),k+=` It must be ${T}. Received ${ge}`,k},RangeError);function ut(K){let T="",U=K.length;const k=K[0]==="-"?1:0;for(;U>=k+4;U-=3)T=`_${K.slice(U-3,U)}${T}`;return`${K.slice(0,U)}${T}`}function Z(K,T,U){S(T,"offset"),(K[T]===void 0||K[T+U]===void 0)&&B(T,K.length-(U+1))}function I(K,T,U,k,ge,Pe){if(K>U||K<T){const oe=typeof T=="bigint"?"n":"";let mt;throw Pe>3?T===0||T===BigInt(0)?mt=`>= 0${oe} and < 2${oe} ** ${(Pe+1)*8}${oe}`:mt=`>= -(2${oe} ** ${(Pe+1)*8-1}${oe}) and < 2 ** ${(Pe+1)*8-1}${oe}`:mt=`>= ${T}${oe} and <= ${U}${oe}`,new jt.ERR_OUT_OF_RANGE("value",mt,K)}Z(k,ge,Pe)}function S(K,T){if(typeof K!="number")throw new jt.ERR_INVALID_ARG_TYPE(T,"number",K)}function B(K,T,U){throw Math.floor(K)!==K?(S(K,U),new jt.ERR_OUT_OF_RANGE(U||"offset","an integer",K)):T<0?new jt.ERR_BUFFER_OUT_OF_BOUNDS:new jt.ERR_OUT_OF_RANGE(U||"offset",`>= ${U?1:0} and <= ${T}`,K)}const G=/[^+/0-9A-Za-z-_]/g;function de(K){if(K=K.split("=")[0],K=K.trim().replace(G,""),K.length<2)return"";for(;K.length%4!==0;)K=K+"=";return K}function Ee(K,T){T=T||1/0;let U;const k=K.length;let ge=null;const Pe=[];for(let oe=0;oe<k;++oe){if(U=K.charCodeAt(oe),U>55295&&U<57344){if(!ge){if(U>56319){(T-=3)>-1&&Pe.push(239,191,189);continue}else if(oe+1===k){(T-=3)>-1&&Pe.push(239,191,189);continue}ge=U;continue}if(U<56320){(T-=3)>-1&&Pe.push(239,191,189),ge=U;continue}U=(ge-55296<<10|U-56320)+65536}else ge&&(T-=3)>-1&&Pe.push(239,191,189);if(ge=null,U<128){if((T-=1)<0)break;Pe.push(U)}else if(U<2048){if((T-=2)<0)break;Pe.push(U>>6|192,U&63|128)}else if(U<65536){if((T-=3)<0)break;Pe.push(U>>12|224,U>>6&63|128,U&63|128)}else if(U<1114112){if((T-=4)<0)break;Pe.push(U>>18|240,U>>12&63|128,U>>6&63|128,U&63|128)}else throw new Error("Invalid code point")}return Pe}function rt(K){const T=[];for(let U=0;U<K.length;++U)T.push(K.charCodeAt(U)&255);return T}function lt(K,T){let U,k,ge;const Pe=[];for(let oe=0;oe<K.length&&!((T-=2)<0);++oe)U=K.charCodeAt(oe),k=U>>8,ge=U%256,Pe.push(ge),Pe.push(k);return Pe}function Nt(K){return t.toByteArray(de(K))}function Kt(K,T,U,k){let ge;for(ge=0;ge<k&&!(ge+U>=T.length||ge>=K.length);++ge)T[ge+U]=K[ge];return ge}function Xt(K,T){return K instanceof T||K!=null&&K.constructor!=null&&K.constructor.name!=null&&K.constructor.name===T.name}function dr(K){return K!==K}const dn=function(){const K="0123456789abcdef",T=new Array(256);for(let U=0;U<16;++U){const k=U*16;for(let ge=0;ge<16;++ge)T[k+ge]=K[U]+K[ge]}return T}();function te(K){return typeof BigInt>"u"?fe:K}function fe(){throw new Error("BigInt not supported")}}(Sy)),Sy}var Ey,G1;function DO(){if(G1)return Ey;G1=1;var{Buffer:e}=Ns(),t={},r=t.LEFT_BRACE=1,n=t.RIGHT_BRACE=2,o=t.LEFT_BRACKET=3,a=t.RIGHT_BRACKET=4,s=t.COLON=5,u=t.COMMA=6,h=t.TRUE=7,c=t.FALSE=8,p=t.NULL=9,y=t.STRING=10,m=t.NUMBER=11,_=t.START=17,C=t.STOP=18,R=t.TRUE1=33,F=t.TRUE2=34,b=t.TRUE3=35,E=t.FALSE1=49,P=t.FALSE2=50,j=t.FALSE3=51,H=t.FALSE4=52,$=t.NULL1=65,O=t.NULL2=66,ne=t.NULL3=67,ee=t.NUMBER1=81,D=t.NUMBER3=83,Q=t.STRING1=97,De=t.STRING2=98,ae=t.STRING3=99,Ce=t.STRING4=100,Be=t.STRING5=101,Ve=t.STRING6=102,$e=t.VALUE=113,we=t.KEY=114,Oe=t.OBJECT=129,me=t.ARRAY=130,We="\\".charCodeAt(0),et="/".charCodeAt(0),Et="\b".charCodeAt(0),Bt="\f".charCodeAt(0),Vt=`
`.charCodeAt(0),Ke="\r".charCodeAt(0),St="	".charCodeAt(0),jt=64*1024;function Yt(I){return e.alloc?e.alloc(I):new e(I)}function ut(){this.tState=_,this.value=void 0,this.string=void 0,this.stringBuffer=Yt(jt),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=$e,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:Yt(2),3:Yt(3),4:Yt(4)},this.offset=-1}ut.toknam=function(I){for(var S=Object.keys(t),B=0,G=S.length;B<G;B++){var de=S[B];if(t[de]===I)return de}return I&&"0x"+I.toString(16)};var Z=ut.prototype;return Z.onError=function(I){throw I},Z.charError=function(I,S){this.tState=C,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(I[S]))+" at position "+S+" in state "+ut.toknam(this.tState)))},Z.appendStringChar=function(I){this.stringBufferOffset>=jt&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=I},Z.appendStringBuf=function(I,S,B){var G=I.length;typeof S=="number"&&(typeof B=="number"?B<0?G=I.length-S+B:G=B-S:G=I.length-S),G<0&&(G=0),this.stringBufferOffset+G>jt&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),I.copy(this.stringBuffer,this.stringBufferOffset,S,B),this.stringBufferOffset+=G},Z.write=function(I){typeof I=="string"&&(I=new e(I));for(var S,B=0,G=I.length;B<G;B++)if(this.tState===_){if(S=I[B],this.offset++,S===123)this.onToken(r,"{");else if(S===125)this.onToken(n,"}");else if(S===91)this.onToken(o,"[");else if(S===93)this.onToken(a,"]");else if(S===58)this.onToken(s,":");else if(S===44)this.onToken(u,",");else if(S===116)this.tState=R;else if(S===102)this.tState=E;else if(S===110)this.tState=$;else if(S===34)this.string="",this.stringBufferOffset=0,this.tState=Q;else if(S===45)this.string="-",this.tState=ee;else if(S>=48&&S<64)this.string=String.fromCharCode(S),this.tState=D;else if(!(S===32||S===9||S===10||S===13))return this.charError(I,B)}else if(this.tState===Q)if(S=I[B],this.bytes_remaining>0){for(var de=0;de<this.bytes_remaining;de++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+de]=I[de];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,B=B+de-1}else if(this.bytes_remaining===0&&S>=128){if(S<=193||S>244)return this.onError(new Error("Invalid UTF-8 character at position "+B+" in state "+ut.toknam(this.tState)));if(S>=194&&S<=223&&(this.bytes_in_sequence=2),S>=224&&S<=239&&(this.bytes_in_sequence=3),S>=240&&S<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+B>I.length){for(var Ee=0;Ee<=I.length-1-B;Ee++)this.temp_buffs[this.bytes_in_sequence][Ee]=I[B+Ee];this.bytes_remaining=B+this.bytes_in_sequence-I.length,B=I.length-1}else this.appendStringBuf(I,B,B+this.bytes_in_sequence),B=B+this.bytes_in_sequence-1}else if(S===34)this.tState=_,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(y,this.string),this.offset+=e.byteLength(this.string,"utf8")+1,this.string=void 0;else if(S===92)this.tState=De;else if(S>=32)this.appendStringChar(S);else return this.charError(I,B);else if(this.tState===De)if(S=I[B],S===34)this.appendStringChar(S),this.tState=Q;else if(S===92)this.appendStringChar(We),this.tState=Q;else if(S===47)this.appendStringChar(et),this.tState=Q;else if(S===98)this.appendStringChar(Et),this.tState=Q;else if(S===102)this.appendStringChar(Bt),this.tState=Q;else if(S===110)this.appendStringChar(Vt),this.tState=Q;else if(S===114)this.appendStringChar(Ke),this.tState=Q;else if(S===116)this.appendStringChar(St),this.tState=Q;else if(S===117)this.unicode="",this.tState=ae;else return this.charError(I,B);else if(this.tState===ae||this.tState===Ce||this.tState===Be||this.tState===Ve)if(S=I[B],S>=48&&S<64||S>64&&S<=70||S>96&&S<=102){if(this.unicode+=String.fromCharCode(S),this.tState++===Ve){var rt=parseInt(this.unicode,16);this.unicode=void 0,this.highSurrogate!==void 0&&rt>=56320&&rt<57343+1?(this.appendStringBuf(new e(String.fromCharCode(this.highSurrogate,rt))),this.highSurrogate=void 0):this.highSurrogate===void 0&&rt>=55296&&rt<56319+1?this.highSurrogate=rt:(this.highSurrogate!==void 0&&(this.appendStringBuf(new e(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new e(String.fromCharCode(rt)))),this.tState=Q}}else return this.charError(I,B);else if(this.tState===ee||this.tState===D)switch(S=I[B],S){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(S),this.tState=D;break;default:this.tState=_;var lt=this.numberReviver(this.string);if(lt)return lt;this.offset+=this.string.length-1,this.string=void 0,B--;break}else if(this.tState===R)if(I[B]===114)this.tState=F;else return this.charError(I,B);else if(this.tState===F)if(I[B]===117)this.tState=b;else return this.charError(I,B);else if(this.tState===b)if(I[B]===101)this.tState=_,this.onToken(h,!0),this.offset+=3;else return this.charError(I,B);else if(this.tState===E)if(I[B]===97)this.tState=P;else return this.charError(I,B);else if(this.tState===P)if(I[B]===108)this.tState=j;else return this.charError(I,B);else if(this.tState===j)if(I[B]===115)this.tState=H;else return this.charError(I,B);else if(this.tState===H)if(I[B]===101)this.tState=_,this.onToken(c,!1),this.offset+=4;else return this.charError(I,B);else if(this.tState===$)if(I[B]===117)this.tState=O;else return this.charError(I,B);else if(this.tState===O)if(I[B]===108)this.tState=ne;else return this.charError(I,B);else if(this.tState===ne)if(I[B]===108)this.tState=_,this.onToken(p,null),this.offset+=3;else return this.charError(I,B)},Z.onToken=function(I,S){},Z.parseError=function(I,S){this.tState=C,this.onError(new Error("Unexpected "+ut.toknam(I)+(S?"("+JSON.stringify(S)+")":"")+" in state "+ut.toknam(this.state)))},Z.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},Z.pop=function(){var I=this.value,S=this.stack.pop();this.value=S.value,this.key=S.key,this.mode=S.mode,this.emit(I),this.mode||(this.state=$e)},Z.emit=function(I){this.mode&&(this.state=u),this.onValue(I)},Z.onValue=function(I){},Z.onToken=function(I,S){if(this.state===$e)if(I===y||I===m||I===h||I===c||I===p)this.value&&(this.value[this.key]=S),this.emit(S);else if(I===r)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=we,this.mode=Oe;else if(I===o)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=me,this.state=$e;else if(I===n)if(this.mode===Oe)this.pop();else return this.parseError(I,S);else if(I===a)if(this.mode===me)this.pop();else return this.parseError(I,S);else return this.parseError(I,S);else if(this.state===we)if(I===y)this.key=S,this.state=s;else if(I===n)this.pop();else return this.parseError(I,S);else if(this.state===s)if(I===s)this.state=$e;else return this.parseError(I,S);else if(this.state===u)if(I===u)this.mode===me?(this.key++,this.state=$e):this.mode===Oe&&(this.state=we);else if(I===a&&this.mode===me||I===n&&this.mode===Oe)this.pop();else return this.parseError(I,S);else return this.parseError(I,S)},Z.numberReviver=function(I){var S=Number(I);if(isNaN(S))return this.charError(buffer,i);I.match(/[0-9]+/)==I&&S.toString()!=I?this.onToken(y,I):this.onToken(m,S)},ut.C=t,Ey=ut,Ey}var by={},Ay={},q1={},z1;function $C(){return z1||(z1=1,function(){(function(e){(function(t){var r={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function n(ee){return ee&&DataView.prototype.isPrototypeOf(ee)}if(r.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(ee){return ee&&o.indexOf(Object.prototype.toString.call(ee))>-1};function s(ee){if(typeof ee!="string"&&(ee=String(ee)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(ee))throw new TypeError("Invalid character in header field name");return ee.toLowerCase()}function u(ee){return typeof ee!="string"&&(ee=String(ee)),ee}function h(ee){var D={next:function(){var Q=ee.shift();return{done:Q===void 0,value:Q}}};return r.iterable&&(D[Symbol.iterator]=function(){return D}),D}function c(ee){this.map={},ee instanceof c?ee.forEach(function(D,Q){this.append(Q,D)},this):Array.isArray(ee)?ee.forEach(function(D){this.append(D[0],D[1])},this):ee&&Object.getOwnPropertyNames(ee).forEach(function(D){this.append(D,ee[D])},this)}c.prototype.append=function(ee,D){ee=s(ee),D=u(D);var Q=this.map[ee];this.map[ee]=Q?Q+", "+D:D},c.prototype.delete=function(ee){delete this.map[s(ee)]},c.prototype.get=function(ee){return ee=s(ee),this.has(ee)?this.map[ee]:null},c.prototype.has=function(ee){return this.map.hasOwnProperty(s(ee))},c.prototype.set=function(ee,D){this.map[s(ee)]=u(D)},c.prototype.forEach=function(ee,D){for(var Q in this.map)this.map.hasOwnProperty(Q)&&ee.call(D,this.map[Q],Q,this)},c.prototype.keys=function(){var ee=[];return this.forEach(function(D,Q){ee.push(Q)}),h(ee)},c.prototype.values=function(){var ee=[];return this.forEach(function(D){ee.push(D)}),h(ee)},c.prototype.entries=function(){var ee=[];return this.forEach(function(D,Q){ee.push([Q,D])}),h(ee)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);function p(ee){if(ee.bodyUsed)return Promise.reject(new TypeError("Already read"));ee.bodyUsed=!0}function y(ee){return new Promise(function(D,Q){ee.onload=function(){D(ee.result)},ee.onerror=function(){Q(ee.error)}})}function m(ee){var D=new FileReader,Q=y(D);return D.readAsArrayBuffer(ee),Q}function _(ee){var D=new FileReader,Q=y(D);return D.readAsText(ee),Q}function C(ee){for(var D=new Uint8Array(ee),Q=new Array(D.length),De=0;De<D.length;De++)Q[De]=String.fromCharCode(D[De]);return Q.join("")}function R(ee){if(ee.slice)return ee.slice(0);var D=new Uint8Array(ee.byteLength);return D.set(new Uint8Array(ee)),D.buffer}function F(){return this.bodyUsed=!1,this._initBody=function(ee){this._bodyInit=ee,ee?typeof ee=="string"?this._bodyText=ee:r.blob&&Blob.prototype.isPrototypeOf(ee)?this._bodyBlob=ee:r.formData&&FormData.prototype.isPrototypeOf(ee)?this._bodyFormData=ee:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(ee)?this._bodyText=ee.toString():r.arrayBuffer&&r.blob&&n(ee)?(this._bodyArrayBuffer=R(ee.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(ee)||a(ee))?this._bodyArrayBuffer=R(ee):this._bodyText=ee=Object.prototype.toString.call(ee):this._bodyText="",this.headers.get("content-type")||(typeof ee=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(ee)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var ee=p(this);if(ee)return ee;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var ee=p(this);if(ee)return ee;if(this._bodyBlob)return _(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(j)}),this.json=function(){return this.text().then(JSON.parse)},this}var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function E(ee){var D=ee.toUpperCase();return b.indexOf(D)>-1?D:ee}function P(ee,D){D=D||{};var Q=D.body;if(ee instanceof P){if(ee.bodyUsed)throw new TypeError("Already read");this.url=ee.url,this.credentials=ee.credentials,D.headers||(this.headers=new c(ee.headers)),this.method=ee.method,this.mode=ee.mode,this.signal=ee.signal,!Q&&ee._bodyInit!=null&&(Q=ee._bodyInit,ee.bodyUsed=!0)}else this.url=String(ee);if(this.credentials=D.credentials||this.credentials||"same-origin",(D.headers||!this.headers)&&(this.headers=new c(D.headers)),this.method=E(D.method||this.method||"GET"),this.mode=D.mode||this.mode||null,this.signal=D.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Q)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Q)}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})};function j(ee){var D=new FormData;return ee.trim().split("&").forEach(function(Q){if(Q){var De=Q.split("="),ae=De.shift().replace(/\+/g," "),Ce=De.join("=").replace(/\+/g," ");D.append(decodeURIComponent(ae),decodeURIComponent(Ce))}}),D}function H(ee){var D=new c,Q=ee.replace(/\r?\n[\t ]+/g," ");return Q.split(/\r?\n/).forEach(function(De){var ae=De.split(":"),Ce=ae.shift().trim();if(Ce){var Be=ae.join(":").trim();D.append(Ce,Be)}}),D}F.call(P.prototype);function $(ee,D){D||(D={}),this.type="default",this.status=D.status===void 0?200:D.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in D?D.statusText:"OK",this.headers=new c(D.headers),this.url=D.url||"",this._initBody(ee)}F.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},$.error=function(){var ee=new $(null,{status:0,statusText:""});return ee.type="error",ee};var O=[301,302,303,307,308];$.redirect=function(ee,D){if(O.indexOf(D)===-1)throw new RangeError("Invalid status code");return new $(null,{status:D,headers:{location:ee}})},t.DOMException=e.DOMException;try{new t.DOMException}catch{t.DOMException=function(D,Q){this.message=D,this.name=Q;var De=Error(D);this.stack=De.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function ne(ee,D){return new Promise(function(Q,De){var ae=new P(ee,D);if(ae.signal&&ae.signal.aborted)return De(new t.DOMException("Aborted","AbortError"));var Ce=new XMLHttpRequest;function Be(){Ce.abort()}Ce.onload=function(){var Ve={status:Ce.status,statusText:Ce.statusText,headers:H(Ce.getAllResponseHeaders()||"")};Ve.url="responseURL"in Ce?Ce.responseURL:Ve.headers.get("X-Request-URL");var $e="response"in Ce?Ce.response:Ce.responseText;Q(new $($e,Ve))},Ce.onerror=function(){De(new TypeError("Network request failed"))},Ce.ontimeout=function(){De(new TypeError("Network request failed"))},Ce.onabort=function(){De(new t.DOMException("Aborted","AbortError"))},Ce.open(ae.method,ae.url,!0),ae.credentials==="include"?Ce.withCredentials=!0:ae.credentials==="omit"&&(Ce.withCredentials=!1),"responseType"in Ce&&r.blob&&(Ce.responseType="blob"),ae.headers.forEach(function(Ve,$e){Ce.setRequestHeader($e,Ve)}),ae.signal&&(ae.signal.addEventListener("abort",Be),Ce.onreadystatechange=function(){Ce.readyState===4&&ae.signal.removeEventListener("abort",Be)}),Ce.send(typeof ae._bodyInit>"u"?null:ae._bodyInit)})}return ne.polyfill=!0,e.fetch||(e.fetch=ne,e.Headers=c,e.Request=P,e.Response=$),t.Headers=c,t.Request=P,t.Response=$,t.fetch=ne,Object.defineProperty(t,"__esModule",{value:!0}),t})({})})(typeof self<"u"?self:an)}()),q1}var Ry={},Mo={},J1;function LO(){if(J1)return Mo;J1=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.removeDotSegmentsOfPath=Mo.removeDotSegments=Mo.resolve=void 0;function e(o,a){a=a||"";const s=a.indexOf("#");if(s>0&&(a=a.substr(0,s)),!o.length){if(a.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${a}' for value '${o}'`);return a}if(o.startsWith("?")){const _=a.indexOf("?");return _>0&&(a=a.substr(0,_)),a+o}if(o.startsWith("#"))return a+o;if(!a.length){const _=o.indexOf(":");if(_<0)throw new Error(`Found invalid relative IRI '${o}' for a missing baseIRI`);return r(o,_)}const u=o.indexOf(":");if(u>=0)return r(o,u);const h=a.indexOf(":");if(h<0)throw new Error(`Found invalid baseIRI '${a}' for value '${o}'`);const c=a.substr(0,h+1);if(o.indexOf("//")===0)return c+r(o,u);let p;if(a.indexOf("//",h)===h+1){if(p=a.indexOf("/",h+3),p<0)return a.length>h+3?a+"/"+r(o,u):c+r(o,u)}else if(p=a.indexOf("/",h+1),p<0)return c+r(o,u);if(o.indexOf("/")===0)return a.substr(0,p)+t(o);let y=a.substr(p);const m=y.lastIndexOf("/");return m>=0&&m<y.length-1&&(y=y.substr(0,m+1),o[0]==="."&&o[1]!=="."&&o[1]!=="/"&&o[2]&&(o=o.substr(1))),o=y+o,o=t(o),a.substr(0,p)+o}Mo.resolve=e;function t(o){const a=[];let s=0;for(;s<o.length;)switch(o[s]){case"/":if(o[s+1]===".")if(o[s+2]==="."){if(!n(o[s+3])){a.push([]),s++;break}a.pop(),o[s+3]||a.push([]),s+=3}else{if(!n(o[s+2])){a.push([]),s++;break}o[s+2]||a.push([]),s+=2}else a.push([]),s++;break;case"#":case"?":a.length||a.push([]),a[a.length-1].push(o.substr(s)),s=o.length;break;default:a.length||a.push([]),a[a.length-1].push(o[s]),s++;break}return"/"+a.map(u=>u.join("")).join("/")}Mo.removeDotSegments=t;function r(o,a){let s=a+1;a>=0?o[a+1]==="/"&&o[a+2]==="/"&&(s=a+3):o[0]==="/"&&o[1]==="/"&&(s=2);const u=o.indexOf("/",s);if(u<0)return o;const h=o.substr(0,u),c=o.substr(u);return h+t(c)}Mo.removeDotSegmentsOfPath=r;function n(o){return!o||o==="#"||o==="?"||o==="/"}return Mo}var Q1;function _v(){return Q1||(Q1=1,function(e){var t=an&&an.__createBinding||(Object.create?function(n,o,a,s){s===void 0&&(s=a),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,s){s===void 0&&(s=a),n[s]=o[a]}),r=an&&an.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(LO(),e)}(Ry)),Ry}var Cy={},Y1;function dd(){return Y1||(Y1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ERROR_CODES=e.ErrorCoded=void 0;class t extends Error{constructor(n,o){super(n),this.code=o}}e.ErrorCoded=t,function(r){r.COLLIDING_KEYWORDS="colliding keywords",r.CONFLICTING_INDEXES="conflicting indexes",r.CYCLIC_IRI_MAPPING="cyclic IRI mapping",r.INVALID_ID_VALUE="invalid @id value",r.INVALID_INDEX_VALUE="invalid @index value",r.INVALID_NEST_VALUE="invalid @nest value",r.INVALID_PREFIX_VALUE="invalid @prefix value",r.INVALID_PROPAGATE_VALUE="invalid @propagate value",r.INVALID_REVERSE_VALUE="invalid @reverse value",r.INVALID_IMPORT_VALUE="invalid @import value",r.INVALID_VERSION_VALUE="invalid @version value",r.INVALID_BASE_IRI="invalid base IRI",r.INVALID_CONTAINER_MAPPING="invalid container mapping",r.INVALID_CONTEXT_ENTRY="invalid context entry",r.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",r.INVALID_DEFAULT_LANGUAGE="invalid default language",r.INVALID_INCLUDED_VALUE="invalid @included value",r.INVALID_IRI_MAPPING="invalid IRI mapping",r.INVALID_JSON_LITERAL="invalid JSON literal",r.INVALID_KEYWORD_ALIAS="invalid keyword alias",r.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",r.INVALID_LANGUAGE_MAPPING="invalid language mapping",r.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",r.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",r.INVALID_LOCAL_CONTEXT="invalid local context",r.INVALID_REMOTE_CONTEXT="invalid remote context",r.INVALID_REVERSE_PROPERTY="invalid reverse property",r.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",r.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",r.INVALID_SCOPED_CONTEXT="invalid scoped context",r.INVALID_SCRIPT_ELEMENT="invalid script element",r.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",r.INVALID_TERM_DEFINITION="invalid term definition",r.INVALID_TYPE_MAPPING="invalid type mapping",r.INVALID_TYPE_VALUE="invalid type value",r.INVALID_TYPED_VALUE="invalid typed value",r.INVALID_VALUE_OBJECT="invalid value object",r.INVALID_VALUE_OBJECT_VALUE="invalid value object value",r.INVALID_VOCAB_MAPPING="invalid vocab mapping",r.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",r.KEYWORD_REDEFINITION="keyword redefinition",r.LOADING_DOCUMENT_FAILED="loading document failed",r.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",r.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",r.PROCESSING_MODE_CONFLICT="processing mode conflict",r.PROTECTED_TERM_REDEFINITION="protected term redefinition",r.CONTEXT_OVERFLOW="context overflow",r.INVALID_BASE_DIRECTION="invalid base direction",r.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",r.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",r.INVALID_EMBEDDED_NODE="invalid embedded node",r.INVALID_ANNOTATION="invalid annotation"}(e.ERROR_CODES||(e.ERROR_CODES={}))}(Cy)),Cy}var Ru={},xy,X1;function Sv(){if(X1)return xy;X1=1;var e=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,r=/\s|\uFEFF|\xA0/,n=/\r?\n[\x20\x09]+/g,o=/[;,"]/,a=/[;,"]|\s/,s=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,u={IDLE:1<<0,URI:1<<1,ATTR:1<<2};function h(C){return C.replace(t,"")}function c(C){return r.test(C)}function p(C,R){for(;c(C[R]);)R++;return R}function y(C){return a.test(C)||!s.test(C)}function m(C,R){return Object.keys(C).length===Object.keys(R).length&&Object.keys(C).every(F=>F in R&&C[F]===R[F])}class _{constructor(R){this.refs=[],R&&this.parse(R)}rel(R){for(var F=[],b=R.toLowerCase(),E=0;E<this.refs.length;E++)this.refs[E].rel.toLowerCase()===b&&F.push(this.refs[E]);return F}get(R,F){R=R.toLowerCase();for(var b=[],E=0;E<this.refs.length;E++)this.refs[E][R]===F&&b.push(this.refs[E]);return b}set(R){return this.refs.push(R),this}setUnique(R){return this.refs.some(F=>m(F,R))||this.refs.push(R),this}has(R,F){R=R.toLowerCase();for(var b=0;b<this.refs.length;b++)if(this.refs[b][R]===F)return!0;return!1}parse(R,P){P=P||0,R=P?R.slice(P):R,R=h(R).replace(n,"");for(var b=u.IDLE,E=R.length,P=0,j=null;P<E;)if(b===u.IDLE){if(c(R[P])){P++;continue}else if(R[P]==="<"){j!=null&&(j.rel!=null?this.refs.push(..._.expandRelations(j)):this.refs.push(j));var H=R.indexOf(">",P);if(H===-1)throw new Error("Expected end of URI delimiter at offset "+P);j={uri:R.slice(P+1,H)},P=H,b=u.URI}else throw new Error('Unexpected character "'+R[P]+'" at offset '+P);P++}else if(b===u.URI)if(c(R[P])){P++;continue}else if(R[P]===";")b=u.ATTR,P++;else if(R[P]===",")b=u.IDLE,P++;else throw new Error('Unexpected character "'+R[P]+'" at offset '+P);else if(b===u.ATTR){if(R[P]===";"||c(R[P])){P++;continue}var H=R.indexOf("=",P);H===-1&&(H=R.indexOf(";",P)),H===-1&&(H=R.length);var $=h(R.slice(P,H)).toLowerCase(),O="";if(P=H+1,P=p(R,P),R[P]==='"')for(P++;P<E;){if(R[P]==='"'){P++;break}R[P]==="\\"&&P++,O+=R[P],P++}else{for(var H=P+1;!o.test(R[H])&&H<E;)H++;O=R.slice(P,H),P=H}switch(j[$]&&_.isSingleOccurenceAttr($)||($[$.length-1]==="*"?j[$]=_.parseExtendedValue(O):(O=$==="type"?O.toLowerCase():O,j[$]!=null?Array.isArray(j[$])?j[$].push(O):j[$]=[j[$],O]:j[$]=O)),R[P]){case",":b=u.IDLE;break;case";":b=u.ATTR;break}P++}else throw new Error('Unknown parser state "'+b+'"');return j!=null&&(j.rel!=null?this.refs.push(..._.expandRelations(j)):this.refs.push(j)),j=null,this}toString(){for(var R=[],F="",b=null,E=0;E<this.refs.length;E++)b=this.refs[E],F=Object.keys(this.refs[E]).reduce(function(P,j){return j==="uri"?P:P+"; "+_.formatAttribute(j,b[j])},"<"+b.uri+">"),R.push(F);return R.join(", ")}}return _.isCompatibleEncoding=function(C){return e.test(C)},_.parse=function(C,R){return new _().parse(C,R)},_.isSingleOccurenceAttr=function(C){return C==="rel"||C==="type"||C==="media"||C==="title"||C==="title*"},_.isTokenAttr=function(C){return C==="rel"||C==="type"||C==="anchor"},_.escapeQuotes=function(C){return C.replace(/"/g,'\\"')},_.expandRelations=function(C){var R=C.rel.split(" ");return R.map(function(F){var b=Object.assign({},C);return b.rel=F,b})},_.parseExtendedValue=function(C){var R=/([^']+)?(?:'([^']*)')?(.+)/.exec(C);return{language:R[2].toLowerCase(),encoding:_.isCompatibleEncoding(R[1])?null:R[1].toLowerCase(),value:_.isCompatibleEncoding(R[1])?decodeURIComponent(R[3]):R[3]}},_.formatExtendedAttribute=function(C,R){var F=(R.encoding||"utf-8").toUpperCase(),b=R.language||"en",E="";return Buffer.isBuffer(R.value)&&_.isCompatibleEncoding(F)?E=R.value.toString(F):Buffer.isBuffer(R.value)?E=R.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):E=encodeURIComponent(R.value),C+"="+F+"'"+b+"'"+E},_.formatAttribute=function(C,R){return Array.isArray(R)?R.map(F=>_.formatAttribute(C,F)).join("; "):C[C.length-1]==="*"||typeof R!="string"?_.formatExtendedAttribute(C,R):(_.isTokenAttr(C)?R=y(R)?'"'+_.escapeQuotes(R)+'"':_.escapeQuotes(R):y(R)&&(R=encodeURIComponent(R),R=R.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),R='"'+R+'"'),C+"="+R)},xy=_,xy}var Z1;function VC(){if(Z1)return Ru;Z1=1,Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.FetchDocumentLoader=void 0,$C();const e=dd(),t=Sv(),r=_v();let n=class{constructor(a){this.fetcher=a}async load(a){const s=await(this.fetcher||fetch)(a,{headers:new Headers({accept:"application/ld+json"})});if(s.ok&&s.headers){let u=s.headers.get("Content-Type");if(u){const h=u.indexOf(";");h>0&&(u=u.substr(0,h))}if(u==="application/ld+json")return await s.json();if(s.headers.has("Link")){let h;if(s.headers.forEach((c,p)=>{if(p==="link"){const y=(0,t.parse)(c);for(const m of y.get("type","application/ld+json"))if(m.rel==="alternate"){if(h)throw new Error("Multiple JSON-LD alternate links were found on "+a);h=(0,r.resolve)(m.uri,a)}}}),h)return this.load(h)}throw new e.ErrorCoded(`Unsupported JSON-LD media type ${u}`,e.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(s.statusText||`Status code: ${s.status}`)}};return Ru.FetchDocumentLoader=n,Ru}var Cu={},xu={},eE;function Ev(){if(eE)return xu;eE=1,Object.defineProperty(xu,"__esModule",{value:!0}),xu.Util=void 0;class e{static isCompactIri(r){return r.indexOf(":")>0&&!(r&&r[0]==="#")}static getPrefix(r,n){if(r&&r[0]==="#")return null;const o=r.indexOf(":");if(o>=0){if(r.length>o+1&&r.charAt(o+1)==="/"&&r.charAt(o+2)==="/")return null;const a=r.substr(0,o);if(a==="_")return null;if(n[a])return a}return null}static getContextValueId(r){if(r===null||typeof r=="string")return r;const n=r["@id"];return n||null}static isSimpleTermDefinitionPrefix(r,n){return!e.isPotentialKeyword(r)&&(r[0]==="_"||n.allowPrefixNonGenDelims||e.isPrefixIriEndingWithGenDelim(r))}static isPotentialKeyword(r){return typeof r=="string"&&e.KEYWORD_REGEX.test(r)}static isPrefixIriEndingWithGenDelim(r){return e.ENDS_WITH_GEN_DELIM.test(r)}static isPrefixValue(r){return r&&(typeof r=="string"||r&&typeof r=="object")}static isValidIri(r){return!!(r&&e.IRI_REGEX.test(r))}static isValidIriWeak(r){return!!r&&r[0]!==":"&&e.IRI_REGEX_WEAK.test(r)}static isValidKeyword(r){return e.VALID_KEYWORDS[r]}static isTermProtected(r,n){const o=r[n];return typeof o!="string"&&o&&o["@protected"]}static hasProtectedTerms(r){for(const n of Object.keys(r))if(e.isTermProtected(r,n))return!0;return!1}static isReservedInternalKeyword(r){return r.startsWith("@__")}}return xu.Util=e,e.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,e.IRI_REGEX_WEAK=/(?::[^:])|\//,e.KEYWORD_REGEX=/^@[a-z]+$/i,e.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,e.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,e.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,e.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},e.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],e.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],e.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],e.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],e.CONTAINERS_1_0=["@list","@set","@index"],xu}var tE;function KC(){if(tE)return Cu;tE=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.JsonLdContextNormalized=void 0;const e=_v(),t=GC(),r=dd(),n=Ev();let o=class{constructor(s){this.contextRaw=s}getContextRaw(){return this.contextRaw}expandTerm(s,u,h=t.defaultExpandOptions){const c=this.contextRaw[s];if(c===null||c&&c["@id"]===null)return null;let p=!0;if(c&&u){const F=n.Util.getContextValueId(c);if(F&&F!==s)if(typeof F!="string"||!n.Util.isValidIri(F)&&!n.Util.isValidKeyword(F))n.Util.isPotentialKeyword(F)||(p=!1);else return F}const y=n.Util.getPrefix(s,this.contextRaw),m=this.contextRaw["@vocab"],_=(!!m||m==="")&&m.indexOf(":")<0,C=this.contextRaw["@base"],R=n.Util.isPotentialKeyword(s);if(y){const F=this.contextRaw[y],b=n.Util.getContextValueId(F);if(b){if(typeof F=="string"||!h.allowPrefixForcing){if(!n.Util.isSimpleTermDefinitionPrefix(b,h))return s}else if(b[0]!=="_"&&!R&&!F["@prefix"]&&!(s in this.contextRaw))return s;return b+s.substr(y.length+1)}}else if(u&&(m||m===""||h.allowVocabRelativeToBase&&C&&_)&&!R&&!n.Util.isCompactIri(s))if(_){if(h.allowVocabRelativeToBase)return(m||C?(0,e.resolve)(m,C):"")+s;throw new r.ErrorCoded(`Relative vocab expansion for term '${s}' with vocab '${m}' is not allowed.`,r.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return m+s;else if(!u&&C&&!R&&!n.Util.isCompactIri(s))return(0,e.resolve)(s,C);if(p)return s;throw new r.ErrorCoded(`Invalid IRI mapping found for context entry '${s}': '${JSON.stringify(c)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(s,u){if(u&&this.contextRaw["@vocab"]&&s.startsWith(this.contextRaw["@vocab"]))return s.substr(this.contextRaw["@vocab"].length);if(!u&&this.contextRaw["@base"]&&s.startsWith(this.contextRaw["@base"]))return s.substr(this.contextRaw["@base"].length);const h={prefix:"",suffix:s};for(const c in this.contextRaw){const p=this.contextRaw[c];if(p&&!n.Util.isPotentialKeyword(c)){const y=n.Util.getContextValueId(p);if(s.startsWith(y)){const m=s.substr(y.length);if(m)m.length<h.suffix.length&&(h.prefix=c,h.suffix=m);else if(u)return c}}}return h.prefix?h.prefix+":"+h.suffix:s}};return Cu.JsonLdContextNormalized=o,Cu}var Py,rE;function WC(){return rE||(rE=1,Py=function e(t){return t===null||typeof t!="object"||t.toJSON!=null?JSON.stringify(t):Array.isArray(t)?"["+t.reduce((r,n,o)=>{const a=o===0?"":",",s=n===void 0||typeof n=="symbol"?null:n;return r+a+e(s)},"")+"]":"{"+Object.keys(t).sort().reduce((r,n,o)=>{if(t[n]===void 0||typeof t[n]=="symbol")return r;const a=r.length===0?"":",";return r+a+e(n)+":"+e(t[n])},"")+"}"}),Py}var nE;function GC(){return nE||(nE=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultExpandOptions=e.ContextParser=void 0,$C();const t=_v(),r=dd(),n=VC(),o=KC(),a=Ev(),s=WC();class u{constructor(c){c=c||{},this.documentLoader=c.documentLoader||new n.FetchDocumentLoader,this.documentCache={},this.validateContext=!c.skipValidation,this.expandContentTypeToBase=!!c.expandContentTypeToBase,this.remoteContextsDepthLimit=c.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in c?!!c.redirectSchemaOrgHttps:!0}static validateLanguage(c,p,y){if(typeof c!="string")throw new r.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(c)}'`,y);if(!a.Util.REGEX_LANGUAGE_TAG.test(c)){if(p)throw new r.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(c)}'`,y);return!1}return!0}static validateDirection(c,p){if(typeof c!="string")throw new r.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(c)}'`,r.ERROR_CODES.INVALID_BASE_DIRECTION);if(!a.Util.REGEX_DIRECTION_TAG.test(c)){if(p)throw new r.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(c)}'`,r.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(c){for(const p of Object.keys(c)){const y=c[p];if(y&&typeof y=="object"&&y["@reverse"]&&!y["@id"]){if(typeof y["@reverse"]!="string"||a.Util.isValidKeyword(y["@reverse"]))throw new r.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${y["@reverse"]}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);y["@id"]=y["@reverse"],a.Util.isPotentialKeyword(y["@reverse"])?delete y["@reverse"]:y["@reverse"]=!0}}return c}expandPrefixedTerms(c,p){const y=c.getContextRaw();for(const m of Object.keys(y))if(a.Util.EXPAND_KEYS_BLACKLIST.indexOf(m)<0&&!a.Util.isReservedInternalKeyword(m)){const _=y[m];if(a.Util.isPotentialKeyword(m)&&a.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(m)>=0&&(m!=="@type"||typeof y[m]=="object"&&!(y[m]["@protected"]||y[m]["@container"]==="@set")))throw new r.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${m} to ${JSON.stringify(_)}`,r.ERROR_CODES.KEYWORD_REDEFINITION);if(a.Util.ALIAS_RANGE_BLACKLIST.indexOf(a.Util.getContextValueId(_))>=0)throw new r.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${m} to ${JSON.stringify(_)}`,r.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(_&&a.Util.isPotentialKeyword(a.Util.getContextValueId(_))&&_["@prefix"]===!0)throw new r.ErrorCoded(`Tried to use keyword aliases as prefix: '${m}': '${JSON.stringify(_)}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION);for(;a.Util.isPrefixValue(y[m]);){const C=y[m];let R=!1;if(typeof C=="string")y[m]=c.expandTerm(C,!0),R=R||C!==y[m];else{const F=C["@id"],b=C["@type"],E=!("@prefix"in C)||a.Util.isValidIri(m);if("@id"in C)F!=null&&typeof F=="string"&&(y[m]["@id"]=c.expandTerm(F,!0),R=R||F!==y[m]["@id"]);else if(!a.Util.isPotentialKeyword(m)&&E){const P=c.expandTerm(m,!0);P!==m&&(y[m]["@id"]=P,R=!0)}b&&typeof b=="string"&&b!=="@vocab"&&(!C["@container"]||!C["@container"]["@type"])&&E&&(y[m]["@type"]=c.expandTerm(b,!0),p&&b===y[m]["@type"]&&(y[m]["@type"]=c.expandTerm(b,!1)),R=R||b!==y[m]["@type"])}if(!R)break}}}normalize(c,{processingMode:p,normalizeLanguageTags:y}){if(y||p===1)for(const m of Object.keys(c))if(m==="@language"&&typeof c[m]=="string")c[m]=c[m].toLowerCase();else{const _=c[m];_&&typeof _=="object"&&typeof _["@language"]=="string"&&(_["@language"]=_["@language"].toLowerCase())}}containersToHash(c){for(const p of Object.keys(c)){const y=c[p];if(y&&typeof y=="object"){if(typeof y["@container"]=="string")y["@container"]={[y["@container"]]:!0};else if(Array.isArray(y["@container"])){const m={};for(const _ of y["@container"])m[_]=!0;y["@container"]=m}}}}applyScopedProtected(c,{processingMode:p}){if(p&&p>=1.1&&c["@protected"]){for(const y of Object.keys(c))if(!a.Util.isReservedInternalKeyword(y)&&!a.Util.isPotentialKeyword(y)&&!a.Util.isTermProtected(c,y)){const m=c[y];m&&typeof m=="object"?"@protected"in c[y]||(c[y]["@protected"]=!0):c[y]={"@id":m,"@protected":!0}}delete c["@protected"]}}validateKeywordRedefinitions(c,p,y){for(const m of Object.keys(p))if(a.Util.isTermProtected(c,m)){if(typeof p[m]=="string"){const R=a.Util.isSimpleTermDefinitionPrefix(p[m],y);p[m]={"@id":p[m]},R&&(p[m]["@prefix"]=!0,c[m]["@prefix"]=!0)}const _=s(c[m]);p[m]["@protected"]=!0;const C=s(p[m]);if(_!==C)throw new r.ErrorCoded(`Attempted to override the protected keyword ${m} from ${JSON.stringify(a.Util.getContextValueId(c[m]))} to ${JSON.stringify(a.Util.getContextValueId(p[m]))}`,r.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}}validate(c,{processingMode:p}){for(const y of Object.keys(c)){if(a.Util.isReservedInternalKeyword(y))continue;if(y==="")throw new r.ErrorCoded(`The empty term is not allowed, got: '${y}': '${JSON.stringify(c[y])}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION);const m=c[y],_=typeof m;if(a.Util.isPotentialKeyword(y)){switch(y.substr(1)){case"vocab":if(m!==null&&_!=="string")throw new r.ErrorCoded(`Found an invalid @vocab IRI: ${m}`,r.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(m!==null&&_!=="string")throw new r.ErrorCoded(`Found an invalid @base IRI: ${c[y]}`,r.ERROR_CODES.INVALID_BASE_IRI);break;case"language":m!==null&&u.validateLanguage(m,!0,r.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(m!==null&&_!=="number")throw new r.ErrorCoded(`Found an invalid @version number: ${m}`,r.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":m!==null&&u.validateDirection(m,!0);break;case"propagate":if(p===1)throw new r.ErrorCoded(`Found an illegal @propagate keyword: ${m}`,r.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(m!==null&&_!=="boolean")throw new r.ErrorCoded(`Found an invalid @propagate value: ${m}`,r.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(a.Util.isValidKeyword(y)&&a.Util.isValidKeyword(a.Util.getContextValueId(m)))throw new r.ErrorCoded(`Illegal keyword alias in term value, found: '${y}': '${a.Util.getContextValueId(m)}'`,r.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(m!==null)switch(_){case"string":if(a.Util.getPrefix(m,c)===y)throw new r.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${y}': '${JSON.stringify(m)}'`,r.ERROR_CODES.CYCLIC_IRI_MAPPING);if(a.Util.isValidIriWeak(y)){if(m==="@type")throw new r.ErrorCoded(`IRIs can not be mapped to @type, found: '${y}': '${m}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);if(a.Util.isValidIri(m)&&m!==new o.JsonLdContextNormalized(c).expandTerm(y))throw new r.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${y}': '${m}'`,r.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!a.Util.isCompactIri(y)&&!("@id"in m)&&(m["@type"]==="@id"?!c["@base"]:!c["@vocab"]))throw new r.ErrorCoded(`Missing @id in context entry: '${y}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);for(const C of Object.keys(m)){const R=m[C];if(R)switch(C){case"@id":if(a.Util.isValidKeyword(R)&&R!=="@type"&&R!=="@id"&&R!=="@graph"&&R!=="@nest")throw new r.ErrorCoded(`Illegal keyword alias in term value, found: '${y}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);if(a.Util.isValidIriWeak(y)){if(R==="@type")throw new r.ErrorCoded(`IRIs can not be mapped to @type, found: '${y}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);if(a.Util.isValidIri(R)&&R!==new o.JsonLdContextNormalized(c).expandTerm(y))throw new r.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${y}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof R!="string")throw new r.ErrorCoded(`Detected non-string @id in context entry: '${y}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);if(a.Util.getPrefix(R,c)===y)throw new r.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${y}': '${JSON.stringify(m)}'`,r.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(m["@container"]==="@type"&&R!=="@id"&&R!=="@vocab")throw new r.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${y}': '${R}'`,r.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof R!="string")throw new r.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(_)}'`,r.ERROR_CODES.INVALID_TYPE_MAPPING);if(R!=="@id"&&R!=="@vocab"&&(p===1||R!=="@json")&&(p===1||R!=="@none")&&(R[0]==="_"||!a.Util.isValidIri(R)))throw new r.ErrorCoded(`A context @type must be an absolute IRI, found: '${y}': '${R}'`,r.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof R=="string"&&m["@id"]&&m["@id"]!==R)throw new r.ErrorCoded(`Found non-matching @id and @reverse term values in '${y}':'${R}' and '${m["@id"]}'`,r.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in m)throw new r.ErrorCoded(`@nest is not allowed in the reverse property '${y}'`,r.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(p===1&&(Object.keys(R).length>1||a.Util.CONTAINERS_1_0.indexOf(Object.keys(R)[0])<0))throw new r.ErrorCoded(`Invalid term @container for '${y}' ('${Object.keys(R)}') in 1.0, must be only one of ${a.Util.CONTAINERS_1_0.join(", ")}`,r.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const F of Object.keys(R)){if(F==="@list"&&m["@reverse"])throw new r.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${y}'`,r.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(a.Util.CONTAINERS.indexOf(F)<0)throw new r.ErrorCoded(`Invalid term @container for '${y}' ('${F}'), must be one of ${a.Util.CONTAINERS.join(", ")}`,r.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":u.validateLanguage(R,!0,r.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":u.validateDirection(R,!0);break;case"@prefix":if(R!==null&&typeof R!="boolean")throw new r.ErrorCoded(`Found an invalid term @prefix boolean in: '${y}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in m)&&!a.Util.isValidIri(y))throw new r.ErrorCoded(`Invalid @prefix definition for '${y}' ('${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(p===1||!m["@container"]||!m["@container"]["@index"])throw new r.ErrorCoded(`Attempt to add illegal key to value object: '${y}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(a.Util.isPotentialKeyword(R)&&R!=="@nest")throw new r.ErrorCoded(`Found an invalid term @nest value in: '${y}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new r.ErrorCoded(`Found an invalid term value: '${y}': '${m}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(c,p,y){return typeof c=="string"||(y&&!("@base"in c)&&p.parentContext&&typeof p.parentContext=="object"&&"@base"in p.parentContext&&(c["@base"]=p.parentContext["@base"],p.parentContext["@__baseDocument"]&&(c["@__baseDocument"]=!0)),p.baseIRI&&!p.external&&("@base"in c?c["@base"]!==null&&typeof c["@base"]=="string"&&!a.Util.isValidIri(c["@base"])&&(c["@base"]=(0,t.resolve)(c["@base"],p.parentContext&&p.parentContext["@base"]||p.baseIRI)):(c["@base"]=p.baseIRI,c["@__baseDocument"]=!0))),c}normalizeContextIri(c,p){if(!a.Util.isValidIri(c))try{c=(0,t.resolve)(c,p)}catch{throw new Error(`Invalid context IRI: ${c}`)}return this.redirectSchemaOrgHttps&&c.startsWith("http://schema.org")&&(c="https://schema.org/"),c}async parseInnerContexts(c,p){for(const y of Object.keys(c)){const m=c[y];if(m&&typeof m=="object"&&"@context"in m&&m["@context"]!==null&&!p.ignoreScopedContexts){if(this.validateContext)try{const _=Object.assign({},c);_[y]=Object.assign({},_[y]),delete _[y]["@context"],await this.parse(m["@context"],Object.assign(Object.assign({},p),{external:!1,parentContext:_,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(_){throw new r.ErrorCoded(_.message,r.ERROR_CODES.INVALID_SCOPED_CONTEXT)}m["@context"]=(await this.parse(m["@context"],Object.assign(Object.assign({},p),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:c}))).getContextRaw()}}return c}async parse(c,p={}){const{baseIRI:y,parentContext:m,external:_,processingMode:C=u.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:R,ignoreProtection:F,minimalProcessing:b}=p;let E=m;const P=p.remoteContexts||{};if(Object.keys(P).length>=this.remoteContextsDepthLimit)throw new r.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(P),r.ERROR_CODES.CONTEXT_OVERFLOW);if(c==null){if(!F&&E&&a.Util.hasProtectedTerms(E))throw new r.ErrorCoded("Illegal context nullification when terms are protected",r.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new o.JsonLdContextNormalized(this.applyBaseEntry({},p,!1))}else if(typeof c=="string"){const j=this.normalizeContextIri(c,y),H=this.getOverriddenLoad(j,p);if(H)return new o.JsonLdContextNormalized(H);const $=await this.parse(await this.load(j),Object.assign(Object.assign({},p),{baseIRI:j,external:!0,remoteContexts:Object.assign(Object.assign({},P),{[j]:!0})}));return this.applyBaseEntry($.getContextRaw(),p,!0),$}else if(Array.isArray(c)){const j=[],H=await Promise.all(c.map((O,ne)=>{if(typeof O=="string"){const ee=this.normalizeContextIri(O,y);j[ne]=ee;const D=this.getOverriddenLoad(ee,p);return D||this.load(ee)}else return O}));if(b)return new o.JsonLdContextNormalized(H);const $=await H.reduce((O,ne,ee)=>O.then(D=>this.parse(ne,Object.assign(Object.assign({},p),{baseIRI:j[ee]||p.baseIRI,external:!!j[ee]||p.external,parentContext:D.getContextRaw(),remoteContexts:j[ee]?Object.assign(Object.assign({},P),{[j[ee]]:!0}):P}))),Promise.resolve(new o.JsonLdContextNormalized(E||{})));return this.applyBaseEntry($.getContextRaw(),p,!0),$}else if(typeof c=="object"){if("@context"in c)return await this.parse(c["@context"],p);c=JSON.parse(JSON.stringify(c)),E&&!b&&(E=JSON.parse(JSON.stringify(E)));let j={};if(_&&delete c["@base"],this.applyBaseEntry(c,p,!0),this.containersToHash(c),b)return new o.JsonLdContextNormalized(c);let H={};if("@import"in c)if(C>=1.1){if(typeof c["@import"]!="string")throw new r.ErrorCoded("An @import value must be a string, but got "+typeof c["@import"],r.ERROR_CODES.INVALID_IMPORT_VALUE);H=await this.loadImportContext(this.normalizeContextIri(c["@import"],y)),delete c["@import"]}else throw new r.ErrorCoded("Context importing is not supported in JSON-LD 1.0",r.ERROR_CODES.INVALID_CONTEXT_ENTRY);j=Object.assign(Object.assign(Object.assign(Object.assign({},j),typeof E=="object"?E:{}),H),c);const $=new o.JsonLdContextNormalized(j);return await this.parseInnerContexts(j,p),(j&&j["@version"]||u.DEFAULT_PROCESSING_MODE)>=1.1&&(c["@vocab"]&&typeof c["@vocab"]=="string"||c["@vocab"]==="")&&(E&&"@vocab"in E&&c["@vocab"].indexOf(":")<0?j["@vocab"]=E["@vocab"]+c["@vocab"]:(a.Util.isCompactIri(c["@vocab"])||c["@vocab"]in $.getContextRaw())&&(j["@vocab"]=$.expandTerm(c["@vocab"],!0))),this.idifyReverseTerms(j),this.expandPrefixedTerms($,this.expandContentTypeToBase),!F&&E&&C>=1.1&&this.validateKeywordRedefinitions(E,j,e.defaultExpandOptions),this.normalize(j,{processingMode:C,normalizeLanguageTags:R}),this.applyScopedProtected(j,{processingMode:C}),this.validateContext&&this.validate(j,{processingMode:C}),$}else throw new r.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${c}`,r.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(c){const p=this.documentCache[c];if(p)return typeof p=="string"?p:Array.isArray(p)?p.slice():Object.assign({},p);let y;try{y=await this.documentLoader.load(c)}catch(m){throw new r.ErrorCoded(`Failed to load remote context ${c}: ${m.message}`,r.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in y))throw new r.ErrorCoded(`Missing @context in remote context at ${c}`,r.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[c]=y["@context"]}getOverriddenLoad(c,p){if(c in(p.remoteContexts||{})){if(p.ignoreRemoteScopedContexts)return c;throw new r.ErrorCoded("Detected a cyclic context inclusion of "+c,r.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(c){const p=await this.load(c);if(typeof p!="object"||Array.isArray(p))throw new r.ErrorCoded("An imported context must be a single object: "+c,r.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in p)throw new r.ErrorCoded("An imported context can not import another context: "+c,r.ERROR_CODES.INVALID_CONTEXT_ENTRY);return this.containersToHash(p),p}}e.ContextParser=u,u.DEFAULT_PROCESSING_MODE=1.1,e.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}(Ay)),Ay}var Ty={},iE;function UO(){return iE||(iE=1,Object.defineProperty(Ty,"__esModule",{value:!0})),Ty}var Iy={},oE;function MO(){return oE||(oE=1,Object.defineProperty(Iy,"__esModule",{value:!0})),Iy}var sE;function Ai(){return sE||(sE=1,function(e){var t=an&&an.__createBinding||(Object.create?function(n,o,a,s){s===void 0&&(s=a);var u=Object.getOwnPropertyDescriptor(o,a);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(n,s,u)}:function(n,o,a,s){s===void 0&&(s=a),n[s]=o[a]}),r=an&&an.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(GC(),e),r(dd(),e),r(VC(),e),r(UO(),e),r(MO(),e),r(KC(),e),r(Ev(),e)}(by)),by}var Gh={},BO={get exports(){return Gh},set exports(e){Gh=e}},qh={},jO={get exports(){return qh},set exports(e){qh=e}},Fy,aE;function Yn(){return aE||(aE=1,Fy={ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,r){return e.slice(t,r)},Error,FunctionPrototypeCall(e,t,...r){return e.call(t,...r)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,r){return Object.defineProperty(e,t,r)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,r){return e.then(t,r)},PromiseReject(e){return Promise.reject(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,r){return e.slice(t,r)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(e,t,r){return e.set(t,r)},Uint8Array}),Fy}var zh={},HO={get exports(){return zh},set exports(e){zh=e}},lE;function Qo(){return lE||(lE=1,function(e){const t=Ns(),r=Object.getPrototypeOf(async function(){}).constructor,n=globalThis.Blob||t.Blob,o=typeof n<"u"?function(u){return u instanceof n}:function(u){return!1};class a extends Error{constructor(u){if(!Array.isArray(u))throw new TypeError(`Expected input to be an Array, got ${typeof u}`);let h="";for(let c=0;c<u.length;c++)h+=`    ${u[c].stack}
`;super(h),this.name="AggregateError",this.errors=u}}e.exports={AggregateError:a,kEmptyObject:Object.freeze({}),once(s){let u=!1;return function(...h){u||(u=!0,s.apply(this,h))}},createDeferredPromise:function(){let s,u;return{promise:new Promise((c,p)=>{s=c,u=p}),resolve:s,reject:u}},promisify(s){return new Promise((u,h)=>{s((c,...p)=>c?h(c):u(...p))})},debuglog(){return function(){}},format(s,...u){return s.replace(/%([sdifj])/g,function(...[h,c]){const p=u.shift();return c==="f"?p.toFixed(6):c==="j"?JSON.stringify(p):c==="s"&&typeof p=="object"?`${p.constructor!==Object?p.constructor.name:""} {}`.trim():p.toString()})},inspect(s){switch(typeof s){case"string":if(s.includes("'"))if(s.includes('"')){if(!s.includes("`")&&!s.includes("${"))return`\`${s}\``}else return`"${s}"`;return`'${s}'`;case"number":return isNaN(s)?"NaN":Object.is(s,-0)?String(s):s;case"bigint":return`${String(s)}n`;case"boolean":case"undefined":return String(s);case"object":return"{}"}},types:{isAsyncFunction(s){return s instanceof r},isArrayBufferView(s){return ArrayBuffer.isView(s)}},isBlob:o},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(HO)),zh}var Kf={},_l={},$O={get exports(){return _l},set exports(e){_l=e}},uE;function bv(){if(uE)return _l;uE=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return $O.exports=e,_l.AbortSignal=t,_l.default=e,_l}var Oy,cE;function Ui(){if(cE)return Oy;cE=1;const{format:e,inspect:t,AggregateError:r}=Qo(),n=globalThis.AggregateError||r,o=Symbol("kIsNodeError"),a=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,u="__node_internal_",h={};function c(F,b){if(!F)throw new h.ERR_INTERNAL_ASSERTION(b)}function p(F){let b="",E=F.length;const P=F[0]==="-"?1:0;for(;E>=P+4;E-=3)b=`_${F.slice(E-3,E)}${b}`;return`${F.slice(0,E)}${b}`}function y(F,b,E){if(typeof b=="function")return c(b.length<=E.length,`Code: ${F}; The provided arguments length (${E.length}) does not match the required ones (${b.length}).`),b(...E);const P=(b.match(/%[dfijoOs]/g)||[]).length;return c(P===E.length,`Code: ${F}; The provided arguments length (${E.length}) does not match the required ones (${P}).`),E.length===0?b:e(b,...E)}function m(F,b,E){E||(E=Error);class P extends E{constructor(...H){super(y(F,b,H))}toString(){return`${this.name} [${F}]: ${this.message}`}}Object.defineProperties(P.prototype,{name:{value:E.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${F}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),P.prototype.code=F,P.prototype[o]=!0,h[F]=P}function _(F){const b=u+F.name;return Object.defineProperty(F,"name",{value:b}),F}function C(F,b){if(F&&b&&F!==b){if(Array.isArray(b.errors))return b.errors.push(F),b;const E=new n([b,F],b.message);return E.code=b.code,E}return F||b}class R extends Error{constructor(b="The operation was aborted",E=void 0){if(E!==void 0&&typeof E!="object")throw new h.ERR_INVALID_ARG_TYPE("options","Object",E);super(b,E),this.code="ABORT_ERR",this.name="AbortError"}}return m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(F,b,E)=>{c(typeof F=="string","'name' must be a string"),Array.isArray(b)||(b=[b]);let P="The ";F.endsWith(" argument")?P+=`${F} `:P+=`"${F}" ${F.includes(".")?"property":"argument"} `,P+="must be ";const j=[],H=[],$=[];for(const ne of b)c(typeof ne=="string","All expected entries have to be of type string"),a.includes(ne)?j.push(ne.toLowerCase()):s.test(ne)?H.push(ne):(c(ne!=="object",'The value "object" should be written as "Object"'),$.push(ne));if(H.length>0){const ne=j.indexOf("object");ne!==-1&&(j.splice(j,ne,1),H.push("Object"))}if(j.length>0){switch(j.length){case 1:P+=`of type ${j[0]}`;break;case 2:P+=`one of type ${j[0]} or ${j[1]}`;break;default:{const ne=j.pop();P+=`one of type ${j.join(", ")}, or ${ne}`}}(H.length>0||$.length>0)&&(P+=" or ")}if(H.length>0){switch(H.length){case 1:P+=`an instance of ${H[0]}`;break;case 2:P+=`an instance of ${H[0]} or ${H[1]}`;break;default:{const ne=H.pop();P+=`an instance of ${H.join(", ")}, or ${ne}`}}$.length>0&&(P+=" or ")}switch($.length){case 0:break;case 1:$[0].toLowerCase()!==$[0]&&(P+="an "),P+=`${$[0]}`;break;case 2:P+=`one of ${$[0]} or ${$[1]}`;break;default:{const ne=$.pop();P+=`one of ${$.join(", ")}, or ${ne}`}}if(E==null)P+=`. Received ${E}`;else if(typeof E=="function"&&E.name)P+=`. Received function ${E.name}`;else if(typeof E=="object"){var O;if((O=E.constructor)!==null&&O!==void 0&&O.name)P+=`. Received an instance of ${E.constructor.name}`;else{const ne=t(E,{depth:-1});P+=`. Received ${ne}`}}else{let ne=t(E,{colors:!1});ne.length>25&&(ne=`${ne.slice(0,25)}...`),P+=`. Received type ${typeof E} (${ne})`}return P},TypeError),m("ERR_INVALID_ARG_VALUE",(F,b,E="is invalid")=>{let P=t(b);return P.length>128&&(P=P.slice(0,128)+"..."),`The ${F.includes(".")?"property":"argument"} '${F}' ${E}. Received ${P}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(F,b,E)=>{var P;const j=E!=null&&(P=E.constructor)!==null&&P!==void 0&&P.name?`instance of ${E.constructor.name}`:`type ${typeof E}`;return`Expected ${F} to be returned from the "${b}" function but got ${j}.`},TypeError),m("ERR_MISSING_ARGS",(...F)=>{c(F.length>0,"At least one arg needs to be specified");let b;const E=F.length;switch(F=(Array.isArray(F)?F:[F]).map(P=>`"${P}"`).join(" or "),E){case 1:b+=`The ${F[0]} argument`;break;case 2:b+=`The ${F[0]} and ${F[1]} arguments`;break;default:{const P=F.pop();b+=`The ${F.join(", ")}, and ${P} arguments`}break}return`${b} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(F,b,E)=>{c(b,'Missing "range" argument');let P;return Number.isInteger(E)&&Math.abs(E)>2**32?P=p(String(E)):typeof E=="bigint"?(P=String(E),(E>2n**32n||E<-(2n**32n))&&(P=p(P)),P+="n"):P=t(E),`The value of "${F}" is out of range. It must be ${b}. Received ${P}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Oy={AbortError:R,aggregateTwoErrors:_(C),hideStackFrames:_,codes:h},Oy}var Ny,dE;function bp(){if(dE)return Ny;dE=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:r,ArrayPrototypeMap:n,NumberIsInteger:o,NumberIsNaN:a,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:u,NumberParseInt:h,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:p,String:y,StringPrototypeToUpperCase:m,StringPrototypeTrim:_}=Yn(),{hideStackFrames:C,codes:{ERR_SOCKET_BAD_PORT:R,ERR_INVALID_ARG_TYPE:F,ERR_INVALID_ARG_VALUE:b,ERR_OUT_OF_RANGE:E,ERR_UNKNOWN_SIGNAL:P}}=Ui(),{normalizeEncoding:j}=Qo(),{isAsyncFunction:H,isArrayBufferView:$}=Qo().types,O={};function ne(I){return I===(I|0)}function ee(I){return I===I>>>0}const D=/^[0-7]+$/,Q="must be a 32-bit unsigned integer or an octal string";function De(I,S,B){if(typeof I>"u"&&(I=B),typeof I=="string"){if(p(D,I)===null)throw new b(S,I,Q);I=h(I,8)}return Be(I,S),I}const ae=C((I,S,B=u,G=s)=>{if(typeof I!="number")throw new F(S,"number",I);if(!o(I))throw new E(S,"an integer",I);if(I<B||I>G)throw new E(S,`>= ${B} && <= ${G}`,I)}),Ce=C((I,S,B=-2147483648,G=2147483647)=>{if(typeof I!="number")throw new F(S,"number",I);if(!o(I))throw new E(S,"an integer",I);if(I<B||I>G)throw new E(S,`>= ${B} && <= ${G}`,I)}),Be=C((I,S,B=!1)=>{if(typeof I!="number")throw new F(S,"number",I);if(!o(I))throw new E(S,"an integer",I);const G=B?1:0,de=4294967295;if(I<G||I>de)throw new E(S,`>= ${G} && <= ${de}`,I)});function Ve(I,S){if(typeof I!="string")throw new F(S,"string",I)}function $e(I,S,B=void 0,G){if(typeof I!="number")throw new F(S,"number",I);if(B!=null&&I<B||G!=null&&I>G||(B!=null||G!=null)&&a(I))throw new E(S,`${B!=null?`>= ${B}`:""}${B!=null&&G!=null?" && ":""}${G!=null?`<= ${G}`:""}`,I)}const we=C((I,S,B)=>{if(!t(B,I)){const de="must be one of: "+r(n(B,Ee=>typeof Ee=="string"?`'${Ee}'`:y(Ee)),", ");throw new b(S,I,de)}});function Oe(I,S){if(typeof I!="boolean")throw new F(S,"boolean",I)}function me(I,S,B){return I==null||!c(I,S)?B:I[S]}const We=C((I,S,B=null)=>{const G=me(B,"allowArray",!1),de=me(B,"allowFunction",!1);if(!me(B,"nullable",!1)&&I===null||!G&&e(I)||typeof I!="object"&&(!de||typeof I!="function"))throw new F(S,"Object",I)}),et=C((I,S,B=0)=>{if(!e(I))throw new F(S,"Array",I);if(I.length<B){const G=`must be longer than ${B}`;throw new b(S,I,G)}});function Et(I,S="signal"){if(Ve(I,S),O[I]===void 0)throw O[m(I)]!==void 0?new P(I+" (signals must use all capital letters)"):new P(I)}const Bt=C((I,S="buffer")=>{if(!$(I))throw new F(S,["Buffer","TypedArray","DataView"],I)});function Vt(I,S){const B=j(S),G=I.length;if(B==="hex"&&G%2!==0)throw new b("encoding",S,`is invalid for data of length ${G}`)}function Ke(I,S="Port",B=!0){if(typeof I!="number"&&typeof I!="string"||typeof I=="string"&&_(I).length===0||+I!==+I>>>0||I>65535||I===0&&!B)throw new R(S,I,B);return I|0}const St=C((I,S)=>{if(I!==void 0&&(I===null||typeof I!="object"||!("aborted"in I)))throw new F(S,"AbortSignal",I)}),jt=C((I,S)=>{if(typeof I!="function")throw new F(S,"Function",I)}),Yt=C((I,S)=>{if(typeof I!="function"||H(I))throw new F(S,"Function",I)}),ut=C((I,S)=>{if(I!==void 0)throw new F(S,"undefined",I)});function Z(I,S,B){if(!t(B,I))throw new F(S,`('${r(B,"|")}')`,I)}return Ny={isInt32:ne,isUint32:ee,parseFileMode:De,validateArray:et,validateBoolean:Oe,validateBuffer:Bt,validateEncoding:Vt,validateFunction:jt,validateInt32:Ce,validateInteger:ae,validateNumber:$e,validateObject:We,validateOneOf:we,validatePlainFunction:Yt,validatePort:Ke,validateSignalName:Et,validateString:Ve,validateUint32:Be,validateUndefined:ut,validateUnion:Z,validateAbortSignal:St},Ny}var Dc={},VO={get exports(){return Dc},set exports(e){Dc=e}},Jh={},KO={get exports(){return Jh},set exports(e){Jh=e}},fE;function ma(){if(fE)return Jh;fE=1;var e=KO.exports={},t,r;function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=n}catch{t=n}try{typeof clearTimeout=="function"?r=clearTimeout:r=o}catch{r=o}})();function a(R){if(t===setTimeout)return setTimeout(R,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(R,0);try{return t(R,0)}catch{try{return t.call(null,R,0)}catch{return t.call(this,R,0)}}}function s(R){if(r===clearTimeout)return clearTimeout(R);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(R);try{return r(R)}catch{try{return r.call(null,R)}catch{return r.call(this,R)}}}var u=[],h=!1,c,p=-1;function y(){!h||!c||(h=!1,c.length?u=c.concat(u):p=-1,u.length&&m())}function m(){if(!h){var R=a(y);h=!0;for(var F=u.length;F;){for(c=u,u=[];++p<F;)c&&c[p].run();p=-1,F=u.length}c=null,h=!1,s(R)}}e.nextTick=function(R){var F=new Array(arguments.length-1);if(arguments.length>1)for(var b=1;b<arguments.length;b++)F[b-1]=arguments[b];u.push(new _(R,F)),u.length===1&&!h&&a(m)};function _(R,F){this.fun=R,this.array=F}_.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function C(){}return e.on=C,e.addListener=C,e.once=C,e.off=C,e.removeListener=C,e.removeAllListeners=C,e.emit=C,e.prependListener=C,e.prependOnceListener=C,e.listeners=function(R){return[]},e.binding=function(R){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(R){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},Jh}var ky,hE;function va(){if(hE)return ky;hE=1;const{Symbol:e,SymbolAsyncIterator:t,SymbolIterator:r}=Yn(),n=e("kDestroyed"),o=e("kIsErrored"),a=e("kIsReadable"),s=e("kIsDisturbed");function u(ae,Ce=!1){var Be;return!!(ae&&typeof ae.pipe=="function"&&typeof ae.on=="function"&&(!Ce||typeof ae.pause=="function"&&typeof ae.resume=="function")&&(!ae._writableState||((Be=ae._readableState)===null||Be===void 0?void 0:Be.readable)!==!1)&&(!ae._writableState||ae._readableState))}function h(ae){var Ce;return!!(ae&&typeof ae.write=="function"&&typeof ae.on=="function"&&(!ae._readableState||((Ce=ae._writableState)===null||Ce===void 0?void 0:Ce.writable)!==!1))}function c(ae){return!!(ae&&typeof ae.pipe=="function"&&ae._readableState&&typeof ae.on=="function"&&typeof ae.write=="function")}function p(ae){return ae&&(ae._readableState||ae._writableState||typeof ae.write=="function"&&typeof ae.on=="function"||typeof ae.pipe=="function"&&typeof ae.on=="function")}function y(ae,Ce){return ae==null?!1:Ce===!0?typeof ae[t]=="function":Ce===!1?typeof ae[r]=="function":typeof ae[t]=="function"||typeof ae[r]=="function"}function m(ae){if(!p(ae))return null;const Ce=ae._writableState,Be=ae._readableState,Ve=Ce||Be;return!!(ae.destroyed||ae[n]||Ve!=null&&Ve.destroyed)}function _(ae){if(!h(ae))return null;if(ae.writableEnded===!0)return!0;const Ce=ae._writableState;return Ce!=null&&Ce.errored?!1:typeof(Ce==null?void 0:Ce.ended)!="boolean"?null:Ce.ended}function C(ae,Ce){if(!h(ae))return null;if(ae.writableFinished===!0)return!0;const Be=ae._writableState;return Be!=null&&Be.errored?!1:typeof(Be==null?void 0:Be.finished)!="boolean"?null:!!(Be.finished||Ce===!1&&Be.ended===!0&&Be.length===0)}function R(ae){if(!u(ae))return null;if(ae.readableEnded===!0)return!0;const Ce=ae._readableState;return!Ce||Ce.errored?!1:typeof(Ce==null?void 0:Ce.ended)!="boolean"?null:Ce.ended}function F(ae,Ce){if(!u(ae))return null;const Be=ae._readableState;return Be!=null&&Be.errored?!1:typeof(Be==null?void 0:Be.endEmitted)!="boolean"?null:!!(Be.endEmitted||Ce===!1&&Be.ended===!0&&Be.length===0)}function b(ae){return ae&&ae[a]!=null?ae[a]:typeof(ae==null?void 0:ae.readable)!="boolean"?null:m(ae)?!1:u(ae)&&ae.readable&&!F(ae)}function E(ae){return typeof(ae==null?void 0:ae.writable)!="boolean"?null:m(ae)?!1:h(ae)&&ae.writable&&!_(ae)}function P(ae,Ce){return p(ae)?m(ae)?!0:!((Ce==null?void 0:Ce.readable)!==!1&&b(ae)||(Ce==null?void 0:Ce.writable)!==!1&&E(ae)):null}function j(ae){var Ce,Be;return p(ae)?ae.writableErrored?ae.writableErrored:(Ce=(Be=ae._writableState)===null||Be===void 0?void 0:Be.errored)!==null&&Ce!==void 0?Ce:null:null}function H(ae){var Ce,Be;return p(ae)?ae.readableErrored?ae.readableErrored:(Ce=(Be=ae._readableState)===null||Be===void 0?void 0:Be.errored)!==null&&Ce!==void 0?Ce:null:null}function $(ae){if(!p(ae))return null;if(typeof ae.closed=="boolean")return ae.closed;const Ce=ae._writableState,Be=ae._readableState;return typeof(Ce==null?void 0:Ce.closed)=="boolean"||typeof(Be==null?void 0:Be.closed)=="boolean"?(Ce==null?void 0:Ce.closed)||(Be==null?void 0:Be.closed):typeof ae._closed=="boolean"&&O(ae)?ae._closed:null}function O(ae){return typeof ae._closed=="boolean"&&typeof ae._defaultKeepAlive=="boolean"&&typeof ae._removedConnection=="boolean"&&typeof ae._removedContLen=="boolean"}function ne(ae){return typeof ae._sent100=="boolean"&&O(ae)}function ee(ae){var Ce;return typeof ae._consuming=="boolean"&&typeof ae._dumped=="boolean"&&((Ce=ae.req)===null||Ce===void 0?void 0:Ce.upgradeOrConnect)===void 0}function D(ae){if(!p(ae))return null;const Ce=ae._writableState,Be=ae._readableState,Ve=Ce||Be;return!Ve&&ne(ae)||!!(Ve&&Ve.autoDestroy&&Ve.emitClose&&Ve.closed===!1)}function Q(ae){var Ce;return!!(ae&&((Ce=ae[s])!==null&&Ce!==void 0?Ce:ae.readableDidRead||ae.readableAborted))}function De(ae){var Ce,Be,Ve,$e,we,Oe,me,We,et,Et;return!!(ae&&((Ce=(Be=(Ve=($e=(we=(Oe=ae[o])!==null&&Oe!==void 0?Oe:ae.readableErrored)!==null&&we!==void 0?we:ae.writableErrored)!==null&&$e!==void 0?$e:(me=ae._readableState)===null||me===void 0?void 0:me.errorEmitted)!==null&&Ve!==void 0?Ve:(We=ae._writableState)===null||We===void 0?void 0:We.errorEmitted)!==null&&Be!==void 0?Be:(et=ae._readableState)===null||et===void 0?void 0:et.errored)!==null&&Ce!==void 0?Ce:!((Et=ae._writableState)===null||Et===void 0)&&Et.errored))}return ky={kDestroyed:n,isDisturbed:Q,kIsDisturbed:s,isErrored:De,kIsErrored:o,isReadable:b,kIsReadable:a,isClosed:$,isDestroyed:m,isDuplexNodeStream:c,isFinished:P,isIterable:y,isReadableNodeStream:u,isReadableEnded:R,isReadableFinished:F,isReadableErrored:H,isNodeStream:p,isWritable:E,isWritableNodeStream:h,isWritableEnded:_,isWritableFinished:C,isWritableErrored:j,isServerRequest:ee,isServerResponse:ne,willEmitClose:D},ky}var pE;function wa(){if(pE)return Dc;pE=1;const e=ma(),{AbortError:t,codes:r}=Ui(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:o}=r,{kEmptyObject:a,once:s}=Qo(),{validateAbortSignal:u,validateFunction:h,validateObject:c}=bp(),{Promise:p}=Yn(),{isClosed:y,isReadable:m,isReadableNodeStream:_,isReadableFinished:C,isReadableErrored:R,isWritable:F,isWritableNodeStream:b,isWritableFinished:E,isWritableErrored:P,isNodeStream:j,willEmitClose:H}=va();function $(D){return D.setHeader&&typeof D.abort=="function"}const O=()=>{};function ne(D,Q,De){var ae,Ce;arguments.length===2?(De=Q,Q=a):Q==null?Q=a:c(Q,"options"),h(De,"callback"),u(Q.signal,"options.signal"),De=s(De);const Be=(ae=Q.readable)!==null&&ae!==void 0?ae:_(D),Ve=(Ce=Q.writable)!==null&&Ce!==void 0?Ce:b(D);if(!j(D))throw new n("stream","Stream",D);const $e=D._writableState,we=D._readableState,Oe=()=>{D.writable||et()};let me=H(D)&&_(D)===Be&&b(D)===Ve,We=E(D,!1);const et=()=>{We=!0,D.destroyed&&(me=!1),!(me&&(!D.readable||Be))&&(!Be||Et)&&De.call(D)};let Et=C(D,!1);const Bt=()=>{Et=!0,D.destroyed&&(me=!1),!(me&&(!D.writable||Ve))&&(!Ve||We)&&De.call(D)},Vt=ut=>{De.call(D,ut)};let Ke=y(D);const St=()=>{Ke=!0;const ut=P(D)||R(D);if(ut&&typeof ut!="boolean")return De.call(D,ut);if(Be&&!Et&&_(D,!0)&&!C(D,!1))return De.call(D,new o);if(Ve&&!We&&!E(D,!1))return De.call(D,new o);De.call(D)},jt=()=>{D.req.on("finish",et)};$(D)?(D.on("complete",et),me||D.on("abort",St),D.req?jt():D.on("request",jt)):Ve&&!$e&&(D.on("end",Oe),D.on("close",Oe)),!me&&typeof D.aborted=="boolean"&&D.on("aborted",St),D.on("end",Bt),D.on("finish",et),Q.error!==!1&&D.on("error",Vt),D.on("close",St),Ke?e.nextTick(St):$e!=null&&$e.errorEmitted||we!=null&&we.errorEmitted?me||e.nextTick(St):(!Be&&(!me||m(D))&&(We||F(D)===!1)||!Ve&&(!me||F(D))&&(Et||m(D)===!1)||we&&D.req&&D.aborted)&&e.nextTick(St);const Yt=()=>{De=O,D.removeListener("aborted",St),D.removeListener("complete",et),D.removeListener("abort",St),D.removeListener("request",jt),D.req&&D.req.removeListener("finish",et),D.removeListener("end",Oe),D.removeListener("close",Oe),D.removeListener("finish",et),D.removeListener("end",Bt),D.removeListener("error",Vt),D.removeListener("close",St)};if(Q.signal&&!Ke){const ut=()=>{const Z=De;Yt(),Z.call(D,new t(void 0,{cause:Q.signal.reason}))};if(Q.signal.aborted)e.nextTick(ut);else{const Z=De;De=s((...I)=>{Q.signal.removeEventListener("abort",ut),Z.apply(D,I)}),Q.signal.addEventListener("abort",ut)}}return Yt}function ee(D,Q){return new p((De,ae)=>{ne(D,Q,Ce=>{Ce?ae(Ce):De()})})}return VO.exports=ne,Dc.finished=ee,Dc}var gE;function WO(){if(gE)return Kf;gE=1;const e=globalThis.AbortController||bv().AbortController,{codes:{ERR_INVALID_ARG_TYPE:t,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:n},AbortError:o}=Ui(),{validateAbortSignal:a,validateInteger:s,validateObject:u}=bp(),h=Yn().Symbol("kWeak"),{finished:c}=wa(),{ArrayPrototypePush:p,MathFloor:y,Number:m,NumberIsNaN:_,Promise:C,PromiseReject:R,PromisePrototypeThen:F,Symbol:b}=Yn(),E=b("kEmpty"),P=b("kEof");function j(we,Oe){if(typeof we!="function")throw new t("fn",["Function","AsyncFunction"],we);Oe!=null&&u(Oe,"options"),(Oe==null?void 0:Oe.signal)!=null&&a(Oe.signal,"options.signal");let me=1;return(Oe==null?void 0:Oe.concurrency)!=null&&(me=y(Oe.concurrency)),s(me,"concurrency",1),async function*(){var et,Et;const Bt=new e,Vt=this,Ke=[],St=Bt.signal,jt={signal:St},Yt=()=>Bt.abort();Oe!=null&&(et=Oe.signal)!==null&&et!==void 0&&et.aborted&&Yt(),Oe==null||(Et=Oe.signal)===null||Et===void 0||Et.addEventListener("abort",Yt);let ut,Z,I=!1;function S(){I=!0}async function B(){try{for await(let Ee of Vt){var G;if(I)return;if(St.aborted)throw new o;try{Ee=we(Ee,jt)}catch(rt){Ee=R(rt)}Ee!==E&&(typeof((G=Ee)===null||G===void 0?void 0:G.catch)=="function"&&Ee.catch(S),Ke.push(Ee),ut&&(ut(),ut=null),!I&&Ke.length&&Ke.length>=me&&await new C(rt=>{Z=rt}))}Ke.push(P)}catch(Ee){const rt=R(Ee);F(rt,void 0,S),Ke.push(rt)}finally{var de;I=!0,ut&&(ut(),ut=null),Oe==null||(de=Oe.signal)===null||de===void 0||de.removeEventListener("abort",Yt)}}B();try{for(;;){for(;Ke.length>0;){const G=await Ke[0];if(G===P)return;if(St.aborted)throw new o;G!==E&&(yield G),Ke.shift(),Z&&(Z(),Z=null)}await new C(G=>{ut=G})}}finally{Bt.abort(),I=!0,Z&&(Z(),Z=null)}}.call(this)}function H(we=void 0){return we!=null&&u(we,"options"),(we==null?void 0:we.signal)!=null&&a(we.signal,"options.signal"),async function*(){let me=0;for await(const et of this){var We;if(we!=null&&(We=we.signal)!==null&&We!==void 0&&We.aborted)throw new o({cause:we.signal.reason});yield[me++,et]}}.call(this)}async function $(we,Oe=void 0){for await(const me of D.call(this,we,Oe))return!0;return!1}async function O(we,Oe=void 0){if(typeof we!="function")throw new t("fn",["Function","AsyncFunction"],we);return!await $.call(this,async(...me)=>!await we(...me),Oe)}async function ne(we,Oe){for await(const me of D.call(this,we,Oe))return me}async function ee(we,Oe){if(typeof we!="function")throw new t("fn",["Function","AsyncFunction"],we);async function me(We,et){return await we(We,et),E}for await(const We of j.call(this,me,Oe));}function D(we,Oe){if(typeof we!="function")throw new t("fn",["Function","AsyncFunction"],we);async function me(We,et){return await we(We,et)?We:E}return j.call(this,me,Oe)}class Q extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function De(we,Oe,me){var We;if(typeof we!="function")throw new t("reducer",["Function","AsyncFunction"],we);me!=null&&u(me,"options"),(me==null?void 0:me.signal)!=null&&a(me.signal,"options.signal");let et=arguments.length>1;if(me!=null&&(We=me.signal)!==null&&We!==void 0&&We.aborted){const St=new o(void 0,{cause:me.signal.reason});throw this.once("error",()=>{}),await c(this.destroy(St)),St}const Et=new e,Bt=Et.signal;if(me!=null&&me.signal){const St={once:!0,[h]:this};me.signal.addEventListener("abort",()=>Et.abort(),St)}let Vt=!1;try{for await(const St of this){var Ke;if(Vt=!0,me!=null&&(Ke=me.signal)!==null&&Ke!==void 0&&Ke.aborted)throw new o;et?Oe=await we(Oe,St,{signal:Bt}):(Oe=St,et=!0)}if(!Vt&&!et)throw new Q}finally{Et.abort()}return Oe}async function ae(we){we!=null&&u(we,"options"),(we==null?void 0:we.signal)!=null&&a(we.signal,"options.signal");const Oe=[];for await(const We of this){var me;if(we!=null&&(me=we.signal)!==null&&me!==void 0&&me.aborted)throw new o(void 0,{cause:we.signal.reason});p(Oe,We)}return Oe}function Ce(we,Oe){const me=j.call(this,we,Oe);return async function*(){for await(const et of me)yield*et}.call(this)}function Be(we){if(we=m(we),_(we))return 0;if(we<0)throw new n("number",">= 0",we);return we}function Ve(we,Oe=void 0){return Oe!=null&&u(Oe,"options"),(Oe==null?void 0:Oe.signal)!=null&&a(Oe.signal,"options.signal"),we=Be(we),async function*(){var We;if(Oe!=null&&(We=Oe.signal)!==null&&We!==void 0&&We.aborted)throw new o;for await(const Et of this){var et;if(Oe!=null&&(et=Oe.signal)!==null&&et!==void 0&&et.aborted)throw new o;we--<=0&&(yield Et)}}.call(this)}function $e(we,Oe=void 0){return Oe!=null&&u(Oe,"options"),(Oe==null?void 0:Oe.signal)!=null&&a(Oe.signal,"options.signal"),we=Be(we),async function*(){var We;if(Oe!=null&&(We=Oe.signal)!==null&&We!==void 0&&We.aborted)throw new o;for await(const Et of this){var et;if(Oe!=null&&(et=Oe.signal)!==null&&et!==void 0&&et.aborted)throw new o;if(we-- >0)yield Et;else return}}.call(this)}return Kf.streamReturningOperators={asIndexedPairs:H,drop:Ve,filter:D,flatMap:Ce,map:j,take:$e},Kf.promiseReturningOperators={every:O,forEach:ee,reduce:De,toArray:ae,some:$,find:ne},Kf}var Dy,yE;function Hl(){if(yE)return Dy;yE=1;const e=ma(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:r},AbortError:n}=Ui(),{Symbol:o}=Yn(),{kDestroyed:a,isDestroyed:s,isFinished:u,isServerRequest:h}=va(),c=o("kDestroy"),p=o("kConstruct");function y(D,Q,De){D&&(D.stack,Q&&!Q.errored&&(Q.errored=D),De&&!De.errored&&(De.errored=D))}function m(D,Q){const De=this._readableState,ae=this._writableState,Ce=ae||De;return ae&&ae.destroyed||De&&De.destroyed?(typeof Q=="function"&&Q(),this):(y(D,ae,De),ae&&(ae.destroyed=!0),De&&(De.destroyed=!0),Ce.constructed?_(this,D,Q):this.once(c,function(Be){_(this,t(Be,D),Q)}),this)}function _(D,Q,De){let ae=!1;function Ce(Be){if(ae)return;ae=!0;const Ve=D._readableState,$e=D._writableState;y(Be,$e,Ve),$e&&($e.closed=!0),Ve&&(Ve.closed=!0),typeof De=="function"&&De(Be),Be?e.nextTick(C,D,Be):e.nextTick(R,D)}try{D._destroy(Q||null,Ce)}catch(Be){Ce(Be)}}function C(D,Q){F(D,Q),R(D)}function R(D){const Q=D._readableState,De=D._writableState;De&&(De.closeEmitted=!0),Q&&(Q.closeEmitted=!0),(De&&De.emitClose||Q&&Q.emitClose)&&D.emit("close")}function F(D,Q){const De=D._readableState,ae=D._writableState;ae&&ae.errorEmitted||De&&De.errorEmitted||(ae&&(ae.errorEmitted=!0),De&&(De.errorEmitted=!0),D.emit("error",Q))}function b(){const D=this._readableState,Q=this._writableState;D&&(D.constructed=!0,D.closed=!1,D.closeEmitted=!1,D.destroyed=!1,D.errored=null,D.errorEmitted=!1,D.reading=!1,D.ended=D.readable===!1,D.endEmitted=D.readable===!1),Q&&(Q.constructed=!0,Q.destroyed=!1,Q.closed=!1,Q.closeEmitted=!1,Q.errored=null,Q.errorEmitted=!1,Q.finalCalled=!1,Q.prefinished=!1,Q.ended=Q.writable===!1,Q.ending=Q.writable===!1,Q.finished=Q.writable===!1)}function E(D,Q,De){const ae=D._readableState,Ce=D._writableState;if(Ce&&Ce.destroyed||ae&&ae.destroyed)return this;ae&&ae.autoDestroy||Ce&&Ce.autoDestroy?D.destroy(Q):Q&&(Q.stack,Ce&&!Ce.errored&&(Ce.errored=Q),ae&&!ae.errored&&(ae.errored=Q),De?e.nextTick(F,D,Q):F(D,Q))}function P(D,Q){if(typeof D._construct!="function")return;const De=D._readableState,ae=D._writableState;De&&(De.constructed=!1),ae&&(ae.constructed=!1),D.once(p,Q),!(D.listenerCount(p)>1)&&e.nextTick(j,D)}function j(D){let Q=!1;function De(ae){if(Q){E(D,ae??new r);return}Q=!0;const Ce=D._readableState,Be=D._writableState,Ve=Be||Ce;Ce&&(Ce.constructed=!0),Be&&(Be.constructed=!0),Ve.destroyed?D.emit(c,ae):ae?E(D,ae,!0):e.nextTick(H,D)}try{D._construct(De)}catch(ae){De(ae)}}function H(D){D.emit(p)}function $(D){return D&&D.setHeader&&typeof D.abort=="function"}function O(D){D.emit("close")}function ne(D,Q){D.emit("error",Q),e.nextTick(O,D)}function ee(D,Q){!D||s(D)||(!Q&&!u(D)&&(Q=new n),h(D)?(D.socket=null,D.destroy(Q)):$(D)?D.abort():$(D.req)?D.req.abort():typeof D.destroy=="function"?D.destroy(Q):typeof D.close=="function"?D.close():Q?e.nextTick(ne,D,Q):e.nextTick(O,D),D.destroyed||(D[a]=!0))}return Dy={construct:P,destroyer:ee,destroy:m,undestroy:b,errorOrDestroy:E},Dy}var Lc={},GO={get exports(){return Lc},set exports(e){Lc=e}},mE;function fd(){if(mE)return Lc;mE=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(H,$,O){return Function.prototype.apply.call(H,$,O)},r;e&&typeof e.ownKeys=="function"?r=e.ownKeys:Object.getOwnPropertySymbols?r=function(H){return Object.getOwnPropertyNames(H).concat(Object.getOwnPropertySymbols(H))}:r=function(H){return Object.getOwnPropertyNames(H)};function n(j){console&&console.warn&&console.warn(j)}var o=Number.isNaN||function(H){return H!==H};function a(){a.init.call(this)}GO.exports=a,Lc.once=b,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function u(j){if(typeof j!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof j)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(j){if(typeof j!="number"||j<0||o(j))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+j+".");s=j}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(H){if(typeof H!="number"||H<0||o(H))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+H+".");return this._maxListeners=H,this};function h(j){return j._maxListeners===void 0?a.defaultMaxListeners:j._maxListeners}a.prototype.getMaxListeners=function(){return h(this)},a.prototype.emit=function(H){for(var $=[],O=1;O<arguments.length;O++)$.push(arguments[O]);var ne=H==="error",ee=this._events;if(ee!==void 0)ne=ne&&ee.error===void 0;else if(!ne)return!1;if(ne){var D;if($.length>0&&(D=$[0]),D instanceof Error)throw D;var Q=new Error("Unhandled error."+(D?" ("+D.message+")":""));throw Q.context=D,Q}var De=ee[H];if(De===void 0)return!1;if(typeof De=="function")t(De,this,$);else for(var ae=De.length,Ce=C(De,ae),O=0;O<ae;++O)t(Ce[O],this,$);return!0};function c(j,H,$,O){var ne,ee,D;if(u($),ee=j._events,ee===void 0?(ee=j._events=Object.create(null),j._eventsCount=0):(ee.newListener!==void 0&&(j.emit("newListener",H,$.listener?$.listener:$),ee=j._events),D=ee[H]),D===void 0)D=ee[H]=$,++j._eventsCount;else if(typeof D=="function"?D=ee[H]=O?[$,D]:[D,$]:O?D.unshift($):D.push($),ne=h(j),ne>0&&D.length>ne&&!D.warned){D.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+D.length+" "+String(H)+" listeners added. Use emitter.setMaxListeners() to increase limit");Q.name="MaxListenersExceededWarning",Q.emitter=j,Q.type=H,Q.count=D.length,n(Q)}return j}a.prototype.addListener=function(H,$){return c(this,H,$,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(H,$){return c(this,H,$,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(j,H,$){var O={fired:!1,wrapFn:void 0,target:j,type:H,listener:$},ne=p.bind(O);return ne.listener=$,O.wrapFn=ne,ne}a.prototype.once=function(H,$){return u($),this.on(H,y(this,H,$)),this},a.prototype.prependOnceListener=function(H,$){return u($),this.prependListener(H,y(this,H,$)),this},a.prototype.removeListener=function(H,$){var O,ne,ee,D,Q;if(u($),ne=this._events,ne===void 0)return this;if(O=ne[H],O===void 0)return this;if(O===$||O.listener===$)--this._eventsCount===0?this._events=Object.create(null):(delete ne[H],ne.removeListener&&this.emit("removeListener",H,O.listener||$));else if(typeof O!="function"){for(ee=-1,D=O.length-1;D>=0;D--)if(O[D]===$||O[D].listener===$){Q=O[D].listener,ee=D;break}if(ee<0)return this;ee===0?O.shift():R(O,ee),O.length===1&&(ne[H]=O[0]),ne.removeListener!==void 0&&this.emit("removeListener",H,Q||$)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(H){var $,O,ne;if(O=this._events,O===void 0)return this;if(O.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):O[H]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete O[H]),this;if(arguments.length===0){var ee=Object.keys(O),D;for(ne=0;ne<ee.length;++ne)D=ee[ne],D!=="removeListener"&&this.removeAllListeners(D);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if($=O[H],typeof $=="function")this.removeListener(H,$);else if($!==void 0)for(ne=$.length-1;ne>=0;ne--)this.removeListener(H,$[ne]);return this};function m(j,H,$){var O=j._events;if(O===void 0)return[];var ne=O[H];return ne===void 0?[]:typeof ne=="function"?$?[ne.listener||ne]:[ne]:$?F(ne):C(ne,ne.length)}a.prototype.listeners=function(H){return m(this,H,!0)},a.prototype.rawListeners=function(H){return m(this,H,!1)},a.listenerCount=function(j,H){return typeof j.listenerCount=="function"?j.listenerCount(H):_.call(j,H)},a.prototype.listenerCount=_;function _(j){var H=this._events;if(H!==void 0){var $=H[j];if(typeof $=="function")return 1;if($!==void 0)return $.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function C(j,H){for(var $=new Array(H),O=0;O<H;++O)$[O]=j[O];return $}function R(j,H){for(;H+1<j.length;H++)j[H]=j[H+1];j.pop()}function F(j){for(var H=new Array(j.length),$=0;$<H.length;++$)H[$]=j[$].listener||j[$];return H}function b(j,H){return new Promise(function($,O){function ne(D){j.removeListener(H,ee),O(D)}function ee(){typeof j.removeListener=="function"&&j.removeListener("error",ne),$([].slice.call(arguments))}P(j,H,ee,{once:!0}),H!=="error"&&E(j,ne,{once:!0})})}function E(j,H,$){typeof j.on=="function"&&P(j,"error",H,$)}function P(j,H,$,O){if(typeof j.on=="function")O.once?j.once(H,$):j.on(H,$);else if(typeof j.addEventListener=="function")j.addEventListener(H,function ne(ee){O.once&&j.removeEventListener(H,ne),$(ee)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof j)}return Lc}var Ly,vE;function Av(){if(vE)return Ly;vE=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Yn(),{EventEmitter:r}=fd();function n(a){r.call(this,a)}t(n.prototype,r.prototype),t(n,r),n.prototype.pipe=function(a,s){const u=this;function h(R){a.writable&&a.write(R)===!1&&u.pause&&u.pause()}u.on("data",h);function c(){u.readable&&u.resume&&u.resume()}a.on("drain",c),!a._isStdio&&(!s||s.end!==!1)&&(u.on("end",y),u.on("close",m));let p=!1;function y(){p||(p=!0,a.end())}function m(){p||(p=!0,typeof a.destroy=="function"&&a.destroy())}function _(R){C(),r.listenerCount(this,"error")===0&&this.emit("error",R)}o(u,"error",_),o(a,"error",_);function C(){u.removeListener("data",h),a.removeListener("drain",c),u.removeListener("end",y),u.removeListener("close",m),u.removeListener("error",_),a.removeListener("error",_),u.removeListener("end",C),u.removeListener("close",C),a.removeListener("close",C)}return u.on("end",C),u.on("close",C),a.on("close",C),a.emit("pipe",u),a};function o(a,s,u){if(typeof a.prependListener=="function")return a.prependListener(s,u);!a._events||!a._events[s]?a.on(s,u):e(a._events[s])?a._events[s].unshift(u):a._events[s]=[u,a._events[s]]}return Ly={Stream:n,prependListener:o},Ly}var Qh={},qO={get exports(){return Qh},set exports(e){Qh=e}},wE;function Rv(){return wE||(wE=1,function(e){const{AbortError:t,codes:r}=Ui(),n=wa(),{ERR_INVALID_ARG_TYPE:o}=r,a=(u,h)=>{if(typeof u!="object"||!("aborted"in u))throw new o(h,"AbortSignal",u)};function s(u){return!!(u&&typeof u.pipe=="function")}e.exports.addAbortSignal=function(h,c){if(a(h,"signal"),!s(c))throw new o("stream","stream.Stream",c);return e.exports.addAbortSignalNoValidate(h,c)},e.exports.addAbortSignalNoValidate=function(u,h){if(typeof u!="object"||!("aborted"in u))return h;const c=()=>{h.destroy(new t(void 0,{cause:u.reason}))};return u.aborted?c():(u.addEventListener("abort",c),n(h,()=>u.removeEventListener("abort",c))),h}}(qO)),Qh}var Uy,_E;function zO(){if(_E)return Uy;_E=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:r,Uint8Array:n}=Yn(),{Buffer:o}=Ns(),{inspect:a}=Qo();return Uy=class{constructor(){this.head=null,this.tail=null,this.length=0}push(u){const h={data:u,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length}unshift(u){const h={data:u,next:this.head};this.length===0&&(this.tail=h),this.head=h,++this.length}shift(){if(this.length===0)return;const u=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,u}clear(){this.head=this.tail=null,this.length=0}join(u){if(this.length===0)return"";let h=this.head,c=""+h.data;for(;(h=h.next)!==null;)c+=u+h.data;return c}concat(u){if(this.length===0)return o.alloc(0);const h=o.allocUnsafe(u>>>0);let c=this.head,p=0;for(;c;)r(h,c.data,p),p+=c.data.length,c=c.next;return h}consume(u,h){const c=this.head.data;if(u<c.length){const p=c.slice(0,u);return this.head.data=c.slice(u),p}return u===c.length?this.shift():h?this._getString(u):this._getBuffer(u)}first(){return this.head.data}*[t](){for(let u=this.head;u;u=u.next)yield u.data}_getString(u){let h="",c=this.head,p=0;do{const y=c.data;if(u>y.length)h+=y,u-=y.length;else{u===y.length?(h+=y,++p,c.next?this.head=c.next:this.head=this.tail=null):(h+=e(y,0,u),this.head=c,c.data=e(y,u));break}++p}while((c=c.next)!==null);return this.length-=p,h}_getBuffer(u){const h=o.allocUnsafe(u),c=u;let p=this.head,y=0;do{const m=p.data;if(u>m.length)r(h,m,c-u),u-=m.length;else{u===m.length?(r(h,m,c-u),++y,p.next?this.head=p.next:this.head=this.tail=null):(r(h,new n(m.buffer,m.byteOffset,u),c-u),this.head=p,p.data=m.slice(u));break}++y}while((p=p.next)!==null);return this.length-=y,h}[Symbol.for("nodejs.util.inspect.custom")](u,h){return a(this,{...h,depth:0,customInspect:!1})}},Uy}var My,SE;function Cv(){if(SE)return My;SE=1;const{MathFloor:e,NumberIsInteger:t}=Yn(),{ERR_INVALID_ARG_VALUE:r}=Ui().codes;function n(s,u,h){return s.highWaterMark!=null?s.highWaterMark:u?s[h]:null}function o(s){return s?16:16*1024}function a(s,u,h,c){const p=n(u,c,h);if(p!=null){if(!t(p)||p<0){const y=c?`options.${h}`:"options.highWaterMark";throw new r(y,p)}return e(p)}return o(s.objectMode)}return My={getHighWaterMark:a,getDefaultHighWaterMark:o},My}const JO={},QO=Object.freeze(Object.defineProperty({__proto__:null,default:JO},Symbol.toStringTag,{value:"Module"})),YO=ip(QO);var By,EE;function qC(){if(EE)return By;EE=1;const e=ma(),{PromisePrototypeThen:t,SymbolAsyncIterator:r,SymbolIterator:n}=Yn(),{Buffer:o}=Ns(),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_NULL_VALUES:s}=Ui().codes;function u(h,c,p){let y;if(typeof c=="string"||c instanceof o)return new h({objectMode:!0,...p,read(){this.push(c),this.push(null)}});let m;if(c&&c[r])m=!0,y=c[r]();else if(c&&c[n])m=!1,y=c[n]();else throw new a("iterable",["Iterable"],c);const _=new h({objectMode:!0,highWaterMark:1,...p});let C=!1;_._read=function(){C||(C=!0,F())},_._destroy=function(b,E){t(R(b),()=>e.nextTick(E,b),P=>e.nextTick(E,P||b))};async function R(b){const E=b!=null,P=typeof y.throw=="function";if(E&&P){const{value:j,done:H}=await y.throw(b);if(await j,H)return}if(typeof y.return=="function"){const{value:j}=await y.return();await j}}async function F(){for(;;){try{const{value:b,done:E}=m?await y.next():y.next();if(E)_.push(null);else{const P=b&&typeof b.then=="function"?await b:b;if(P===null)throw C=!1,new s;if(_.push(P))continue;C=!1}}catch(b){_.destroy(b)}break}}return _}return By=u,By}var jy,bE;function Ap(){if(bE)return jy;bE=1;const e=ma(),{ArrayPrototypeIndexOf:t,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:o,ObjectDefineProperties:a,ObjectKeys:s,ObjectSetPrototypeOf:u,Promise:h,SafeSet:c,SymbolAsyncIterator:p,Symbol:y}=Yn();jy=me,me.ReadableState=Oe;const{EventEmitter:m}=fd(),{Stream:_,prependListener:C}=Av(),{Buffer:R}=Ns(),{addAbortSignal:F}=Rv(),b=wa();let E=Qo().debuglog("stream",te=>{E=te});const P=zO(),j=Hl(),{getHighWaterMark:H,getDefaultHighWaterMark:$}=Cv(),{aggregateTwoErrors:O,codes:{ERR_INVALID_ARG_TYPE:ne,ERR_METHOD_NOT_IMPLEMENTED:ee,ERR_OUT_OF_RANGE:D,ERR_STREAM_PUSH_AFTER_EOF:Q,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:De}}=Ui(),{validateObject:ae}=bp(),Ce=y("kPaused"),{StringDecoder:Be}=YO,Ve=qC();u(me.prototype,_.prototype),u(me,_);const $e=()=>{},{errorOrDestroy:we}=j;function Oe(te,fe,K){typeof K!="boolean"&&(K=fe instanceof Yo()),this.objectMode=!!(te&&te.objectMode),K&&(this.objectMode=this.objectMode||!!(te&&te.readableObjectMode)),this.highWaterMark=te?H(this,te,"readableHighWaterMark",K):$(!1),this.buffer=new P,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Ce]=null,this.errorEmitted=!1,this.emitClose=!te||te.emitClose!==!1,this.autoDestroy=!te||te.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=te&&te.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,te&&te.encoding&&(this.decoder=new Be(te.encoding),this.encoding=te.encoding)}function me(te){if(!(this instanceof me))return new me(te);const fe=this instanceof Yo();this._readableState=new Oe(te,this,fe),te&&(typeof te.read=="function"&&(this._read=te.read),typeof te.destroy=="function"&&(this._destroy=te.destroy),typeof te.construct=="function"&&(this._construct=te.construct),te.signal&&!fe&&F(te.signal,this)),_.call(this,te),j.construct(this,()=>{this._readableState.needReadable&&Yt(this,this._readableState)})}me.prototype.destroy=j.destroy,me.prototype._undestroy=j.undestroy,me.prototype._destroy=function(te,fe){fe(te)},me.prototype[m.captureRejectionSymbol]=function(te){this.destroy(te)},me.prototype.push=function(te,fe){return We(this,te,fe,!1)},me.prototype.unshift=function(te,fe){return We(this,te,fe,!0)};function We(te,fe,K,T){E("readableAddChunk",fe);const U=te._readableState;let k;if(U.objectMode||(typeof fe=="string"?(K=K||U.defaultEncoding,U.encoding!==K&&(T&&U.encoding?fe=R.from(fe,K).toString(U.encoding):(fe=R.from(fe,K),K=""))):fe instanceof R?K="":_._isUint8Array(fe)?(fe=_._uint8ArrayToBuffer(fe),K=""):fe!=null&&(k=new ne("chunk",["string","Buffer","Uint8Array"],fe))),k)we(te,k);else if(fe===null)U.reading=!1,Ke(te,U);else if(U.objectMode||fe&&fe.length>0)if(T)if(U.endEmitted)we(te,new De);else{if(U.destroyed||U.errored)return!1;et(te,U,fe,!0)}else if(U.ended)we(te,new Q);else{if(U.destroyed||U.errored)return!1;U.reading=!1,U.decoder&&!K?(fe=U.decoder.write(fe),U.objectMode||fe.length!==0?et(te,U,fe,!1):Yt(te,U)):et(te,U,fe,!1)}else T||(U.reading=!1,Yt(te,U));return!U.ended&&(U.length<U.highWaterMark||U.length===0)}function et(te,fe,K,T){fe.flowing&&fe.length===0&&!fe.sync&&te.listenerCount("data")>0?(fe.multiAwaitDrain?fe.awaitDrainWriters.clear():fe.awaitDrainWriters=null,fe.dataEmitted=!0,te.emit("data",K)):(fe.length+=fe.objectMode?1:K.length,T?fe.buffer.unshift(K):fe.buffer.push(K),fe.needReadable&&St(te)),Yt(te,fe)}me.prototype.isPaused=function(){const te=this._readableState;return te[Ce]===!0||te.flowing===!1},me.prototype.setEncoding=function(te){const fe=new Be(te);this._readableState.decoder=fe,this._readableState.encoding=this._readableState.decoder.encoding;const K=this._readableState.buffer;let T="";for(const U of K)T+=fe.write(U);return K.clear(),T!==""&&K.push(T),this._readableState.length=T.length,this};const Et=1073741824;function Bt(te){if(te>Et)throw new D("size","<= 1GiB",te);return te--,te|=te>>>1,te|=te>>>2,te|=te>>>4,te|=te>>>8,te|=te>>>16,te++,te}function Vt(te,fe){return te<=0||fe.length===0&&fe.ended?0:fe.objectMode?1:n(te)?fe.flowing&&fe.length?fe.buffer.first().length:fe.length:te<=fe.length?te:fe.ended?fe.length:0}me.prototype.read=function(te){E("read",te),te===void 0?te=NaN:r(te)||(te=o(te,10));const fe=this._readableState,K=te;if(te>fe.highWaterMark&&(fe.highWaterMark=Bt(te)),te!==0&&(fe.emittedReadable=!1),te===0&&fe.needReadable&&((fe.highWaterMark!==0?fe.length>=fe.highWaterMark:fe.length>0)||fe.ended))return E("read: emitReadable",fe.length,fe.ended),fe.length===0&&fe.ended?Nt(this):St(this),null;if(te=Vt(te,fe),te===0&&fe.ended)return fe.length===0&&Nt(this),null;let T=fe.needReadable;if(E("need readable",T),(fe.length===0||fe.length-te<fe.highWaterMark)&&(T=!0,E("length less than watermark",T)),fe.ended||fe.reading||fe.destroyed||fe.errored||!fe.constructed)T=!1,E("reading, ended or constructing",T);else if(T){E("do read"),fe.reading=!0,fe.sync=!0,fe.length===0&&(fe.needReadable=!0);try{this._read(fe.highWaterMark)}catch(k){we(this,k)}fe.sync=!1,fe.reading||(te=Vt(K,fe))}let U;return te>0?U=lt(te,fe):U=null,U===null?(fe.needReadable=fe.length<=fe.highWaterMark,te=0):(fe.length-=te,fe.multiAwaitDrain?fe.awaitDrainWriters.clear():fe.awaitDrainWriters=null),fe.length===0&&(fe.ended||(fe.needReadable=!0),K!==te&&fe.ended&&Nt(this)),U!==null&&!fe.errorEmitted&&!fe.closeEmitted&&(fe.dataEmitted=!0,this.emit("data",U)),U};function Ke(te,fe){if(E("onEofChunk"),!fe.ended){if(fe.decoder){const K=fe.decoder.end();K&&K.length&&(fe.buffer.push(K),fe.length+=fe.objectMode?1:K.length)}fe.ended=!0,fe.sync?St(te):(fe.needReadable=!1,fe.emittedReadable=!0,jt(te))}}function St(te){const fe=te._readableState;E("emitReadable",fe.needReadable,fe.emittedReadable),fe.needReadable=!1,fe.emittedReadable||(E("emitReadable",fe.flowing),fe.emittedReadable=!0,e.nextTick(jt,te))}function jt(te){const fe=te._readableState;E("emitReadable_",fe.destroyed,fe.length,fe.ended),!fe.destroyed&&!fe.errored&&(fe.length||fe.ended)&&(te.emit("readable"),fe.emittedReadable=!1),fe.needReadable=!fe.flowing&&!fe.ended&&fe.length<=fe.highWaterMark,de(te)}function Yt(te,fe){!fe.readingMore&&fe.constructed&&(fe.readingMore=!0,e.nextTick(ut,te,fe))}function ut(te,fe){for(;!fe.reading&&!fe.ended&&(fe.length<fe.highWaterMark||fe.flowing&&fe.length===0);){const K=fe.length;if(E("maybeReadMore read 0"),te.read(0),K===fe.length)break}fe.readingMore=!1}me.prototype._read=function(te){throw new ee("_read()")},me.prototype.pipe=function(te,fe){const K=this,T=this._readableState;T.pipes.length===1&&(T.multiAwaitDrain||(T.multiAwaitDrain=!0,T.awaitDrainWriters=new c(T.awaitDrainWriters?[T.awaitDrainWriters]:[]))),T.pipes.push(te),E("pipe count=%d opts=%j",T.pipes.length,fe);const k=(!fe||fe.end!==!1)&&te!==e.stdout&&te!==e.stderr?Pe:_e;T.endEmitted?e.nextTick(k):K.once("end",k),te.on("unpipe",ge);function ge(je,st){E("onunpipe"),je===K&&st&&st.hasUnpiped===!1&&(st.hasUnpiped=!0,Ht())}function Pe(){E("onend"),te.end()}let oe,mt=!1;function Ht(){E("cleanup"),te.removeListener("close",Me),te.removeListener("finish",Ne),oe&&te.removeListener("drain",oe),te.removeListener("error",Se),te.removeListener("unpipe",ge),K.removeListener("end",Pe),K.removeListener("end",_e),K.removeListener("data",_t),mt=!0,oe&&T.awaitDrainWriters&&(!te._writableState||te._writableState.needDrain)&&oe()}function wt(){mt||(T.pipes.length===1&&T.pipes[0]===te?(E("false write response, pause",0),T.awaitDrainWriters=te,T.multiAwaitDrain=!1):T.pipes.length>1&&T.pipes.includes(te)&&(E("false write response, pause",T.awaitDrainWriters.size),T.awaitDrainWriters.add(te)),K.pause()),oe||(oe=Z(K,te),te.on("drain",oe))}K.on("data",_t);function _t(je){E("ondata");const st=te.write(je);E("dest.write",st),st===!1&&wt()}function Se(je){if(E("onerror",je),_e(),te.removeListener("error",Se),te.listenerCount("error")===0){const st=te._writableState||te._readableState;st&&!st.errorEmitted?we(te,je):te.emit("error",je)}}C(te,"error",Se);function Me(){te.removeListener("finish",Ne),_e()}te.once("close",Me);function Ne(){E("onfinish"),te.removeListener("close",Me),_e()}te.once("finish",Ne);function _e(){E("unpipe"),K.unpipe(te)}return te.emit("pipe",K),te.writableNeedDrain===!0?T.flowing&&wt():T.flowing||(E("pipe resume"),K.resume()),te};function Z(te,fe){return function(){const T=te._readableState;T.awaitDrainWriters===fe?(E("pipeOnDrain",1),T.awaitDrainWriters=null):T.multiAwaitDrain&&(E("pipeOnDrain",T.awaitDrainWriters.size),T.awaitDrainWriters.delete(fe)),(!T.awaitDrainWriters||T.awaitDrainWriters.size===0)&&te.listenerCount("data")&&te.resume()}}me.prototype.unpipe=function(te){const fe=this._readableState,K={hasUnpiped:!1};if(fe.pipes.length===0)return this;if(!te){const U=fe.pipes;fe.pipes=[],this.pause();for(let k=0;k<U.length;k++)U[k].emit("unpipe",this,{hasUnpiped:!1});return this}const T=t(fe.pipes,te);return T===-1?this:(fe.pipes.splice(T,1),fe.pipes.length===0&&this.pause(),te.emit("unpipe",this,K),this)},me.prototype.on=function(te,fe){const K=_.prototype.on.call(this,te,fe),T=this._readableState;return te==="data"?(T.readableListening=this.listenerCount("readable")>0,T.flowing!==!1&&this.resume()):te==="readable"&&!T.endEmitted&&!T.readableListening&&(T.readableListening=T.needReadable=!0,T.flowing=!1,T.emittedReadable=!1,E("on readable",T.length,T.reading),T.length?St(this):T.reading||e.nextTick(S,this)),K},me.prototype.addListener=me.prototype.on,me.prototype.removeListener=function(te,fe){const K=_.prototype.removeListener.call(this,te,fe);return te==="readable"&&e.nextTick(I,this),K},me.prototype.off=me.prototype.removeListener,me.prototype.removeAllListeners=function(te){const fe=_.prototype.removeAllListeners.apply(this,arguments);return(te==="readable"||te===void 0)&&e.nextTick(I,this),fe};function I(te){const fe=te._readableState;fe.readableListening=te.listenerCount("readable")>0,fe.resumeScheduled&&fe[Ce]===!1?fe.flowing=!0:te.listenerCount("data")>0?te.resume():fe.readableListening||(fe.flowing=null)}function S(te){E("readable nexttick read 0"),te.read(0)}me.prototype.resume=function(){const te=this._readableState;return te.flowing||(E("resume"),te.flowing=!te.readableListening,B(this,te)),te[Ce]=!1,this};function B(te,fe){fe.resumeScheduled||(fe.resumeScheduled=!0,e.nextTick(G,te,fe))}function G(te,fe){E("resume",fe.reading),fe.reading||te.read(0),fe.resumeScheduled=!1,te.emit("resume"),de(te),fe.flowing&&!fe.reading&&te.read(0)}me.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ce]=!0,this};function de(te){const fe=te._readableState;for(E("flow",fe.flowing);fe.flowing&&te.read()!==null;);}me.prototype.wrap=function(te){let fe=!1;te.on("data",T=>{!this.push(T)&&te.pause&&(fe=!0,te.pause())}),te.on("end",()=>{this.push(null)}),te.on("error",T=>{we(this,T)}),te.on("close",()=>{this.destroy()}),te.on("destroy",()=>{this.destroy()}),this._read=()=>{fe&&te.resume&&(fe=!1,te.resume())};const K=s(te);for(let T=1;T<K.length;T++){const U=K[T];this[U]===void 0&&typeof te[U]=="function"&&(this[U]=te[U].bind(te))}return this},me.prototype[p]=function(){return Ee(this)},me.prototype.iterator=function(te){return te!==void 0&&ae(te,"options"),Ee(this,te)};function Ee(te,fe){typeof te.read!="function"&&(te=me.wrap(te,{objectMode:!0}));const K=rt(te,fe);return K.stream=te,K}async function*rt(te,fe){let K=$e;function T(ge){this===te?(K(),K=$e):K=ge}te.on("readable",T);let U;const k=b(te,{writable:!1},ge=>{U=ge?O(U,ge):null,K(),K=$e});try{for(;;){const ge=te.destroyed?null:te.read();if(ge!==null)yield ge;else{if(U)throw U;if(U===null)return;await new h(T)}}}catch(ge){throw U=O(U,ge),U}finally{(U||(fe==null?void 0:fe.destroyOnReturn)!==!1)&&(U===void 0||te._readableState.autoDestroy)?j.destroyer(te,null):(te.off("readable",T),k())}}a(me.prototype,{readable:{__proto__:null,get(){const te=this._readableState;return!!te&&te.readable!==!1&&!te.destroyed&&!te.errorEmitted&&!te.endEmitted},set(te){this._readableState&&(this._readableState.readable=!!te)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(te){this._readableState&&(this._readableState.flowing=te)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(te){this._readableState&&(this._readableState.destroyed=te)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(Oe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Ce]!==!1},set(te){this[Ce]=!!te}}}),me._fromList=lt;function lt(te,fe){if(fe.length===0)return null;let K;return fe.objectMode?K=fe.buffer.shift():!te||te>=fe.length?(fe.decoder?K=fe.buffer.join(""):fe.buffer.length===1?K=fe.buffer.first():K=fe.buffer.concat(fe.length),fe.buffer.clear()):K=fe.buffer.consume(te,fe.decoder),K}function Nt(te){const fe=te._readableState;E("endReadable",fe.endEmitted),fe.endEmitted||(fe.ended=!0,e.nextTick(Kt,fe,te))}function Kt(te,fe){if(E("endReadableNT",te.endEmitted,te.length),!te.errored&&!te.closeEmitted&&!te.endEmitted&&te.length===0){if(te.endEmitted=!0,fe.emit("end"),fe.writable&&fe.allowHalfOpen===!1)e.nextTick(Xt,fe);else if(te.autoDestroy){const K=fe._writableState;(!K||K.autoDestroy&&(K.finished||K.writable===!1))&&fe.destroy()}}}function Xt(te){te.writable&&!te.writableEnded&&!te.destroyed&&te.end()}me.from=function(te,fe){return Ve(me,te,fe)};let dr;function dn(){return dr===void 0&&(dr={}),dr}return me.fromWeb=function(te,fe){return dn().newStreamReadableFromReadableStream(te,fe)},me.toWeb=function(te,fe){return dn().newReadableStreamFromStreamReadable(te,fe)},me.wrap=function(te,fe){var K,T;return new me({objectMode:(K=(T=te.readableObjectMode)!==null&&T!==void 0?T:te.objectMode)!==null&&K!==void 0?K:!0,...fe,destroy(U,k){j.destroyer(te,U),k(U)}}).wrap(te)},jy}var Hy,AE;function zC(){if(AE)return Hy;AE=1;const e=ma(),{ArrayPrototypeSlice:t,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:o,ObjectDefineProperties:a,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:u,Symbol:h,SymbolHasInstance:c}=Yn();Hy=Be,Be.WritableState=ae;const{EventEmitter:p}=fd(),y=Av().Stream,{Buffer:m}=Ns(),_=Hl(),{addAbortSignal:C}=Rv(),{getHighWaterMark:R,getDefaultHighWaterMark:F}=Cv(),{ERR_INVALID_ARG_TYPE:b,ERR_METHOD_NOT_IMPLEMENTED:E,ERR_MULTIPLE_CALLBACK:P,ERR_STREAM_CANNOT_PIPE:j,ERR_STREAM_DESTROYED:H,ERR_STREAM_ALREADY_FINISHED:$,ERR_STREAM_NULL_VALUES:O,ERR_STREAM_WRITE_AFTER_END:ne,ERR_UNKNOWN_ENCODING:ee}=Ui().codes,{errorOrDestroy:D}=_;s(Be.prototype,y.prototype),s(Be,y);function Q(){}const De=h("kOnFinished");function ae(S,B,G){typeof G!="boolean"&&(G=B instanceof Yo()),this.objectMode=!!(S&&S.objectMode),G&&(this.objectMode=this.objectMode||!!(S&&S.writableObjectMode)),this.highWaterMark=S?R(this,S,"writableHighWaterMark",G):F(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const de=!!(S&&S.decodeStrings===!1);this.decodeStrings=!de,this.defaultEncoding=S&&S.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=me.bind(void 0,B),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Ce(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!S||S.emitClose!==!1,this.autoDestroy=!S||S.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[De]=[]}function Ce(S){S.buffered=[],S.bufferedIndex=0,S.allBuffers=!0,S.allNoop=!0}ae.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},o(ae.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Be(S){const B=this instanceof Yo();if(!B&&!n(Be,this))return new Be(S);this._writableState=new ae(S,this,B),S&&(typeof S.write=="function"&&(this._write=S.write),typeof S.writev=="function"&&(this._writev=S.writev),typeof S.destroy=="function"&&(this._destroy=S.destroy),typeof S.final=="function"&&(this._final=S.final),typeof S.construct=="function"&&(this._construct=S.construct),S.signal&&C(S.signal,this)),y.call(this,S),_.construct(this,()=>{const G=this._writableState;G.writing||Bt(this,G),jt(this,G)})}o(Be,c,{__proto__:null,value:function(S){return n(this,S)?!0:this!==Be?!1:S&&S._writableState instanceof ae}}),Be.prototype.pipe=function(){D(this,new j)};function Ve(S,B,G,de){const Ee=S._writableState;if(typeof G=="function")de=G,G=Ee.defaultEncoding;else{if(!G)G=Ee.defaultEncoding;else if(G!=="buffer"&&!m.isEncoding(G))throw new ee(G);typeof de!="function"&&(de=Q)}if(B===null)throw new O;if(!Ee.objectMode)if(typeof B=="string")Ee.decodeStrings!==!1&&(B=m.from(B,G),G="buffer");else if(B instanceof m)G="buffer";else if(y._isUint8Array(B))B=y._uint8ArrayToBuffer(B),G="buffer";else throw new b("chunk",["string","Buffer","Uint8Array"],B);let rt;return Ee.ending?rt=new ne:Ee.destroyed&&(rt=new H("write")),rt?(e.nextTick(de,rt),D(S,rt,!0),rt):(Ee.pendingcb++,$e(S,Ee,B,G,de))}Be.prototype.write=function(S,B,G){return Ve(this,S,B,G)===!0},Be.prototype.cork=function(){this._writableState.corked++},Be.prototype.uncork=function(){const S=this._writableState;S.corked&&(S.corked--,S.writing||Bt(this,S))},Be.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=u(B)),!m.isEncoding(B))throw new ee(B);return this._writableState.defaultEncoding=B,this};function $e(S,B,G,de,Ee){const rt=B.objectMode?1:G.length;B.length+=rt;const lt=B.length<B.highWaterMark;return lt||(B.needDrain=!0),B.writing||B.corked||B.errored||!B.constructed?(B.buffered.push({chunk:G,encoding:de,callback:Ee}),B.allBuffers&&de!=="buffer"&&(B.allBuffers=!1),B.allNoop&&Ee!==Q&&(B.allNoop=!1)):(B.writelen=rt,B.writecb=Ee,B.writing=!0,B.sync=!0,S._write(G,de,B.onwrite),B.sync=!1),lt&&!B.errored&&!B.destroyed}function we(S,B,G,de,Ee,rt,lt){B.writelen=de,B.writecb=lt,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new H("write")):G?S._writev(Ee,B.onwrite):S._write(Ee,rt,B.onwrite),B.sync=!1}function Oe(S,B,G,de){--B.pendingcb,de(G),Et(B),D(S,G)}function me(S,B){const G=S._writableState,de=G.sync,Ee=G.writecb;if(typeof Ee!="function"){D(S,new P);return}G.writing=!1,G.writecb=null,G.length-=G.writelen,G.writelen=0,B?(B.stack,G.errored||(G.errored=B),S._readableState&&!S._readableState.errored&&(S._readableState.errored=B),de?e.nextTick(Oe,S,G,B,Ee):Oe(S,G,B,Ee)):(G.buffered.length>G.bufferedIndex&&Bt(S,G),de?G.afterWriteTickInfo!==null&&G.afterWriteTickInfo.cb===Ee?G.afterWriteTickInfo.count++:(G.afterWriteTickInfo={count:1,cb:Ee,stream:S,state:G},e.nextTick(We,G.afterWriteTickInfo)):et(S,G,1,Ee))}function We({stream:S,state:B,count:G,cb:de}){return B.afterWriteTickInfo=null,et(S,B,G,de)}function et(S,B,G,de){for(!B.ending&&!S.destroyed&&B.length===0&&B.needDrain&&(B.needDrain=!1,S.emit("drain"));G-- >0;)B.pendingcb--,de();B.destroyed&&Et(B),jt(S,B)}function Et(S){if(S.writing)return;for(let Ee=S.bufferedIndex;Ee<S.buffered.length;++Ee){var B;const{chunk:rt,callback:lt}=S.buffered[Ee],Nt=S.objectMode?1:rt.length;S.length-=Nt,lt((B=S.errored)!==null&&B!==void 0?B:new H("write"))}const G=S[De].splice(0);for(let Ee=0;Ee<G.length;Ee++){var de;G[Ee]((de=S.errored)!==null&&de!==void 0?de:new H("end"))}Ce(S)}function Bt(S,B){if(B.corked||B.bufferProcessing||B.destroyed||!B.constructed)return;const{buffered:G,bufferedIndex:de,objectMode:Ee}=B,rt=G.length-de;if(!rt)return;let lt=de;if(B.bufferProcessing=!0,rt>1&&S._writev){B.pendingcb-=rt-1;const Nt=B.allNoop?Q:Xt=>{for(let dr=lt;dr<G.length;++dr)G[dr].callback(Xt)},Kt=B.allNoop&&lt===0?G:t(G,lt);Kt.allBuffers=B.allBuffers,we(S,B,!0,B.length,Kt,"",Nt),Ce(B)}else{do{const{chunk:Nt,encoding:Kt,callback:Xt}=G[lt];G[lt++]=null;const dr=Ee?1:Nt.length;we(S,B,!1,dr,Nt,Kt,Xt)}while(lt<G.length&&!B.writing);lt===G.length?Ce(B):lt>256?(G.splice(0,lt),B.bufferedIndex=0):B.bufferedIndex=lt}B.bufferProcessing=!1}Be.prototype._write=function(S,B,G){if(this._writev)this._writev([{chunk:S,encoding:B}],G);else throw new E("_write()")},Be.prototype._writev=null,Be.prototype.end=function(S,B,G){const de=this._writableState;typeof S=="function"?(G=S,S=null,B=null):typeof B=="function"&&(G=B,B=null);let Ee;if(S!=null){const rt=Ve(this,S,B);rt instanceof r&&(Ee=rt)}return de.corked&&(de.corked=1,this.uncork()),Ee||(!de.errored&&!de.ending?(de.ending=!0,jt(this,de,!0),de.ended=!0):de.finished?Ee=new $("end"):de.destroyed&&(Ee=new H("end"))),typeof G=="function"&&(Ee||de.finished?e.nextTick(G,Ee):de[De].push(G)),this};function Vt(S){return S.ending&&!S.destroyed&&S.constructed&&S.length===0&&!S.errored&&S.buffered.length===0&&!S.finished&&!S.writing&&!S.errorEmitted&&!S.closeEmitted}function Ke(S,B){let G=!1;function de(Ee){if(G){D(S,Ee??P());return}if(G=!0,B.pendingcb--,Ee){const rt=B[De].splice(0);for(let lt=0;lt<rt.length;lt++)rt[lt](Ee);D(S,Ee,B.sync)}else Vt(B)&&(B.prefinished=!0,S.emit("prefinish"),B.pendingcb++,e.nextTick(Yt,S,B))}B.sync=!0,B.pendingcb++;try{S._final(de)}catch(Ee){de(Ee)}B.sync=!1}function St(S,B){!B.prefinished&&!B.finalCalled&&(typeof S._final=="function"&&!B.destroyed?(B.finalCalled=!0,Ke(S,B)):(B.prefinished=!0,S.emit("prefinish")))}function jt(S,B,G){Vt(B)&&(St(S,B),B.pendingcb===0&&(G?(B.pendingcb++,e.nextTick((de,Ee)=>{Vt(Ee)?Yt(de,Ee):Ee.pendingcb--},S,B)):Vt(B)&&(B.pendingcb++,Yt(S,B))))}function Yt(S,B){B.pendingcb--,B.finished=!0;const G=B[De].splice(0);for(let de=0;de<G.length;de++)G[de]();if(S.emit("finish"),B.autoDestroy){const de=S._readableState;(!de||de.autoDestroy&&(de.endEmitted||de.readable===!1))&&S.destroy()}}a(Be.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(S){this._writableState&&(this._writableState.destroyed=S)}},writable:{__proto__:null,get(){const S=this._writableState;return!!S&&S.writable!==!1&&!S.destroyed&&!S.errored&&!S.ending&&!S.ended},set(S){this._writableState&&(this._writableState.writable=!!S)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const S=this._writableState;return S?!S.destroyed&&!S.ending&&S.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const ut=_.destroy;Be.prototype.destroy=function(S,B){const G=this._writableState;return!G.destroyed&&(G.bufferedIndex<G.buffered.length||G[De].length)&&e.nextTick(Et,G),ut.call(this,S,B),this},Be.prototype._undestroy=_.undestroy,Be.prototype._destroy=function(S,B){B(S)},Be.prototype[p.captureRejectionSymbol]=function(S){this.destroy(S)};let Z;function I(){return Z===void 0&&(Z={}),Z}return Be.fromWeb=function(S,B){return I().newStreamWritableFromWritableStream(S,B)},Be.toWeb=function(S){return I().newWritableStreamFromStreamWritable(S)},Hy}var $y,RE;function XO(){if(RE)return $y;RE=1;const e=ma(),t=Ns(),{isReadable:r,isWritable:n,isIterable:o,isNodeStream:a,isReadableNodeStream:s,isWritableNodeStream:u,isDuplexNodeStream:h}=va(),c=wa(),{AbortError:p,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:m}}=Ui(),{destroyer:_}=Hl(),C=Yo(),R=Ap(),{createDeferredPromise:F}=Qo(),b=qC(),E=globalThis.Blob||t.Blob,P=typeof E<"u"?function(D){return D instanceof E}:function(D){return!1},j=globalThis.AbortController||bv().AbortController,{FunctionPrototypeCall:H}=Yn();class $ extends C{constructor(D){super(D),(D==null?void 0:D.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(D==null?void 0:D.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}$y=function ee(D,Q){if(h(D))return D;if(s(D))return ne({readable:D});if(u(D))return ne({writable:D});if(a(D))return ne({writable:!1,readable:!1});if(typeof D=="function"){const{value:ae,write:Ce,final:Be,destroy:Ve}=O(D);if(o(ae))return b($,ae,{objectMode:!0,write:Ce,final:Be,destroy:Ve});const $e=ae==null?void 0:ae.then;if(typeof $e=="function"){let we;const Oe=H($e,ae,me=>{if(me!=null)throw new m("nully","body",me)},me=>{_(we,me)});return we=new $({objectMode:!0,readable:!1,write:Ce,final(me){Be(async()=>{try{await Oe,e.nextTick(me,null)}catch(We){e.nextTick(me,We)}})},destroy:Ve})}throw new m("Iterable, AsyncIterable or AsyncFunction",Q,ae)}if(P(D))return ee(D.arrayBuffer());if(o(D))return b($,D,{objectMode:!0,writable:!1});if(typeof(D==null?void 0:D.writable)=="object"||typeof(D==null?void 0:D.readable)=="object"){const ae=D!=null&&D.readable?s(D==null?void 0:D.readable)?D==null?void 0:D.readable:ee(D.readable):void 0,Ce=D!=null&&D.writable?u(D==null?void 0:D.writable)?D==null?void 0:D.writable:ee(D.writable):void 0;return ne({readable:ae,writable:Ce})}const De=D==null?void 0:D.then;if(typeof De=="function"){let ae;return H(De,D,Ce=>{Ce!=null&&ae.push(Ce),ae.push(null)},Ce=>{_(ae,Ce)}),ae=new $({objectMode:!0,writable:!1,read(){}})}throw new y(Q,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],D)};function O(ee){let{promise:D,resolve:Q}=F();const De=new j,ae=De.signal;return{value:ee(async function*(){for(;;){const Be=D;D=null;const{chunk:Ve,done:$e,cb:we}=await Be;if(e.nextTick(we),$e)return;if(ae.aborted)throw new p(void 0,{cause:ae.reason});({promise:D,resolve:Q}=F()),yield Ve}}(),{signal:ae}),write(Be,Ve,$e){const we=Q;Q=null,we({chunk:Be,done:!1,cb:$e})},final(Be){const Ve=Q;Q=null,Ve({done:!0,cb:Be})},destroy(Be,Ve){De.abort(),Ve(Be)}}}function ne(ee){const D=ee.readable&&typeof ee.readable.read!="function"?R.wrap(ee.readable):ee.readable,Q=ee.writable;let De=!!r(D),ae=!!n(Q),Ce,Be,Ve,$e,we;function Oe(me){const We=$e;$e=null,We?We(me):me?we.destroy(me):!De&&!ae&&we.destroy()}return we=new $({readableObjectMode:!!(D!=null&&D.readableObjectMode),writableObjectMode:!!(Q!=null&&Q.writableObjectMode),readable:De,writable:ae}),ae&&(c(Q,me=>{ae=!1,me&&_(D,me),Oe(me)}),we._write=function(me,We,et){Q.write(me,We)?et():Ce=et},we._final=function(me){Q.end(),Be=me},Q.on("drain",function(){if(Ce){const me=Ce;Ce=null,me()}}),Q.on("finish",function(){if(Be){const me=Be;Be=null,me()}})),De&&(c(D,me=>{De=!1,me&&_(D,me),Oe(me)}),D.on("readable",function(){if(Ve){const me=Ve;Ve=null,me()}}),D.on("end",function(){we.push(null)}),we._read=function(){for(;;){const me=D.read();if(me===null){Ve=we._read;return}if(!we.push(me))return}}),we._destroy=function(me,We){!me&&$e!==null&&(me=new p),Ve=null,Ce=null,Be=null,$e===null?We(me):($e=We,_(Q,me),_(D,me))},we}return $y}var Vy,CE;function Yo(){if(CE)return Vy;CE=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:r,ObjectSetPrototypeOf:n}=Yn();Vy=s;const o=Ap(),a=zC();n(s.prototype,o.prototype),n(s,o);{const p=r(a.prototype);for(let y=0;y<p.length;y++){const m=p[y];s.prototype[m]||(s.prototype[m]=a.prototype[m])}}function s(p){if(!(this instanceof s))return new s(p);o.call(this,p),a.call(this,p),p?(this.allowHalfOpen=p.allowHalfOpen!==!1,p.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),p.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(a.prototype,"writableLength")},writableFinished:{__proto__:null,...t(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(p){this._readableState&&this._writableState&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}});let u;function h(){return u===void 0&&(u={}),u}s.fromWeb=function(p,y){return h().newStreamDuplexFromReadableWritablePair(p,y)},s.toWeb=function(p){return h().newReadableWritablePairFromDuplex(p)};let c;return s.from=function(p){return c||(c=XO()),c(p,"body")},Vy}var Ky,xE;function JC(){if(xE)return Ky;xE=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Yn();Ky=s;const{ERR_METHOD_NOT_IMPLEMENTED:r}=Ui().codes,n=Yo(),{getHighWaterMark:o}=Cv();e(s.prototype,n.prototype),e(s,n);const a=t("kCallback");function s(c){if(!(this instanceof s))return new s(c);const p=c?o(this,c,"readableHighWaterMark",!0):null;p===0&&(c={...c,highWaterMark:null,readableHighWaterMark:p,writableHighWaterMark:c.writableHighWaterMark||0}),n.call(this,c),this._readableState.sync=!1,this[a]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",h)}function u(c){typeof this._flush=="function"&&!this.destroyed?this._flush((p,y)=>{if(p){c?c(p):this.destroy(p);return}y!=null&&this.push(y),this.push(null),c&&c()}):(this.push(null),c&&c())}function h(){this._final!==u&&u.call(this)}return s.prototype._final=u,s.prototype._transform=function(c,p,y){throw new r("_transform()")},s.prototype._write=function(c,p,y){const m=this._readableState,_=this._writableState,C=m.length;this._transform(c,p,(R,F)=>{if(R){y(R);return}F!=null&&this.push(F),_.ended||C===m.length||m.length<m.highWaterMark?y():this[a]=y})},s.prototype._read=function(){if(this[a]){const c=this[a];this[a]=null,c()}},Ky}var Wy,PE;function QC(){if(PE)return Wy;PE=1;const{ObjectSetPrototypeOf:e}=Yn();Wy=r;const t=JC();e(r.prototype,t.prototype),e(r,t);function r(n){if(!(this instanceof r))return new r(n);t.call(this,n)}return r.prototype._transform=function(n,o,a){a(null,n)},Wy}var Gy,TE;function xv(){if(TE)return Gy;TE=1;const e=ma(),{ArrayIsArray:t,Promise:r,SymbolAsyncIterator:n}=Yn(),o=wa(),{once:a}=Qo(),s=Hl(),u=Yo(),{aggregateTwoErrors:h,codes:{ERR_INVALID_ARG_TYPE:c,ERR_INVALID_RETURN_VALUE:p,ERR_MISSING_ARGS:y,ERR_STREAM_DESTROYED:m,ERR_STREAM_PREMATURE_CLOSE:_},AbortError:C}=Ui(),{validateFunction:R,validateAbortSignal:F}=bp(),{isIterable:b,isReadable:E,isReadableNodeStream:P,isNodeStream:j}=va(),H=globalThis.AbortController||bv().AbortController;let $,O;function ne(Ve,$e,we){let Oe=!1;Ve.on("close",()=>{Oe=!0});const me=o(Ve,{readable:$e,writable:we},We=>{Oe=!We});return{destroy:We=>{Oe||(Oe=!0,s.destroyer(Ve,We||new m("pipe")))},cleanup:me}}function ee(Ve){return R(Ve[Ve.length-1],"streams[stream.length - 1]"),Ve.pop()}function D(Ve){if(b(Ve))return Ve;if(P(Ve))return Q(Ve);throw new c("val",["Readable","Iterable","AsyncIterable"],Ve)}async function*Q(Ve){O||(O=Ap()),yield*O.prototype[n].call(Ve)}async function De(Ve,$e,we,{end:Oe}){let me,We=null;const et=Vt=>{if(Vt&&(me=Vt),We){const Ke=We;We=null,Ke()}},Et=()=>new r((Vt,Ke)=>{me?Ke(me):We=()=>{me?Ke(me):Vt()}});$e.on("drain",et);const Bt=o($e,{readable:!1},et);try{$e.writableNeedDrain&&await Et();for await(const Vt of Ve)$e.write(Vt)||await Et();Oe&&$e.end(),await Et(),we()}catch(Vt){we(me!==Vt?h(me,Vt):Vt)}finally{Bt(),$e.off("drain",et)}}function ae(...Ve){return Ce(Ve,a(ee(Ve)))}function Ce(Ve,$e,we){if(Ve.length===1&&t(Ve[0])&&(Ve=Ve[0]),Ve.length<2)throw new y("streams");const Oe=new H,me=Oe.signal,We=we==null?void 0:we.signal,et=[];F(We,"options.signal");function Et(){Yt(new C)}We==null||We.addEventListener("abort",Et);let Bt,Vt;const Ke=[];let St=0;function jt(S){Yt(S,--St===0)}function Yt(S,B){if(S&&(!Bt||Bt.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Bt=S),!(!Bt&&!B)){for(;Ke.length;)Ke.shift()(Bt);We==null||We.removeEventListener("abort",Et),Oe.abort(),B&&(Bt||et.forEach(G=>G()),e.nextTick($e,Bt,Vt))}}let ut;for(let S=0;S<Ve.length;S++){const B=Ve[S],G=S<Ve.length-1,de=S>0,Ee=G||(we==null?void 0:we.end)!==!1,rt=S===Ve.length-1;if(j(B)){let lt=function(Nt){Nt&&Nt.name!=="AbortError"&&Nt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&jt(Nt)};var I=lt;if(Ee){const{destroy:Nt,cleanup:Kt}=ne(B,G,de);Ke.push(Nt),E(B)&&rt&&et.push(Kt)}B.on("error",lt),E(B)&&rt&&et.push(()=>{B.removeListener("error",lt)})}if(S===0)if(typeof B=="function"){if(ut=B({signal:me}),!b(ut))throw new p("Iterable, AsyncIterable or Stream","source",ut)}else b(B)||P(B)?ut=B:ut=u.from(B);else if(typeof B=="function")if(ut=D(ut),ut=B(ut,{signal:me}),G){if(!b(ut,!0))throw new p("AsyncIterable",`transform[${S-1}]`,ut)}else{var Z;$||($=QC());const lt=new $({objectMode:!0}),Nt=(Z=ut)===null||Z===void 0?void 0:Z.then;if(typeof Nt=="function")St++,Nt.call(ut,dr=>{Vt=dr,dr!=null&&lt.write(dr),Ee&&lt.end(),e.nextTick(jt)},dr=>{lt.destroy(dr),e.nextTick(jt,dr)});else if(b(ut,!0))St++,De(ut,lt,jt,{end:Ee});else throw new p("AsyncIterable or Promise","destination",ut);ut=lt;const{destroy:Kt,cleanup:Xt}=ne(ut,!1,!0);Ke.push(Kt),rt&&et.push(Xt)}else if(j(B)){if(P(ut)){St+=2;const lt=Be(ut,B,jt,{end:Ee});E(B)&&rt&&et.push(lt)}else if(b(ut))St++,De(ut,B,jt,{end:Ee});else throw new c("val",["Readable","Iterable","AsyncIterable"],ut);ut=B}else ut=u.from(B)}return(me!=null&&me.aborted||We!=null&&We.aborted)&&e.nextTick(Et),ut}function Be(Ve,$e,we,{end:Oe}){let me=!1;return $e.on("close",()=>{me||we(new _)}),Ve.pipe($e,{end:Oe}),Oe?Ve.once("end",()=>{me=!0,$e.end()}):we(),o(Ve,{readable:!0,writable:!1},We=>{const et=Ve._readableState;We&&We.code==="ERR_STREAM_PREMATURE_CLOSE"&&et&&et.ended&&!et.errored&&!et.errorEmitted?Ve.once("end",we).once("error",we):we(We)}),o($e,{readable:!1,writable:!0},we)}return Gy={pipelineImpl:Ce,pipeline:ae},Gy}var qy,IE;function ZO(){if(IE)return qy;IE=1;const{pipeline:e}=xv(),t=Yo(),{destroyer:r}=Hl(),{isNodeStream:n,isReadable:o,isWritable:a}=va(),{AbortError:s,codes:{ERR_INVALID_ARG_VALUE:u,ERR_MISSING_ARGS:h}}=Ui();return qy=function(...p){if(p.length===0)throw new h("streams");if(p.length===1)return t.from(p[0]);const y=[...p];if(typeof p[0]=="function"&&(p[0]=t.from(p[0])),typeof p[p.length-1]=="function"){const $=p.length-1;p[$]=t.from(p[$])}for(let $=0;$<p.length;++$)if(n(p[$])){if($<p.length-1&&!o(p[$]))throw new u(`streams[${$}]`,y[$],"must be readable");if($>0&&!a(p[$]))throw new u(`streams[${$}]`,y[$],"must be writable")}let m,_,C,R,F;function b($){const O=R;R=null,O?O($):$?F.destroy($):!H&&!j&&F.destroy()}const E=p[0],P=e(p,b),j=!!a(E),H=!!o(P);return F=new t({writableObjectMode:!!(E!=null&&E.writableObjectMode),readableObjectMode:!!(P!=null&&P.writableObjectMode),writable:j,readable:H}),j&&(F._write=function($,O,ne){E.write($,O)?ne():m=ne},F._final=function($){E.end(),_=$},E.on("drain",function(){if(m){const $=m;m=null,$()}}),P.on("finish",function(){if(_){const $=_;_=null,$()}})),H&&(P.on("readable",function(){if(C){const $=C;C=null,$()}}),P.on("end",function(){F.push(null)}),F._read=function(){for(;;){const $=P.read();if($===null){C=F._read;return}if(!F.push($))return}}),F._destroy=function($,O){!$&&R!==null&&($=new s),C=null,m=null,_=null,R===null?O($):(R=O,r(P,$))},F},qy}var zy,FE;function YC(){if(FE)return zy;FE=1;const{ArrayPrototypePop:e,Promise:t}=Yn(),{isIterable:r,isNodeStream:n}=va(),{pipelineImpl:o}=xv(),{finished:a}=wa();function s(...u){return new t((h,c)=>{let p,y;const m=u[u.length-1];if(m&&typeof m=="object"&&!n(m)&&!r(m)){const _=e(u);p=_.signal,y=_.end}o(u,(_,C)=>{_?c(_):h(C)},{signal:p,end:y})})}return zy={finished:a,pipeline:s},zy}var OE;function eN(){if(OE)return qh;OE=1;const{Buffer:e}=Ns(),{ObjectDefineProperty:t,ObjectKeys:r,ReflectApply:n}=Yn(),{promisify:{custom:o}}=Qo(),{streamReturningOperators:a,promiseReturningOperators:s}=WO(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=Ui(),h=ZO(),{pipeline:c}=xv(),{destroyer:p}=Hl(),y=wa(),m=YC(),_=va(),C=jO.exports=Av().Stream;C.isDisturbed=_.isDisturbed,C.isErrored=_.isErrored,C.isReadable=_.isReadable,C.Readable=Ap();for(const b of r(a)){let P=function(...j){if(new.target)throw u();return C.Readable.from(n(E,this,j))};var F=P;const E=a[b];t(P,"name",{__proto__:null,value:E.name}),t(P,"length",{__proto__:null,value:E.length}),t(C.Readable.prototype,b,{__proto__:null,value:P,enumerable:!1,configurable:!0,writable:!0})}for(const b of r(s)){let P=function(...H){if(new.target)throw u();return n(E,this,H)};var F=P;const E=s[b];t(P,"name",{__proto__:null,value:E.name}),t(P,"length",{__proto__:null,value:E.length}),t(C.Readable.prototype,b,{__proto__:null,value:P,enumerable:!1,configurable:!0,writable:!0})}C.Writable=zC(),C.Duplex=Yo(),C.Transform=JC(),C.PassThrough=QC(),C.pipeline=c;const{addAbortSignal:R}=Rv();return C.addAbortSignal=R,C.finished=y,C.destroy=p,C.compose=h,t(C,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return m}}),t(c,o,{__proto__:null,enumerable:!0,get(){return m.pipeline}}),t(y,o,{__proto__:null,enumerable:!0,get(){return m.finished}}),C.Stream=C,C._isUint8Array=function(E){return E instanceof Uint8Array},C._uint8ArrayToBuffer=function(E){return e.from(E.buffer,E.byteOffset,E.byteLength)},qh}var NE;function XC(){return NE||(NE=1,function(e){const t=eN(),r=YC(),n=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=n,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return r}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(BO)),Gh}var Pu={},Tu={},Jy={},Iu={},kE;function ZC(){if(kE)return Iu;kE=1,Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.BlankNode=void 0;class e{constructor(r){this.termType="BlankNode",this.value=r}equals(r){return!!r&&r.termType==="BlankNode"&&r.value===this.value}}return Iu.BlankNode=e,Iu}var Fu={},Ou={},DE;function ex(){if(DE)return Ou;DE=1,Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.DefaultGraph=void 0;class e{constructor(){this.termType="DefaultGraph",this.value=""}equals(r){return!!r&&r.termType==="DefaultGraph"}}return Ou.DefaultGraph=e,e.INSTANCE=new e,Ou}var Nu={},ku={},LE;function Pv(){if(LE)return ku;LE=1,Object.defineProperty(ku,"__esModule",{value:!0}),ku.NamedNode=void 0;class e{constructor(r){this.termType="NamedNode",this.value=r}equals(r){return!!r&&r.termType==="NamedNode"&&r.value===this.value}}return ku.NamedNode=e,ku}var UE;function tx(){if(UE)return Nu;UE=1,Object.defineProperty(Nu,"__esModule",{value:!0}),Nu.Literal=void 0;const e=Pv();class t{constructor(n,o){this.termType="Literal",this.value=n,typeof o=="string"?(this.language=o,this.datatype=t.RDF_LANGUAGE_STRING):o?(this.language="",this.datatype=o):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&n.datatype.equals(this.datatype)}}return Nu.Literal=t,t.RDF_LANGUAGE_STRING=new e.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new e.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Nu}var Du={},ME;function rx(){if(ME)return Du;ME=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.Quad=void 0;class e{constructor(r,n,o,a){this.termType="Quad",this.value="",this.subject=r,this.predicate=n,this.object=o,this.graph=a}equals(r){return!!r&&(r.termType==="Quad"||!r.termType)&&this.subject.equals(r.subject)&&this.predicate.equals(r.predicate)&&this.object.equals(r.object)&&this.graph.equals(r.graph)}}return Du.Quad=e,Du}var Lu={},BE;function nx(){if(BE)return Lu;BE=1,Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.Variable=void 0;class e{constructor(r){this.termType="Variable",this.value=r}equals(r){return!!r&&r.termType==="Variable"&&r.value===this.value}}return Lu.Variable=e,Lu}var jE;function tN(){if(jE)return Fu;jE=1,Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.DataFactory=void 0;const e=ZC(),t=ex(),r=tx(),n=Pv(),o=rx(),a=nx();let s=0;class u{constructor(c){this.blankNodeCounter=0,c=c||{},this.blankNodePrefix=c.blankNodePrefix||`df_${s++}_`}namedNode(c){return new n.NamedNode(c)}blankNode(c){return new e.BlankNode(c||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(c,p){return new r.Literal(c,p)}variable(c){return new a.Variable(c)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(c,p,y,m){return new o.Quad(c,p,y,m||this.defaultGraph())}fromTerm(c){switch(c.termType){case"NamedNode":return this.namedNode(c.value);case"BlankNode":return this.blankNode(c.value);case"Literal":return c.language?this.literal(c.value,c.language):c.datatype.equals(r.Literal.XSD_STRING)?this.literal(c.value):this.literal(c.value,this.fromTerm(c.datatype));case"Variable":return this.variable(c.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(c.subject),this.fromTerm(c.predicate),this.fromTerm(c.object),this.fromTerm(c.graph))}}fromQuad(c){return this.fromTerm(c)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Fu.DataFactory=u,Fu}var HE;function rN(){return HE||(HE=1,function(e){var t=an&&an.__createBinding||(Object.create?function(n,o,a,s){s===void 0&&(s=a),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,s){s===void 0&&(s=a),n[s]=o[a]}),r=an&&an.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(ZC(),e),r(tN(),e),r(ex(),e),r(tx(),e),r(Pv(),e),r(rx(),e),r(nx(),e)}(Jy)),Jy}var Uu={},Mu={},$E;function nN(){if($E)return Mu;$E=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.ContainerHandlerIdentifier=void 0;let e=class{canCombineWithGraph(){return!0}async handle(r,n,o,a,s,u){let h;if(n.emittedStack[u+1]&&n.idStack[u+1])h=n.idStack[u+1][0];else{const y=await o.getContainerKey(a[u],a,u)!==null?await o.resourceToTerm(await n.getContext(a),a[u]):o.dataFactory.blankNode();if(!y){n.emittedStack[u]=!1;return}h=y,n.idStack[u+1]=[h]}let c=n.idStack[u];c||(c=n.idStack[u]=[]),c.some(p=>p.equals(h))||c.push(h),await n.handlePendingContainerFlushBuffers()||(n.emittedStack[u]=!1)}};return Mu.ContainerHandlerIdentifier=e,Mu}var Bu={},ju={},VE;function Rp(){if(VE)return ju;VE=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.EntryHandlerPredicate=void 0;const e=Ai(),t=_a();let r=class ix{static async handlePredicateObject(o,a,s,u,h,c,p,y,m){const _=await a.getPropertiesDepth(s,u),C=await a.getDepthOffsetGraph(u,s),R=u-C,F=o.idStack[_];if(F&&!m)for(const b of F)if(C>=0){const P=o.idStack[R-1];if(P)for(const j of P)a.emitQuadChecked(u,b,h,c,j,p,y);else p?(a.validateReverseSubject(c),o.getUnidentifiedGraphBufferSafe(R-1).push({subject:c,predicate:h,object:b,isEmbedded:y})):o.getUnidentifiedGraphBufferSafe(R-1).push({subject:b,predicate:h,object:c,isEmbedded:y})}else{const P=await a.getGraphContainerValue(s,_);a.emitQuadChecked(u,b,h,c,P,p,y)}else if(p&&a.validateReverseSubject(c),m){if(o.rdfstar){o.idStack[u]&&o.emitError(new e.ErrorCoded(`Found an illegal @id inside an annotation: ${o.idStack[u][0].value}`,e.ERROR_CODES.INVALID_ANNOTATION));for(let P=0;P<u;P++)await a.unaliasKeyword(s[P],s,P)==="@id"&&o.emitError(new e.ErrorCoded("Found an illegal annotation inside an embedded node",e.ERROR_CODES.INVALID_ANNOTATION));const b=o.getAnnotationsBufferSafe(_),E={predicate:h,object:c,reverse:p,nestedAnnotations:[],depth:_};b.push(E);for(let P=b.length-2;P>=0;P--){const j=b[P];j.depth>_&&(E.nestedAnnotations.push(j),b.splice(P,1))}}}else o.getUnidentifiedValueBufferSafe(_).push({predicate:h,object:c,reverse:p,isEmbedded:y})}isPropertyHandler(){return!0}isStackProcessor(){return!0}async validate(o,a,s,u,h){const c=s[u];if(c){const p=await o.getContext(s);if(!o.jsonLiteralStack[u]&&await a.predicateToTerm(p,s[u]))return t.Util.getContextValueType(p,c)==="@json"&&(o.jsonLiteralStack[u+1]=!0),!0}return!1}async test(o,a,s,u,h){return u[h]}async handle(o,a,s,u,h,c,p){const y=u[c],m=await o.getContext(u),_=await a.predicateToTerm(m,s);if(_){const C=await a.valueToTerm(m,s,h,c,u);if(C.length)for(let R of C){let F=await a.unaliasKeywordParent(u,c);const b=t.Util.isPropertyReverse(m,y,F);let E=0;for(;F==="@reverse"||typeof F=="number";)typeof F=="number"?E++:c--,F=await a.unaliasKeywordParent(u,c-E);const P=t.Util.isPropertyInEmbeddedNode(F);a.validateReverseInEmbeddedNode(s,b,P);const j=t.Util.isPropertyInAnnotationObject(F);if(h){const H="@list"in t.Util.getContextValueContainer(m,s);if(H||h["@list"]){if((H&&!Array.isArray(h)&&!h["@list"]||h["@list"]&&!Array.isArray(h["@list"]))&&R!==a.rdfNil){const $=a.dataFactory.blankNode();o.emitQuad(c,a.dataFactory.quad($,a.rdfRest,a.rdfNil,a.getDefaultGraph())),o.emitQuad(c,a.dataFactory.quad($,a.rdfFirst,R,a.getDefaultGraph())),R=$}if(b&&!o.allowSubjectList)throw new e.ErrorCoded(`Found illegal list value in subject position at ${s}`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}}await ix.handlePredicateObject(o,a,u,c,_,R,b,P,j)}}}};return ju.EntryHandlerPredicate=r,ju}var KE;function iN(){if(KE)return Bu;KE=1,Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.ContainerHandlerIndex=void 0;const e=Ai(),t=Rp(),r=_a();let n=class{canCombineWithGraph(){return!0}async handle(a,s,u,h,c,p){if(!Array.isArray(c)){const y="@graph"in a,m=await s.getContext(h),_=h[p-1],C=r.Util.getContextValueIndex(m,_);if(C){if(e.Util.isPotentialKeyword(C))throw new e.ErrorCoded(`Keywords can not be used as @index value, got: ${C}`,e.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof C!="string")throw new e.ErrorCoded(`@index values must be strings, got: ${C}`,e.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof c!="object"){if(r.Util.getContextValueType(m,_)!=="@id")throw new e.ErrorCoded(`Property-based index containers require nodes as values or strings with @type: @id, but got: ${c}`,e.ERROR_CODES.INVALID_VALUE_OBJECT);const b=u.resourceToTerm(m,c);b&&(s.idStack[p+1]=[b])}const F=u.createVocabOrBaseTerm(m,C);if(F){const b=await u.valueToTerm(m,C,await u.getContainerKey(h[p],h,p),p,h);if(y){const E=await u.getGraphContainerValue(h,p+1);for(const P of b)s.emitQuad(p,u.dataFactory.quad(E,F,P,u.getDefaultGraph()))}else for(const E of b)await t.EntryHandlerPredicate.handlePredicateObject(s,u,h,p+1,F,E,!1,!1,!1)}}const R=y?2:1;await s.newOnValueJob(h.slice(0,h.length-R),c,p-R,!0),await s.handlePendingContainerFlushBuffers()}s.emittedStack[p]=!1}};return Bu.ContainerHandlerIndex=n,Bu}var Hu={},WE;function oN(){if(WE)return Hu;WE=1,Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.ContainerHandlerLanguage=void 0;const e=Ai();let t=class{canCombineWithGraph(){return!1}async handle(n,o,a,s,u,h){const c=await a.getContainerKey(s[h],s,h);if(Array.isArray(u))u=u.map(p=>({"@value":p,"@language":c}));else{if(typeof u!="string")throw new e.ErrorCoded(`Got invalid language map value, got '${JSON.stringify(u)}', but expected string`,e.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);u={"@value":u,"@language":c}}await o.newOnValueJob(s.slice(0,s.length-1),u,h-1,!0),o.emittedStack[h]=!1}};return Hu.ContainerHandlerLanguage=t,Hu}var $u={},GE;function sN(){if(GE)return $u;GE=1,Object.defineProperty($u,"__esModule",{value:!0}),$u.ContainerHandlerType=void 0;const e=Rp(),t=_a();let r=class{canCombineWithGraph(){return!1}async handle(o,a,s,u,h,c){if(!Array.isArray(h)){if(typeof h=="string"){const m=await a.getContext(u),C=t.Util.getContextValueType(m,u[c-1])==="@vocab"?await s.createVocabOrBaseTerm(m,h):await s.resourceToTerm(m,h);if(C){const R={"@id":C.termType==="NamedNode"?C.value:h};await a.newOnValueJob(u.slice(0,u.length-1),R,c-1,!0),a.idStack[c+1]=[C]}}else{const m=!!a.idStack[c+1];m||delete a.idStack[c],await a.newOnValueJob(u.slice(0,u.length-1),h,c-1,!0),m||(a.idStack[c+1]=a.idStack[c])}const p=await s.getContainerKey(u[c],u,c),y=p!==null?s.createVocabOrBaseTerm(await a.getContext(u),p):null;y&&await e.EntryHandlerPredicate.handlePredicateObject(a,s,u,c+1,s.rdfType,y,!1,!1,!1),await a.handlePendingContainerFlushBuffers()}a.emittedStack[c]=!1}};return $u.ContainerHandlerType=r,$u}var qE;function ox(){if(qE)return Uu;qE=1,Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.EntryHandlerContainer=void 0;const e=nN(),t=iN(),r=oN(),n=sN(),o=_a();let a=class ls{static isSimpleGraphContainer(u){return"@graph"in u&&("@set"in u&&Object.keys(u).length===2||Object.keys(u).length===1)}static isComplexGraphContainer(u){return"@graph"in u&&("@set"in u&&Object.keys(u).length>2||!("@set"in u)&&Object.keys(u).length>1)}static getContainerGraphIndex(u,h,c){let p=ls.isSimpleGraphContainer(u),y="";for(let m=h;m<c.length;m++)(!p||typeof c[m]=="number")&&(y+=":"+c[m]),!p&&typeof c[m]!="number"&&(p=!0);return y}static async getContainerHandler(u,h,c){const p={containers:{"@set":!0},depth:c,fallback:!0};let y=!1;const m=await u.getContext(h,2);for(let _=c-1;_>=0;_--)if(typeof h[_]!="number"){const C=o.Util.getContextValue(m,"@container",h[_],!1);if(C&&ls.isSimpleGraphContainer(C))return{containers:C,depth:_+1,fallback:!1};const R=o.Util.getContextValue(m,"@container",h[_-1],!1);if(R){const F="@graph"in R;for(const b in ls.CONTAINER_HANDLERS)if(R[b])return F?ls.CONTAINER_HANDLERS[b].canCombineWithGraph()?{containers:R,depth:_,fallback:!1}:p:y?p:{containers:R,depth:_,fallback:!1};return p}else{if(y)return p;y=!0}}return p}static async isBufferableContainerHandler(u,h,c){const p=await ls.getContainerHandler(u,h,c);return!p.fallback&&!("@graph"in p.containers)}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(u,h,c,p,y){return!!await this.test(u,h,null,c,p)}async test(u,h,c,p,y){const m=o.Util.getContextValueContainer(await u.getContext(p,2),p[y-1]);for(const _ in ls.CONTAINER_HANDLERS)if(m[_])return{containers:m,handler:ls.CONTAINER_HANDLERS[_]};return null}async handle(u,h,c,p,y,m,_){return _.handler.handle(_.containers,u,h,p,y,m)}};return Uu.EntryHandlerContainer=a,a.CONTAINER_HANDLERS={"@id":new e.ContainerHandlerIdentifier,"@index":new t.ContainerHandlerIndex,"@language":new r.ContainerHandlerLanguage,"@type":new n.ContainerHandlerType},Uu}var zE;function _a(){if(zE)return Tu;zE=1,Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.Util=void 0;const e=Ai(),t=rN(),r=ox(),n=WC();class o{constructor(s){this.parsingContext=s.parsingContext,this.dataFactory=s.dataFactory||new t.DataFactory,this.rdfFirst=this.dataFactory.namedNode(o.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(o.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(o.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(o.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(o.RDF+"JSON")}static getContextValue(s,u,h,c){const p=s.getContextRaw()[h];if(!p)return c;const y=p[u];return y===void 0?c:y}static getContextValueContainer(s,u){return o.getContextValue(s,"@container",u,{"@set":!0})}static getContextValueType(s,u){const h=o.getContextValue(s,"@type",u,null);return h==="@none"?null:h}static getContextValueLanguage(s,u){return o.getContextValue(s,"@language",u,s.getContextRaw()["@language"]||null)}static getContextValueDirection(s,u){return o.getContextValue(s,"@direction",u,s.getContextRaw()["@direction"]||null)}static isContextValueReverse(s,u){return!!o.getContextValue(s,"@reverse",u,null)}static getContextValueIndex(s,u){return o.getContextValue(s,"@index",u,s.getContextRaw()["@index"]||null)}static isPropertyReverse(s,u,h){return h==="@reverse"!==o.isContextValueReverse(s,u)}static isPropertyInEmbeddedNode(s){return s==="@id"}static isPropertyInAnnotationObject(s){return s==="@annotation"}static isValidIri(s){return s!==null&&e.Util.isValidIri(s)}static isPrefixArray(s,u){if(s.length>u.length)return!1;for(let h=0;h<s.length;h++)if(s[h]!==u[h])return!1;return!0}async validateValueIndexes(s){if(this.parsingContext.validateValueIndexes){const u={};for(const h of s)if(h&&typeof h=="object"){const c=h["@id"],p=h["@index"];if(c&&p){const y=u[c];if(y&&y!==p)throw new e.ErrorCoded(`Conflicting @index value for ${c}`,e.ERROR_CODES.CONFLICTING_INDEXES);u[c]=p}}}}async valueToTerm(s,u,h,c,p){if(o.getContextValueType(s,u)==="@json")return[this.dataFactory.literal(this.valueToJsonString(h),this.rdfJson)];const y=typeof h;switch(y){case"object":if(h==null)return[];if(Array.isArray(h))return"@list"in o.getContextValueContainer(s,u)?h.length===0?[this.rdfNil]:this.parsingContext.idStack[c+1]||[]:(await this.validateValueIndexes(h),[]);if(s=await this.getContextSelfOrPropertyScoped(s,u),"@context"in h&&(s=await this.parsingContext.parseContext(h["@context"],(await this.parsingContext.getContext(p,0)).getContextRaw())),h=await this.unaliasKeywords(h,p,c,s),"@value"in h){let m,_,C,R,F;for(u in h){const b=h[u];switch(u){case"@value":m=b;break;case"@language":_=b;break;case"@direction":C=b;break;case"@type":R=b;break;case"@index":F=b;break;case"@annotation":break;default:throw new e.ErrorCoded(`Unknown value entry '${u}' in @value: ${JSON.stringify(h)}`,e.ERROR_CODES.INVALID_VALUE_OBJECT)}}if(await this.unaliasKeyword(R,p,c,!0,s)==="@json")return[this.dataFactory.literal(this.valueToJsonString(m),this.rdfJson)];if(m===null)return[];if(typeof m=="object")throw new e.ErrorCoded(`The value of an '@value' can not be an object, got '${JSON.stringify(m)}'`,e.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(this.parsingContext.validateValueIndexes&&F&&typeof F!="string")throw new e.ErrorCoded(`The value of an '@index' must be a string, got '${JSON.stringify(F)}'`,e.ERROR_CODES.INVALID_INDEX_VALUE);if(_){if(typeof m!="string")throw new e.ErrorCoded(`When an '@language' is set, the value of '@value' must be a string, got '${JSON.stringify(m)}'`,e.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!e.ContextParser.validateLanguage(_,this.parsingContext.strictValues,e.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return[];(this.parsingContext.normalizeLanguageTags||this.parsingContext.activeProcessingMode===1)&&(_=_.toLowerCase())}if(C){if(typeof m!="string")throw new Error(`When an '@direction' is set, the value of '@value' must be a string, got '${JSON.stringify(m)}'`);if(!e.ContextParser.validateDirection(C,this.parsingContext.strictValues))return[]}if(_&&C&&this.parsingContext.rdfDirection){if(R)throw new e.ErrorCoded(`Can not have '@language', '@direction' and '@type' in a value: '${JSON.stringify(h)}'`,e.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(c,m,_,C))}else if(_){if(R)throw new e.ErrorCoded(`Can not have both '@language' and '@type' in a value: '${JSON.stringify(h)}'`,e.ERROR_CODES.INVALID_VALUE_OBJECT);return[this.dataFactory.literal(m,_)]}else if(C&&this.parsingContext.rdfDirection){if(R)throw new e.ErrorCoded(`Can not have both '@direction' and '@type' in a value: '${JSON.stringify(h)}'`,e.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(c,m,_,C))}else if(R){if(typeof R!="string")throw new e.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(R)}'`,e.ERROR_CODES.INVALID_TYPED_VALUE);const b=this.createVocabOrBaseTerm(s,R);if(!b)throw new e.ErrorCoded(`Invalid '@type' value, got '${JSON.stringify(R)}'`,e.ERROR_CODES.INVALID_TYPED_VALUE);if(b.termType!=="NamedNode")throw new e.ErrorCoded(`Illegal value type (${b.termType}): ${R}`,e.ERROR_CODES.INVALID_TYPED_VALUE);return[this.dataFactory.literal(m,b)]}return await this.valueToTerm(new e.JsonLdContextNormalized({}),u,m,c,p)}else if("@set"in h){if(Object.keys(h).length>1)throw new e.ErrorCoded(`Found illegal neighbouring entries next to @set for key: '${u}'`,e.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return[]}else if("@list"in h){if(Object.keys(h).length>1)throw new e.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${u}'`,e.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);const m=h["@list"];return Array.isArray(m)?m.length===0?[this.rdfNil]:this.parsingContext.idStack[c+1]||[]:await this.valueToTerm(await this.parsingContext.getContext(p),u,m,c-1,p.slice(0,-1))}else{if("@reverse"in h&&typeof h["@reverse"]=="boolean")return[];if("@graph"in o.getContextValueContainer(await this.parsingContext.getContext(p),u)){const m=this.parsingContext.graphContainerTermStack[c+1];return m?Object.values(m):[this.dataFactory.blankNode()]}else if("@id"in h){if(Object.keys(h).length>1&&(s=await this.parsingContext.getContext(p,0)),"@context"in h&&(s=await this.parsingContext.parseContext(h["@context"],s.getContextRaw())),h["@type"]==="@vocab")return this.nullableTermToArray(this.createVocabOrBaseTerm(s,h["@id"]));{const m=h["@id"];let _;if(typeof m=="object")if(this.parsingContext.rdfstar)_=this.parsingContext.idStack[c+1][0];else throw new e.ErrorCoded(`Found illegal @id '${h}'`,e.ERROR_CODES.INVALID_ID_VALUE);else _=this.resourceToTerm(s,m);return this.nullableTermToArray(_)}}else return this.parsingContext.emittedStack[c+1]||h&&typeof h=="object"&&Object.keys(h).length===0?this.parsingContext.idStack[c+1]||(this.parsingContext.idStack[c+1]=[this.dataFactory.blankNode()]):[]}case"string":return this.nullableTermToArray(this.stringValueToTerm(c,await this.getContextSelfOrPropertyScoped(s,u),u,h,null));case"boolean":return this.nullableTermToArray(this.stringValueToTerm(c,await this.getContextSelfOrPropertyScoped(s,u),u,(!!h).toString(),this.dataFactory.namedNode(o.XSD_BOOLEAN)));case"number":return this.nullableTermToArray(this.stringValueToTerm(c,await this.getContextSelfOrPropertyScoped(s,u),u,h,this.dataFactory.namedNode(h%1===0&&h<1e21?o.XSD_INTEGER:o.XSD_DOUBLE)));default:return this.parsingContext.emitError(new Error(`Could not determine the RDF type of a ${y}`)),[]}}async getContextSelfOrPropertyScoped(s,u){const h=s.getContextRaw()[u];return h&&typeof h=="object"&&"@context"in h&&(s=await this.parsingContext.parseContext(h,s.getContextRaw(),!0)),s}nullableTermToArray(s){return s?[s]:[]}predicateToTerm(s,u){const h=s.expandTerm(u,!0,this.parsingContext.getExpandOptions());if(!h)return null;if(h[0]==="_"&&h[1]===":")return this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(h.substr(2)):null;if(o.isValidIri(h))return this.dataFactory.namedNode(h);if(h&&this.parsingContext.strictValues)this.parsingContext.emitError(new e.ErrorCoded(`Invalid predicate IRI: ${h}`,e.ERROR_CODES.INVALID_IRI_MAPPING));else return null;return null}resourceToTerm(s,u){if(u.startsWith("_:"))return this.dataFactory.blankNode(u.substr(2));const h=s.expandTerm(u,!1,this.parsingContext.getExpandOptions());if(!o.isValidIri(h))if(h&&this.parsingContext.strictValues)this.parsingContext.emitError(new Error(`Invalid resource IRI: ${h}`));else return null;return this.dataFactory.namedNode(h)}createVocabOrBaseTerm(s,u){if(u.startsWith("_:"))return this.dataFactory.blankNode(u.substr(2));const h=this.parsingContext.getExpandOptions();let c=s.expandTerm(u,!0,h);if(c===u&&(c=s.expandTerm(u,!1,h)),!o.isValidIri(c))if(c&&this.parsingContext.strictValues&&!c.startsWith("@"))this.parsingContext.emitError(new Error(`Invalid term IRI: ${c}`));else return null;return this.dataFactory.namedNode(c)}intToString(s,u){return typeof s=="number"?Number.isFinite(s)?s%1===0&&(!u||u.value!==o.XSD_DOUBLE)?Number(s).toString():s.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):s>0?"INF":"-INF":s}stringValueToTerm(s,u,h,c,p){const y=o.getContextValueType(u,h);if(y)if(y==="@id"){if(!p)return this.resourceToTerm(u,this.intToString(c,p))}else if(y==="@vocab"){if(!p)return this.createVocabOrBaseTerm(u,this.intToString(c,p))}else p=this.dataFactory.namedNode(y);if(!p){const m=o.getContextValueLanguage(u,h),_=o.getContextValueDirection(u,h);return _&&this.parsingContext.rdfDirection?this.createLanguageDirectionLiteral(s,this.intToString(c,p),m,_):this.dataFactory.literal(this.intToString(c,p),m)}return this.dataFactory.literal(this.intToString(c,p),p)}createLanguageDirectionLiteral(s,u,h,c){if(this.parsingContext.rdfDirection==="i18n-datatype")return h||(h=""),this.dataFactory.literal(u,this.dataFactory.namedNode(`https://www.w3.org/ns/i18n#${h}_${c}`));{const p=this.dataFactory.blankNode(),y=this.getDefaultGraph();return this.parsingContext.emitQuad(s,this.dataFactory.quad(p,this.dataFactory.namedNode(o.RDF+"value"),this.dataFactory.literal(u),y)),h&&this.parsingContext.emitQuad(s,this.dataFactory.quad(p,this.dataFactory.namedNode(o.RDF+"language"),this.dataFactory.literal(h),y)),this.parsingContext.emitQuad(s,this.dataFactory.quad(p,this.dataFactory.namedNode(o.RDF+"direction"),this.dataFactory.literal(c),y)),p}}valueToJsonString(s){return n(s)}async unaliasKeyword(s,u,h,c,p){if(Number.isInteger(s))return s;if(!c){const y=this.parsingContext.unaliasedKeywordCacheStack[h];if(y)return y}if(!e.Util.isPotentialKeyword(s)){p=p||await this.parsingContext.getContext(u);let y=p.getContextRaw()[s];y&&typeof y=="object"&&(y=y["@id"]),e.Util.isValidKeyword(y)&&(s=y)}return c?s:this.parsingContext.unaliasedKeywordCacheStack[h]=s}async unaliasKeywordParent(s,u){return await this.unaliasKeyword(u>0&&s[u-1],s,u-1)}async unaliasKeywords(s,u,h,c){const p={};for(const y in s)p[await this.unaliasKeyword(y,u,h+1,!0,c)]=s[y];return p}async isLiteral(s,u){for(let h=u;h>=0;h--){if(await this.unaliasKeyword(s[h],s,h)==="@annotation")return!1;if(this.parsingContext.literalStack[h]||this.parsingContext.jsonLiteralStack[h])return!0}return!1}async getDepthOffsetGraph(s,u){for(let h=s-1;h>0;h--)if(await this.unaliasKeyword(u[h],u,h)==="@graph"){const c=(await r.EntryHandlerContainer.getContainerHandler(this.parsingContext,u,h)).containers;return r.EntryHandlerContainer.isComplexGraphContainer(c)?-1:s-h-1}return-1}validateReverseSubject(s){if(s.termType==="Literal")throw new e.ErrorCoded(`Found illegal literal in subject position: ${s.value}`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}async getGraphContainerValue(s,u){let h=this.getDefaultGraph();const{containers:c,depth:p}=await r.EntryHandlerContainer.getContainerHandler(this.parsingContext,s,u);if("@graph"in c){const y=r.EntryHandlerContainer.getContainerGraphIndex(c,p,s),m=this.parsingContext.graphContainerTermStack[p];if(h=m?m[y]:null,!h){let _=null;if("@id"in c){const C=await this.getContainerKey(s[p],s,p);C!==null&&(_=await this.resourceToTerm(await this.parsingContext.getContext(s),C))}_||(_=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[p]||(this.parsingContext.graphContainerTermStack[p]={}),h=this.parsingContext.graphContainerTermStack[p][y]=_}}return h}async getPropertiesDepth(s,u){let h=u;for(let c=u-1;c>0;c--)if(typeof s[c]!="number"){const p=await this.unaliasKeyword(s[c],s,c);if(p==="@reverse")return c;if(p==="@nest")h=c;else return h}return h}async getContainerKey(s,u,h){const c=await this.unaliasKeyword(s,u,h);return c==="@none"?null:c}validateReverseInEmbeddedNode(s,u,h){if(h&&u&&!this.parsingContext.rdfstarReverseInEmbedded)throw new e.ErrorCoded(`Illegal reverse property in embedded node in ${s}`,e.ERROR_CODES.INVALID_EMBEDDED_NODE)}emitQuadChecked(s,u,h,c,p,y,m){let _;if(y?(this.validateReverseSubject(c),_=this.dataFactory.quad(c,h,u,p)):_=this.dataFactory.quad(u,h,c,p),m){if(_.graph.termType!=="DefaultGraph"&&(_=this.dataFactory.quad(_.subject,_.predicate,_.object)),this.parsingContext.idStack[s-1])throw new e.ErrorCoded("Illegal multiple properties in an embedded node",e.ERROR_CODES.INVALID_EMBEDDED_NODE);this.parsingContext.idStack[s-1]=[_]}else this.parsingContext.emitQuad(s,_);const C=this.parsingContext.annotationsBuffer[s];if(C){for(const R of C)this.emitAnnotation(s,_,R);delete this.parsingContext.annotationsBuffer[s]}}emitAnnotation(s,u,h){let c;h.reverse?(this.validateReverseSubject(h.object),c=this.dataFactory.quad(h.object,h.predicate,u)):c=this.dataFactory.quad(u,h.predicate,h.object),this.parsingContext.emitQuad(s,c);for(const p of h.nestedAnnotations)this.emitAnnotation(s,c,p)}}return Tu.Util=o,o.XSD="http://www.w3.org/2001/XMLSchema#",o.XSD_BOOLEAN=o.XSD+"boolean",o.XSD_INTEGER=o.XSD+"integer",o.XSD_DOUBLE=o.XSD+"double",o.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Tu}var JE;function aN(){if(JE)return Pu;JE=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.EntryHandlerArrayValue=void 0;const e=_a(),t=Ai();let r=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(o,a,s,u,h){return this.test(o,a,null,s,u)}async test(o,a,s,u,h){return typeof u[h]=="number"}async handle(o,a,s,u,h,c){let p=await a.unaliasKeywordParent(u,c);if(p==="@list"){let y=null,m=0;for(let _=c-2;_>0;_--){const C=u[_];if(typeof C=="string"||typeof C=="number"){m=_,y=C;break}}if(y!==null){const _=await a.valueToTerm(await o.getContext(u),y,h,c,u);for(const C of _)await this.handleListElement(o,a,C,h,c,u.slice(0,m),m);_.length===0&&await this.handleListElement(o,a,null,h,c,u.slice(0,m),m)}}else if(p==="@set")await o.newOnValueJob(u.slice(0,-2),h,c-2,!1);else if(p!==void 0&&p!=="@type"){for(let m=c-1;m>0;m--)if(typeof u[m]!="number"){p=await a.unaliasKeyword(u[m],u,m);break}const y=await o.getContext(u.slice(0,-1));if("@list"in e.Util.getContextValueContainer(y,p)){o.emittedStack[c+1]=!0;const m=await a.valueToTerm(await o.getContext(u),p,h,c,u);for(const _ of m)await this.handleListElement(o,a,_,h,c,u.slice(0,-1),c-1);m.length===0&&await this.handleListElement(o,a,null,h,c,u.slice(0,-1),c-1)}else o.shiftStack(c,1),await o.newOnValueJob(u.slice(0,-1),h,c-1,!1),o.contextTree.removeContext(u.slice(0,-1))}}async handleListElement(o,a,s,u,h,c,p){let y=o.listPointerStack[h];if(u!==null&&(await a.unaliasKeywords(u,c,h))["@value"]!==null){if(!y||!y.value){const m=a.dataFactory.blankNode();y={value:m,listRootDepth:p,listId:m}}else{const m=a.dataFactory.blankNode();o.emitQuad(h,a.dataFactory.quad(y.value,a.rdfRest,m,a.getDefaultGraph())),y.value=m}s&&o.emitQuad(h,a.dataFactory.quad(y.value,a.rdfFirst,s,a.getDefaultGraph()))}else y||(y={listRootDepth:p,listId:a.rdfNil});o.listPointerStack[h]=y,o.rdfstar&&o.annotationsBuffer[h]&&o.emitError(new t.ErrorCoded("Found an illegal annotation inside a list",t.ERROR_CODES.INVALID_ANNOTATION))}};return Pu.EntryHandlerArrayValue=r,Pu}var Vu={},QE;function lN(){if(QE)return Vu;QE=1,Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.EntryHandlerInvalidFallback=void 0;let e=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(r,n,o,a,s){return!1}async test(r,n,o,a,s){return!0}async handle(r,n,o,a,s,u){r.emittedStack[u]=!1}};return Vu.EntryHandlerInvalidFallback=e,Vu}var Ku={},Wu={},YE;function ks(){if(YE)return Wu;YE=1,Object.defineProperty(Wu,"__esModule",{value:!0}),Wu.EntryHandlerKeyword=void 0;let e=class{constructor(r){this.keyword=r}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(r,n,o,a,s){return!1}async test(r,n,o,a,s){return o===this.keyword}};return Wu.EntryHandlerKeyword=e,Wu}var XE;function uN(){if(XE)return Ku;XE=1,Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.EntryHandlerKeywordContext=void 0;const e=Ai(),t=ks();let r=class extends t.EntryHandlerKeyword{constructor(){super("@context")}isStackProcessor(){return!1}async handle(o,a,s,u,h,c){o.streamingProfile&&(o.processingStack[c]||o.processingType[c]||o.idStack[c]!==void 0)&&o.emitError(new e.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",e.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));const p=o.getContext(u),y=o.parseContext(h,(await p).getContextRaw());o.contextTree.setContext(u.slice(0,-1),y),o.emitContext(h),await o.validateContext(await y)}};return Ku.EntryHandlerKeywordContext=r,Ku}var Gu={},ZE;function cN(){if(ZE)return Gu;ZE=1,Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.EntryHandlerKeywordGraph=void 0;const e=ks();let t=class extends e.EntryHandlerKeyword{constructor(){super("@graph")}async handle(n,o,a,s,u,h){n.graphStack[h+1]=!0}};return Gu.EntryHandlerKeywordGraph=t,Gu}var qu={},eb;function dN(){if(eb)return qu;eb=1,Object.defineProperty(qu,"__esModule",{value:!0}),qu.EntryHandlerKeywordId=void 0;const e=Ai(),t=ks();let r=class extends t.EntryHandlerKeyword{constructor(){super("@id")}isStackProcessor(){return!1}async handle(o,a,s,u,h,c){if(typeof h!="string"){if(o.rdfstar&&typeof h=="object"){const y=Object.keys(h);y.length===1&&y[0]==="@id"&&o.emitError(new e.ErrorCoded(`Invalid embedded node without property with @id ${h["@id"]}`,e.ERROR_CODES.INVALID_EMBEDDED_NODE))}else o.emitError(new e.ErrorCoded(`Found illegal @id '${h}'`,e.ERROR_CODES.INVALID_ID_VALUE));return}const p=await a.getPropertiesDepth(u,c);if(o.idStack[p]!==void 0&&(o.idStack[p][0].listHead?o.emitError(new e.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${u[c-1]}'`,e.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):o.emitError(new e.ErrorCoded(`Found duplicate @ids '${o.idStack[p][0].value}' and '${h}'`,e.ERROR_CODES.COLLIDING_KEYWORDS))),o.rdfstar&&o.annotationsBuffer[c])for(const y of o.annotationsBuffer[c])y.depth===c&&o.emitError(new e.ErrorCoded(`Found an illegal @id inside an annotation: ${h}`,e.ERROR_CODES.INVALID_ANNOTATION));o.idStack[p]=a.nullableTermToArray(await a.resourceToTerm(await o.getContext(u),h))}};return qu.EntryHandlerKeywordId=r,qu}var zu={},tb;function fN(){if(tb)return zu;tb=1,Object.defineProperty(zu,"__esModule",{value:!0}),zu.EntryHandlerKeywordIncluded=void 0;const e=Ai(),t=ks();let r=class extends t.EntryHandlerKeyword{constructor(){super("@included")}async handle(o,a,s,u,h,c){typeof h!="object"&&o.emitError(new e.ErrorCoded(`Found illegal @included '${h}'`,e.ERROR_CODES.INVALID_INCLUDED_VALUE));const p=await a.unaliasKeywords(h,u,c,await o.getContext(u));"@value"in p&&o.emitError(new e.ErrorCoded(`Found an illegal @included @value node '${JSON.stringify(h)}'`,e.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in p&&o.emitError(new e.ErrorCoded(`Found an illegal @included @list node '${JSON.stringify(h)}'`,e.ERROR_CODES.INVALID_INCLUDED_VALUE)),o.emittedStack[c]=!1}};return zu.EntryHandlerKeywordIncluded=r,zu}var Ju={},rb;function hN(){if(rb)return Ju;rb=1,Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.EntryHandlerKeywordNest=void 0;const e=Ai(),t=ks();let r=class extends t.EntryHandlerKeyword{constructor(){super("@nest")}async handle(o,a,s,u,h,c){typeof h!="object"&&o.emitError(new e.ErrorCoded(`Found invalid @nest entry for '${s}': '${h}'`,e.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in await a.unaliasKeywords(h,u,c,await o.getContext(u))&&o.emitError(new e.ErrorCoded(`Found an invalid @value node for '${s}'`,e.ERROR_CODES.INVALID_NEST_VALUE)),o.emittedStack[c]=!1}};return Ju.EntryHandlerKeywordNest=r,Ju}var Qu={},nb;function pN(){if(nb)return Qu;nb=1,Object.defineProperty(Qu,"__esModule",{value:!0}),Qu.EntryHandlerKeywordType=void 0;const e=Ai(),t=_a(),r=Rp(),n=ks();let o=class extends n.EntryHandlerKeyword{constructor(){super("@type")}isStackProcessor(){return!1}async handle(s,u,h,c,p,y){const m=c[y],_=await s.getContext(c),C=u.rdfType,R=await u.unaliasKeywordParent(c,y),F=t.Util.isPropertyReverse(_,m,R),b=t.Util.isPropertyInEmbeddedNode(R);u.validateReverseInEmbeddedNode(h,F,b);const E=t.Util.isPropertyInAnnotationObject(R),P=Array.isArray(p)?p:[p];for(const $ of P){typeof $!="string"&&s.emitError(new e.ErrorCoded(`Found illegal @type '${$}'`,e.ERROR_CODES.INVALID_TYPE_VALUE));const O=u.createVocabOrBaseTerm(_,$);O&&await r.EntryHandlerPredicate.handlePredicateObject(s,u,c,y,C,O,F,b,E)}let j=Promise.resolve(_),H=!1;for(const $ of P.sort()){const O=t.Util.getContextValue(_,"@context",$,null);O&&(H=!0,j=j.then(ne=>s.parseContext(O,ne.getContextRaw())))}s.streamingProfile&&(H||!s.streamingProfileAllowOutOfOrderPlainType)&&(s.processingStack[y]||s.idStack[y])&&s.emitError(new e.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",e.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),H&&(j=j.then($=>("@propagate"in $.getContextRaw()||($.getContextRaw()["@propagate"]=!1),$.getContextRaw()["@propagate"]===!1&&($.getContextRaw()["@__propagateFallback"]=_.getContextRaw()),$)),s.contextTree.setContext(c.slice(0,c.length-1),j)),s.processingType[y]=!0}};return Qu.EntryHandlerKeywordType=o,Qu}var Yu={},ib;function gN(){if(ib)return Yu;ib=1,Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.EntryHandlerKeywordUnknownFallback=void 0;const e=Ai();let t=class sx{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(n,o,a,s,u){const h=await o.unaliasKeyword(a[s],a,s);return e.Util.isPotentialKeyword(h)?!(!u&&h==="@list"):!1}async test(n,o,a,s,u){return e.Util.isPotentialKeyword(a)}async handle(n,o,a,s,u,h){const c=sx.VALID_KEYWORDS_TYPES[a];c!==void 0?c&&typeof u!==c.type&&n.emitError(new e.ErrorCoded(`Invalid value type for '${a}' with value '${u}'`,c.errorCode)):n.strictValues&&n.emitError(new Error(`Unknown keyword '${a}' with value '${u}'`)),n.emittedStack[h]=!1}};return Yu.EntryHandlerKeywordUnknownFallback=t,t.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:e.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:e.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null},Yu}var Xu={},ob;function yN(){if(ob)return Xu;ob=1,Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.EntryHandlerKeywordValue=void 0;const e=ks();let t=class extends e.EntryHandlerKeyword{constructor(){super("@value")}async validate(n,o,a,s,u){const h=a[s];return h&&!n.literalStack[s]&&await this.test(n,o,h,a,s)&&(n.literalStack[s]=!0),super.validate(n,o,a,s,u)}async test(n,o,a,s,u){return await o.unaliasKeyword(s[u],s.slice(0,s.length-1),u-1,!0)==="@value"}async handle(n,o,a,s,u,h){n.literalStack[h]=!0,delete n.unidentifiedValuesBuffer[h],delete n.unidentifiedGraphsBuffer[h],n.emittedStack[h]=!1}};return Xu.EntryHandlerKeywordValue=t,Xu}var Zu={},ec={},sb;function mN(){if(sb)return ec;sb=1,Object.defineProperty(ec,"__esModule",{value:!0}),ec.ContextTree=void 0;let e=class ax{constructor(){this.subTrees={}}getContext(r){if(r.length>0){const[n,...o]=r,a=this.subTrees[n];if(a){const s=a.getContext(o);if(s)return s.then(({context:u,depth:h})=>({context:u,depth:h+1}))}}return this.context?this.context.then(n=>({context:n,depth:0})):null}setContext(r,n){if(r.length===0)this.context=n;else{const[o,...a]=r;let s=this.subTrees[o];s||(s=this.subTrees[o]=new ax),s.setContext(a,n)}}removeContext(r){this.setContext(r,null)}};return ec.ContextTree=e,ec}var ab;function vN(){if(ab)return Zu;ab=1,Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.ParsingContext=void 0;const e=Ai(),t=dd(),r=mN(),n=ux();let o=class lx{constructor(s){this.contextParser=new e.ContextParser({documentLoader:s.documentLoader,skipValidation:s.skipContextValidation}),this.streamingProfile=!!s.streamingProfile,this.baseIRI=s.baseIRI,this.produceGeneralizedRdf=!!s.produceGeneralizedRdf,this.allowSubjectList=!!s.allowSubjectList,this.processingMode=s.processingMode||n.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!s.strictValues,this.validateValueIndexes=!!s.validateValueIndexes,this.defaultGraph=s.defaultGraph,this.rdfDirection=s.rdfDirection,this.normalizeLanguageTags=s.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=s.streamingProfileAllowOutOfOrderPlainType,this.rdfstar=s.rdfstar!==!1,this.rdfstarReverseInEmbedded=s.rdfstarReverseInEmbedded,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new r.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.annotationsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=s.parser,s.context?(this.rootContext=this.parseContext(s.context),this.rootContext.then(u=>this.validateContext(u))):this.rootContext=Promise.resolve(new e.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}async parseContext(s,u,h){return this.contextParser.parse(s,{baseIRI:this.baseIRI,ignoreProtection:h,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:u,processingMode:this.activeProcessingMode})}validateContext(s){const u=s.getContextRaw()["@version"];if(u){if(this.activeProcessingMode&&u>this.activeProcessingMode)throw new t.ErrorCoded(`Unsupported JSON-LD version '${u}' under active processing mode ${this.activeProcessingMode}.`,t.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&u<this.activeProcessingMode)throw new t.ErrorCoded(`Invalid JSON-LD version ${u} under active processing mode ${this.activeProcessingMode}.`,t.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=u}}async getContext(s,u=1){const h=s;for(;typeof s[s.length-1]=="number";)s=s.slice(0,s.length-1);u&&(s=s.slice(0,-u));const c=await this.getContextPropagationAware(s);let y=c.context.getContextRaw();for(let m=c.depth;m<h.length-u;m++){const _=h[m],C=y[_];if(C&&typeof C=="object"&&"@context"in C){const R=(await this.parseContext(C,y,!0)).getContextRaw(),F=!(_ in R)||R[_]["@context"]["@propagate"];(F!==!1||m===h.length-1-u)&&(y=R,delete y["@propagate"],y[_]=Object.assign({},y[_]),"@id"in C&&(y[_]["@id"]=C["@id"]),delete y[_]["@context"],F!==!1&&this.contextTree.setContext(h.slice(0,m+u),Promise.resolve(new e.JsonLdContextNormalized(y))))}}return new e.JsonLdContextNormalized(y)}async getContextPropagationAware(s){const u=s.length;let h=null,c;do{c=!1,h&&"@__propagateFallback"in h.context.getContextRaw()?h.context=new e.JsonLdContextNormalized(h.context.getContextRaw()["@__propagateFallback"]):(h&&(s=s.slice(0,h.depth-1)),h=await this.contextTree.getContext(s)||{context:await this.rootContext,depth:0});const p=s[s.length-1];if(p in h.context.getContextRaw()){const y=h.context.getContextRaw()[p];y&&typeof y=="object"&&"@context"in y&&(c=!0)}}while(h.depth>0&&h.context.getContextRaw()["@propagate"]===!1&&h.depth!==u&&!c);return h.depth===0&&h.context.getContextRaw()["@propagate"]===!1&&h.depth!==u&&(h.context=new e.JsonLdContextNormalized({})),h}async newOnValueJob(s,u,h,c){await this.parser.newOnValueJob(s,u,h,c)}async handlePendingContainerFlushBuffers(){if(this.pendingContainerFlushBuffers.length>0){for(const s of this.pendingContainerFlushBuffers)await this.parser.flushBuffer(s.depth,s.keys),this.parser.flushStacks(s.depth);return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),!0}else return!1}emitQuad(s,u){s===1&&(this.topLevelProperties=!0),this.parser.push(u)}emitError(s){this.parser.emit("error",s)}emitContext(s){this.parser.emit("context",s)}getUnidentifiedValueBufferSafe(s){let u=this.unidentifiedValuesBuffer[s];return u||(u=[],this.unidentifiedValuesBuffer[s]=u),u}getUnidentifiedGraphBufferSafe(s){let u=this.unidentifiedGraphsBuffer[s];return u||(u=[],this.unidentifiedGraphsBuffer[s]=u),u}getAnnotationsBufferSafe(s){let u=this.annotationsBuffer[s];return u||(u=[],this.annotationsBuffer[s]=u),u}getExpandOptions(){return lx.EXPAND_OPTIONS[this.activeProcessingMode]}shiftStack(s,u){const h=this.idStack[s+u];if(h&&(this.idStack[s]=h,this.emittedStack[s]=!0,delete this.idStack[s+u]),this.pendingContainerFlushBuffers.length)for(const c of this.pendingContainerFlushBuffers)c.depth>=s+u&&(c.depth-=u,c.keys.splice(s,u));this.unidentifiedValuesBuffer[s+u]&&(this.unidentifiedValuesBuffer[s]=this.unidentifiedValuesBuffer[s+u],delete this.unidentifiedValuesBuffer[s+u]),this.annotationsBuffer[s+u-1]&&(this.annotationsBuffer[s-1]||(this.annotationsBuffer[s-1]=[]),this.annotationsBuffer[s-1]=[...this.annotationsBuffer[s-1],...this.annotationsBuffer[s+u-1]],delete this.annotationsBuffer[s+u-1])}};return Zu.ParsingContext=o,o.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},Zu}var tc={},lb;function wN(){if(lb)return tc;lb=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.EntryHandlerKeywordAnnotation=void 0;const e=ks(),t=Ai();let r=class extends e.EntryHandlerKeyword{constructor(){super("@annotation")}async handle(o,a,s,u,h,c){(typeof h=="string"||typeof h=="object"&&h["@value"])&&o.emitError(new t.ErrorCoded(`Found illegal annotation value: ${JSON.stringify(h)}`,t.ERROR_CODES.INVALID_ANNOTATION))}};return tc.EntryHandlerKeywordAnnotation=r,tc}var ub;function ux(){if(ub)return bu;ub=1,Object.defineProperty(bu,"__esModule",{value:!0}),bu.JsonLdParser=void 0;const e=DO(),t=Ai(),r=XC(),n=aN(),o=ox(),a=lN(),s=Rp(),u=uN(),h=cN(),c=dN(),p=fN(),y=hN(),m=pN(),_=gN(),C=yN(),R=vN(),F=_a(),b=Sv(),E=wN();let P=class al extends r.Transform{constructor(H){super({readableObjectMode:!0}),H=H||{},this.options=H,this.parsingContext=new R.ParsingContext(Object.assign({parser:this},H)),this.util=new F.Util({dataFactory:H.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new e,this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners(),this.on("end",()=>{typeof this.jsonParser.mode<"u"&&this.emit("error",new Error("Unclosed document"))})}static fromHttpResponse(H,$,O,ne){let ee;if($!=="application/ld+json"){if($!=="application/json"&&!$.endsWith("+json"))throw new t.ErrorCoded(`Unsupported JSON-LD media type ${$}`,t.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(O&&O.has("Link")&&O.forEach((Q,De)=>{if(De==="link"){const ae=(0,b.parse)(Q);for(const Ce of ae.get("rel","http://www.w3.org/ns/json-ld#context")){if(ee)throw new t.ErrorCoded("Multiple JSON-LD context link headers were found on "+H,t.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);ee=Ce.uri}}}),!ee&&!(ne!=null&&ne.ignoreMissingContextLinkHeader))throw new t.ErrorCoded(`Missing context link header for media type ${$} on ${H}`,t.ERROR_CODES.LOADING_DOCUMENT_FAILED)}let D;if(O&&O.has("Content-Type")){const Q=O.get("Content-Type"),De=/; *profile=([^"]*)/.exec(Q);De&&De[1]==="http://www.w3.org/ns/json-ld#streaming"&&(D=!0)}return new al(Object.assign({baseIRI:H,context:ee,streamingProfile:D},ne||{}))}import(H){if("pipe"in H){H.on("error",O=>$.emit("error",O));const $=H.pipe(new al(this.options));return $}else{const $=new r.PassThrough({readableObjectMode:!0});H.on("error",ne=>O.emit("error",ne)),H.on("data",ne=>$.push(ne)),H.on("end",()=>$.push(null));const O=$.pipe(new al(this.options));return O}}_transform(H,$,O){this.jsonParser.write(H),this.lastOnValueJob.then(()=>O(),ne=>O(ne))}async newOnValueJob(H,$,O,ne){let ee=!0;if(ne&&O<this.lastDepth){const Ce=this.parsingContext.listPointerStack[this.lastDepth];Ce&&(Ce.value&&this.push(this.util.dataFactory.quad(Ce.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),Ce.listId.listHead=!0,this.parsingContext.idStack[Ce.listRootDepth+1]=[Ce.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),await o.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth)?(this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),ee=!1):await this.flushBuffer(this.lastDepth,this.lastKeys)}const D=await this.util.unaliasKeyword(H[O],H,O),Q=await this.util.unaliasKeywordParent(H,O);this.parsingContext.emittedStack[O]=!0;let De=!0;t.Util.isValidKeyword(D)&&Q==="@reverse"&&D!=="@context"&&this.emit("error",new t.ErrorCoded(`Found the @id '${$}' inside an @reverse property`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));let ae=!1;this.parsingContext.validationStack.length>1&&(ae=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property);for(let Ce=Math.max(1,this.parsingContext.validationStack.length-1);Ce<H.length-1;Ce++){const Be=this.parsingContext.validationStack[Ce]||(this.parsingContext.validationStack[Ce]=await this.validateKey(H.slice(0,Ce+1),Ce,ae));if(Be.valid)!ae&&Be.property&&(ae=!0);else{this.parsingContext.emittedStack[O]=!1,De=!1;break}}if(await this.util.isLiteral(H,O)&&(De=!1),De)for(const Ce of al.ENTRY_HANDLERS){const Be=await Ce.test(this.parsingContext,this.util,D,H,O);if(Be){await Ce.handle(this.parsingContext,this.util,D,H,$,O,Be),Ce.isStackProcessor()&&(this.parsingContext.processingStack[O]=!0);break}}O===0&&Array.isArray($)&&await this.util.validateValueIndexes($),ee&&O<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=O,this.lastKeys=H,this.parsingContext.unaliasedKeywordCacheStack.splice(O-1)}flushStacks(H){this.parsingContext.processingStack.splice(H,1),this.parsingContext.processingType.splice(H,1),this.parsingContext.emittedStack.splice(H,1),this.parsingContext.idStack.splice(H,1),this.parsingContext.graphStack.splice(H+1,1),this.parsingContext.graphContainerTermStack.splice(H,1),this.parsingContext.jsonLiteralStack.splice(H,1),this.parsingContext.validationStack.splice(H-1,2),this.parsingContext.literalStack.splice(H,this.parsingContext.literalStack.length-H),this.parsingContext.annotationsBuffer.splice(H,1)}async flushBuffer(H,$){let O=this.parsingContext.idStack[H];!!O||(O=this.parsingContext.idStack[H]=[this.util.dataFactory.blankNode()]);const ee=this.parsingContext.unidentifiedValuesBuffer[H];if(ee){for(const De of O){const ae=await this.util.getDepthOffsetGraph(H,$),Ce=this.parsingContext.graphStack[H]||ae>=0?this.parsingContext.idStack[H-ae-1]:[await this.util.getGraphContainerValue($,H)];if(Ce)for(const Be of Ce){this.parsingContext.emittedStack[H]=!0;for(const Ve of ee)this.util.emitQuadChecked(H,De,Ve.predicate,Ve.object,Be,Ve.reverse,Ve.isEmbedded)}else{const Be=this.parsingContext.getUnidentifiedGraphBufferSafe(H-await this.util.getDepthOffsetGraph(H,$)-1);for(const Ve of ee)Ve.reverse?Be.push({object:De,predicate:Ve.predicate,subject:Ve.object,isEmbedded:Ve.isEmbedded}):Be.push({object:Ve.object,predicate:Ve.predicate,subject:De,isEmbedded:Ve.isEmbedded})}}this.parsingContext.unidentifiedValuesBuffer.splice(H,1),this.parsingContext.literalStack.splice(H,1),this.parsingContext.jsonLiteralStack.splice(H,1)}const D=this.parsingContext.unidentifiedGraphsBuffer[H];if(D){for(const De of O){const ae=H===1&&De.termType==="BlankNode"&&!this.parsingContext.topLevelProperties?this.util.getDefaultGraph():De;this.parsingContext.emittedStack[H]=!0;for(const Ce of D)this.parsingContext.emitQuad(H,this.util.dataFactory.quad(Ce.subject,Ce.predicate,Ce.object,ae))}this.parsingContext.unidentifiedGraphsBuffer.splice(H,1)}const Q=this.parsingContext.annotationsBuffer[H];if(Q){Q.length>0&&H===1&&this.parsingContext.emitError(new t.ErrorCoded("Annotations can not be made on top-level nodes",t.ERROR_CODES.INVALID_ANNOTATION));const De=this.parsingContext.getAnnotationsBufferSafe(H-1);for(const ae of Q)De.push(ae);delete this.parsingContext.annotationsBuffer[H]}}async validateKey(H,$,O){for(const ne of al.ENTRY_HANDLERS)if(await ne.validate(this.parsingContext,this.util,H,$,O))return{valid:!0,property:O||ne.isPropertyHandler()};return{valid:!1,property:!1}}attachJsonParserListeners(){this.jsonParser.onValue=H=>{const $=this.jsonParser.stack.length,O=new Array($+1).fill(0).map((ne,ee)=>ee===$?this.jsonParser.key:this.jsonParser.stack[ee].key);if(!this.isParsingContextInner($)){const ne=()=>this.newOnValueJob(O,H,$,!0);if(!this.parsingContext.streamingProfile&&!this.parsingContext.contextTree.getContext(O.slice(0,-1)))if(O[$]==="@context"){let ee=this.contextJobs[$];ee||(ee=this.contextJobs[$]=[]),ee.push(ne)}else O[$]==="@type"||typeof O[$]=="number"&&O[$-1]==="@type"?this.typeJobs.push({job:ne,keys:O.slice(0,O.length-1)}):this.contextAwaitingJobs.push({job:ne,keys:O});else this.lastOnValueJob=this.lastOnValueJob.then(ne);!this.parsingContext.streamingProfile&&$===0&&(this.lastOnValueJob=this.lastOnValueJob.then(()=>this.executeBufferedJobs()))}},this.jsonParser.onError=H=>{this.emit("error",H)}}isParsingContextInner(H){for(let $=H;$>0;$--)if(this.jsonParser.stack[$-1].key==="@context")return!0;return!1}async executeBufferedJobs(){for(const H of this.contextJobs)if(H)for(const $ of H)await $();this.parsingContext.unaliasedKeywordCacheStack.splice(0);for(const H of this.contextAwaitingJobs){if(this.typeJobs.length>0){const $=[],O=[];for(let D=0;D<this.typeJobs.length;D++){const Q=this.typeJobs[D];F.Util.isPrefixArray(Q.keys,H.keys)&&($.push(Q),O.push(D))}const ne=$.sort((D,Q)=>D.keys.length-Q.keys.length);for(const D of ne)await D.job();const ee=O.sort().reverse();for(const D of ee)this.typeJobs.splice(D,1)}await H.job()}}};return bu.JsonLdParser=P,P.DEFAULT_PROCESSING_MODE="1.1",P.ENTRY_HANDLERS=[new n.EntryHandlerArrayValue,new u.EntryHandlerKeywordContext,new c.EntryHandlerKeywordId,new p.EntryHandlerKeywordIncluded,new h.EntryHandlerKeywordGraph,new y.EntryHandlerKeywordNest,new m.EntryHandlerKeywordType,new C.EntryHandlerKeywordValue,new E.EntryHandlerKeywordAnnotation,new o.EntryHandlerContainer,new _.EntryHandlerKeywordUnknownFallback,new s.EntryHandlerPredicate,new a.EntryHandlerInvalidFallback],bu}var cb;function _N(){return cb||(cb=1,function(e){var t=an&&an.__createBinding||(Object.create?function(n,o,a,s){s===void 0&&(s=a);var u=Object.getOwnPropertyDescriptor(o,a);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(n,s,u)}:function(n,o,a,s){s===void 0&&(s=a),n[s]=o[a]}),r=an&&an.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(ux(),e)}(_y)),_y}var os={},db;function Sa(){if(db)return os;db=1,Object.defineProperty(os,"__esModule",{value:!0});var e=globalThis.fetch;const{fetch:t,Response:r,Request:n,Headers:o}=globalThis;return os.Headers=o,os.Request=n,os.Response=r,os.default=e,os.fetch=t,os}const rc="http://www.w3.org/1999/02/22-rdf-syntax-ns#",nc="http://www.w3.org/2001/XMLSchema#",Qy="http://www.w3.org/2000/10/swap/",di={xsd:{decimal:`${nc}decimal`,boolean:`${nc}boolean`,double:`${nc}double`,integer:`${nc}integer`,string:`${nc}string`},rdf:{type:`${rc}type`,nil:`${rc}nil`,first:`${rc}first`,rest:`${rc}rest`,langString:`${rc}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Qy}reify#forSome`,forAll:`${Qy}reify#forAll`},log:{implies:`${Qy}log#implies`}};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let fb;var SN=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:an):e=>(fb||(fb=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0));const EN=SN,{xsd:Wf}=di,bN=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,hb={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},AN=/[\x00-\x20<>\\"\{\}\|\^\`]/,RN={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},CN=/$0^/;class Tv{constructor(t){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,t=t||{},this._lineMode=!!t.lineMode){this._n3Mode=!1;for(const r in this)!(r in RN)&&this[r]instanceof RegExp&&(this[r]=CN)}else this._n3Mode=t.n3!==!1;this._comments=!!t.comments,this._literalClosingPos=0}_tokenizeToEnd(t,r){let n=this._input,o=n.length;for(;;){let u,h;for(;u=this._newline.exec(n);)this._comments&&(h=this._comment.exec(u[0]))&&a("comment",h[1],"",this._line,u[0].length),n=n.substr(u[0].length,n.length),o=n.length,this._line++;if(!u&&(u=this._whitespace.exec(n))&&(n=n.substr(u[0].length,n.length)),this._endOfFile.test(n))return r&&(this._comments&&(h=this._comment.exec(n))&&a("comment",h[1],"",this._line,n.length),n=null,a("eof","","",this._line,0)),this._input=n;const c=this._line,p=n[0];let y="",m="",_="",C=null,R=0,F=!1;switch(p){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){F=!0;break}}else{this._n3Mode&&(R=1,y="^");break}case"<":if(C=this._unescapedIri.exec(n))y="IRI",m=C[1];else if(C=this._iri.exec(n)){if(m=this._unescape(C[1]),m===null||AN.test(m))return s(this);y="IRI"}else n.length>1&&n[1]==="<"?(y="<<",R=2):this._n3Mode&&n.length>1&&n[1]==="="&&(y="inverse",R=2,m=">");break;case">":n.length>1&&n[1]===">"&&(y=">>",R=2);break;case"_":((C=this._blank.exec(n))||r&&(C=this._blank.exec(`${n} `)))&&(y="blank",_="_",m=C[1]);break;case'"':if(C=this._simpleQuotedString.exec(n))m=C[1];else if({value:m,matchLength:R}=this._parseLiteral(n),m===null)return s(this);(C!==null||R!==0)&&(y="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(C=this._simpleApostropheString.exec(n))m=C[1];else if({value:m,matchLength:R}=this._parseLiteral(n),m===null)return s(this);(C!==null||R!==0)&&(y="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(C=this._variable.exec(n))&&(y="var",m=C[0]);break;case"@":this._previousMarker==="literal"&&(C=this._langcode.exec(n))?(y="langcode",m=C[1]):(C=this._keyword.exec(n))&&(y=C[0]);break;case".":if(n.length===1?r:n[1]<"0"||n[1]>"9"){y=".",R=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(C=this._number.exec(n)||r&&(C=this._number.exec(`${n} `)))&&(y="literal",m=C[0],_=typeof C[1]=="string"?Wf.double:typeof C[2]=="string"?Wf.decimal:Wf.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(C=this._sparqlKeyword.exec(n))?y=C[0].toUpperCase():F=!0;break;case"f":case"t":(C=this._boolean.exec(n))?(y="literal",m=C[0],_=Wf.boolean):F=!0;break;case"a":(C=this._shortPredicates.exec(n))?(y="abbreviation",m="a"):F=!0;break;case"=":this._n3Mode&&n.length>1&&(y="abbreviation",n[1]!==">"?(R=1,m="="):(R=2,m=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(R=1,y=p);break;default:F=!0}if(F&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(C=this._prefix.exec(n))?(y="prefix",m=C[1]||""):((C=this._prefixed.exec(n))||r&&(C=this._prefixed.exec(`${n} `)))&&(y="prefixed",_=C[1]||"",m=this._unescape(C[2]))),this._previousMarker==="^^")switch(y){case"prefixed":y="type";break;case"IRI":y="typeIRI";break;default:y=""}if(!y)return r||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?s(this):this._input=n;const b=R||C[0].length,E=a(y,m,_,c,b);this.previousToken=E,this._previousMarker=y,n=n.substr(b,n.length)}function a(u,h,c,p,y){const m=n?o-n.length:o,_=m+y,C={type:u,value:h,prefix:c,line:p,start:m,end:_};return t(null,C),C}function s(u){t(u._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(t){let r=!1;const n=t.replace(bN,(o,a,s,u)=>{if(typeof a=="string")return String.fromCharCode(Number.parseInt(a,16));if(typeof s=="string"){let h=Number.parseInt(s,16);return h<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((h-=65536)>>10),56320+(h&1023))}return u in hb?hb[u]:(r=!0,"")});return r?null:n}_parseLiteral(t){if(t.length>=3){const r=t.match(/^(?:"""|"|'''|'|)/)[0],n=r.length;let o=Math.max(this._literalClosingPos,n);for(;(o=t.indexOf(r,o))>0;){let a=0;for(;t[o-a-1]==="\\";)a++;if(a%2===0){const s=t.substring(n,o),u=s.split(/\r\n|\r|\n/).length-1,h=o+n;if(n===1&&u!==0||n===3&&this._lineMode)break;return this._line+=u,{value:this._unescape(s),matchLength:h}}o++}this._literalClosingPos=t.length-n+1}return{value:"",matchLength:0}}_syntaxError(t){this._input=null;const r=new Error(`Unexpected "${t}" on line ${this._line}.`);return r.context={token:void 0,line:this._line,previousToken:this.previousToken},r}_readStartingBom(t){return t.startsWith("\uFEFF")?t.substr(1):t}tokenize(t,r){if(this._line=1,typeof t=="string")if(this._input=this._readStartingBom(t),typeof r=="function")EN(()=>this._tokenizeToEnd(r,!0));else{const n=[];let o;if(this._tokenizeToEnd((a,s)=>a?o=a:n.push(s),!0),o)throw o;return n}else this._pendingBuffer=null,typeof t.setEncoding=="function"&&t.setEncoding("utf8"),t.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(r,!1)))}),t.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(r,!0)}),t.on("error",r)}}function xN(e){return!!e&&e.termType==="NamedNode"}function PN(e){return!!e&&e.termType==="BlankNode"}function TN(e){return!!e&&e.termType==="Literal"}function IN(e){return!!e&&e.termType==="Variable"}function Cp(e){return!!e&&e.termType==="DefaultGraph"}function FN(e){return Cp(e.graph)}function ON(e,t){return cx({"":e.value||e},t)("")}function cx(e,t){const r=Object.create(null);for(const o in e)n(o,e[o]);t=t||$l;function n(o,a){if(typeof a=="string"){const s=Object.create(null);r[o]=u=>s[u]||(s[u]=t.namedNode(a+u))}else if(!(o in r))throw new Error(`Unknown prefix: ${o}`);return r[o]}return n}const dx=Object.freeze(Object.defineProperty({__proto__:null,inDefaultGraph:FN,isBlankNode:PN,isDefaultGraph:Cp,isLiteral:TN,isNamedNode:xN,isVariable:IN,prefix:ON,prefixes:cx},Symbol.toStringTag,{value:"Module"})),{rdf:NN,xsd:ra}=di;let hd,kN=0;const fx=/^"(.*".*)(?="[^"]*$)/,DN=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,y0={namedNode:LN,blankNode:UN,variable:BN,literal:MN,defaultGraph:jN,quad:pb,triple:pb},$l=y0;class lo{constructor(t){this.id=t}get value(){return this.id}equals(t){return t instanceof lo?this.id===t.id:!!t&&this.termType===t.termType&&this.value===t.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class xp extends lo{get termType(){return"NamedNode"}}class Cs extends lo{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const t=this.id;let r=t.lastIndexOf('"')+1;return r<t.length&&t[r++]==="@"?t.substr(r).toLowerCase():""}get datatype(){return new xp(this.datatypeString)}get datatypeString(){const t=this.id,r=t.lastIndexOf('"')+1,n=r<t.length?t[r]:"";return n==="^"?t.substr(r+2):n!=="@"?ra.string:NN.langString}equals(t){return t instanceof Cs?this.id===t.id:!!t&&!!t.datatype&&this.termType===t.termType&&this.value===t.value&&this.language===t.language&&this.datatype.value===t.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class Iv extends lo{constructor(t){super(`_:${t}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class Fv extends lo{constructor(t){super(`?${t}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class Ov extends lo{constructor(){return super(""),hd||this}get termType(){return"DefaultGraph"}equals(t){return this===t||!!t&&this.termType===t.termType}}hd=new Ov;function vo(e,t){if(t=t||y0,!e)return t.defaultGraph();switch(e[0]){case"?":return t.variable(e.substr(1));case"_":return t.blankNode(e.substr(2));case'"':if(t===y0)return new Cs(e);if(e[e.length-1]==='"')return t.literal(e.substr(1,e.length-2));const r=e.lastIndexOf('"',e.length-1);return t.literal(e.substr(1,r-1),e[r+1]==="@"?e.substr(r+2):t.namedNode(e.substr(r+3)));case"<":const n=DN.exec(e);return t.quad(vo(Gf(n[1]),t),vo(Gf(n[2]),t),vo(Gf(n[3]),t),n[4]&&vo(Gf(n[4]),t));default:return t.namedNode(e)}}function rn(e){if(typeof e=="string")return e;if(e instanceof lo&&e.termType!=="Quad")return e.id;if(!e)return hd.id;switch(e.termType){case"NamedNode":return e.value;case"BlankNode":return`_:${e.value}`;case"Variable":return`?${e.value}`;case"DefaultGraph":return"";case"Literal":return`"${e.value}"${e.language?`@${e.language}`:e.datatype&&e.datatype.value!==ra.string?`^^${e.datatype.value}`:""}`;case"Quad":return`<<${Yy(rn(e.subject))} ${Yy(rn(e.predicate))} ${Yy(rn(e.object))}${Cp(e.graph)?"":` ${rn(e.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${e.termType}`)}}class nd extends lo{constructor(t,r,n,o){super(""),this._subject=t,this._predicate=r,this._object=n,this._graph=o||hd}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(t){return!!t&&this._subject.equals(t.subject)&&this._predicate.equals(t.predicate)&&this._object.equals(t.object)&&this._graph.equals(t.graph)}}function Yy(e){return e.replace(fx,(t,r)=>`"${r.replace(/"/g,'""')}`)}function Gf(e){return e.replace(fx,(t,r)=>`"${r.replace(/""/g,'"')}`)}function LN(e){return new xp(e)}function UN(e){return new Iv(e||`n3-${kN++}`)}function MN(e,t){if(typeof t=="string")return new Cs(`"${e}"@${t.toLowerCase()}`);let r=t?t.value:"";return r===""&&(typeof e=="boolean"?r=ra.boolean:typeof e=="number"&&(Number.isFinite(e)?r=Number.isInteger(e)?ra.integer:ra.double:(r=ra.double,Number.isNaN(e)||(e=e>0?"INF":"-INF")))),r===""||r===ra.string?new Cs(`"${e}"`):new Cs(`"${e}"^^${r}`)}function BN(e){return new Fv(e)}function jN(){return hd}function pb(e,t,r,n){return new nd(e,t,r,n)}let gb=0;class Pp{constructor(t){this._contextStack=[],this._graph=null,t=t||{},this._setBase(t.baseIRI),t.factory&&hx(this,t.factory);const r=typeof t.format=="string"?t.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(r),o=/trig/.test(r),a=/triple/.test(r),s=/quad/.test(r),u=this._n3Mode=/n3/.test(r),h=a||s;(this._supportsNamedGraphs=!(n||u))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||o||a||u),this._supportsRDFStar=r===""||/star|\*$/.test(r),h&&(this._resolveRelativeIRI=c=>null),this._blankNodePrefix=typeof t.blankNodePrefix!="string"?"":t.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=t.lexer||new Tv({lineMode:h,n3:u}),this._explicitQuantifiers=!!t.explicitQuantifiers}static _resetBlankNodePrefix(){gb=0}_setBase(t){if(!t)this._base="",this._basePath="";else{const r=t.indexOf("#");r>=0&&(t=t.substr(0,r)),this._base=t,this._basePath=t.indexOf("/")<0?t:t.replace(/[^\/?]*(?:\?.*)?$/,""),t=t.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=t[0],this._baseScheme=t[1]}}_saveContext(t,r,n,o,a){const s=this._n3Mode;this._contextStack.push({type:t,subject:n,predicate:o,object:a,graph:r,inverse:s?this._inversePredicate:!1,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(t,r){const n=this._contextStack.pop();if(!n||n.type!==t)return this._error(`Unexpected ${r.type}`,r);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(t){switch(t.type){case"eof":return this._graph!==null?this._error("Unclosed graph",t):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(t)}}_readEntity(t,r){let n;switch(t.type){case"IRI":case"typeIRI":const o=this._resolveIRI(t.value);if(o===null)return this._error("Invalid IRI",t);n=this._namedNode(o);break;case"type":case"prefixed":const a=this._prefixes[t.prefix];if(a===void 0)return this._error(`Undefined prefix "${t.prefix}:"`,t);n=this._namedNode(a+t.value);break;case"blank":n=this._blankNode(this._prefixes[t.prefix]+t.value);break;case"var":n=this._variable(t.value.substr(1));break;default:return this._error(`Expected entity but got ${t.type}`,t)}return!r&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(t){switch(this._predicate=null,t.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",t);case"}":return this._readPunctuation(t);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',t);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',t);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",t);if(t.prefix.length===0)return this._literalValue=t.value,this._completeSubjectLiteral;this._subject=this._literal(t.value,this._namedNode(t.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",t);default:if((this._subject=this._readEntity(t))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(t){const r=t.type;switch(r){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[t.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${r}`,t):(this._subject=null,r==="]"?this._readBlankNodeTail(t):this._readPunctuation(t));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",t);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",t);default:if((this._predicate=this._readEntity(t))===void 0)return}return this._readObject}_readObject(t){switch(t.type){case"literal":if(t.prefix.length===0)return this._literalValue=t.value,this._readDataTypeOrLang;this._object=this._literal(t.value,this._namedNode(t.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",t);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",t);default:if((this._object=this._readEntity(t))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(t){return t.type==="{"?this._readGraph(t):this._readPredicate(t)}_readGraph(t){return t.type!=="{"?this._error(`Expected graph but got ${t.type}`,t):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(t){return t.type==="]"?(this._subject=null,this._readBlankNodeTail(t)):(this._predicate=null,this._readPredicate(t))}_readBlankNodeTail(t){if(t.type!=="]")return this._readBlankNodePunctuation(t);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const r=this._predicate===null;return this._restoreContext("blank",t),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:r?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(t){switch(t.type){case".":case"}":return this._subject=null,this._readPunctuation(t);default:return this._readPredicate(t)}}_readListItem(t){let r=null,n=null,o=this._readListItem;const a=this._subject,s=this._contextStack,u=s[s.length-1];switch(t.type){case"[":this._saveContext("blank",this._graph,n=this._blankNode(),this.RDF_FIRST,this._subject=r=this._blankNode()),o=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",t),s.length!==0&&s[s.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(o=this._readPredicate,this._subject===this.RDF_NIL)return o}else if(o=this._getContextEndReader(),this._object===this.RDF_NIL)return o;n=this.RDF_NIL;break;case"literal":t.prefix.length===0?(this._literalValue=t.value,o=this._readListItemDataTypeOrLang):(r=this._literal(t.value,this._namedNode(t.prefix)),o=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",t);default:if((r=this._readEntity(t))===void 0)return}if(n===null&&(this._subject=n=this._blankNode()),a===null?u.predicate===null?u.subject=n:u.object=n:this._emit(a,this.RDF_REST,n,this._graph),r!==null){if(this._n3Mode&&(t.type==="IRI"||t.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,r),this._subject=r,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,r,this._graph)}return o}_readDataTypeOrLang(t){return this._completeObjectLiteral(t,!1)}_readListItemDataTypeOrLang(t){return this._completeObjectLiteral(t,!0)}_completeLiteral(t){let r=this._literal(this._literalValue);switch(t.type){case"type":case"typeIRI":const n=this._readEntity(t);if(n===void 0)return;r=this._literal(this._literalValue,n),t=null;break;case"langcode":r=this._literal(this._literalValue,t.value),t=null;break}return{token:t,literal:r}}_completeSubjectLiteral(t){return this._subject=this._completeLiteral(t).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(t,r){const n=this._completeLiteral(t);if(n)return this._object=n.literal,r&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(t){return t.type!=="}"?this._readPunctuation(t):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",t),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(t){let r,n=this._graph;const o=this._subject,a=this._inversePredicate;switch(t.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",t);if(this._n3Mode)return this._readFormulaTail(t);this._graph=null;case".":this._subject=null,r=this._contextStack.length?this._readSubject:this._readInTopContext,a&&(this._inversePredicate=!1);break;case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(t))!==void 0){r=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}if(o!==null){const s=this._predicate,u=this._object;a?this._emit(u,s,o,n):this._emit(o,s,u,n)}return r}_readBlankNodePunctuation(t){let r;switch(t.type){case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}return this._emit(this._subject,this._predicate,this._object,this._graph),r}_readQuadPunctuation(t){return t.type!=="."?this._error("Expected dot to follow quad",t):this._readInTopContext}_readPrefix(t){return t.type!=="prefix"?this._error("Expected prefix to follow @prefix",t):(this._prefix=t.value,this._readPrefixIRI)}_readPrefixIRI(t){if(t.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,t);const r=this._readEntity(t);return this._prefixes[this._prefix]=r.value,this._prefixCallback(this._prefix,r),this._readDeclarationPunctuation}_readBaseIRI(t){const r=t.type==="IRI"&&this._resolveIRI(t.value);return r?(this._setBase(r),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",t)}_readNamedGraphLabel(t){switch(t.type){case"IRI":case"blank":case"prefixed":return this._readSubject(t),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",t)}}_readNamedGraphBlankLabel(t){return t.type!=="]"?this._error("Invalid graph label",t):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(t){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(t)):t.type!=="."?this._error("Expected declaration to end with a dot",t):this._readInTopContext}_readQuantifierList(t){let r;switch(t.type){case"IRI":case"prefixed":if((r=this._readEntity(t,!0))!==void 0)break;default:return this._error(`Unexpected ${t.type}`,t)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,r,this.QUANTIFIERS_GRAPH)):this._quantified[r.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(t){return t.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(t))}_getPathReader(t){return this._afterPath=t,this._readPath}_readPath(t){switch(t.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const r=this._contextStack,n=r.length&&r[r.length-1];if(n&&n.type==="item"){const o=this._subject;this._restoreContext("item",t),this._emit(this._subject,this.RDF_FIRST,o,this._graph)}return this._afterPath(t)}}_readForwardPath(t){let r,n;const o=this._blankNode();if((n=this._readEntity(t))!==void 0)return this._predicate===null?(r=this._subject,this._subject=o):(r=this._object,this._object=o),this._emit(r,n,o,this._graph),this._readPath}_readBackwardPath(t){const r=this._blankNode();let n,o;if((n=this._readEntity(t))!==void 0)return this._predicate===null?(o=this._subject,this._subject=r):(o=this._object,this._object=r),this._emit(r,n,o,this._graph),this._readPath}_readRDFStarTailOrGraph(t){return t.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(t))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,t):this._readRDFStarTail(t)}_readRDFStarTail(t){if(t.type!==">>")return this._error(`Expected >> but got ${t.type}`,t);const r=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",t),this._subject===null?(this._subject=r,this._readPredicate):(this._object=r,this._getContextEndReader())}_getContextEndReader(){const t=this._contextStack;if(!t.length)return this._readPunctuation;switch(t[t.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(t,r,n,o){this._callback(null,this._quad(t,r,n,o||this.DEFAULTGRAPH))}_error(t,r){const n=new Error(`${t} on line ${r.line}.`);n.context={token:r,line:r.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=Xy}_resolveIRI(t){return/^[a-z][a-z0-9+.-]*:/i.test(t)?t:this._resolveRelativeIRI(t)}_resolveRelativeIRI(t){if(!t.length)return this._base;switch(t[0]){case"#":return this._base+t;case"?":return this._base.replace(/(?:\?.*)?$/,t);case"/":return(t[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(t);default:return/^[^/:]*:/.test(t)?null:this._removeDotSegments(this._basePath+t)}}_removeDotSegments(t){if(!/(^|\/)\.\.?($|[/#?])/.test(t))return t;const r=t.length;let n="",o=-1,a=-1,s=0,u="/";for(;o<r;){switch(u){case":":if(a<0&&t[++o]==="/"&&t[++o]==="/")for(;(a=o+1)<r&&t[a]!=="/";)o=a;break;case"?":case"#":o=r;break;case"/":if(t[o+1]===".")switch(u=t[++o+1],u){case"/":n+=t.substring(s,o-1),s=o+1;break;case void 0:case"?":case"#":return n+t.substring(s,o)+t.substr(o+1);case".":if(u=t[++o+1],u===void 0||u==="/"||u==="?"||u==="#"){if(n+=t.substring(s,o-2),(s=n.lastIndexOf("/"))>=a&&(n=n.substr(0,s)),u!=="/")return`${n}/${t.substr(o+1)}`;s=o+1}}}u=t[++o]}return n+t.substring(s)}parse(t,r,n){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${gb++}_`,this._prefixCallback=n||Xy,this._inversePredicate=!1,this._quantified=Object.create(null),!r){const o=[];let a;if(this._callback=(s,u)=>{s?a=s:u&&o.push(u)},this._lexer.tokenize(t).every(s=>this._readCallback=this._readCallback(s)),a)throw a;return o}this._callback=r,this._lexer.tokenize(t,(o,a)=>{o!==null?(this._callback(o),this._callback=Xy):this._readCallback&&(this._readCallback=this._readCallback(a))})}}function Xy(){}function hx(e,t){const r=t.namedNode;e._namedNode=r,e._blankNode=t.blankNode,e._literal=t.literal,e._variable=t.variable,e._quad=t.quad,e.DEFAULTGRAPH=t.defaultGraph(),e.RDF_FIRST=r(di.rdf.first),e.RDF_REST=r(di.rdf.rest),e.RDF_NIL=r(di.rdf.nil),e.N3_FORALL=r(di.r.forAll),e.N3_FORSOME=r(di.r.forSome),e.ABBREVIATIONS={a:r(di.rdf.type),"=":r(di.owl.sameAs),">":r(di.log.implies)},e.QUANTIFIERS_GRAPH=r("urn:n3:quantifiers")}hx(Pp.prototype,$l);const ic=$l.defaultGraph(),{rdf:HN,xsd:ol}=di,yb=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,mb=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,$N={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class oc extends lo{equals(){return!1}}class Nv{constructor(t,r){if(this._prefixRegex=/$0^/,t&&typeof t.write!="function"&&(r=t,t=null),r=r||{},this._lists=r.lists,t)this._outputStream=t,this._endStream=r.end===void 0?!0:!!r.end;else{let n="";this._outputStream={write(o,a,s){n+=o,s&&s()},end:o=>{o&&o(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=ic,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseMatcher=new RegExp(`^${wb(r.baseIRI)}${r.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=r.baseIRI.length))}get _inDefaultGraph(){return ic.equals(this._graph)}_write(t,r){this._outputStream.write(t,"utf8",r)}_writeQuad(t,r,n,o,a){try{o.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(ic.equals(o)?"":`${this._encodeIriOrBlank(o)} {
`)),this._graph=o,this._subject=null),t.equals(this._subject)?r.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,a):this._write(`;
    ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=t)} ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,a)}catch(s){a&&a(s)}}_writeQuadLine(t,r,n,o,a){delete this._prefixMatch,this._write(this.quadToString(t,r,n,o),a)}quadToString(t,r,n,o){return`${this._encodeSubject(t)} ${this._encodeIriOrBlank(r)} ${this._encodeObject(n)}${o&&o.value?` ${this._encodeIriOrBlank(o)} .
`:` .
`}`}quadsToString(t){return t.map(r=>this.quadToString(r.subject,r.predicate,r.object,r.graph)).join("")}_encodeSubject(t){return t.termType==="Quad"?this._encodeQuad(t):this._encodeIriOrBlank(t)}_encodeIriOrBlank(t){if(t.termType!=="NamedNode")return this._lists&&t.value in this._lists&&(t=this.list(this._lists[t.value])),"id"in t?t.id:`_:${t.value}`;let r=t.value;this._baseMatcher&&this._baseMatcher.test(r)&&(r=r.substr(this._baseLength)),yb.test(r)&&(r=r.replace(mb,vb));const n=this._prefixRegex.exec(r);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:r:`<${r}>`}_encodeLiteral(t){let r=t.value;if(yb.test(r)&&(r=r.replace(mb,vb)),t.language)return`"${r}"@${t.language}`;if(this._lineMode){if(t.datatype.value===ol.string)return`"${r}"`}else switch(t.datatype.value){case ol.string:return`"${r}"`;case ol.boolean:if(r==="true"||r==="false")return r;break;case ol.integer:if(/^[+-]?\d+$/.test(r))return r;break;case ol.decimal:if(/^[+-]?\d*\.\d+$/.test(r))return r;break;case ol.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(r))return r;break}return`"${r}"^^${this._encodeIriOrBlank(t.datatype)}`}_encodePredicate(t){return t.value===HN.type?"a":this._encodeIriOrBlank(t)}_encodeObject(t){switch(t.termType){case"Quad":return this._encodeQuad(t);case"Literal":return this._encodeLiteral(t);default:return this._encodeIriOrBlank(t)}}_encodeQuad({subject:t,predicate:r,object:n,graph:o}){return`<<${this._encodeSubject(t)} ${this._encodePredicate(r)} ${this._encodeObject(n)}${Cp(o)?"":` ${this._encodeIriOrBlank(o)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(t,r,n,o,a){n===void 0?this._writeQuad(t.subject,t.predicate,t.object,t.graph,r):typeof o=="function"?this._writeQuad(t,r,n,ic,o):this._writeQuad(t,r,n,o||ic,a)}addQuads(t){for(let r=0;r<t.length;r++)this.addQuad(t[r])}addPrefix(t,r,n){const o={};o[t]=r,this.addPrefixes(o,n)}addPrefixes(t,r){if(!this._prefixIRIs)return r&&r();let n=!1;for(let o in t){let a=t[o];typeof a!="string"&&(a=a.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[a]=o+=":",this._write(`@prefix ${o} <${a}>.
`)}if(n){let o="",a="";for(const s in this._prefixIRIs)o+=o?`|${s}`:s,a+=(a?"|":"")+this._prefixIRIs[s];o=wb(o),this._prefixRegex=new RegExp(`^(?:${a})[^/]*$|^(${o})([_a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",r)}blank(t,r){let n=t,o,a;switch(t===void 0?n=[]:t.termType?n=[{predicate:t,object:r}]:"length"in t||(n=[t]),a=n.length){case 0:return new oc("[]");case 1:if(o=n[0],!(o.object instanceof oc))return new oc(`[ ${this._encodePredicate(o.predicate)} ${this._encodeObject(o.object)} ]`);default:let s="[";for(let u=0;u<a;u++)o=n[u],o.predicate.equals(t)?s+=`, ${this._encodeObject(o.object)}`:(s+=`${(u?`;
  `:`
  `)+this._encodePredicate(o.predicate)} ${this._encodeObject(o.object)}`,t=o.predicate);return new oc(`${s}
]`)}}list(t){const r=t&&t.length||0,n=new Array(r);for(let o=0;o<r;o++)n[o]=this._encodeObject(t[o]);return new oc(`(${n.join(" ")})`)}end(t){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let r=t&&((n,o)=>{r=null,t(n,o)});if(this._endStream)try{return this._outputStream.end(r)}catch{}r&&r()}}function vb(e){let t=$N[e];return t===void 0&&(e.length===1?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=((e.charCodeAt(0)-55296)*1024+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}function wb(e){return e.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var Tp=XC();class kv{constructor(t,r){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!r&&t&&!t[0]&&(r=t,t=null),r=r||{},this._factory=r.factory||$l,t&&this.addQuads(t)}get size(){let t=this._size;if(t!==null)return t;t=0;const r=this._graphs;let n,o;for(const a in r)for(const s in n=r[a].subjects)for(const u in o=n[s])t+=Object.keys(o[u]).length;return this._size=t}_addToIndex(t,r,n,o){const a=t[r]||(t[r]={}),s=a[n]||(a[n]={}),u=o in s;return u||(s[o]=null),!u}_removeFromIndex(t,r,n,o){const a=t[r],s=a[n];delete s[o];for(const u in s)return;delete a[n];for(const u in a)return;delete t[r]}*_findInIndex(t,r,n,o,a,s,u,h){let c,p,y;const m=this._entities,_=vo(h,this._factory),C={subject:null,predicate:null,object:null};r&&((c=t,t={})[r]=c[r]);for(const R in t)if(p=t[R]){C[a]=vo(m[R],this._factory),n&&((c=p,p={})[n]=c[n]);for(const F in p)if(y=p[F]){C[s]=vo(m[F],this._factory);const b=o?o in y?[o]:[]:Object.keys(y);for(let E=0;E<b.length;E++)C[u]=vo(m[b[E]],this._factory),yield this._factory.quad(C.subject,C.predicate,C.object,_)}}}_loop(t,r){for(const n in t)r(n)}_loopByKey0(t,r,n){let o,a;if(o=t[r])for(a in o)n(a)}_loopByKey1(t,r,n){let o,a;for(o in t)a=t[o],a[r]&&n(o)}_loopBy2Keys(t,r,n,o){let a,s,u;if((a=t[r])&&(s=a[n]))for(u in s)o(u)}_countInIndex(t,r,n,o){let a=0,s,u,h;r&&((s=t,t={})[r]=s[r]);for(const c in t)if(u=t[c]){n&&((s=u,u={})[n]=s[n]);for(const p in u)(h=u[p])&&(o?o in h&&a++:a+=Object.keys(h).length)}return a}_getGraphs(t){if(!$i(t))return this._graphs;const r={};return r[t]=this._graphs[t],r}_uniqueEntities(t){const r=Object.create(null);return n=>{n in r||(r[n]=!0,t(vo(this._entities[n],this._factory)))}}add(t){return this.addQuad(t),this}addQuad(t,r,n,o){r||(o=t.graph,n=t.object,r=t.predicate,t=t.subject),t=rn(t),r=rn(r),n=rn(n),o=rn(o);let a=this._graphs[o];a||(a=this._graphs[o]={subjects:{},predicates:{},objects:{}},Object.freeze(a));const s=this._ids,u=this._entities;t=s[t]||(s[u[++this._id]=t]=this._id),r=s[r]||(s[u[++this._id]=r]=this._id),n=s[n]||(s[u[++this._id]=n]=this._id);const h=this._addToIndex(a.subjects,t,r,n);return this._addToIndex(a.predicates,r,n,t),this._addToIndex(a.objects,n,t,r),this._size=null,h}addQuads(t){for(let r=0;r<t.length;r++)this.addQuad(t[r])}delete(t){return this.removeQuad(t),this}has(t,r,n,o){return t&&t.subject&&({subject:t,predicate:r,object:n,graph:o}=t),!this.readQuads(t,r,n,o).next().done}import(t){return t.on("data",r=>{this.addQuad(r)}),t}removeQuad(t,r,n,o){r||(o=t.graph,n=t.object,r=t.predicate,t=t.subject),t=rn(t),r=rn(r),n=rn(n),o=rn(o);const a=this._ids,s=this._graphs;let u,h,c;if(!(t=a[t])||!(r=a[r])||!(n=a[n])||!(u=s[o])||!(h=u.subjects[t])||!(c=h[r])||!(n in c))return!1;this._removeFromIndex(u.subjects,t,r,n),this._removeFromIndex(u.predicates,r,n,t),this._removeFromIndex(u.objects,n,t,r),this._size!==null&&this._size--;for(t in u.subjects)return!0;return delete s[o],!0}removeQuads(t){for(let r=0;r<t.length;r++)this.removeQuad(t[r])}remove(t){return t.on("data",r=>{this.removeQuad(r)}),t}removeMatches(t,r,n,o){const a=new Tp.Readable({objectMode:!0});return a._read=()=>{for(const s of this.readQuads(t,r,n,o))a.push(s);a.push(null)},this.remove(a)}deleteGraph(t){return this.removeMatches(null,null,null,t)}getQuads(t,r,n,o){return[...this.readQuads(t,r,n,o)]}*readQuads(t,r,n,o){t=t&&rn(t),r=r&&rn(r),n=n&&rn(n),o=o&&rn(o);const a=this._getGraphs(o),s=this._ids;let u,h,c,p;if(!($i(t)&&!(h=s[t])||$i(r)&&!(c=s[r])||$i(n)&&!(p=s[n])))for(const y in a)(u=a[y])&&(h?p?yield*this._findInIndex(u.objects,p,h,c,"object","subject","predicate",y):yield*this._findInIndex(u.subjects,h,c,null,"subject","predicate","object",y):c?yield*this._findInIndex(u.predicates,c,p,null,"predicate","object","subject",y):p?yield*this._findInIndex(u.objects,p,null,null,"object","subject","predicate",y):yield*this._findInIndex(u.subjects,null,null,null,"subject","predicate","object",y))}match(t,r,n,o){return new Dv(this,t,r,n,o)}countQuads(t,r,n,o){t=t&&rn(t),r=r&&rn(r),n=n&&rn(n),o=o&&rn(o);const a=this._getGraphs(o),s=this._ids;let u=0,h,c,p,y;if($i(t)&&!(c=s[t])||$i(r)&&!(p=s[r])||$i(n)&&!(y=s[n]))return 0;for(const m in a)(h=a[m])&&(t?n?u+=this._countInIndex(h.objects,y,c,p):u+=this._countInIndex(h.subjects,c,p,y):r?u+=this._countInIndex(h.predicates,p,y,c):u+=this._countInIndex(h.objects,y,c,p));return u}forEach(t,r,n,o,a){this.some(s=>(t(s),!1),r,n,o,a)}every(t,r,n,o,a){let s=!1;const u=!this.some(h=>(s=!0,!t(h)),r,n,o,a);return s&&u}some(t,r,n,o,a){for(const s of this.readQuads(r,n,o,a))if(t(s))return!0;return!1}getSubjects(t,r,n){const o=[];return this.forSubjects(a=>{o.push(a)},t,r,n),o}forSubjects(t,r,n,o){r=r&&rn(r),n=n&&rn(n),o=o&&rn(o);const a=this._ids,s=this._getGraphs(o);let u,h,c;if(t=this._uniqueEntities(t),!($i(r)&&!(h=a[r])||$i(n)&&!(c=a[n])))for(o in s)(u=s[o])&&(h?c?this._loopBy2Keys(u.predicates,h,c,t):this._loopByKey1(u.subjects,h,t):c?this._loopByKey0(u.objects,c,t):this._loop(u.subjects,t))}getPredicates(t,r,n){const o=[];return this.forPredicates(a=>{o.push(a)},t,r,n),o}forPredicates(t,r,n,o){r=r&&rn(r),n=n&&rn(n),o=o&&rn(o);const a=this._ids,s=this._getGraphs(o);let u,h,c;if(t=this._uniqueEntities(t),!($i(r)&&!(h=a[r])||$i(n)&&!(c=a[n])))for(o in s)(u=s[o])&&(h?c?this._loopBy2Keys(u.objects,c,h,t):this._loopByKey0(u.subjects,h,t):c?this._loopByKey1(u.predicates,c,t):this._loop(u.predicates,t))}getObjects(t,r,n){const o=[];return this.forObjects(a=>{o.push(a)},t,r,n),o}forObjects(t,r,n,o){r=r&&rn(r),n=n&&rn(n),o=o&&rn(o);const a=this._ids,s=this._getGraphs(o);let u,h,c;if(t=this._uniqueEntities(t),!($i(r)&&!(h=a[r])||$i(n)&&!(c=a[n])))for(o in s)(u=s[o])&&(h?c?this._loopBy2Keys(u.subjects,h,c,t):this._loopByKey1(u.objects,h,t):c?this._loopByKey0(u.predicates,c,t):this._loop(u.objects,t))}getGraphs(t,r,n){const o=[];return this.forGraphs(a=>{o.push(a)},t,r,n),o}forGraphs(t,r,n,o){for(const a in this._graphs)this.some(s=>(t(s.graph),!0),r,n,o,a)}createBlankNode(t){let r,n;if(t)for(r=t=`_:${t}`,n=1;this._ids[r];)r=t+n++;else do r=`_:b${this._blankNodeIndex++}`;while(this._ids[r]);return this._ids[r]=++this._id,this._entities[this._id]=r,this._factory.blankNode(r.substr(2))}extractLists({remove:t=!1,ignoreErrors:r=!1}={}){const n={},o=r?()=>!0:(u,h)=>{throw new Error(`${u.value} ${h}`)},a=this.getQuads(null,di.rdf.rest,di.rdf.nil,null),s=t?[...a]:[];return a.forEach(u=>{const h=[];let c=!1,p,y;const m=u.graph;let _=u.subject;for(;_&&!c;){const C=this.getQuads(null,null,_,null),R=this.getQuads(_,null,null,null);let F,b=null,E=null,P=null;for(let j=0;j<R.length&&!c;j++)F=R[j],F.graph.equals(m)?p?c=o(_,"has non-list arcs out"):F.predicate.value===di.rdf.first?b?c=o(_,"has multiple rdf:first arcs"):s.push(b=F):F.predicate.value===di.rdf.rest?E?c=o(_,"has multiple rdf:rest arcs"):s.push(E=F):C.length?c=o(_,"can't be subject and object"):(p=F,y="subject"):c=o(_,"not confined to single graph");for(let j=0;j<C.length&&!c;++j)F=C[j],p?c=o(_,"can't have coreferences"):F.predicate.value===di.rdf.rest?P?c=o(_,"has incoming rdf:rest arcs"):P=F:(p=F,y="object");b?h.unshift(b.object):c=o(_,"has no list head"),_=P&&P.subject}c?t=!1:p&&(n[p[y].value]=h)}),t&&this.removeQuads(s),n}*[Symbol.iterator](){yield*this.readQuads()}}function $i(e){return typeof e=="string"||e instanceof String}class Dv extends Tp.Readable{constructor(t,r,n,o,a){super({objectMode:!0}),Object.assign(this,{n3Store:t,subject:r,predicate:n,object:o,graph:a})}get filtered(){if(!this._filtered){const{n3Store:t,graph:r,object:n,predicate:o,subject:a}=this,s=this._filtered=new kv({factory:t._factory});for(const u of t.readQuads(a,o,n,r))s.addQuad(u)}return this._filtered}get size(){return this.filtered.size}_read(){for(const t of this)this.push(t);this.push(null)}add(t){return this.filtered.add(t)}delete(t){return this.filtered.delete(t)}has(t){return this.filtered.has(t)}match(t,r,n,o){return new Dv(this.filtered,t,r,n,o)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}class px extends Tp.Transform{constructor(t){super({decodeStrings:!0}),this._readableState.objectMode=!0;const r=new Pp(t);let n,o;r.parse({on:(a,s)=>{switch(a){case"data":n=s;break;case"end":o=s;break}}},(a,s)=>{a&&this.emit("error",a)||s&&this.push(s)},(a,s)=>{this.emit("prefix",a,s)}),this._transform=(a,s,u)=>{n(a),u()},this._flush=a=>{o(),a()}}import(t){return t.on("data",r=>{this.write(r)}),t.on("end",()=>{this.end()}),t.on("error",r=>{this.emit("error",r)}),this}}class gx extends Tp.Transform{constructor(t){super({encoding:"utf8",writableObjectMode:!0});const r=this._writer=new Nv({write:(n,o,a)=>{this.push(n),a&&a()},end:n=>{this.push(null),n&&n()}},t);this._transform=(n,o,a)=>{r.addQuad(n,a)},this._flush=n=>{r.end(n)}}import(t){return t.on("data",r=>{this.write(r)}),t.on("end",()=>{this.end()}),t.on("error",r=>{this.emit("error",r)}),t.on("prefix",(r,n)=>{this._writer.addPrefix(r,n)}),this}}const VN={Lexer:Tv,Parser:Pp,Writer:Nv,Store:kv,StreamParser:px,StreamWriter:gx,Util:dx,DataFactory:$l,Term:lo,NamedNode:xp,Literal:Cs,BlankNode:Iv,Variable:Fv,DefaultGraph:Ov,Quad:nd,Triple:nd,termFromId:vo,termToId:rn},KN=Object.freeze(Object.defineProperty({__proto__:null,BlankNode:Iv,DataFactory:$l,DefaultGraph:Ov,Lexer:Tv,Literal:Cs,NamedNode:xp,Parser:Pp,Quad:nd,Store:kv,StreamParser:px,StreamWriter:gx,Term:lo,Triple:nd,Util:dx,Variable:Fv,Writer:Nv,default:VN,termFromId:vo,termToId:rn},Symbol.toStringTag,{value:"Module"})),WN=ip(KN);var Zy,_b;function GN(){if(_b)return Zy;_b=1;class e{constructor(r){this.value=r||"b"+ ++e.nextId}equals(r){return!!r&&r.termType===this.termType&&r.value===this.value}}return e.prototype.termType="BlankNode",e.nextId=0,Zy=e,Zy}var em,Sb;function yx(){if(Sb)return em;Sb=1;class e{equals(r){return!!r&&r.termType===this.termType}}return e.prototype.termType="DefaultGraph",e.prototype.value="",em=e,em}var tm,Eb;function qN(){if(Eb)return tm;Eb=1;function e(t){if(!t)return null;if(t.termType==="BlankNode")return this.blankNode(t.value);if(t.termType==="DefaultGraph")return this.defaultGraph();if(t.termType==="Literal")return this.literal(t.value,t.language||this.namedNode(t.datatype.value));if(t.termType==="NamedNode")return this.namedNode(t.value);if(t.termType==="Quad"){const r=this.fromTerm(t.subject),n=this.fromTerm(t.predicate),o=this.fromTerm(t.object),a=this.fromTerm(t.graph);return this.quad(r,n,o,a)}if(t.termType==="Variable")return this.variable(t.value);throw new Error(`unknown termType ${t.termType}`)}return tm=e,tm}var rm,bb;function mx(){if(bb)return rm;bb=1;class e{constructor(r){this.value=r}equals(r){return!!r&&r.termType===this.termType&&r.value===this.value}}return e.prototype.termType="NamedNode",rm=e,rm}var nm,Ab;function zN(){if(Ab)return nm;Ab=1;const e=mx();class t{constructor(n,o,a){this.value=n,this.datatype=t.stringDatatype,this.language="",o?(this.language=o,this.datatype=t.langStringDatatype):a&&(this.datatype=a)}equals(n){return!!n&&n.termType===this.termType&&n.value===this.value&&n.language===this.language&&n.datatype.equals(this.datatype)}}return t.prototype.termType="Literal",t.langStringDatatype=new e("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.stringDatatype=new e("http://www.w3.org/2001/XMLSchema#string"),nm=t,nm}var im,Rb;function JN(){if(Rb)return im;Rb=1;const e=yx();class t{constructor(n,o,a,s){this.subject=n,this.predicate=o,this.object=a,s?this.graph=s:this.graph=new e}equals(n){return!!n&&(n.termType==="Quad"||!n.termType)&&n.subject.equals(this.subject)&&n.predicate.equals(this.predicate)&&n.object.equals(this.object)&&n.graph.equals(this.graph)}}return t.prototype.termType="Quad",t.prototype.value="",im=t,im}var om,Cb;function QN(){if(Cb)return om;Cb=1;class e{constructor(r){this.value=r}equals(r){return!!r&&r.termType===this.termType&&r.value===this.value}}return e.prototype.termType="Variable",om=e,om}var sm,xb;function YN(){if(xb)return sm;xb=1;const e=GN(),t=yx(),r=qN(),n=zN(),o=mx(),a=JN(),s=QN();function u(b){return new o(b)}function h(b){return new e(b)}function c(b,E){return typeof E=="string"?E.indexOf(":")===-1?new n(b,E):new n(b,null,F.namedNode(E)):new n(b,null,E)}function p(b){return new s(b)}function y(){return F.defaultGraphInstance}function m(b,E,P){return F.quad(b,E,P)}function _(b,E,P,j){return new a(b,E,P,j||F.defaultGraphInstance)}function C(b){return r.call(F,b)}function R(b){return r.call(F,b)}const F={namedNode:u,blankNode:h,literal:c,variable:p,defaultGraph:y,triple:m,quad:_,fromTerm:C,fromQuad:R,defaultGraphInstance:new t};return sm=F,sm}var am,Pb;function vx(){return Pb||(Pb=1,am=YN()),am}var lm,Tb;function XN(){if(Tb)return lm;Tb=1;function e(s){return typeof s=="string"||s instanceof String}const t="http://www.w3.org/2001/XMLSchema#string";function r(s){if(typeof s=="string")return s;if(!s)return"";if(typeof s.id<"u"&&s.termType!=="Quad")return s.id;let u,h,c,p;switch(s.termType){case"NamedNode":return s.value;case"BlankNode":return`_:${s.value}`;case"Variable":return`?${s.value}`;case"DefaultGraph":return"";case"Literal":return s.language?`"${s.value}"@${s.language}`:`"${s.value}"${s.datatype&&s.datatype.value!==t?`^^${s.datatype.value}`:""}`;case"Quad":return u=o(r(s.subject)),h=o(r(s.predicate)),c=o(r(s.object)),p=s.graph.termType==="DefaultGraph"?"":` ${r(s.graph)}`,`<<${u} ${h} ${c}${p}>>`;default:throw new Error(`Unexpected termType: ${s.termType}`)}}const n=/^"(.*".*)(?="[^"]*$)/;function o(s){return s.replace(n,(u,h)=>`"${h.replace(/"/g,'""')}`)}class a{constructor(u){if(this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._quads=new Map,u)for(const h of u)this.add(h)}get size(){let u=this._size;if(u!==null)return u;u=0;const h=this._graphs;let c,p;for(const y in h)for(const m in c=h[y].subjects)for(const _ in p=c[m])u+=Object.keys(p[_]).length;return this._size=u,this._size}add(u){let h=r(u.subject),c=r(u.predicate),p=r(u.object);const y=r(u.graph);let m=this._graphs[y];m||(m=this._graphs[y]={subjects:{},predicates:{},objects:{}},Object.freeze(m));const _=this._ids,C=this._entities;return h=_[h]||(_[C[++this._id]=h]=this._id),c=_[c]||(_[C[++this._id]=c]=this._id),p=_[p]||(_[C[++this._id]=p]=this._id),this._addToIndex(m.subjects,h,c,p),this._addToIndex(m.predicates,c,p,h),this._addToIndex(m.objects,p,h,c),this._setQuad(h,c,p,y,u),this._size=null,this}delete(u){let h=r(u.subject),c=r(u.predicate),p=r(u.object);const y=r(u.graph),m=this._ids,_=this._graphs;let C,R,F;if(!(h=m[h])||!(c=m[c])||!(p=m[p])||!(C=_[y])||!(R=C.subjects[h])||!(F=R[c])||!(p in F))return this;this._removeFromIndex(C.subjects,h,c,p),this._removeFromIndex(C.predicates,c,p,h),this._removeFromIndex(C.objects,p,h,c),this._size!==null&&this._size--,this._deleteQuad(h,c,p,y);for(h in C.subjects)return this;return delete _[y],this}has(u){const h=r(u.subject),c=r(u.predicate),p=r(u.object),y=r(u.graph),m=this._graphs[y];if(!m)return!1;const _=this._ids;let C,R,F;return e(h)&&!(C=_[h])||e(c)&&!(R=_[c])||e(p)&&!(F=_[p])?!1:this._countInIndex(m.objects,F,C,R)===1}match(u,h,c,p){return this._createDataset(this._match(u,h,c,p))}[Symbol.iterator](){return this._match()[Symbol.iterator]()}_addToIndex(u,h,c,p){const y=u[h]||(u[h]={}),m=y[c]||(y[c]={}),_=p in m;return _||(m[p]=null),!_}_removeFromIndex(u,h,c,p){const y=u[h],m=y[c];delete m[p];for(const _ in m)return;delete y[c];for(const _ in y)return;delete u[h]}_findInIndex(u,h,c,p,y,m,_,C,R,F){let b,E,P;h&&((b=u,u={})[h]=b[h]);for(const j in u)if(E=u[j],E){c&&((b=E,E={})[c]=b[c]);for(const H in E)if(P=E[H],P){const $=p?p in P?[p]:[]:Object.keys(P);for(let O=0;O<$.length;O++){const ne={[y]:j,[m]:H,[_]:$[O]},ee=this._getQuad(ne.subject,ne.predicate,ne.object,C);if(F)F.push(ee);else if(R(ee))return!0}}}return F}_countInIndex(u,h,c,p){let y=0,m,_,C;h&&((m=u,u={})[h]=m[h]);for(const R in u)if(_=u[R],_){c&&((m=_,_={})[c]=m[c]);for(const F in _)C=_[F],C&&(p?p in C&&y++:y+=Object.keys(C).length)}return y}_getGraphs(u){return e(u)?{[u]:this._graphs[u]}:this._graphs}_match(u,h,c,p){u=u&&r(u),h=h&&r(h),c=c&&r(c),p=p&&r(p);const y=[],m=this._getGraphs(p),_=this._ids;let C,R,F,b;if(e(u)&&!(R=_[u])||e(h)&&!(F=_[h])||e(c)&&!(b=_[c]))return y;for(const E in m)C=m[E],C&&(R?b?this._findInIndex(C.objects,b,R,F,"object","subject","predicate",E,null,y):this._findInIndex(C.subjects,R,F,null,"subject","predicate","object",E,null,y):F?this._findInIndex(C.predicates,F,b,null,"predicate","object","subject",E,null,y):b?this._findInIndex(C.objects,b,null,null,"object","subject","predicate",E,null,y):this._findInIndex(C.subjects,null,null,null,"subject","predicate","object",E,null,y));return y}_getQuad(u,h,c,p){return this._quads.get(this._toId(u,h,c,p))}_setQuad(u,h,c,p,y){this._quads.set(this._toId(u,h,c,p),y)}_deleteQuad(u,h,c,p){this._quads.delete(this._toId(u,h,c,p))}_createDataset(u){return new this.constructor(u)}_toId(u,h,c,p){return`${u}:${h}:${c}:${p}`}}return lm=a,lm}var um,Ib;function ZN(){if(Ib)return um;Ib=1;const e=vx(),t=XN();function r(n){return new t(n)}return um=Object.assign({dataset:r},e),um}var cm={},sc={},qf={},Fb;function wx(){if(Fb)return qf;Fb=1,Object.defineProperty(qf,"__esModule",{value:!0}),qf.default=r;let e;const t=new Uint8Array(16);function r(){if(!e&&(e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}return qf}var sl={},ac={},lc={},Ob;function ek(){if(Ob)return lc;Ob=1,Object.defineProperty(lc,"__esModule",{value:!0}),lc.default=void 0;var e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return lc.default=e,lc}var Nb;function Ip(){if(Nb)return ac;Nb=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.default=void 0;var e=t(ek());function t(o){return o&&o.__esModule?o:{default:o}}function r(o){return typeof o=="string"&&e.default.test(o)}var n=r;return ac.default=n,ac}var kb;function Fp(){if(kb)return sl;kb=1,Object.defineProperty(sl,"__esModule",{value:!0}),sl.default=void 0,sl.unsafeStringify=n;var e=t(Ip());function t(s){return s&&s.__esModule?s:{default:s}}const r=[];for(let s=0;s<256;++s)r.push((s+256).toString(16).slice(1));function n(s,u=0){return(r[s[u+0]]+r[s[u+1]]+r[s[u+2]]+r[s[u+3]]+"-"+r[s[u+4]]+r[s[u+5]]+"-"+r[s[u+6]]+r[s[u+7]]+"-"+r[s[u+8]]+r[s[u+9]]+"-"+r[s[u+10]]+r[s[u+11]]+r[s[u+12]]+r[s[u+13]]+r[s[u+14]]+r[s[u+15]]).toLowerCase()}function o(s,u=0){const h=n(s,u);if(!(0,e.default)(h))throw TypeError("Stringified UUID is invalid");return h}var a=o;return sl.default=a,sl}var Db;function tk(){if(Db)return sc;Db=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.default=void 0;var e=r(wx()),t=Fp();function r(c){return c&&c.__esModule?c:{default:c}}let n,o,a=0,s=0;function u(c,p,y){let m=p&&y||0;const _=p||new Array(16);c=c||{};let C=c.node||n,R=c.clockseq!==void 0?c.clockseq:o;if(C==null||R==null){const H=c.random||(c.rng||e.default)();C==null&&(C=n=[H[0]|1,H[1],H[2],H[3],H[4],H[5]]),R==null&&(R=o=(H[6]<<8|H[7])&16383)}let F=c.msecs!==void 0?c.msecs:Date.now(),b=c.nsecs!==void 0?c.nsecs:s+1;const E=F-a+(b-s)/1e4;if(E<0&&c.clockseq===void 0&&(R=R+1&16383),(E<0||F>a)&&c.nsecs===void 0&&(b=0),b>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=F,s=b,o=R,F+=122192928e5;const P=((F&268435455)*1e4+b)%4294967296;_[m++]=P>>>24&255,_[m++]=P>>>16&255,_[m++]=P>>>8&255,_[m++]=P&255;const j=F/4294967296*1e4&268435455;_[m++]=j>>>8&255,_[m++]=j&255,_[m++]=j>>>24&15|16,_[m++]=j>>>16&255,_[m++]=R>>>8|128,_[m++]=R&255;for(let H=0;H<6;++H)_[m+H]=C[H];return p||(0,t.unsafeStringify)(_)}var h=u;return sc.default=h,sc}var uc={},ss={},cc={},Lb;function _x(){if(Lb)return cc;Lb=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.default=void 0;var e=t(Ip());function t(o){return o&&o.__esModule?o:{default:o}}function r(o){if(!(0,e.default)(o))throw TypeError("Invalid UUID");let a;const s=new Uint8Array(16);return s[0]=(a=parseInt(o.slice(0,8),16))>>>24,s[1]=a>>>16&255,s[2]=a>>>8&255,s[3]=a&255,s[4]=(a=parseInt(o.slice(9,13),16))>>>8,s[5]=a&255,s[6]=(a=parseInt(o.slice(14,18),16))>>>8,s[7]=a&255,s[8]=(a=parseInt(o.slice(19,23),16))>>>8,s[9]=a&255,s[10]=(a=parseInt(o.slice(24,36),16))/1099511627776&255,s[11]=a/4294967296&255,s[12]=a>>>24&255,s[13]=a>>>16&255,s[14]=a>>>8&255,s[15]=a&255,s}var n=r;return cc.default=n,cc}var Ub;function Sx(){if(Ub)return ss;Ub=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.URL=ss.DNS=void 0,ss.default=s;var e=Fp(),t=r(_x());function r(u){return u&&u.__esModule?u:{default:u}}function n(u){u=unescape(encodeURIComponent(u));const h=[];for(let c=0;c<u.length;++c)h.push(u.charCodeAt(c));return h}const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";ss.DNS=o;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";ss.URL=a;function s(u,h,c){function p(y,m,_,C){var R;if(typeof y=="string"&&(y=n(y)),typeof m=="string"&&(m=(0,t.default)(m)),((R=m)===null||R===void 0?void 0:R.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let F=new Uint8Array(16+y.length);if(F.set(m),F.set(y,m.length),F=c(F),F[6]=F[6]&15|h,F[8]=F[8]&63|128,_){C=C||0;for(let b=0;b<16;++b)_[C+b]=F[b];return _}return(0,e.unsafeStringify)(F)}try{p.name=u}catch{}return p.DNS=o,p.URL=a,p}return ss}var dc={},Mb;function rk(){if(Mb)return dc;Mb=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.default=void 0;function e(_){if(typeof _=="string"){const C=unescape(encodeURIComponent(_));_=new Uint8Array(C.length);for(let R=0;R<C.length;++R)_[R]=C.charCodeAt(R)}return t(n(o(_),_.length*8))}function t(_){const C=[],R=_.length*32,F="0123456789abcdef";for(let b=0;b<R;b+=8){const E=_[b>>5]>>>b%32&255,P=parseInt(F.charAt(E>>>4&15)+F.charAt(E&15),16);C.push(P)}return C}function r(_){return(_+64>>>9<<4)+14+1}function n(_,C){_[C>>5]|=128<<C%32,_[r(C)-1]=C;let R=1732584193,F=-271733879,b=-1732584194,E=271733878;for(let P=0;P<_.length;P+=16){const j=R,H=F,$=b,O=E;R=h(R,F,b,E,_[P],7,-680876936),E=h(E,R,F,b,_[P+1],12,-389564586),b=h(b,E,R,F,_[P+2],17,606105819),F=h(F,b,E,R,_[P+3],22,-1044525330),R=h(R,F,b,E,_[P+4],7,-176418897),E=h(E,R,F,b,_[P+5],12,1200080426),b=h(b,E,R,F,_[P+6],17,-1473231341),F=h(F,b,E,R,_[P+7],22,-45705983),R=h(R,F,b,E,_[P+8],7,1770035416),E=h(E,R,F,b,_[P+9],12,-1958414417),b=h(b,E,R,F,_[P+10],17,-42063),F=h(F,b,E,R,_[P+11],22,-1990404162),R=h(R,F,b,E,_[P+12],7,1804603682),E=h(E,R,F,b,_[P+13],12,-40341101),b=h(b,E,R,F,_[P+14],17,-1502002290),F=h(F,b,E,R,_[P+15],22,1236535329),R=c(R,F,b,E,_[P+1],5,-165796510),E=c(E,R,F,b,_[P+6],9,-1069501632),b=c(b,E,R,F,_[P+11],14,643717713),F=c(F,b,E,R,_[P],20,-373897302),R=c(R,F,b,E,_[P+5],5,-701558691),E=c(E,R,F,b,_[P+10],9,38016083),b=c(b,E,R,F,_[P+15],14,-660478335),F=c(F,b,E,R,_[P+4],20,-405537848),R=c(R,F,b,E,_[P+9],5,568446438),E=c(E,R,F,b,_[P+14],9,-1019803690),b=c(b,E,R,F,_[P+3],14,-187363961),F=c(F,b,E,R,_[P+8],20,1163531501),R=c(R,F,b,E,_[P+13],5,-1444681467),E=c(E,R,F,b,_[P+2],9,-51403784),b=c(b,E,R,F,_[P+7],14,1735328473),F=c(F,b,E,R,_[P+12],20,-1926607734),R=p(R,F,b,E,_[P+5],4,-378558),E=p(E,R,F,b,_[P+8],11,-2022574463),b=p(b,E,R,F,_[P+11],16,1839030562),F=p(F,b,E,R,_[P+14],23,-35309556),R=p(R,F,b,E,_[P+1],4,-1530992060),E=p(E,R,F,b,_[P+4],11,1272893353),b=p(b,E,R,F,_[P+7],16,-155497632),F=p(F,b,E,R,_[P+10],23,-1094730640),R=p(R,F,b,E,_[P+13],4,681279174),E=p(E,R,F,b,_[P],11,-358537222),b=p(b,E,R,F,_[P+3],16,-722521979),F=p(F,b,E,R,_[P+6],23,76029189),R=p(R,F,b,E,_[P+9],4,-640364487),E=p(E,R,F,b,_[P+12],11,-421815835),b=p(b,E,R,F,_[P+15],16,530742520),F=p(F,b,E,R,_[P+2],23,-995338651),R=y(R,F,b,E,_[P],6,-198630844),E=y(E,R,F,b,_[P+7],10,1126891415),b=y(b,E,R,F,_[P+14],15,-1416354905),F=y(F,b,E,R,_[P+5],21,-57434055),R=y(R,F,b,E,_[P+12],6,1700485571),E=y(E,R,F,b,_[P+3],10,-1894986606),b=y(b,E,R,F,_[P+10],15,-1051523),F=y(F,b,E,R,_[P+1],21,-2054922799),R=y(R,F,b,E,_[P+8],6,1873313359),E=y(E,R,F,b,_[P+15],10,-30611744),b=y(b,E,R,F,_[P+6],15,-1560198380),F=y(F,b,E,R,_[P+13],21,1309151649),R=y(R,F,b,E,_[P+4],6,-145523070),E=y(E,R,F,b,_[P+11],10,-1120210379),b=y(b,E,R,F,_[P+2],15,718787259),F=y(F,b,E,R,_[P+9],21,-343485551),R=a(R,j),F=a(F,H),b=a(b,$),E=a(E,O)}return[R,F,b,E]}function o(_){if(_.length===0)return[];const C=_.length*8,R=new Uint32Array(r(C));for(let F=0;F<C;F+=8)R[F>>5]|=(_[F/8]&255)<<F%32;return R}function a(_,C){const R=(_&65535)+(C&65535);return(_>>16)+(C>>16)+(R>>16)<<16|R&65535}function s(_,C){return _<<C|_>>>32-C}function u(_,C,R,F,b,E){return a(s(a(a(C,_),a(F,E)),b),R)}function h(_,C,R,F,b,E,P){return u(C&R|~C&F,_,C,b,E,P)}function c(_,C,R,F,b,E,P){return u(C&F|R&~F,_,C,b,E,P)}function p(_,C,R,F,b,E,P){return u(C^R^F,_,C,b,E,P)}function y(_,C,R,F,b,E,P){return u(R^(C|~F),_,C,b,E,P)}var m=e;return dc.default=m,dc}var Bb;function nk(){if(Bb)return uc;Bb=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.default=void 0;var e=r(Sx()),t=r(rk());function r(a){return a&&a.__esModule?a:{default:a}}var o=(0,e.default)("v3",48,t.default);return uc.default=o,uc}var fc={},hc={},jb;function ik(){if(jb)return hc;jb=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.default=void 0;var t={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return hc.default=t,hc}var Hb;function ok(){if(Hb)return fc;Hb=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.default=void 0;var e=n(ik()),t=n(wx()),r=Fp();function n(s){return s&&s.__esModule?s:{default:s}}function o(s,u,h){if(e.default.randomUUID&&!u&&!s)return e.default.randomUUID();s=s||{};const c=s.random||(s.rng||t.default)();if(c[6]=c[6]&15|64,c[8]=c[8]&63|128,u){h=h||0;for(let p=0;p<16;++p)u[h+p]=c[p];return u}return(0,r.unsafeStringify)(c)}var a=o;return fc.default=a,fc}var pc={},gc={},$b;function sk(){if($b)return gc;$b=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.default=void 0;function e(o,a,s,u){switch(o){case 0:return a&s^~a&u;case 1:return a^s^u;case 2:return a&s^a&u^s&u;case 3:return a^s^u}}function t(o,a){return o<<a|o>>>32-a}function r(o){const a=[1518500249,1859775393,2400959708,3395469782],s=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof o=="string"){const p=unescape(encodeURIComponent(o));o=[];for(let y=0;y<p.length;++y)o.push(p.charCodeAt(y))}else Array.isArray(o)||(o=Array.prototype.slice.call(o));o.push(128);const u=o.length/4+2,h=Math.ceil(u/16),c=new Array(h);for(let p=0;p<h;++p){const y=new Uint32Array(16);for(let m=0;m<16;++m)y[m]=o[p*64+m*4]<<24|o[p*64+m*4+1]<<16|o[p*64+m*4+2]<<8|o[p*64+m*4+3];c[p]=y}c[h-1][14]=(o.length-1)*8/Math.pow(2,32),c[h-1][14]=Math.floor(c[h-1][14]),c[h-1][15]=(o.length-1)*8&4294967295;for(let p=0;p<h;++p){const y=new Uint32Array(80);for(let b=0;b<16;++b)y[b]=c[p][b];for(let b=16;b<80;++b)y[b]=t(y[b-3]^y[b-8]^y[b-14]^y[b-16],1);let m=s[0],_=s[1],C=s[2],R=s[3],F=s[4];for(let b=0;b<80;++b){const E=Math.floor(b/20),P=t(m,5)+e(E,_,C,R)+F+a[E]+y[b]>>>0;F=R,R=C,C=t(_,30)>>>0,_=m,m=P}s[0]=s[0]+m>>>0,s[1]=s[1]+_>>>0,s[2]=s[2]+C>>>0,s[3]=s[3]+R>>>0,s[4]=s[4]+F>>>0}return[s[0]>>24&255,s[0]>>16&255,s[0]>>8&255,s[0]&255,s[1]>>24&255,s[1]>>16&255,s[1]>>8&255,s[1]&255,s[2]>>24&255,s[2]>>16&255,s[2]>>8&255,s[2]&255,s[3]>>24&255,s[3]>>16&255,s[3]>>8&255,s[3]&255,s[4]>>24&255,s[4]>>16&255,s[4]>>8&255,s[4]&255]}var n=r;return gc.default=n,gc}var Vb;function ak(){if(Vb)return pc;Vb=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.default=void 0;var e=r(Sx()),t=r(sk());function r(a){return a&&a.__esModule?a:{default:a}}var o=(0,e.default)("v5",80,t.default);return pc.default=o,pc}var yc={},Kb;function lk(){if(Kb)return yc;Kb=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.default=void 0;var e="00000000-0000-0000-0000-000000000000";return yc.default=e,yc}var mc={},Wb;function uk(){if(Wb)return mc;Wb=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.default=void 0;var e=t(Ip());function t(o){return o&&o.__esModule?o:{default:o}}function r(o){if(!(0,e.default)(o))throw TypeError("Invalid UUID");return parseInt(o.slice(14,15),16)}var n=r;return mc.default=n,mc}var Gb;function Op(){return Gb||(Gb=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return s.default}});var t=p(tk()),r=p(nk()),n=p(ok()),o=p(ak()),a=p(lk()),s=p(uk()),u=p(Ip()),h=p(Fp()),c=p(_x());function p(y){return y&&y.__esModule?y:{default:y}}}(cm)),cm}var qb;function Ex(){if(qb)return Le;qb=1;var e=_N(),t=Ai(),r=Sa(),n=Sv(),o=WN,a=vx(),s=ZN(),u=Op();function h(l){const d=l;return typeof d=="object"&&typeof d.internal_resourceInfo=="object"}function c(l){const d=l;return typeof d=="object"&&typeof d.internal_resourceInfo=="object"&&typeof d.internal_resourceInfo.linkedResources=="object"}function p(l){const d=l;return typeof d.internal_changeLog=="object"&&Array.isArray(d.internal_changeLog.additions)&&Array.isArray(d.internal_changeLog.deletions)}class y extends Error{}function m(l){return typeof l=="string"?l:l.value}const _=r.fetch.bind(globalThis);function C(l){var d,v,x,L,V;const z=(v=(d=l.headers.get("Content-Type"))===null||d===void 0?void 0:d.split(";"))!==null&&v!==void 0?v:[],se=z.length>0&&["text/turtle","application/ld+json"].includes(z[0]),Ie={sourceIri:l.url,isRawData:!se,contentLocation:(x=l.headers.get("Content-Location"))!==null&&x!==void 0?x:void 0,contentType:(L=l.headers.get("Content-Type"))!==null&&L!==void 0?L:void 0,linkedResources:{},location:(V=l.headers.get("Location"))!==null&&V!==void 0?V:void 0},Te=l.headers.get("Link");if(Te){const ot=n.parse(Te),ft=ot.get("rel","acl");ft.length===1&&(Ie.aclUrl=new URL(ft[0].uri,Ie.sourceIri).href),Ie.linkedResources=ot.refs.reduce((Pt,mr)=>{var jr,Dr;return(jr=Pt[Dr=mr.rel])!==null&&jr!==void 0||(Pt[Dr]=[]),Pt[mr.rel].push(new URL(mr.uri,Ie.sourceIri).href),Pt},Ie.linkedResources)}const ke=l.headers.get("WAC-Allow");return ke&&(Ie.permissions=R(ke)),Ie}function R(l){function d(x){const L=x.split(" ");return L.includes("write")?{read:L.includes("read"),append:!0,write:!0,control:L.includes("control")}:{read:L.includes("read"),append:L.includes("append"),write:!1,control:L.includes("control")}}function v(x,L){const V=x.split(",").map(se=>se.split("=")).filter(se=>se.length===2&&se[0].trim()===L);if(V.length!==1)return"";const z=V[0][1].trim();return z.charAt(0)!=='"'||z.charAt(z.length-1)!=='"'?"":z.substring(1,z.length-1)}return{user:d(v(l,"user")),public:d(v(l,"public"))}}function F(l){let d;return typeof l.slice=="function"?d=Object.assign(l.slice(),{...l}):d={...l},d}function b(l){return!l.ok}function E(l){return l.status===401||l.status===403}const P={Authorization:"http://www.w3.org/ns/auth/acl#Authorization",AuthenticatedAgent:"http://www.w3.org/ns/auth/acl#AuthenticatedAgent",accessTo:"http://www.w3.org/ns/auth/acl#accessTo",agent:"http://www.w3.org/ns/auth/acl#agent",agentGroup:"http://www.w3.org/ns/auth/acl#agentGroup",agentClass:"http://www.w3.org/ns/auth/acl#agentClass",default:"http://www.w3.org/ns/auth/acl#default",defaultForNew:"http://www.w3.org/ns/auth/acl#defaultForNew",mode:"http://www.w3.org/ns/auth/acl#mode",origin:"http://www.w3.org/ns/auth/acl#origin"},j={type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"},H={BasicContainer:"http://www.w3.org/ns/ldp#BasicContainer",Container:"http://www.w3.org/ns/ldp#Container",Resource:"http://www.w3.org/ns/ldp#Resource",contains:"http://www.w3.org/ns/ldp#contains"},$={Agent:"http://xmlns.com/foaf/0.1/Agent",primaryTopic:"http://xmlns.com/foaf/0.1/primaryTopic",isPrimaryTopicOf:"http://xmlns.com/foaf/0.1/isPrimaryTopicOf"},O={AccessControlResource:"http://www.w3.org/ns/solid/acp#AccessControlResource",Policy:"http://www.w3.org/ns/solid/acp#Policy",AccessControl:"http://www.w3.org/ns/solid/acp#AccessControl",Read:"http://www.w3.org/ns/solid/acp#Read",Append:"http://www.w3.org/ns/solid/acp#Append",Write:"http://www.w3.org/ns/solid/acp#Write",Rule:"http://www.w3.org/ns/solid/acp#Rule",Matcher:"http://www.w3.org/ns/solid/acp#Matcher",accessControl:"http://www.w3.org/ns/solid/acp#accessControl",memberAccessControl:"http://www.w3.org/ns/solid/acp#memberAccessControl",apply:"http://www.w3.org/ns/solid/acp#apply",applyMembers:"http://www.w3.org/ns/solid/acp#applyMembers",allow:"http://www.w3.org/ns/solid/acp#allow",deny:"http://www.w3.org/ns/solid/acp#deny",allOf:"http://www.w3.org/ns/solid/acp#allOf",anyOf:"http://www.w3.org/ns/solid/acp#anyOf",noneOf:"http://www.w3.org/ns/solid/acp#noneOf",access:"http://www.w3.org/ns/solid/acp#access",accessMembers:"http://www.w3.org/ns/solid/acp#accessMembers",agent:"http://www.w3.org/ns/solid/acp#agent",group:"http://www.w3.org/ns/solid/acp#group",client:"http://www.w3.org/ns/solid/acp#client",PublicAgent:"http://www.w3.org/ns/solid/acp#PublicAgent",AuthenticatedAgent:"http://www.w3.org/ns/solid/acp#AuthenticatedAgent",CreatorAgent:"http://www.w3.org/ns/solid/acp#CreatorAgent"},ne={PublicOidcClient:"http://www.w3.org/ns/solid/terms#PublicOidcClient"},ee={publicKey:"https://w3id.org/security#publicKey"},D={storage:"http://www.w3.org/ns/pim/space#storage"},Q={fetch:_};async function De(l,d={...Q,ignoreAuthenticationErrors:!1}){var v;const L=await{...Q,...d}.fetch(l,{method:"HEAD"});return ae(L,{ignoreAuthenticationErrors:(v=d.ignoreAuthenticationErrors)!==null&&v!==void 0?v:!1})}function ae(l,d={ignoreAuthenticationErrors:!1}){if(b(l)&&(!E(l)||!d.ignoreAuthenticationErrors))throw new Et(`Fetching the metadata of the Resource at [${l.url}] failed: [${l.status}] [${l.statusText}].`,l);return{internal_resourceInfo:C(l)}}function Ce(l){return(h(l)?$e(l):m(l)).endsWith("/")}function Be(l){return l.internal_resourceInfo.isRawData}function Ve(l){var d;return(d=l.internal_resourceInfo.contentType)!==null&&d!==void 0?d:null}function $e(l){return h(l)?l.internal_resourceInfo.sourceIri:null}const we=$e;function Oe(l){var d;if(!c(l))return null;const v=(d=We(l)["http://www.w3.org/ns/solid/terms#podOwner"])!==null&&d!==void 0?d:[];return v.length===1?v[0]:null}function me(l,d){const v=Oe(d);return typeof v!="string"?null:v===l}function We(l){return l.internal_resourceInfo.linkedResources}function et(l){var d,v,x,L,V,z,se;if(typeof l.internal_resourceInfo.permissions=="object")return{user:{read:l.internal_resourceInfo.permissions.user.read,append:l.internal_resourceInfo.permissions.user.append,write:l.internal_resourceInfo.permissions.user.write},public:{read:l.internal_resourceInfo.permissions.public.read,append:l.internal_resourceInfo.permissions.public.append,write:l.internal_resourceInfo.permissions.public.write}};const Ie=We(l);return{user:{read:(v=(d=Ie[O.allow])===null||d===void 0?void 0:d.includes(O.Read))!==null&&v!==void 0?v:!1,append:(V=((x=Ie[O.allow])===null||x===void 0?void 0:x.includes(O.Append))||((L=Ie[O.allow])===null||L===void 0?void 0:L.includes(O.Write)))!==null&&V!==void 0?V:!1,write:(se=(z=Ie[O.allow])===null||z===void 0?void 0:z.includes(O.Write))!==null&&se!==void 0?se:!1}}}class Et extends y{get statusCode(){return this.response.status}get statusText(){return this.response.statusText}constructor(d,v){super(d),this.response=v}}const Bt=()=>{const l=[],d=[],v=[];return{onQuad:x=>{l.push(x)},onError:x=>{v.push(x)},onComplete:x=>{d.push(x)},parse:async(x,L)=>new Promise(V=>{const z=new e.JsonLdParser({baseIRI:$e(L),documentLoader:new t.FetchDocumentLoader(_)});let se=!1;function Ie(){se||(se=!0,d.forEach(Te=>Te()),V())}z.on("end",Ie),z.on("error",Te=>{v.forEach(ke=>ke(Te)),Ie()}),l.forEach(Te=>z.on("data",Te)),z.write(x),z.end()})}};s.dataset;const Vt="https://inrupt.com/.well-known/sdk-local-node/",{freeze:Ke}=Object;function St(l){return l.substring(0,Vt.length)===Vt}function jt(l){return l.substring(Vt.length)}function Yt(l){return`${Vt}${l}`}function ut(l){return typeof l=="string"&&l.substring(0,2)==="_:"}function Z(l){return l.substring(2)}function I(l){return`_:${l.value}`}const S={boolean:"http://www.w3.org/2001/XMLSchema#boolean",dateTime:"http://www.w3.org/2001/XMLSchema#dateTime",date:"http://www.w3.org/2001/XMLSchema#date",time:"http://www.w3.org/2001/XMLSchema#time",decimal:"http://www.w3.org/2001/XMLSchema#decimal",integer:"http://www.w3.org/2001/XMLSchema#integer",string:"http://www.w3.org/2001/XMLSchema#string",langString:"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"};function B(l){return l?"true":"false"}function G(l){return l==="true"||l==="1"?!0:l==="false"||l==="0"?!1:null}function de(l){let d,v;if(l.millisecond&&(l.millisecond<10?d=`00${l.millisecond}`:l.millisecond<100?d=`0${l.millisecond}`:d=l.millisecond),typeof l.timezoneHourOffset=="number"){const x=Math.abs(l.timezoneHourOffset)<10?`0${Math.abs(l.timezoneHourOffset)}`:Math.abs(l.timezoneHourOffset);v=l.timezoneHourOffset>=0?`+${x}`:`-${x}`,l.timezoneMinuteOffset?v=`${v}:${l.timezoneMinuteOffset<10?`0${l.timezoneMinuteOffset}`:l.timezoneMinuteOffset}`:v+=":00"}return`${l.hour<10?`0${l.hour}`:l.hour}:${l.minute<10?`0${l.minute}`:l.minute}:${l.second<10?`0${l.second}`:l.second}${l.millisecond?`.${d}`:""}${v||""}`}function Ee(l){if(!/\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(l))return null;const[v,x]=Xt(l),[L,V,z]=v.split(":");let se=Number.parseInt(L,10),Ie=Number.parseInt(V,10);const[Te,ke]=z.split("."),ot=Number.parseInt(Te,10),ft=ke?Number.parseInt(ke,10):void 0;Ie>=60&&(se+=1,Ie-=60);const Pt={hour:se,minute:Ie,second:ot};if(typeof ft=="number"&&(Pt.millisecond=ft),typeof x=="string"){const[mr,jr]=dr(x);if(typeof mr!="number"||mr>24||typeof jr!="number"||jr>59)return null;Pt.timezoneHourOffset=mr,Pt.timezoneMinuteOffset=jr}return Pt}function rt(l){return l.toISOString()}function lt(l){if(!/-?\d{4,}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(l))return null;const[v,x]=l.split("T"),[L,V]=v.charAt(0)==="-"?[-1,v.substring(1)]:[1,v],[z,se,Ie]=V.split("-"),Te=Number.parseInt(z,10)*L,ke=Number.parseInt(se,10)-1,ot=Number.parseInt(Ie,10),[ft,Pt]=Xt(x),[mr,jr]=typeof Pt=="string"?dr(Pt):[0,0],[Dr,eo,un]=ft.split(":"),or=Number.parseInt(Dr,10)+mr,mi=Number.parseInt(eo,10)+jr,[jn,xi]=un.split("."),Lo=Number.parseInt(jn,10),Qs=xi?Number.parseInt(xi,10):0,Uo=new Date(Date.UTC(Te,ke,ot,or,mi,Lo,Qs));return Te>=0&&Te<100&&Uo.setUTCFullYear(Uo.getUTCFullYear()-1900),Uo}function Nt(l){const d=l.getFullYear(),v=l.getMonth()+1,x=l.getDate(),[L,V]=Xt(l.toISOString());return`${d}-${String(v).padStart(2,"0")}-${String(x).padStart(2,"0")}${V}`}function Kt(l){if(!/-?\d{4,}-\d\d-\d\d(Z|(\+|-)\d\d:\d\d)?/.test(l))return null;const v=l,[x,L]=v.charAt(0)==="-"?[-1,v.substring(1)]:[1,v],[V,z,se]=L.split("-"),Ie=se.length>2?se.substring(0,2):se,Te=Number.parseInt(V,10)*x,ke=Number.parseInt(z,10)-1,ot=Number.parseInt(Ie,10),ft=12,Pt=new Date(Date.UTC(Te,ke,ot,ft));return Te>=0&&Te<100&&Pt.setUTCFullYear(Pt.getUTCFullYear()-1900),Pt}function Xt(l){if(l.endsWith("Z"))return[l.substring(0,l.length-1),"Z"];const d=l.split("+"),v=l.split("-");return d.length===1&&v.length===1?[d[0],void 0]:d.length>v.length?[d[0],`+${d[1]}`]:[v[0],`-${v[1]}`]}function dr(l){if(l==="Z")return[0,0];const d=l.charAt(0)==="+"?1:-1,[v,x]=l.substring(1).split(":"),L=Number.parseInt(v,10),V=Number.parseInt(x,10);return[L*d,V*d]}function dn(l){return l.toString()}function te(l){const d=Number.parseFloat(l);return Number.isNaN(d)?null:d}function fe(l){return l.toString()}function K(l){const d=Number.parseInt(l,10);return Number.isNaN(d)?null:d}function T(l){return l.toLowerCase()}function U(l){return ge(l)&&l.termType==="NamedNode"}function k(l){return ge(l)&&l.termType==="Literal"}function ge(l){return l!==null&&typeof l=="object"&&typeof l.termType=="string"&&typeof l.value=="string"&&typeof l.equals=="function"}function Pe(l){return U(l)&&St(l.value)}function oe(l){const d=m(l);if(typeof URL!="function")return!0;try{const v=new URL(d);return!0}catch{return!1}}function mt(l,d){return wt.namedNode(Ht(jt(l.value),d))}function Ht(l,d){if(typeof URL!="function")throw new Error("The URL interface is not available, so an IRI cannot be determined.");const v=new URL(d);return v.hash=l,v.href}const wt=a;function _t(l,d,v={}){var x;if(!["NamedNode","DefaultGraph"].includes(d.graph.termType))throw new Error(`Cannot parse Quads with nodes of type [${d.graph.termType}] as their Graph node.`);const V=d.graph.termType==="DefaultGraph"?"default":d.graph.value,z=(x=l.graphs[V])!==null&&x!==void 0?x:{};return Ke({...l,graphs:Ke({...l.graphs,[V]:Se(z,d,v)})})}function Se(l,d,v){var x;if(!["NamedNode","BlankNode"].includes(d.subject.termType))throw new Error(`Cannot parse Quads with nodes of type [${d.subject.termType}] as their Subject node.`);const V=d.subject.termType==="BlankNode"?`_:${d.subject.value}`:d.subject.value,z=(x=l[V])!==null&&x!==void 0?x:{type:"Subject",url:V,predicates:{}};return Ke({...l,[V]:Me(z,d,v)})}function Me(l,d,v){return Ke({...l,predicates:Ne(l.predicates,d,v)})}function Ne(l,d,v){var x;if(!["NamedNode"].includes(d.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${d.predicate.termType}] as their Predicate node.`);const V=d.predicate.value,z=(x=l[V])!==null&&x!==void 0?x:{};return Ke({...l,[V]:_e(z,d,v)})}function _e(l,d,v){var x,L,V,z,se,Ie,Te,ke;if(d.object.termType==="NamedNode"){const ot=Ke([...(x=l.namedNodes)!==null&&x!==void 0?x:[],d.object.value]);return Ke({...l,namedNodes:ot})}if(d.object.termType==="Literal"){if(d.object.datatype.value===S.langString){const Pt=d.object.language.toLowerCase(),mr=Ke([...(V=(L=l.langStrings)===null||L===void 0?void 0:L[Pt])!==null&&V!==void 0?V:[],d.object.value]),jr=Ke({...(z=l.langStrings)!==null&&z!==void 0?z:{},[Pt]:mr});return Ke({...l,langStrings:jr})}const ot=Ke([...(Ie=(se=l.literals)===null||se===void 0?void 0:se[d.object.datatype.value])!==null&&Ie!==void 0?Ie:[],d.object.value]),ft=Ke({...(Te=l.literals)!==null&&Te!==void 0?Te:{},[d.object.datatype.value]:ot});return Ke({...l,literals:ft})}if(d.object.termType==="BlankNode"){const ot=je(d.object,v),ft=Ke([...(ke=l.blankNodes)!==null&&ke!==void 0?ke:[],ot]);return Ke({...l,blankNodes:ft})}throw new Error(`Objects of type [${d.object.termType}] are not supported.`)}function je(l,d){var v,x;if(((v=d.chainBlankNodes)!==null&&v!==void 0?v:[]).find(Te=>Te.equals(l))===void 0)return I(l);const z=((x=d.otherQuads)!==null&&x!==void 0?x:[]).filter(Te=>Te.subject.equals(l)),se=z.filter(Te=>!Dt(Te.object)).reduce((Te,ke)=>{var ot;if(!["NamedNode"].includes(ke.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${ke.predicate.termType}] as their Predicate node.`);const Pt=(ot=Te[ke.predicate.value])!==null&&ot!==void 0?ot:{};return Ke({...Te,[ke.predicate.value]:_e(Pt,ke,d)})},{});return z.filter(Te=>Dt(Te.object)).reduce((Te,ke)=>{var ot,ft;if(!["NamedNode"].includes(ke.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${ke.predicate.termType}] as their Predicate node.`);const mr=(ot=Te[ke.predicate.value])!==null&&ot!==void 0?ot:{},jr=(ft=mr.blankNodes)!==null&&ft!==void 0?ft:[];return Ke({...Te,[ke.predicate.value]:{...mr,blankNodes:[...jr,je(ke.object,d)]}})},se)}function st(l){const d=l.map(z=>z.subject).filter(Dt),v=l.map(z=>z.object).filter(Dt);function x(z){return z.every(se=>z.every(Ie=>se.equals(Ie)))}const L=[];return v.forEach(z=>{L.push(...ct(z,l))}),d.concat(v).filter(z=>{if(L.some(Ie=>Ie.equals(z)))return!1;const se=l.filter(Ie=>Ie.object.equals(z)).map(Ie=>Ie.subject);return se.length>0&&x(se)})}function it(l,d={}){var v;const x=[],L=(v=d.dataFactory)!==null&&v!==void 0?v:a;return Object.keys(l.graphs).forEach(V=>{const z=l.graphs[V],se=V==="default"?L.defaultGraph():L.namedNode(V);Object.keys(z).forEach(Ie=>{const{predicates:Te}=z[Ie],ke=ut(Ie)?L.blankNode(Z(Ie)):L.namedNode(Ie);x.push(...tt(Te,ke,se,d))})}),x}function tt(l,d,v,x={}){var L;const V=[],z=(L=x.dataFactory)!==null&&L!==void 0?L:a;return Object.keys(l).forEach(se=>{var Ie,Te,ke,ot;const ft=z.namedNode(se),Pt=(Ie=l[se].langStrings)!==null&&Ie!==void 0?Ie:{},mr=(Te=l[se].namedNodes)!==null&&Te!==void 0?Te:[],jr=(ke=l[se].literals)!==null&&ke!==void 0?ke:{},Dr=(ot=l[se].blankNodes)!==null&&ot!==void 0?ot:[];Object.keys(jr).forEach(or=>{const mi=z.namedNode(or);jr[or].forEach(xi=>{const Lo=z.literal(xi,mi);V.push(z.quad(d,ft,Lo,v))})}),Object.keys(Pt).forEach(or=>{Pt[or].forEach(jn=>{const xi=z.literal(jn,or);V.push(z.quad(d,ft,xi,v))})}),mr.forEach(or=>{const mi=z.namedNode(or);V.push(z.quad(d,ft,mi,v))}),Dr.forEach(or=>{if(ut(or)){const mi=z.blankNode(Z(or));V.push(z.quad(d,ft,mi,v))}else{const mi=z.blankNode(),jn=z.quad(d,ft,mi,v),xi=tt(or,mi,v);V.push(jn),V.push(...xi)}})}),V}function ct(l,d,v=[]){if(v.find(se=>se.equals(l))!==void 0)return v;const x=d.filter(se=>se.subject.equals(l)&&Dt(se.object)).map(se=>se.object);if(x.length===0)return[];const L=[...v,l],V=x.map(se=>ct(se,d,L)),z=[];for(const se of V)z.push(...se);return z}function Dt(l){return l.termType==="BlankNode"}const Qt=()=>{const l=[],d=[],v=[];return{onQuad:x=>{l.push(x)},onError:x=>{v.push(x)},onComplete:x=>{d.push(x)},parse:async(x,L)=>{(await Gt($e(L))).parse(x,(z,se)=>{z?v.forEach(Ie=>Ie(z)):se?l.forEach(Ie=>Ie(se)):d.forEach(Ie=>Ie())})}}};async function Gt(l){return new o.Parser({format:"text/turtle",baseIRI:l})}async function Zt(l,d){const v="text/turtle",x=new o.Writer({format:v,prefixes:d==null?void 0:d.prefixes}),L=l.map(se=>wt.quad(se.subject,se.predicate,se.object,void 0));return x.addQuads(L),await new Promise((se,Ie)=>{x.end((Te,ke)=>{Te?Ie(Te):se(ke)})})}const hr={acl:"http://www.w3.org/ns/auth/acl#",acp:"http://www.w3.org/ns/solid/acp#",cc:"http://creativecommons.org/ns#",cert:"http://www.w3.org/ns/auth/cert#",csvw:"http://www.w3.org/ns/csvw#",current:"#",dc:"http://purl.org/dc/terms/",dcam:"http://purl.org/dc/dcam/",dcat:"http://www.w3.org/ns/dcat#",dctype:"http://purl.org/dc/dcmitype/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",owl:"http://www.w3.org/2002/07/owl#",posixstat:"http://www.w3.org/ns/posix/stat#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",shacl:"http://www.w3.org/ns/shacl#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",solid:"http://www.w3.org/ns/solid/terms#",swapdoc:"http://www.w3.org/2000/10/swap/pim/doc#",ui:"http://www.w3.org/ns/ui#",vann:"http://purl.org/vocab/vann/",vcard:"http://www.w3.org/2006/vcard/ns#",ws:"http://www.w3.org/ns/pim/space#",xsd:"http://www.w3.org/2001/XMLSchema#"},er=s.dataset;function xt(l){const d={graphs:{default:{}},type:"Dataset"},v=Array.from(l),x=st(v);return v.filter(V=>x.every(z=>!z.equals(V.subject))).reduce((V,z)=>_t(V,z,{otherQuads:v,chainBlankNodes:x}),d)}function vr(l,d={}){var v,x;return((x=(v=d.datasetFactory)===null||v===void 0?void 0:v.dataset)!==null&&x!==void 0?x:er)(it(l,d))}async function ht(l,d){const{prefixes:v=hr,thing:x}={...d},L=new o.Writer({format:"application/turtle",prefixes:v}),V=x?new o.NamedNode(x):void 0;for(const z of vr(l).match(V))L.addQuad(z);return new Promise((z,se)=>{L.end((Ie,Te)=>{Ie?se(Ie):z(Te)})})}var Ct=Object.freeze({__proto__:null,getJsonLdParser:Bt,getTurtleParser:Qt,solidDatasetAsTurtle:ht});const $t={fetch:_},Ft=["Slug","If-None-Match","Content-Type"];function Er(l){return Ft.some(d=>l[d]!==void 0)}async function sr(l,d=$t){const v={...$t,...d},x=m(l),L=await v.fetch(x,v.init);if(b(L))throw new Et(`Fetching the File failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L);const V=C(L),z=await L.blob();return Object.assign(z,{internal_resourceInfo:V})}async function Hr(l,d=$t){const v={...$t,...d},x=h(l)?m(we(l)):m(l),L=await v.fetch(x,{...v.init,method:"DELETE"});if(b(L))throw new Et(`Deleting the file at [${x}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L)}async function ir(l,d,v=$t){const x=m(l),L=await Br(x,d,"POST",v);if(b(L))throw new Et(`Saving the file in [${l}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L);const V=L.headers.get("Location");if(V===null)throw new Error("Could not determine the location of the newly saved file.");const z=new URL(V,new URL(x).origin).href,se=F(d),Ie={internal_resourceInfo:{isRawData:!0,sourceIri:z,contentType:wr(d,v.contentType)}};return Object.assign(se,Ie)}async function Mt(l,d,v=$t){const x=m(l),L=await Br(x,d,"PUT",v);if(b(L))throw new Et(`Overwriting the file at [${x}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L);const V=F(d),z=C(L);return z.sourceIri=x,z.isRawData=!0,Object.assign(V,{internal_resourceInfo:z})}function kt(l){return Array.isArray(l)}function Kr(l){return typeof l.forEach=="function"}function Mr(l){if(typeof l>"u")return{};let d={};return kt(l)?l.forEach(([v,x])=>{d[v]=x}):Kr(l)?l.forEach((v,x)=>{d[x]=v}):d=l,d}async function Br(l,d,v,x){var L,V;const z={...$t,...x},se=Mr((V=(L=z.init)===null||L===void 0?void 0:L.headers)!==null&&V!==void 0?V:{});if(Er(se))throw new Error(`No reserved header (${Ft.join(", ")}) should be set in the optional RequestInit.`);z.slug!==void 0&&(se.Slug=z.slug),se["Content-Type"]=wr(d,x.contentType);const Ie=m(l);return z.fetch(Ie,{...z.init,headers:se,method:v,body:d})}function wr(l,d){if(typeof d=="string")return d;const v=typeof l=="object"&&l!==null&&typeof l.type=="string"&&l.type.length>0?l.type:void 0;return v??"application/octet-stream"}function Pr(l){var d,v,x,L,V,z,se,Ie;if(U(l))return`<${l.value}> (URL)`;if(k(l)){if(!U(l.datatype))return`[${l.value}] (RDF/JS Literal of unknown type)`;let Te;switch(l.datatype.value){case S.boolean:return Te=(v=(d=G(l.value))===null||d===void 0?void 0:d.valueOf())!==null&&v!==void 0?v:`Invalid data: \`${l.value}\``,`${Te} (boolean)`;case S.dateTime:return Te=(L=(x=lt(l.value))===null||x===void 0?void 0:x.toUTCString())!==null&&L!==void 0?L:`Invalid data: \`${l.value}\``,`${Te} (datetime)`;case S.decimal:return Te=(z=(V=te(l.value))===null||V===void 0?void 0:V.toString())!==null&&z!==void 0?z:`Invalid data: \`${l.value}\``,`${Te} (decimal)`;case S.integer:return Te=(Ie=(se=K(l.value))===null||se===void 0?void 0:se.toString())!==null&&Ie!==void 0?Ie:`Invalid data: \`${l.value}\``,`${Te} (integer)`;case S.langString:return`"${l.value}" (${l.language} string)`;case S.string:return`"${l.value}" (string)`;default:return`[${l.value}] (RDF/JS Literal of type: \`${l.datatype.value}\`)`}}return l.termType==="BlankNode"?`[${l.value}] (RDF/JS BlankNode)`:l.termType==="Quad"?"??? (nested RDF* Quad)":l.termType==="Variable"?`?${l.value} (RDF/JS Variable)`:l}function At(l){if(!gn(l))throw new uo(l)}function nn(l,d){const v=p(l)?l.internal_changeLog:{additions:[],deletions:[]},[x,L]=d.filter(V=>!wn(V)).reduce(([V,z],se)=>typeof z.find(Te=>Te.equals(se))<"u"?[V,z.filter(Te=>!Te.equals(se))]:[V.concat(se),z],[v.additions,v.deletions]);return Ke({...l,internal_changeLog:{additions:x,deletions:L}})}function Wr(l,d){const v=p(l)?l.internal_changeLog:{additions:[],deletions:[]},[x,L]=d.filter(V=>!wn(V)).reduce(([V,z],se)=>typeof V.find(Te=>Te.equals(se))<"u"?[V.filter(Te=>!Te.equals(se)),z]:[V,z.concat(se)],[v.additions,v.deletions]);return Ke({...l,internal_changeLog:{additions:x,deletions:L}})}function Or(l){return p(l)?l:Ke({...l,internal_changeLog:{additions:[],deletions:[]}})}function wn(l){return l.subject.termType==="BlankNode"||l.object.termType==="BlankNode"}function Kn(l){return Object.keys(l.predicates).filter(d=>at(l,d)!==null)}function Wn(l,d){var v,x,L;if(At(l),!oe(d))throw new on(d);const V=m(d),z=(L=(x=(v=l.predicates[V])===null||v===void 0?void 0:v.namedNodes)===null||x===void 0?void 0:x[0])!==null&&L!==void 0?L:null;return z===null?null:St(z)?`#${jt(z)}`:z}const Zr=Wn;function en(l,d){var v,x,L;if(At(l),!oe(d))throw new on(d);const V=m(d);return(L=(x=(v=l.predicates[V])===null||v===void 0?void 0:v.namedNodes)===null||x===void 0?void 0:x.map(z=>St(z)?`#${jt(z)}`:z))!==null&&L!==void 0?L:[]}const f=en;function g(l,d){At(l);const v=Tt(l,d,S.boolean);return v===null?null:G(v)}function w(l,d){return At(l),qt(l,d,S.boolean).map(G).filter(x=>x!==null)}function A(l,d){At(l);const v=Tt(l,d,S.dateTime);return v===null?null:lt(v)}function M(l,d){return At(l),qt(l,d,S.dateTime).map(lt).filter(x=>x!==null)}function W(l,d){At(l);const v=Tt(l,d,S.date);return v===null?null:Kt(v)}function Y(l,d){return At(l),qt(l,d,S.date).map(Kt).filter(x=>x!==null)}function ue(l,d){At(l);const v=Tt(l,d,S.time);return v===null?null:Ee(v)}function ie(l,d){return At(l),qt(l,d,S.time).map(Ee).filter(x=>x!==null)}function ce(l,d){At(l);const v=Tt(l,d,S.decimal);return v===null?null:te(v)}function he(l,d){return At(l),qt(l,d,S.decimal).map(x=>te(x)).filter(x=>x!==null)}function ye(l,d){At(l);const v=Tt(l,d,S.integer);return v===null?null:K(v)}function Ae(l,d){return At(l),qt(l,d,S.integer).map(x=>K(x)).filter(x=>x!==null)}function Fe(l,d){return Ue(l,d,"en")}function Ue(l,d,v){var x,L;if(At(l),!oe(d))throw new on(d);const V=m(d),z=(L=(x=l.predicates[V])===null||x===void 0?void 0:x.langStrings)!==null&&L!==void 0?L:{},Ie=Object.keys(z).find(Te=>Te.toLowerCase()===v.toLowerCase()&&Array.isArray(z[Te])&&z[Te].length>0);return typeof Ie=="string"?z[Ie][0]:null}function Ge(l,d){return ze(l,d,"en")}function ze(l,d,v){var x,L;if(At(l),!oe(d))throw new on(d);const V=m(d),z=(L=(x=l.predicates[V])===null||x===void 0?void 0:x.langStrings)!==null&&L!==void 0?L:{},Ie=Object.keys(z).find(Te=>Te.toLowerCase()===v.toLowerCase()&&Array.isArray(z[Te])&&z[Te].length>0);return typeof Ie=="string"?[...z[Ie]]:[]}function X(l,d){var v,x;if(At(l),!oe(d))throw new on(d);const L=m(d),V=(x=(v=l.predicates[L])===null||v===void 0?void 0:v.langStrings)!==null&&x!==void 0?x:{};return new Map(Object.entries(V).map(([z,se])=>[z,[...se]]))}function pe(l,d){return At(l),Tt(l,d,S.string)}function ve(l,d){return At(l),qt(l,d,S.string)}function be(l,d){const v=Zr(l,d);return v===null?null:wt.namedNode(v)}function He(l,d){return f(l,d).map(x=>wt.namedNode(x))}function Je(l,d){var v,x,L,V;if(At(l),!oe(d))throw new on(d);const z=m(d),se=(x=(v=l.predicates[z])===null||v===void 0?void 0:v.langStrings)!==null&&x!==void 0?x:{},Ie=Object.keys(se);if(Ie.length>0){const ot=Ie.find(ft=>Array.isArray(se[ft])&&se[ft].length>0);if(typeof ot=="string")return wt.literal(se[ot][0],ot)}const Te=(V=(L=l.predicates[z])===null||L===void 0?void 0:L.literals)!==null&&V!==void 0?V:{},ke=Object.keys(Te);if(ke.length>0){const ot=ke.find(ft=>Array.isArray(Te[ft])&&Te[ft].length>0);if(typeof ot=="string")return wt.literal(Te[ot][0],wt.namedNode(ot))}return null}function Ut(l,d){var v,x,L,V;if(At(l),!oe(d))throw new on(d);const z=m(d);let se=[];const Ie=(x=(v=l.predicates[z])===null||v===void 0?void 0:v.langStrings)!==null&&x!==void 0?x:{},Te=Object.keys(Ie);for(const ft of Te){const mr=Ie[ft].map(jr=>wt.literal(jr,ft));se=se.concat(mr)}const ke=(V=(L=l.predicates[z])===null||L===void 0?void 0:L.literals)!==null&&V!==void 0?V:{},ot=Object.keys(ke);for(const ft of ot){const Pt=ke[ft],mr=wt.namedNode(ft),jr=Pt.map(Dr=>wt.literal(Dr,mr));se=se.concat(jr)}return se}function at(l,d){var v,x;At(l);const L=be(l,d);if(L!==null)return L;const V=Je(l,d);if(V!==null)return V;const z=m(d),se=(x=(v=l.predicates[z])===null||v===void 0?void 0:v.blankNodes)!==null&&x!==void 0?x:[];if(se.length>0){const Ie=ut(se[0])?Z(se[0]):void 0;return wt.blankNode(Ie)}return null}function Ir(l,d){var v,x;At(l);const L=He(l,d),V=Ut(l,d),z=m(d),Ie=((x=(v=l.predicates[z])===null||v===void 0?void 0:v.blankNodes)!==null&&x!==void 0?x:[]).map(ke=>{const ot=ut(ke)?Z(ke):void 0;return wt.blankNode(ot)});return L.concat(V).concat(Ie)}function Tt(l,d,v){var x,L,V,z;if(!oe(d))throw new on(d);const se=m(d);return(z=(V=(L=(x=l.predicates[se])===null||x===void 0?void 0:x.literals)===null||L===void 0?void 0:L[v])===null||V===void 0?void 0:V[0])!==null&&z!==void 0?z:null}function qt(l,d,v){var x,L,V;if(!oe(d))throw new on(d);const z=m(d);return[...(V=(L=(x=l.predicates[z])===null||x===void 0?void 0:x.literals)===null||L===void 0?void 0:L[v])!==null&&V!==void 0?V:[]]}function Wt(l,d,v={}){var x;if(!oe(d))throw new co(d);const L=typeof v.scope<"u"?m(v.scope):"default",V=(x=l.graphs[L])!==null&&x!==void 0?x:{},z=m(d),se=St(z)&&c(l)?Ht(jt(z),$e(l)):z,Ie=V[se];return typeof Ie>"u"?null:Ie}function Ur(l,d={acceptBlankNodes:!1}){var v;const x=typeof d.scope<"u"?m(d.scope):"default",L=(v=l.graphs[x])!==null&&v!==void 0?v:{};return Object.values(L).filter(V=>!ut(V.url)||d.acceptBlankNodes)}function Sr(l,d){var v;const x=yn(d)&&c(l)?Ht(jt(d.url),$e(l)):d.url,L=l.graphs.default,V=Ke({...L,[x]:Ke({...d,url:x})}),z=Ke({...l.graphs,default:V}),se=wt.namedNode(x),Ie=(v=l.graphs.default[x])===null||v===void 0?void 0:v.predicates,Te=typeof Ie<"u"?tt(Ie,se,wt.defaultGraph()):[],ke=tt(d.predicates,se,wt.defaultGraph());return nn(Wr(Ke({...l,graphs:z}),Te),ke)}function fn(l,d){var v;let x;U(d)?x=d.value:typeof d=="string"?x=St(d)&&c(l)?Ht(jt(d),$e(l)):d:yn(d)?x=d.url:x=ar(d);const V={...l.graphs.default};delete V[x];const z=Ke({...l.graphs,default:Ke(V)}),se=wt.namedNode(x),Ie=(v=l.graphs.default[x])===null||v===void 0?void 0:v.predicates,Te=typeof Ie<"u"?tt(Ie,se,wt.defaultGraph()):[];return Wr(Ke({...l,graphs:z}),Te)}function Lr(l={}){var d;if(typeof l.url<"u"){const{url:V}=l;if(!oe(V))throw new co(V);return Ke({type:"Subject",predicates:Ke({}),url:V})}const v=(d=l.name)!==null&&d!==void 0?d:Ds(),x=Yt(v);return Ke({type:"Subject",predicates:Ke({}),url:x})}function gn(l){return typeof l=="object"&&l!==null&&typeof l.type=="string"&&l.type==="Subject"}function $r(l,d){if(yn(l)){if(typeof d>"u")throw new Error("The URL of a Thing that has not been persisted cannot be determined without a base URL.");return Ht(jt(l.url),d)}return l.url}const ar=$r;function En(l){let d="";yn(l)?d+=`## Thing (no URL yet — identifier: \`#${jt(l.url)}\`)
`:d+=`## Thing: ${l.url}
`;const v=Object.keys(l.predicates);if(v.length===0)d+=`
<empty>
`;else for(const x of v){d+=`
Property: ${x}
`;const L=Ir(l,x);d+=L.reduce((V,z)=>`${V}- ${Pr(z)}
`,"")}return d}function yn(l){return St(l.url)}class uo extends y{constructor(d){const v=`Expected a Thing, but received: [${d}].`;super(v),this.receivedValue=d}}class on extends y{constructor(d){const v=U(d)?d.value:d,x=`Expected a valid URL to identify a property, but received: [${v}].`;super(x),this.receivedProperty=v}}class Mi extends y{constructor(d){const v=U(d)?d.value:d,x=`Expected a valid URL value, but received: [${v}].`;super(x),this.receivedValue=v}}class co extends y{constructor(d){const v=U(d)?d.value:d,x=`Expected a valid URL to identify a Thing, but received: [${v}].`;super(x),this.receivedValue=v}}const Ds=()=>u.v4();function Ci(l){const d=new URL(l);return d.hash="",d.href}function Dn(){return Ke({type:"Dataset",graphs:{default:{}}})}async function ni(l,d={}){if(b(l))throw new Et(`Fetching the SolidDataset at [${l.url}] failed: [${l.status}] [${l.statusText}] ${await l.text()}.`,l);const v=ae(l),x={"text/turtle":Qt(),...d.parsers},L=Ve(v);if(L===null)throw new Error(`Could not determine the content type of the Resource at [${$e(v)}].`);const V=L.split(";")[0],z=x[V];if(typeof z>"u")throw new Error(`The Resource at [${$e(v)}] has a MIME type of [${V}], but the only parsers available are for the following MIME types: [${Object.keys(x).join(", ")}].`);const se=await l.text();return new Promise((Te,ke)=>{let ot=Ke({graphs:Ke({default:Ke({})}),type:"Dataset"});const ft=[],Pt=[];z.onError(mr=>{ke(new Error(`Encountered an error parsing the Resource at [${$e(v)}] with content type [${L}]: ${mr}`))}),z.onQuad(mr=>{Pt.push(mr),mr.subject.termType==="BlankNode"||mr.object.termType==="BlankNode"?ft.push(mr):ot=_t(ot,mr)}),z.onComplete(async()=>{const jr=ft.length<=20?st(ft):[];ot=ft.filter(un=>jr.every(or=>!or.equals(un.subject))).reduce((un,or)=>_t(un,or,{otherQuads:Pt,chainBlankNodes:jr}),ot);const eo=Ke({...ot,...v});Te(eo)}),z.parse(se,v)})}async function Fn(l,d=Q){var v;l=m(l);const x={...Q,...d},L=Object.keys((v=d.parsers)!==null&&v!==void 0?v:{}),V=L.length>0?L.join(", "):"text/turtle",z=await x.fetch(l,{headers:{Accept:V}});if(b(z))throw new Et(`Fetching the Resource at [${l}] failed: [${z.status}] [${z.statusText}] ${await z.text()}.`,z);return await ni(z,d)}async function Oo(l){const d=l.internal_changeLog.deletions.length>0?`DELETE DATA {${(await Zt(l.internal_changeLog.deletions.map(gt))).trim()}};`:"",v=l.internal_changeLog.additions.length>0?`INSERT DATA {${(await Zt(l.internal_changeLog.additions.map(gt))).trim()}};`:"";return{method:"PATCH",body:`${d} ${v}`,headers:{"Content-Type":"application/sparql-update"}}}async function es(l,d){return{method:"PUT",body:await Zt(it(l).map(gt),d),headers:{"Content-Type":"text/turtle","If-None-Match":"*",Link:`<${H.Resource}>; rel="type"`}}}async function Bi(l,d,v=Q){l=m(l);const x={...Q,...v},L=Or(d),V=re(L,l)?await Oo(L):await es(L,v),z=await x.fetch(l,V);if(b(z)){const ke=re(L,l)?`The changes that were sent to the Pod are listed below.

${Ze(L)}`:`The SolidDataset that was sent to the Pod is listed below.

${qe(L)}`;throw new Et(`Storing the Resource at [${l}] failed: [${z.status}] [${z.statusText}] ${await z.text()}.

${ke}`,z)}const se={...C(z),isRawData:!1},Ie=Ke({...d,internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:se});return yt(Ie)}async function N(l,d=Q){const v={...Q,...d},x=h(l)?m($e(l)):m(l),L=await v.fetch(x,{method:"DELETE"});if(b(L))throw new Et(`Deleting the SolidDataset at [${x}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L)}async function q(l,d=Q){var v;l=m(l),l=l.endsWith("/")?l:`${l}/`;const x={...Q,...d},L=await x.fetch(l,{method:"PUT",body:x.initialContent?await Zt(it(x.initialContent).map(gt)):void 0,headers:{Accept:"text/turtle","Content-Type":"text/turtle","If-None-Match":"*",Link:`<${H.BasicContainer}>; rel="type"`}});if(b(L)){const se=x.initialContent===void 0?"empty":"non-empty";throw new Et(`Creating the ${se} Container at [${l}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L)}const V=C(L);return Ke({...(v=d.initialContent)!==null&&v!==void 0?v:Dn(),internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:V})}function J(l,d){return Ci(l.internal_resourceInfo.sourceIri)===Ci(d)}function re(l,d){return p(l)&&h(l)&&typeof l.internal_resourceInfo.sourceIri=="string"&&J(l,d)}async function Re(l,d,v=Q){const x={...Q,...v};l=m(l);const L=await Zt(it(d).map(gt)),V={"Content-Type":"text/turtle",Link:`<${H.Resource}>; rel="type"`};v.slugSuggestion&&(V.slug=v.slugSuggestion);const z=await x.fetch(l,{method:"POST",body:L,headers:V});if(b(z))throw new Et(`Storing the Resource in the Container at [${l}] failed: [${z.status}] [${z.statusText}] ${await z.text()}.

The SolidDataset that was sent to the Pod is listed below.

${qe(d)}`,z);const se=C(z);if(!se.location)throw new Error("Could not determine the location of the newly saved SolidDataset.");let Ie;try{Ie=new URL(se.location).href}catch{Ie=new URL(se.location,z.url).href}const ke=Ke({...d,...{internal_resourceInfo:{isRawData:!1,sourceIri:Ie}}});return yt(ke)}async function le(l,d=Q){l=m(l);const v={...Q,...d},x={"Content-Type":"text/turtle",Link:`<${H.BasicContainer}>; rel="type"`};d.slugSuggestion&&(x.slug=d.slugSuggestion);const L=await v.fetch(l,{method:"POST",headers:x});if(b(L))throw new Et(`Creating an empty Container in the Container at [${l}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L);const V=C(L);if(!V.location)throw new Error("Could not determine the location of the newly created Container.");try{const z=new URL(V.location).toString();return Ke({...Dn(),internal_resourceInfo:{...V,sourceIri:z}})}catch{}return Ke({...Dn(),internal_resourceInfo:{...V,sourceIri:new URL(V.location,L.url).href}})}async function xe(l,d=Q){const v=h(l)?m($e(l)):m(l);if(!Ce(l))throw new Error(`You're trying to delete the Container at [${v}], but Container URLs should end in a \`/\`. Are you sure this is a Container?`);const L=await{...Q,...d}.fetch(v,{method:"DELETE"});if(b(L))throw new Et(`Deleting the Container at [${v}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L)}function Ye(l){const d=Wt(l,$e(l));return d!==null?f(d,H.contains):[]}function qe(l){let d="";h(l)?d+=`# SolidDataset: ${$e(l)}
`:d+=`# SolidDataset (no URL yet)
`;const v=Ur(l);return v.length===0?d+=`
<empty>
`:v.forEach(x=>{d+=`
${En(x)}`,p(l)&&(d+=`
${dt(l,x)}
`)}),d}function Ze(l){if(!h(l))return"This is a newly initialized SolidDataset, so there is no source to compare it to.";if(!p(l)||l.internal_changeLog.additions.length===0&&l.internal_changeLog.deletions.length===0)return`## Changes compared to ${$e(l)}

This SolidDataset has not been modified since it was fetched from ${$e(l)}.
`;let d=`## Changes compared to ${$e(l)}
`;const v=pt(l);return Object.keys(v).forEach(x=>{d+=`
### Thing: ${x}
`;const L=v[x];Object.keys(L).forEach(V=>{d+=`
Property: ${V}
`;const{deleted:z}=L[V],{added:se}=L[V];z.length>0&&(d+=`- Removed:
`,d+=z.reduce((Ie,Te)=>`${Ie}  - ${Pr(Te)}
`,"")),se.length>0&&(d+=`- Added:
`,d+=se.reduce((Ie,Te)=>`${Ie}  - ${Pr(Te)}
`,""))})}),d}function pt(l){const d=Object.create(null);return l.internal_changeLog.deletions.forEach(v=>{var x,L,V;const z=Pe(v.subject)?mt(v.subject,$e(l)):v.subject;if(!U(z)||!U(v.predicate))return;const se=m(z),Ie=m(v.predicate);(x=d[se])!==null&&x!==void 0||(d[se]=Object.create(null)),(L=(V=d[se])[Ie])!==null&&L!==void 0||(V[Ie]={added:[],deleted:[]}),d[se][Ie].deleted.push(v.object)}),l.internal_changeLog.additions.forEach(v=>{var x,L,V;const z=Pe(v.subject)?mt(v.subject,$e(l)):v.subject;if(!U(z)||!U(v.predicate))return;const se=m(z),Ie=m(v.predicate);(x=d[se])!==null&&x!==void 0||(d[se]=Object.create(null)),(L=(V=d[se])[Ie])!==null&&L!==void 0||(V[Ie]={added:[],deleted:[]}),d[se][Ie].added.push(v.object)}),d}function dt(l,d){const v=wt.namedNode(d.url),x=l.internal_changeLog.additions.reduce((se,Ie)=>Ie.subject.equals(v)?se+1:se,0),L=l.internal_changeLog.deletions.reduce((se,Ie)=>Ie.subject.equals(v)?se+1:se,0),V=x===1?"1 new value added":`${x} new values added`,z=L===1?"1 value removed":`${L} values removed`;return`(${V} / ${z})`}function gt(l){const d=U(l.subject)?nt(l.subject):l.subject,v=U(l.object)?nt(l.object):l.object;return wt.quad(d,l.predicate,v,l.graph)}function nt(l){return St(l.value)?wt.namedNode(`#${jt(l.value)}`):l}function yt(l){const d=$e(l),v=l.graphs.default,L=Object.keys(v).reduce((z,se)=>{const Ie=Ot(z[se],d),Te=St(se)?`${d}#${jt(se)}`:se,ke={...z};return delete ke[se],ke[Te]=Ie,Ke(ke)},v),V=Ke({...l.graphs,default:L});return Ke({...l,graphs:V})}function Ot(l,d){const x=Object.keys(l.predicates).reduce((L,V)=>{var z;const se=(z=L[V].namedNodes)!==null&&z!==void 0?z:[];if(se.every(ke=>!St(ke)))return L;const Ie=Ke(se.map(ke=>St(ke)?`${d}#${jt(ke)}`:ke)),Te=Ke({...L[V],namedNodes:Ie});return Ke({...L,[V]:Te})},l.predicates);return Ke({...l,predicates:x,url:St(l.url)?`${d}#${jt(l.url)}`:l.url})}async function Lt(l,d=Q){const v=m(l);try{const se=new URL("/.well-known/solid",new URL(v).origin).href;return await Fn(se,{fetch:_})}catch{}const x=await De(v,{fetch:d.fetch,ignoreAuthenticationErrors:!0}),V=We(x)[D.storage],z=(V==null?void 0:V.length)===1?V[0]:null;if(z!==null){const se=new URL(".well-known/solid",z.endsWith("/")?z:`${z}/`).href;return Fn(se,{...d,parsers:{"application/ld+json":Bt()}})}throw new Error("Could not determine storage root or well-known solid resource.")}function tr(l){return{...Dn(),internal_resourceInfo:{sourceIri:m(l),isRawData:!1,contentType:"text/turtle",linkedResources:{}}}}function Cr(l){const d=m(l);if(!d.endsWith("/"))throw new Error("A Container's URL should end in a slash. Please update your tests.");return tr(d)}function nr(l,d){const v=new Blob;return Object.assign(v,{internal_resourceInfo:{sourceIri:m(l),isRawData:!0,contentType:d==null?void 0:d.contentType,linkedResources:{}}})}function Rt(l,d=404,v="Not Found"){const x=new r.Response(void 0,{status:d,statusText:v});return new Et(`Fetching the Resource at [${l}] failed: [${x.status}] [${x.statusText}].`,x)}const pr=(l,d,v)=>{var x,L;if(At(l),!oe(d))throw new on(d);if(!gn(v)&&!oe(v))throw new Mi(v);const V=m(d),z=(x=l.predicates[V])!==null&&x!==void 0?x:{},se=(L=z.namedNodes)!==null&&L!==void 0?L:[];let Ie;U(v)?Ie=v.value:typeof v=="string"?Ie=v:yn(v)?Ie=v.url:Ie=ar(v);const Te=Ke(se.concat(m(Ie))),ke=Ke({...z,namedNodes:Te}),ot=Ke({...l.predicates,[V]:ke});return Ke({...l,predicates:ot})},Xe=pr,gr=(l,d,v)=>(At(l),bn(l,d,B(v),S.boolean)),Nr=(l,d,v)=>(At(l),bn(l,d,rt(v),S.dateTime)),lr=(l,d,v)=>(At(l),bn(l,d,Nt(v),S.date)),fr=(l,d,v)=>(At(l),bn(l,d,de(v),S.time)),Vr=(l,d,v)=>(At(l),bn(l,d,dn(v),S.decimal)),_r=(l,d,v)=>(At(l),bn(l,d,fe(v),S.integer));function Gr(l,d,v){return Fr(l,d,v,"en")}function Fr(l,d,v,x){var L,V,z;if(At(l),!oe(d))throw new on(d);const se=m(d),Ie=T(x),Te=(L=l.predicates[se])!==null&&L!==void 0?L:{},ke=(V=Te.langStrings)!==null&&V!==void 0?V:{},ot=(z=ke[Ie])!==null&&z!==void 0?z:[],ft=Ke(ot.concat(v)),Pt=Ke({...ke,[Ie]:ft}),mr=Ke({...Te,langStrings:Pt}),jr=Ke({...l.predicates,[se]:mr});return Ke({...l,predicates:jr})}const Jr=(l,d,v)=>(At(l),bn(l,d,v,S.string));function rr(l,d,v){return pr(l,d,v.value)}function kr(l,d,v){if(At(l),!oe(d))throw new on(d);return v.datatype.value===S.langString?Fr(l,d,v.value,v.language):bn(l,d,v.value,v.datatype.value)}function mn(l,d,v){var x,L;if(v.termType==="NamedNode")return rr(l,d,v);if(v.termType==="Literal")return kr(l,d,v);if(v.termType==="BlankNode"){if(At(l),!oe(d))throw new on(d);const V=m(d),z=(x=l.predicates[V])!==null&&x!==void 0?x:{},se=(L=z.blankNodes)!==null&&L!==void 0?L:[],Ie=Ke(se.concat(I(v))),Te=Ke({...z,blankNodes:Ie}),ke=Ke({...l.predicates,[V]:Te});return Ke({...l,predicates:ke})}throw new Error(`Term type [${v.termType}] is not supported by @inrupt/solid-client.`)}function bn(l,d,v,x){var L,V,z;if(At(l),!oe(d))throw new on(d);const se=m(d),Ie=(L=l.predicates[se])!==null&&L!==void 0?L:{},Te=(V=Ie.literals)!==null&&V!==void 0?V:{},ke=(z=Te[x])!==null&&z!==void 0?z:[],ot=Ke(ke.concat(v)),ft=Ke({...Te,[x]:ot}),Pt=Ke({...Ie,literals:ft}),mr=Ke({...l.predicates,[se]:Pt});return Ke({...l,predicates:mr})}function It(l,d){if(At(l),!oe(d))throw new on(d);const v=m(d),x={...l.predicates};return delete x[v],Ke({...l,predicates:Ke(x)})}const sn=(l,d,v)=>{var x,L,V;if(At(l),!oe(d))throw new on(d);const z=m(d);if(!gn(v)&&!oe(v))throw new Mi(v);const se=gn(v)?ar(v):m(v),Ie=Ke((V=(L=(x=l.predicates[z])===null||x===void 0?void 0:x.namedNodes)===null||L===void 0?void 0:L.filter(ot=>ot.toLowerCase()!==se.toLowerCase()))!==null&&V!==void 0?V:[]),Te=Ke({...l.predicates[z],namedNodes:Ie}),ke=Ke({...l.predicates,[z]:Te});return Ke({...l,predicates:ke})},yr=sn,Xn=(l,d,v)=>(At(l),Qi(l,d,S.boolean,x=>G(x)===v)),Ln=(l,d,v)=>(At(l),Qi(l,d,S.dateTime,x=>{var L;return((L=lt(x))===null||L===void 0?void 0:L.getTime())===v.getTime()})),fo=(l,d,v)=>(At(l),Qi(l,d,S.date,function(x){const L=Kt(x);return L?L.getFullYear()===v.getFullYear()&&L.getMonth()===v.getMonth()&&L.getUTCDate()===v.getUTCDate():!1})),Ji=(l,d,v)=>(At(l),Qi(l,d,S.time,function(x){const L=Ee(x);return L?L.hour===v.hour&&L.minute===v.minute&&L.second===v.second&&L.millisecond===v.millisecond&&L.timezoneHourOffset===v.timezoneHourOffset&&L.timezoneMinuteOffset===v.timezoneMinuteOffset:!1})),Gl=(l,d,v)=>(At(l),Qi(l,d,S.decimal,x=>te(x)===v)),Aa=(l,d,v)=>(At(l),Qi(l,d,S.integer,x=>K(x)===v));function jp(l,d,v){return Eo(l,d,v,"en")}function Eo(l,d,v,x){var L,V;if(At(l),!oe(d))throw new on(d);const z=m(d),se=(V=(L=l.predicates[z])===null||L===void 0?void 0:L.langStrings)!==null&&V!==void 0?V:{},Ie=Object.keys(se).find(mr=>T(mr)===T(x)&&Array.isArray(se[mr])&&se[mr].length>0);if(typeof Ie!="string")return l;const Te=se[Ie],ke=Ke(Te.filter(mr=>mr!==v)),ot=Ke({...se,[Ie]:ke}),ft=Ke({...l.predicates[z],langStrings:ot}),Pt=Ke({...l.predicates,[z]:ft});return Ke({...l,predicates:Pt})}const ql=(l,d,v)=>(At(l),Qi(l,d,S.string,x=>x===v));function zl(l,d,v){return sn(l,d,v.value)}function Ls(l,d,v){var x,L,V;if(At(l),!oe(d))throw new on(d);const z=v.datatype.value;if(z===S.langString)return Eo(l,d,v.value,v.language);const se=m(d),Ie=(x=l.predicates[se])!==null&&x!==void 0?x:{},Te=(L=Ie.literals)!==null&&L!==void 0?L:{},ke=(V=Te[z])!==null&&V!==void 0?V:[],ot=Ke(ke.filter(Dr=>Dr!==v.value)),ft=Ke({...Te,[z]:ot}),Pt=Ke({...Ie,literals:ft}),mr=Ke({...l.predicates,[se]:Pt});return Ke({...l,predicates:mr})}function Qi(l,d,v,x){var L,V,z;if(!oe(d))throw new on(d);const se=m(d),Ie=(L=l.predicates[se])!==null&&L!==void 0?L:{},Te=(V=Ie.literals)!==null&&V!==void 0?V:{},ke=(z=Te[v])!==null&&z!==void 0?z:[],ot=Ke(ke.filter(Dr=>!x(Dr))),ft=Ke({...Te,[v]:ot}),Pt=Ke({...Ie,literals:ft}),mr=Ke({...l.predicates,[se]:Pt});return Ke({...l,predicates:mr})}const Yi=(l,d,v)=>{if(At(l),!oe(d))throw new on(d);if(!gn(v)&&!oe(v))throw new Mi(v);return pr(It(l,d),d,v)},hn=Yi,yd=(l,d,v)=>(At(l),gr(It(l,d),d,v)),md=(l,d,v)=>(At(l),Nr(It(l,d),d,v)),gi=(l,d,v)=>(At(l),lr(It(l,d),d,v)),Ra=(l,d,v)=>(At(l),fr(It(l,d),d,v)),vd=(l,d,v)=>(At(l),Vr(It(l,d),d,v)),Us=(l,d,v)=>(At(l),_r(It(l,d),d,v));function An(l,d,v,x){return At(l),Fr(It(l,d),d,v,x)}const Jl=(l,d,v)=>(At(l),Jr(It(l,d),d,v));function wd(l,d,v){return At(l),rr(It(l,d),d,v)}function _d(l,d,v){return At(l),kr(It(l,d),d,v)}function Ms(l,d,v){if(At(l),!oe(d))throw new on(d);return mn(It(l,d),d,v)}function yi(l=Lr()){let d=gn(l)?l:Lr(l);function v(z){return(se,Ie)=>(d=z(d,se,Ie),V)}function x(z){return(se,Ie)=>(d=z(d,se,Ie),V)}function L(z){return(se,Ie)=>(d=z(d,se,Ie),V)}const V={build:()=>d,addUrl:v(pr),addIri:v(Xe),addBoolean:v(gr),addDatetime:v(Nr),addDate:v(lr),addTime:v(fr),addDecimal:v(Vr),addInteger:v(_r),addStringNoLocale:v(Jr),addStringEnglish:(z,se)=>(d=Fr(d,z,se,"en"),V),addStringWithLocale:(z,se,Ie)=>(d=Fr(d,z,se,Ie),V),addNamedNode:v(rr),addLiteral:v(kr),addTerm:v(mn),setUrl:x(Yi),setIri:x(hn),setBoolean:x(yd),setDatetime:x(md),setDate:x(gi),setTime:x(Ra),setDecimal:x(vd),setInteger:x(Us),setStringNoLocale:x(Jl),setStringEnglish:(z,se)=>(d=An(d,z,se,"en"),V),setStringWithLocale:(z,se,Ie)=>(d=An(d,z,se,Ie),V),setNamedNode:x(wd),setLiteral:x(_d),setTerm:x(Ms),removeAll:z=>(d=It(d,z),V),removeUrl:L(sn),removeIri:L(yr),removeBoolean:L(Xn),removeDatetime:L(Ln),removeDate:L(fo),removeTime:L(Ji),removeDecimal:L(Gl),removeInteger:L(Aa),removeStringNoLocale:L(ql),removeStringEnglish:(z,se)=>yi(Eo(d,z,se,"en")),removeStringWithLocale:(z,se,Ie)=>yi(Eo(d,z,se,Ie)),removeNamedNode:L(zl),removeLiteral:L(Ls)};return V}function Sd(l){const d=m(l);return{type:"Subject",predicates:{},url:d}}function tw(l){const d=We(l).type;return Array.isArray(d)&&d.includes(O.AccessControlResource)}async function bo(l,d=Q){if(!Cn(l))return{resourceAcl:null,fallbackAcl:null};try{const v=await rw(l,d);return v===null?{resourceAcl:null,fallbackAcl:await nw(l,d)}:{resourceAcl:v,fallbackAcl:null}}catch(v){if(v instanceof Hp)return{resourceAcl:null,fallbackAcl:null};throw v}}async function rw(l,d=Q){if(!Cn(l))return null;try{const v=await Fn(l.internal_resourceInfo.aclUrl,d);if(tw(v))throw new Hp(l,v);return Ke({...v,internal_accessTo:$e(l)})}catch(v){if(v instanceof Hp)throw v;return null}}async function nw(l,d=Q){const v=new URL($e(l)),x=v.pathname;if(x==="/")return null;const L=iw(x),V=new URL(L,v.origin).href,z=await De(V,d);if(!Cn(z))return null;const se=await rw(z,d);return se===null?nw(z,d):se}function iw(l){const d=l.substring(l.length-1)==="/"?l.substring(0,l.length-1):l;return`${l.substring(0,d.lastIndexOf("/"))}/`}function Xi(l){return Ur(l).filter(_P)}function _P(l){return f(l,j.type).includes(P.Authorization)}function Ql(l,d){return l.filter(v=>SP(v,d))}function SP(l,d){return f(l,P.accessTo).includes(d)}function Ca(l,d){return l.filter(v=>EP(v,d))}function EP(l,d){return f(l,P.default).includes(d)||f(l,P.defaultForNew).includes(d)}function Bs(l){const d=f(l,P.mode);return d.includes(Yr.write)?{read:d.includes(Yr.read),append:!0,write:!0,control:d.includes(Yr.control)}:{read:d.includes(Yr.read),append:d.includes(Yr.append),write:!1,control:d.includes(Yr.control)}}function js(l){return l.reduce((d,v)=>d.write||v.write?{read:d.read||v.read,append:!0,write:!0,control:d.control||v.control}:{read:d.read||v.read,append:d.append||v.append,write:!1,control:d.control||v.control},{read:!1,append:!1,write:!1,control:!1})}function bP(l){return Xi(l).filter(AP).reduce(fn,l)}function AP(l){return tt(l.predicates,wt.namedNode(l.url),wt.defaultGraph()).some(d=>!RP(d))?!1:Zr(l,P.accessTo)===null&&Zr(l,P.default)===null&&Zr(l,P.defaultForNew)===null||Zr(l,P.mode)===null||Zr(l,P.agent)===null&&Zr(l,P.agentGroup)===null&&Zr(l,P.agentClass)===null}function RP(l){const{predicate:d}=l,{object:v}=l;return!!(d.equals(wt.namedNode(j.type))&&v.equals(wt.namedNode(P.Authorization))||d.equals(wt.namedNode(P.accessTo))||d.equals(wt.namedNode(P.default))||d.equals(wt.namedNode(P.defaultForNew))||d.equals(wt.namedNode(P.mode))&&Object.values(Yr).some(x=>v.equals(wt.namedNode(x)))||d.equals(wt.namedNode(P.agent))||d.equals(wt.namedNode(P.agentGroup))||d.equals(wt.namedNode(P.agentClass))||d.equals(wt.namedNode(P.origin)))}const Yr={read:"http://www.w3.org/ns/auth/acl#Read",append:"http://www.w3.org/ns/auth/acl#Append",write:"http://www.w3.org/ns/auth/acl#Write",control:"http://www.w3.org/ns/auth/acl#Control"};function ow(l,d,v){return l.filter(x=>f(x,v).includes(d))}function sw(l,d){const v={};return l.forEach(x=>{const L=f(x,d),V=Bs(x);L.forEach(z=>{v[z]=typeof v[z]>"u"?V:js([v[z],V])})}),v}function aw(l){let d=Lr();return d=hn(d,j.type,P.Authorization),l.read&&(d=Xe(d,P.mode,Yr.read)),l.append&&!l.write&&(d=Xe(d,P.mode,Yr.append)),l.write&&(d=Xe(d,P.mode,Yr.write)),l.control&&(d=Xe(d,P.mode,Yr.control)),d}function CP(l){let d=Lr();d=hn(d,j.type,P.Authorization);function v(x,L,V){return f(x,V).reduce((z,se)=>Xe(z,V,se),L)}return d=v(l,d,P.accessTo),d=v(l,d,P.default),d=v(l,d,P.defaultForNew),d=v(l,d,P.agent),d=v(l,d,P.agentGroup),d=v(l,d,P.agentClass),d=v(l,d,P.origin),d=v(l,d,P.mode),d}function ji(l,d){return Object.assign(F(l),{internal_acl:d})}const xP=[P.agent,P.agentClass,P.agentGroup,P.origin];function PP(l,d,v,x,L){if(!f(l,v).includes(d)){const se=aw({read:!1,append:!1,write:!1,control:!1});return[l,se]}const V=yr(l,v,d);let z=CP(l);return z=yr(z,L==="resource"?P.accessTo:P.default,x),L==="default"&&(z=yr(z,P.defaultForNew,x)),z=hn(z,v,d),xP.filter(se=>se!==v).forEach(se=>{z=It(z,se)}),[V,z]}function xa(l,d,v,x,L){let V=l;Ur(l).forEach(Ie=>{const[Te,ke]=PP(Ie,L,v,l.internal_accessTo,x);V=Sr(V,Te),V=Sr(V,ke)});let z=aw(d);z=hn(z,x==="resource"?P.accessTo:P.default,l.internal_accessTo),z=hn(z,v,L);const se=Sr(V,z);return bP(se)}function lw(l,d){return ji(l,{resourceAcl:d,fallbackAcl:null})}function TP(l){return l.internal_acl.resourceAcl}class Hp extends Error{constructor(d,v){super(`[${we(d)}] is governed by Access Control Policies in [${we(v)}] rather than by Web Access Control.`)}}function IP(l){return typeof l.internal_acl=="object"}function ts(l){return l.internal_acl.resourceAcl!==null&&$e(l)===l.internal_acl.resourceAcl.internal_accessTo&&l.internal_resourceInfo.aclUrl===$e(l.internal_acl.resourceAcl)}async function FP(l,d=Q){const v=await Fn(l,d),x=await bo(v,d);return ji(v,x)}async function OP(l,d=Q){const v=await sr(l,d),x=await bo(v,d);return ji(v,x)}async function NP(l,d=Q){const v=await De(l,d),x=await bo(v,d);return ji(v,x)}function Yl(l){return ts(l)?l.internal_acl.resourceAcl:null}function rs(l){return l.internal_acl.fallbackAcl!==null}function $p(l){return rs(l)?l.internal_acl.fallbackAcl:null}function Ed(l){return Ke({...Dn(),internal_accessTo:$e(l),internal_resourceInfo:{sourceIri:l.internal_resourceInfo.aclUrl,isRawData:!1,linkedResources:{}}})}function uw(l){const d=Ed(l),v=Xi(l.internal_acl.fallbackAcl);return Ca(v,l.internal_acl.fallbackAcl.internal_accessTo).map(z=>(z=It(z,P.default),z=It(z,P.defaultForNew),z=hn(z,P.accessTo,$e(l)),z=hn(z,P.default,$e(l)),z)).reduce(Sr,d)}async function cw(l,d,v=Q){if(!Cn(l))throw new Error(`Could not determine the location of the ACL for the Resource at [${$e(l)}]; possibly the current user does not have Control access to that Resource. Try calling \`hasAccessibleAcl()\` before calling \`saveAclFor()\`.`);return{...await Bi(l.internal_resourceInfo.aclUrl,d,v),internal_accessTo:$e(l)}}async function kP(l,d=Q){const x=await{...Q,...d}.fetch(l.internal_resourceInfo.aclUrl,{method:"DELETE"});if(!x.ok)throw new Error(`Deleting the ACL of the Resource at [${$e(l)}] failed: [${x.status}] [${x.statusText}].`);return Object.assign(F(l),{acl:{resourceAcl:null}})}function Cn(l){return typeof l.internal_resourceInfo.aclUrl=="string"}function Vp(l,d){return ts(l)?fw(l.internal_acl.resourceAcl,d):rs(l)?gw(l.internal_acl.fallbackAcl,d):null}function dw(l){if(ts(l)){const d=Yl(l);return hw(d)}if(rs(l)){const d=$p(l);return yw(d)}return null}function fw(l,d){const v=Xi(l),x=Ql(v,l.internal_accessTo),V=mw(x,d).map(Bs);return js(V)}function hw(l){const d=Xi(l),v=Ql(d,l.internal_accessTo),x=vw(v);return ww(x)}function pw(l,d,v){return xa(l,v,P.agent,"resource",d)}function gw(l,d){const v=Xi(l),x=Ca(v,l.internal_accessTo),V=mw(x,d).map(Bs);return js(V)}function yw(l){const d=Xi(l),v=Ca(d,l.internal_accessTo),x=vw(v);return ww(x)}function DP(l,d,v){return xa(l,v,P.agent,"default",d)}function mw(l,d){return ow(l,d,P.agent)}function vw(l){return l.filter(LP)}function LP(l){return Zr(l,P.agent)!==null}function ww(l){return sw(l,P.agent)}function Kp(l,d){return ts(l)?Sw(l.internal_acl.resourceAcl,d):rs(l)?bw(l.internal_acl.fallbackAcl,d):null}function _w(l){if(ts(l)){const d=Yl(l);return Ew(d)}if(rs(l)){const d=$p(l);return Aw(d)}return null}function Sw(l,d){const v=Xi(l),x=Ql(v,l.internal_accessTo),V=Rw(x,d).map(Bs);return js(V)}function Ew(l){const d=Xi(l),v=Ql(d,l.internal_accessTo);return Cw(v)}function bw(l,d){const v=Xi(l),x=Ca(v,l.internal_accessTo),V=Rw(x,d).map(Bs);return js(V)}function Aw(l){const d=Xi(l),v=Ca(d,l.internal_accessTo);return Cw(v)}function Rw(l,d){return ow(l,d,P.agentGroup)}function Cw(l){return sw(l,P.agentGroup)}function xw(l,d,v){return xa(l,v,P.agentGroup,"resource",d)}function UP(l,d,v){return xa(l,v,P.agentGroup,"default",d)}function Wp(l){return ts(l)?Pw(l.internal_acl.resourceAcl):rs(l)?Tw(l.internal_acl.fallbackAcl):null}function Pw(l){const d=Xi(l),v=Ql(d,l.internal_accessTo),L=Fw(v,$.Agent).map(Bs);return js(L)}function Tw(l){const d=Xi(l),v=Ca(d,l.internal_accessTo),L=Fw(v,$.Agent).map(Bs);return js(L)}function Iw(l,d){return xa(l,d,P.agentClass,"resource",$.Agent)}function MP(l,d){return xa(l,d,P.agentClass,"default",$.Agent)}function Fw(l,d){return l.filter(v=>BP(v,d))}function BP(l,d){return f(l,P.agentClass).includes(d)}function jP(l,d){return Object.assign(F(l),{internal_resourceInfo:{...l.internal_resourceInfo,aclUrl:d}})}function HP(l){var d;const v=(d=l.internal_resourceInfo.aclUrl)!==null&&d!==void 0?d:"https://your.pod/mock-acl.ttl",x=Object.assign(F(l),{internal_resourceInfo:{...l.internal_resourceInfo,aclUrl:v}}),L=Ed(x);return ji(x,{resourceAcl:L,fallbackAcl:null})}function $P(l){const d=iw(we(l)),v=`${d}.acl`,x=jP(Cr(d),v),L=Ed(x);return ji(F(l),{resourceAcl:null,fallbackAcl:L})}function Ow(l,d){const v=Wt(l,d);if(v===null)throw new Error(`Profile document [${$e(l)}] does not include WebID [${d}]`);return v}function VP(l,d,v){return Sr(l,hn(Ow(l,d),ee.publicKey,v))}function Nw(l,d){return Wn(Ow(l,d),ee.publicKey)}const KP=l=>typeof l.keys<"u";async function kw(l,d,v=Q){const L=await{...Q,...v}.fetch(d);if(!L.ok)throw new Error(`Fetching [${d}] returned an error: ${L.status} ${L.statusText}`);try{const V=await L.json();if(!KP(V))throw new Error(`[${d}] does not dereference to a valid JWKS: ${JSON.stringify(V)}`);return{keys:[...V.keys,l]}}catch(V){throw new Error(`Parsing the document at [${d}] failed: ${V}`)}}async function WP(l,d,v=Q){const x=await Fn(d,{fetch:v.fetch});if(x===null)throw new Error(`The profile document associated with WebID [${d}] could not be retrieved.`);const L=Nw(x,d);if(L===null)throw new Error(`No key set is declared for the property [${ee.publicKey}] in the profile of [${d}]`);const V=await kw(l,L,v);return Mt(L,new Blob([JSON.stringify(V)]),{contentType:"application/json",fetch:v.fetch})}function Dw(l,d){const v=Wt(d,l),x=Ur(d).filter(L=>f(L,$.primaryTopic).length>0).map(ar).concat(v?f(v,$.isPrimaryTopicOf):[]).filter(L=>L!==we(d));return Array.from(new Set(x))}async function Lw(l,d=Q){var v,x;const L=(v=d.fetch)!==null&&v!==void 0?v:_,V=(x=d.webIdProfile)!==null&&x!==void 0?x:await Fn(l,{fetch:_}),z=(await Promise.allSettled(Dw(l,V).map(se=>Fn(se,{fetch:L})))).filter(se=>se.status==="fulfilled").map(se=>se.value);return{webIdProfile:V,altProfileAll:z}}async function GP(l,d=Q){const v=await Lw(l,d);return Uw(v,l)}function Uw(l,d){const v=new Set;return[l.webIdProfile,...l.altProfileAll].forEach(x=>{const L=Wt(x,d);L!==null&&f(L,D.storage).forEach(V=>v.add(V))}),Array.from(v)}async function qP(l){return Fn(l,{fetch:_})}function Rr(l){if(!xn(l))throw new Error(`An Access Control Resource for [${$e(l)}] is not available. This could be because the current user is not allowed to see it, or because their Pod Server does not support Access Control Resources.`);return l.internal_acp.acr}function ii(l,d){return Object.assign(F(l),{internal_acp:{...l.internal_acp,acr:d}})}function Mw(l){let d=Lr(l);return d=hn(d,j.type,O.AccessControl),d}function zP(l,d,v){const x=Rr(l),L=Wt(x,d,v);return L===null||!f(L,j.type).includes(O.AccessControl)?null:L}function No(l,d){const v=Rr(l),x=Ur(v,d),L=x.filter(z=>f(z,j.type).includes(O.AccessControl)),V=x.filter(z=>f(z,O.accessControl).length>0).map(z=>{const se=f(z,O.accessControl)[0];return Lr({url:se})});return L.concat(V)}function Hs(l,d){const v=Rr(l),x=Sr(v,d);return ii(l,x)}function Bw(l,d){return Xe(l,O.apply,d)}function jw(l){return f(l,O.apply)}function Hw(l,d){return yr(l,O.apply,d)}function $w(l){return It(l,O.apply)}function Vw(l,d){return Xe(l,O.applyMembers,d)}function Gp(l){return f(l,O.applyMembers)}function JP(l,d){return yr(l,O.applyMembers,d)}function Kw(l){return It(l,O.applyMembers)}function Ww(l){const d=No(l);return d.length===0?Mw():d[0]}function $s(l){return c(l)&&Array.isArray(l.internal_resourceInfo.linkedResources[O.accessControl])&&l.internal_resourceInfo.linkedResources[O.accessControl].length===1}function Xl(l,d){var v;const x=Rr(l),L=$e(x);let V=(v=Wt(x,L))!==null&&v!==void 0?v:Lr({url:L});V=Xe(V,O.access,d);const z=Sr(x,V);return ii(l,z)}function bd(l,d){var v;const x=Rr(l),L=$e(x);let V=(v=Wt(x,L))!==null&&v!==void 0?v:Lr({url:L});V=Xe(V,O.accessMembers,d);const z=Sr(x,V);return ii(l,z)}function Ao(l){const d=Rr(l),v=$e(d),x=Wt(d,v);return x===null?[]:f(x,O.access)}function Pa(l){const d=Rr(l),v=$e(d),x=Wt(d,v);return x===null?[]:f(x,O.accessMembers)}function Vs(l,d){const v=Rr(l),x=$e(v),L=Wt(v,x);if(L===null)return l;const V=yr(L,O.access,d),z=Sr(v,V);return ii(l,z)}function Ad(l,d){const v=Rr(l),x=$e(v),L=Wt(v,x);if(L===null)return l;const V=yr(L,O.accessMembers,d),z=Sr(v,V);return ii(l,z)}function Ta(l){const d=Rr(l),v=$e(d),x=Wt(d,v);if(x===null)return l;const L=It(x,O.access),V=Sr(d,L);return ii(l,V)}function Ia(l){const d=Rr(l),v=$e(d),x=Wt(d,v);if(x===null)return l;const L=It(x,O.accessMembers),V=Sr(d,L);return ii(l,V)}function Rd(l,d){const v=Ww(l),x=Bw(v,d);return Hs(l,x)}function qp(l,d){const v=Ww(l),x=Vw(v,d);return Hs(l,x)}function ko(l){const v=No(l).map(L=>jw(L)),x=new Set;return v.forEach(L=>{L.forEach(V=>x.add(V))}),Array.from(x)}function Zl(l){const v=No(l).map(L=>Gp(L)),x=new Set;return v.forEach(L=>{L.forEach(V=>x.add(V))}),Array.from(x)}function Fa(l,d){return No(l).map(V=>Hw(V,d)).reduce(Hs,l)}function zp(l,d){return No(l).map(V=>JP(V,d)).reduce(Hs,l)}function eu(l){return No(l).map(L=>$w(L)).reduce(Hs,l)}function tu(l){return No(l).map(L=>Kw(L)).reduce(Hs,l)}function Jp(l){let d=`# Access controls for ${$e(l)}
`;const v=ko(l),x=Zl(l),L=Ao(l),V=Pa(l);return v.length===0&&x.length===0&&L.length===0&&V.length===0&&(d+=`
<no policies specified yet>
`),v.length>0&&(d+=`
The following policies apply to this resource:
- `,d+=`${v.join(`
- `)}
`),L.length>0&&(d+=`
The following policies apply to the access control resource for this resource:
- `,d+=`${L.join(`
- `)}
`),x.length>0&&(d+=`
The following policies apply to the children of this resource:
- `,d+=`${x.join(`
- `)}
`),V.length>0&&(d+=`
The following policies apply to the access control resources for children of this resource:
- `,d+=`${V.join(`
- `)}
`),d}const Gn="http://www.w3.org/ns/solid/acp#",br={AccessControl:Gn.concat("AccessControl"),AccessControlResource:Gn.concat("AccessControlResource"),AuthenticatedAgent:Gn.concat("AuthenticatedAgent"),CreatorAgent:Gn.concat("CreatorAgent"),Matcher:Gn.concat("Matcher"),Policy:Gn.concat("Policy"),PublicAgent:Gn.concat("PublicAgent"),access:Gn.concat("access"),accessControl:Gn.concat("accessControl"),agent:Gn.concat("agent"),allOf:Gn.concat("allOf"),allow:Gn.concat("allow"),anyOf:Gn.concat("anyOf"),apply:Gn.concat("apply"),client:Gn.concat("client"),deny:Gn.concat("deny"),memberAccessControl:Gn.concat("memberAccessControl"),noneOf:Gn.concat("noneOf"),vc:Gn.concat("vc")},Cd="http://www.w3.org/ns/auth/acl#",Oa={Append:Cd.concat("Append"),Control:Cd.concat("Control"),Read:Cd.concat("Read"),Write:Cd.concat("Write")},QP="http://www.w3.org/ns/solid/vc#SolidAccessGrant";function ru(l){const d=Rr(l),v=$e(d);return Wt(d,v)}const Na="defaultAccessControl",nu="defaultAcrAccessControl",Qp="defaultMemberAccessControl",Yp="defaultMemberAcrAccessControl";function Xp(l,d){const v=Rr(l);return $e(v).concat("#").concat(d)}function ho(l,d){const v=Rr(l),x=Xp(l,d),L=Wt(v,x);return L===null||typeof L>"u"?Lr({url:x}):L}function xd(l,d){const v=f(l,d);return{read:v.includes(Oa.Read),append:v.includes(Oa.Append),write:v.includes(Oa.Write),controlRead:!1,controlWrite:!1}}function YP(l,d){return Object.assign(F(l),{internal_acp:{acr:d}})}function Gw(l,d,v){let x=It(l,v);return(d.read||d.controlRead)&&(x=Xe(x,v,Oa.Read)),d.append&&(x=Xe(x,v,Oa.Append)),(d.write||d.controlWrite)&&(x=Xe(x,v,Oa.Write)),x}const qw="defaultVcPolicy",zw="defaultVcMatcher";function XP(l,d,v,x){var L;let V=Wt(l,d);V===null&&(V=yi({url:d}).addIri(j.type,br.Policy).addIri(br.anyOf,v).build());const z=(L=Wt(l,v))!==null&&L!==void 0?L:yi({url:v}).addIri(j.type,br.Matcher).addIri(br.vc,QP).build(),se=xd(V,br.allow);return V=Gw(V,{...se,...x},br.allow),{matcher:z,policy:V}}function Jw(l,d,v={inherit:!1}){var x;let L=Rr(l);const V=`${we(L)}#${qw}`,z=`${we(L)}#${zw}`,{policy:se,matcher:Ie}=XP(L,V,z,d);let Te=ho(l,"defaultAccessControl");f(Te,br.apply).includes(ar(se))||(Te=Xe(Te,br.apply,se));let ke=ho(l,"defaultMemberAccessControl"),ot=(x=ru(l))!==null&&x!==void 0?x:Lr({url:we(L)});return f(ot,br.accessControl).includes(ar(Te))||(ot=Xe(ot,br.accessControl,Te)),L=[ot,Te,se,Ie].reduce(Sr,L),v.inherit&&(f(ke,br.apply).includes(ar(se))||(ke=Xe(ke,br.apply,se)),f(ot,br.memberAccessControl).includes(ar(ke))||(ot=Xe(ot,br.memberAccessControl,ke)),L=[ot,ke].reduce(Sr,L)),YP(l,L)}const Zp={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},eg=(l,d,v)=>f(l,d).includes(ar(v));function Qw(l){const d=Rr(l),v=ho(l,"defaultAccessControl"),x=ru(l);if(x===null||!eg(x,br.accessControl,v))return Zp;const L=`${we(d)}#${qw}`,V=Wt(d,L);if(V===null||!eg(v,br.apply,V))return Zp;const z=`${we(d)}#${zw}`,se=Wt(d,z);return se===null||!eg(V,br.anyOf,se)?Zp:xd(V,br.allow)}async function ka(l,d=Q){const v=m(l),x={...Q,...d},L=await Fn(v,x),V=await Ks(L,x);return{...L,...V}}async function Da(l,d=Q){const v=m(l),x={...Q,...d},L=await sr(v,x),V=await Ks(L,x);return Object.assign(L,V)}async function qn(l,d=Q){const v=m(l),x={...Q,...d},L=await De(v,x),V=await Ks(L,x);return{...L,...V}}async function La(l,d=Q){const v=m(l),x={...Q,...d},L=await Fn(v,x);if(Cn(L)){const z=await bo(L,x);return ji(L,z)}const V=await Ks(L,x);return{...L,...V}}async function Ua(l,d=Q){const v=m(l),x={...Q,...d},L=await sr(v,x);if(Cn(L)){const z=await bo(L,x);return ji(L,z)}const V=await Ks(L,x);return Object.assign(L,V)}async function Ma(l,d=Q){const v=m(l),x={...Q,...d},L=await De(v,x);if(Cn(L)){const z=await bo(L,x);return ji(L,z)}const V=await Ks(L,x);return{...L,...V}}async function Hi(l,d=Q){const v=Rr(l),x={...Q,...d},L=await Bi($e(v),v,x);return ii(l,L)}function xn(l){return typeof l.internal_acp=="object"&&l.internal_acp!==null&&typeof l.internal_acp.acr=="object"&&l.internal_acp.acr!==null}async function Ks(l,d){let v;if($s(l)){const{linkedResources:z}=l.internal_resourceInfo;[v]=z[O.accessControl]}else if(Cn(l)){const z=await De(l.internal_resourceInfo.aclUrl,d);tw(z)&&(v=$e(z))}if(typeof v!="string")return{internal_acp:{acr:null}};let x;try{x=await Fn(v,d)}catch{return{internal_acp:{acr:null}}}return{internal_acp:{acr:{...x,accessTo:$e(l)}}}}function Ba(l){const d=ko(l).map(Ci).concat(Zl(l).map(Ci)).concat(Ao(l).map(Ci)).concat(Pa(l).map(Ci));return Array.from(new Set(d))}async function Pd(l,d=Q){const v=m(l),x={...Q,...d},L=await De(v,x);return xn(await Ks(L,x))}function tg(l){return c(l)?[O.accessControl,"acl"].map(v=>{if(Array.isArray(l.internal_resourceInfo.linkedResources[v])&&l.internal_resourceInfo.linkedResources[v].length===1)return l.internal_resourceInfo.linkedResources[v][0]}).find(v=>v!==void 0):void 0}function rg(l){return f(l,j.type).includes(O.Rule)}function Td(l,d){return Xe(l,O.allOf,d)}function Id(l,d){return yr(l,O.allOf,d)}function Fd(l,d){return hn(l,O.allOf,d)}function Ws(l){return f(l,O.allOf)}function Od(l,d){return Xe(l,O.anyOf,d)}function Nd(l,d){return yr(l,O.anyOf,d)}function kd(l,d){return hn(l,O.anyOf,d)}function Gs(l){return f(l,O.anyOf)}function Dd(l,d){return Xe(l,O.noneOf,d)}function Ld(l,d){return yr(l,O.noneOf,d)}function Ud(l,d){return hn(l,O.noneOf,d)}function Do(l){return f(l,O.noneOf)}function Md(l){const d=m(l);let v=Lr({url:d});return v=Yi(v,j.type,O.Rule),v}function Bd(l,d){const v=Rr(l),x=new URL($e(v));x.hash=`#${d}`;let L=Lr({url:x.href});return L=Yi(L,j.type,O.Rule),L}function jd(l,d){const v=Wt(l,d);return v===null||Wn(v,j.type)!==O.Rule?null:v}function ng(l,d){const v=Rr(l),x=$e(v),L=new URL(x);L.hash=`#${d}`;const V=Wt(v,L.href);return V===null||!rg(V)?null:V}function Hd(l){return Ur(l).filter(rg)}function Yw(l){const d=Rr(l);return Ur(d).filter(rg)}function $d(l,d){return fn(l,d)}function Xw(l,d){const v=Rr(l);let x;if(typeof d=="string")if(oe(d))x=d;else{const se=new URL($e(v));se.hash=`#${d}`,x=se.href}else U(d)?x=m(d):x=$r(d);const L=ng(l,new URL(x).hash.substring(1));if(L===null)return l;const V=fn(v,L);return ii(l,V)}function Vd(l,d){return Sr(l,d)}function ja(l,d){const v=Rr(l),x=Sr(v,d);return ii(l,x)}function iu(l){return f(l,O.agent).filter(d=>d!==O.PublicAgent&&d!==O.AuthenticatedAgent&&d!==O.CreatorAgent)}function Kd(l,d){const v=Ha(l),x=$a(l),L=Va(l);let V=hn(l,O.agent,d);return v&&(V=Qd(V)),x&&(V=Yd(V)),L&&(V=Xd(V)),V}function Wd(l,d){return Xe(l,O.agent,d)}function Gd(l,d){return yr(l,O.agent,d)}function ou(l){return f(l,O.group)}function qd(l,d){return hn(l,O.group,d)}function zd(l,d){return Xe(l,O.group,d)}function Jd(l,d){return yr(l,O.group,d)}function Ha(l){return f(l,O.agent).filter(d=>d===O.PublicAgent).length>0}function Qd(l){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return Xe(l,O.agent,O.PublicAgent)}function ig(l){return yr(l,O.agent,O.PublicAgent)}function $a(l){return f(l,O.agent).filter(d=>d===O.AuthenticatedAgent).length>0}function Yd(l){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return Xe(l,O.agent,O.AuthenticatedAgent)}function og(l){return yr(l,O.agent,O.AuthenticatedAgent)}function Va(l){return f(l,O.agent).filter(d=>d===O.CreatorAgent).length>0}function Xd(l){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return Xe(l,O.agent,O.CreatorAgent)}function sg(l){return yr(l,O.agent,O.CreatorAgent)}function ag(l){return f(l,O.client).filter(d=>d!==ne.PublicOidcClient)}function Zw(l,d){const v=Zd(l);let x=hn(l,O.client,d);return v&&(x=lg(x)),x}function e_(l,d){return Xe(l,O.client,d)}function t_(l,d){return yr(l,O.client,d)}function Zd(l){return f(l,O.client).filter(d=>d===ne.PublicOidcClient).length>0}function lg(l){return Xe(l,O.client,ne.PublicOidcClient)}function r_(l){return yr(l,O.client,ne.PublicOidcClient)}function ef(l){let d=`## Rule: ${$r(l)}

`,v="";Ha(l)&&(v+=`- Everyone
`),$a(l)&&(v+=`- All authenticated agents
`),Va(l)&&(v+=`- The creator of this resource
`),Zd(l)&&(v+=`- Users of any client application
`);const x=iu(l);x.length>0&&(v+=`- The following agents:
  - `,v+=`${x.join(`
  - `)}
`);const L=ou(l);L.length>0&&(v+=`- Members of the following groups:
  - `,v+=`${L.join(`
  - `)}
`);const V=ag(l);return V.length>0&&(v+=`- Users of the following client applications:
  - `,v+=`${V.join(`
  - `)}
`),d+=v.length>0?`This rule applies to:
${v}`:`<empty>
`,d}function Ka(l){return f(l,j.type).includes(O.Policy)}function Wa(l){const d=m(l);let v=Lr({url:d});return v=Yi(v,j.type,O.Policy),v}function Ga(l,d){const v=Wt(l,d);return v===null||!Ka(v)?null:v}function qa(l){return Ur(l).filter(x=>!yn(x)&&Ka(x))}function za(l,d){return fn(l,d)}function Ja(l,d){return Sr(l,d)}function tf(l,d){let v=It(l,O.allow);return d.read===!0&&(v=Xe(v,O.allow,Yr.read)),d.append===!0&&(v=Xe(v,O.allow,Yr.append)),d.write===!0&&(v=Xe(v,O.allow,Yr.write)),v}function Qa(l,d){let v=It(l,O.allow);return d.read===!0&&(v=Xe(v,O.allow,O.Read)),d.append===!0&&(v=Xe(v,O.allow,O.Append)),d.write===!0&&(v=Xe(v,O.allow,O.Write)),v}function rf(l){const d=f(l,O.allow);return{read:d.includes(Yr.read),append:d.includes(Yr.append),write:d.includes(Yr.write)}}function qs(l){const d=f(l,O.allow);return{read:d.includes(O.Read),append:d.includes(O.Append),write:d.includes(O.Write)}}function n_(l,d){let v=It(l,O.deny);return d.read===!0&&(v=Xe(v,O.deny,Yr.read)),d.append===!0&&(v=Xe(v,O.deny,Yr.append)),d.write===!0&&(v=Xe(v,O.deny,Yr.write)),v}function nf(l,d){let v=It(l,O.deny);return d.read===!0&&(v=Xe(v,O.deny,O.Read)),d.append===!0&&(v=Xe(v,O.deny,O.Append)),d.write===!0&&(v=Xe(v,O.deny,O.Write)),v}function of(l){const d=f(l,O.deny);return{read:d.includes(Yr.read),append:d.includes(Yr.append),write:d.includes(Yr.write)}}function zs(l){const d=f(l,O.deny);return{read:d.includes(O.Read),append:d.includes(O.Append),write:d.includes(O.Write)}}function Ro(l,d){const v=Rr(l),x=new URL($e(v));x.hash=`#${d}`;let L=Lr({url:x.href});return L=Yi(L,j.type,O.Policy),L}function su(l,d){const v=Rr(l),x=$e(v),L=new URL(x);L.hash=`#${d}`;const V=Wt(v,L.href);return!ko(l).includes(L.href)||V===null||!Ka(V)?null:V}function au(l,d){const v=Rr(l),x=$e(v),L=new URL(x);L.hash=`#${d}`;const V=Wt(v,L.href);return!Ao(l).includes(L.href)||V===null||!Ka(V)?null:V}function sf(l){const d=Rr(l);return ko(l).map(V=>Wt(d,V)).filter(V=>V!==null&&Ka(V))}function af(l){const d=Rr(l);return Ao(l).map(V=>Wt(d,V)).filter(V=>V!==null&&Ka(V))}function lf(l,d){const v=Rr(l);let x=d;if(typeof x=="string"&&oe(x)===!1){const Ie=new URL($e(v));Ie.hash=`#${d}`,x=Ie.href}let L;if(typeof x=="string"?L=x:U(x)?L=m(x):L=$r(x,$e(v)),su(l,new URL(L).hash.substring(1))===null)return l;const z=fn(v,x),se=ii(l,z);return Fa(se,L)}function uf(l,d){const v=Rr(l);let x=d;if(typeof x=="string"&&oe(x)===!1){const Ie=new URL($e(v));Ie.hash=`#${d}`,x=Ie.href}let L;if(typeof x=="string"?L=x:U(x)?L=m(x):L=$r(x,$e(v)),au(l,new URL(L).hash.substring(1))===null)return l;const z=fn(v,x),se=ii(l,z);return Vs(se,L)}function Ya(l,d){const v=Rr(l),x=Sr(v,d),L=ii(l,x),V=$r(d,$e(v));return Rd(L,V)}function Xa(l,d){const v=Rr(l),x=Sr(v,d),L=ii(l,x),V=$r(d,$e(v));return Xl(L,V)}function cf(l){function d(Ie,Te){return Te?"denied":Ie?"allowed":"unspecified"}const v=qs(l),x=zs(l);let L=`## Policy: ${$r(l)}

`;L+=`- Read: ${d(v.read,x.read)}
`,L+=`- Append: ${d(v.append,x.append)}
`,L+=`- Write: ${d(v.write,x.write)}
`;const V=Ws(l),z=Gs(l),se=Do(l);return V.length===0&&z.length===0&&se.length===0&&(L+=`
<no rules specified yet>
`),V.length>0&&(L+=`
All of these rules should match:
`,L+=`- ${V.join(`
- `)}
`),z.length>0&&(L+=`
At least one of these rules should match:
`,L+=`- ${z.join(`
- `)}
`),se.length>0&&(L+=`
None of these rules should match:
`,L+=`- ${se.join(`
- `)}
`),L}function Js(l){const d=new URL("access-control-resource",l).href;return{...tr(d),accessTo:l}}function Za(l,d=Js($e(l))){return Object.assign(F(l),{internal_acp:{acr:d,aprs:{}}})}const ZP={getFileWithAccessDatasets:Ua,getFileWithAcr:Da,getReferencedPolicyUrlAll:Ba,getResourceInfoWithAccessDatasets:Ma,getResourceInfoWithAcr:qn,getSolidDatasetWithAccessDatasets:La,getSolidDatasetWithAcr:ka,hasAccessibleAcr:xn,saveAcrFor:Hi},eT={acrAsMarkdown:Jp,addAcrPolicyUrl:Xl,addMemberAcrPolicyUrl:bd,addMemberPolicyUrl:qp,addPolicyUrl:Rd,getAcrPolicyUrlAll:Ao,getMemberAcrPolicyUrlAll:Pa,getMemberPolicyUrlAll:Zl,getPolicyUrlAll:ko,hasLinkedAcr:$s,removeAcrPolicyUrl:Vs,removeAcrPolicyUrlAll:Ta,removeMemberAcrPolicyUrl:Ad,removeMemberAcrPolicyUrlAll:Ia,removeMemberPolicyUrl:zp,removeMemberPolicyUrlAll:tu,removePolicyUrl:Fa,removePolicyUrlAll:eu},tT={createPolicy:Wa,getAllowModes:qs,getDenyModes:zs,getPolicy:Ga,getPolicyAll:qa,policyAsMarkdown:cf,removePolicy:za,setAllowModes:Qa,setDenyModes:nf,setPolicy:Ja},rT={addAgent:Wd,addForbiddenRuleUrl:Dd,addGroup:zd,addOptionalRuleUrl:Od,addRequiredRuleUrl:Td,createRule:Md,getAgentAll:iu,getForbiddenRuleUrlAll:Do,getGroupAll:ou,getOptionalRuleUrlAll:Gs,getRequiredRuleUrlAll:Ws,getRule:jd,getRuleAll:Hd,hasAuthenticated:$a,hasCreator:Va,hasPublic:Ha,removeAgent:Gd,removeForbiddenRuleUrl:Ld,removeGroup:Jd,removeOptionalRuleUrl:Nd,removeRequiredRuleUrl:Id,removeRule:$d,ruleAsMarkdown:ef,setAgent:Kd,setForbiddenRuleUrl:Ud,setGroup:qd,setOptionalRuleUrl:kd,setRequiredRuleUrl:Fd,setRule:Vd},nT={addMockAcrTo:Za,mockAcrFor:Js};function i_(l,d){return d?Qd(l):ig(l)}function o_(l,d){return d?Yd(l):og(l)}function s_(l,d){return d?Xd(l):sg(l)}const iT={...ZP,...eT,...tT,...rT,...nT,...{getForbiddenRuleurlAll:Do,setPublic:i_,setAuthenticated:o_,setCreator:s_}},oT={...{getFileWithAccessDatasets:Ua,getFileWithAcr:Da,getReferencedPolicyUrlAll:Ba,getResourceInfoWithAccessDatasets:Ma,getResourceInfoWithAcr:qn,getSolidDatasetWithAccessDatasets:La,getSolidDatasetWithAcr:ka,hasAccessibleAcr:xn,saveAcrFor:Hi},...{createPolicy:Wa,getAllowModes:qs,getDenyModes:zs,getPolicy:Ga,getPolicyAll:qa,policyAsMarkdown:cf,removePolicy:za,setAllowModes:Qa,setDenyModes:nf,setPolicy:Ja},...{addAgent:Wd,addForbiddenRuleUrl:Dd,addGroup:zd,addOptionalRuleUrl:Od,addRequiredRuleUrl:Td,createRule:Md,getAgentAll:iu,getForbiddenRuleUrlAll:Do,getGroupAll:ou,getOptionalRuleUrlAll:Gs,getRequiredRuleUrlAll:Ws,getRule:jd,getRuleAll:Hd,hasAuthenticated:$a,hasCreator:Va,hasPublic:Ha,removeAgent:Gd,removeForbiddenRuleUrl:Ld,removeGroup:Jd,removeOptionalRuleUrl:Nd,removeRequiredRuleUrl:Id,removeRule:$d,ruleAsMarkdown:ef,setAgent:Kd,setForbiddenRuleUrl:Ud,setGroup:qd,setOptionalRuleUrl:kd,setRequiredRuleUrl:Fd,setRule:Vd},...{addMockAcrTo:Za,mockAcrFor:Js},...{hasLinkedAcr:$s,addAcrPolicyUrl:Xl,addMemberAcrPolicyUrl:bd,getAcrPolicyUrlAll:Ao,getMemberAcrPolicyUrlAll:Pa,removeAcrPolicyUrl:Vs,removeAcrPolicyUrlAll:Ta,removeMemberAcrPolicyUrl:Ad,removeMemberAcrPolicyUrlAll:Ia},...{createControl:Mw,getControl:zP,getAllControl:No,getControlAll:No,setControl:Hs,removeControl:sT,addPolicyUrl:Bw,getPolicyUrlAll:jw,removePolicyUrl:Hw,removePolicyUrlAll:$w,addMemberPolicyUrl:Vw,getMemberPolicyUrlAll:Gp,removeMemberPolicyUrl:Gp,removeMemberPolicyUrlAll:Kw,getForbiddenRuleurlAll:Do,setPublic:i_,setAuthenticated:o_,setCreator:s_}};function sT(l,d){const v=Rr(l),x=fn(v,d);return ii(l,x)}const aT={...{getFileWithAccessDatasets:Ua,getFileWithAcr:Da,getLinkedAcrUrl:tg,getReferencedPolicyUrlAll:Ba,getResourceInfoWithAccessDatasets:Ma,getResourceInfoWithAcr:qn,getSolidDatasetWithAccessDatasets:La,getSolidDatasetWithAcr:ka,hasAccessibleAcr:xn,saveAcrFor:Hi,isAcpControlled:Pd},...{acrAsMarkdown:Jp,addAcrPolicyUrl:Xl,addMemberAcrPolicyUrl:bd,addMemberPolicyUrl:qp,addPolicyUrl:Rd,getAcrPolicyUrlAll:Ao,getMemberAcrPolicyUrlAll:Pa,getMemberPolicyUrlAll:Zl,getPolicyUrlAll:ko,hasLinkedAcr:$s,removeAcrPolicyUrl:Vs,removeAcrPolicyUrlAll:Ta,removeMemberAcrPolicyUrl:Ad,removeMemberAcrPolicyUrlAll:Ia,removeMemberPolicyUrl:zp,removeMemberPolicyUrlAll:tu,removePolicyUrl:Fa,removePolicyUrlAll:eu},...{createPolicy:Wa,getAllowModes:qs,getDenyModes:zs,getPolicy:Ga,getPolicyAll:qa,policyAsMarkdown:cf,removePolicy:za,setAllowModes:Qa,setDenyModes:nf,setPolicy:Ja,createResourcePolicyFor:Ro,getResourceAcrPolicy:au,getResourceAcrPolicyAll:af,getResourcePolicy:su,getResourcePolicyAll:sf,removeResourceAcrPolicy:uf,removeResourcePolicy:lf,setResourceAcrPolicy:Xa,setResourcePolicy:Ya},...{addAgent:Wd,addGroup:zd,createRule:Md,getAgentAll:iu,getGroupAll:ou,getRule:jd,getRuleAll:Hd,removeAgent:Gd,removeGroup:Jd,removeRule:$d,ruleAsMarkdown:ef,setAgent:Kd,setGroup:qd,setRule:Vd,addClient:e_,getClientAll:ag,hasAnyClient:Zd,removeClient:t_,setAnyClient:lg,setClient:Zw,removeAnyClient:r_,hasAuthenticated:$a,hasCreator:Va,hasPublic:Ha,setAuthenticated:Yd,setCreator:Xd,setPublic:Qd,removeAuthenticated:og,removeCreator:sg,removePublic:ig,getAnyOfRuleUrlAll:Gs,addAnyOfRuleUrl:Od,removeAnyOfRuleUrl:Nd,setAnyOfRuleUrl:kd,getAllOfRuleUrlAll:Ws,addAllOfRuleUrl:Td,removeAllOfRuleUrl:Id,setAllOfRuleUrl:Fd,getNoneOfRuleUrlAll:Do,addNoneOfRuleUrl:Dd,removeNoneOfRuleUrl:Ld,setNoneOfRuleUrl:Ud,createResourceRuleFor:Bd,getResourceRule:ng,getResourceRuleAll:Yw,removeResourceRule:Xw,setResourceRule:ja},...{addMockAcrTo:Za,mockAcrFor:Js}};function Zi(l,d){return Object.assign(F(l),{internal_acp:{...l.internal_acp,acr:Sr(l.internal_acp.acr,d)}})}function a_(l){return l.includes("Member")?br.memberAccessControl:br.accessControl}function df(l,d){const v=Xp(l,d),x=Rr(l);let L=ru(l);return(L===null||typeof L>"u")&&(L=Lr({url:$e(x)})),f(L,a_(d)).includes(v)?l:(L=yi(L).addUrl(a_(d),v).build(),Zi(l,L))}function ug(l,d){const v=df(l,nu),x=ho(v,nu);return Zi(v,yi(x).addUrl(br.access,d).build())}function l_(l,d){const v=df(l,Yp),x=ho(v,Yp);return Zi(v,yi(x).addUrl(br.access,d).build())}function u_(l,d){const v=df(l,Qp),x=ho(v,Qp);return Zi(v,yi(x).addUrl(br.apply,d).build())}function cg(l,d){const v=df(l,Na),x=ho(v,Na);return Zi(v,yi(x).addUrl(br.apply,d).build())}function c_(l){const d=ru(l);return d===null?[]:f(d,br.accessControl)}function ff(l,d,v){const x=Rr(l);return Array.from(new Set(d.map(L=>{const V=Wt(x,L);return V!==null?f(V,v):[]}).reduce((L,V)=>L.concat(V),[])))}function dg(l){return ff(l,c_(l),br.access)}function d_(l){const d=ru(l);return d===null?[]:f(d,br.memberAccessControl)}function f_(l){return ff(l,d_(l),br.access)}function h_(l){return ff(l,d_(l),br.apply)}function fg(l){return ff(l,c_(l),br.apply)}function p_(l,d){const v=ho(l,nu);return Zi(l,yr(v,br.access,d))}function g_(l,d){const v=ho(l,Yp);return Zi(l,yr(v,br.access,d))}function y_(l,d){const v=ho(l,Qp);return Zi(l,yr(v,br.apply,d))}function m_(l,d){const v=ho(l,Na);return Zi(l,yr(v,br.apply,d))}function v_(l,d){return Zi(l,d)}function hf(l){return f(l,j.type).includes(O.Matcher)}function w_(l,d){return Xe(l,O.allOf,d)}function __(l,d){return yr(l,O.allOf,d)}function S_(l,d){return hn(l,O.allOf,d)}function pf(l){return f(l,O.allOf)}function E_(l,d){return Xe(l,O.anyOf,d)}function b_(l,d){return yr(l,O.anyOf,d)}function A_(l,d){return hn(l,O.anyOf,d)}function gf(l){return f(l,O.anyOf)}function R_(l,d){return Xe(l,O.noneOf,d)}function C_(l,d){return yr(l,O.noneOf,d)}function x_(l,d){return hn(l,O.noneOf,d)}function yf(l){return f(l,O.noneOf)}function P_(l){const d=m(l);let v=Lr({url:d});return v=Yi(v,j.type,O.Matcher),v}function mf(l,d){const v=Rr(l),x=new URL($e(v));x.hash=`#${d}`;let L=Lr({url:x.href});return L=Yi(L,j.type,O.Matcher),L}function T_(l,d){const v=Wt(l,d);return v===null||!hf(v)?null:v}function hg(l,d){const v=Rr(l),x=$e(v),L=new URL(x);L.hash=`#${d}`;const V=Wt(v,L.href);return V===null||!hf(V)?null:V}function I_(l){return Ur(l).filter(hf)}function F_(l){const d=Rr(l);return Ur(d).filter(hf)}function O_(l,d){return fn(l,d)}function N_(l,d){const v=Rr(l);let x;if(typeof d=="string")if(oe(d))x=d;else{const se=new URL($e(v));se.hash=`#${d}`,x=se.href}else U(d)?x=m(d):x=$r(d);const L=hg(l,new URL(x).hash.substring(1));if(L===null)return l;const V=fn(v,L);return ii(l,V)}function k_(l,d){return Sr(l,d)}function el(l,d){const v=Rr(l),x=Sr(v,d);return ii(l,x)}function D_(l){return f(l,O.agent).filter(d=>d!==O.PublicAgent&&d!==O.AuthenticatedAgent&&d!==O.CreatorAgent)}function L_(l,d){const v=yg(l),x=vg(l),L=_g(l);let V=hn(l,O.agent,d);return v&&(V=mg(V)),x&&(V=wg(V)),L&&(V=Sg(V)),V}function pg(l,d){return Xe(l,O.agent,d)}function gg(l,d){return yr(l,O.agent,d)}function yg(l){return f(l,O.agent).filter(d=>d===O.PublicAgent).length>0}function mg(l){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return Xe(l,O.agent,O.PublicAgent)}function U_(l){return yr(l,O.agent,O.PublicAgent)}function vg(l){return f(l,O.agent).filter(d=>d===O.AuthenticatedAgent).length>0}function wg(l){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return Xe(l,O.agent,O.AuthenticatedAgent)}function M_(l){return yr(l,O.agent,O.AuthenticatedAgent)}function _g(l){return f(l,O.agent).filter(d=>d===O.CreatorAgent).length>0}function Sg(l){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return Xe(l,O.agent,O.CreatorAgent)}function B_(l){return yr(l,O.agent,O.CreatorAgent)}function j_(l){return f(l,O.client).filter(d=>d!==ne.PublicOidcClient).concat(ve(l,O.client))}function lT(l,d){const v=V_(l);let x=hn(l,O.client,d);return v&&(x=K_(x)),x}function H_(l,d){return oe(d)?Xe(l,O.client,d):Jr(l,O.client,d)}function $_(l,d){return oe(d)?yr(l,O.client,d):ql(l,O.client,d)}function V_(l){return f(l,O.client).filter(d=>d===ne.PublicOidcClient).length>0}function K_(l){return Xe(l,O.client,ne.PublicOidcClient)}function uT(l){return yr(l,O.client,ne.PublicOidcClient)}const cT={...{getFileWithAccessDatasets:Ua,getFileWithAcr:Da,getReferencedPolicyUrlAll:Ba,getResourceInfoWithAccessDatasets:Ma,getResourceInfoWithAcr:qn,getSolidDatasetWithAccessDatasets:La,getSolidDatasetWithAcr:ka,hasAccessibleAcr:xn,saveAcrFor:Hi,isAcpControlled:Pd,getVcAccess:Qw,setVcAccess:Jw},...{addAcrPolicyUrl:ug,addMemberAcrPolicyUrl:l_,addMemberPolicyUrl:u_,addPolicyUrl:cg,getAcrPolicyUrlAll:dg,getMemberAcrPolicyUrlAll:f_,getMemberPolicyUrlAll:h_,getPolicyUrlAll:fg,hasLinkedAcr:$s,removeAcrPolicyUrl:p_,removeAcrPolicyUrlAll:Ta,removeMemberAcrPolicyUrl:g_,removeMemberAcrPolicyUrlAll:Ia,removeMemberPolicyUrl:y_,removeMemberPolicyUrlAll:tu,removePolicyUrl:m_,removePolicyUrlAll:eu},...{createPolicy:Wa,getAllowModes:rf,getDenyModes:of,getPolicy:Ga,getPolicyAll:qa,removePolicy:za,setAllowModes:tf,setDenyModes:n_,setPolicy:Ja,createResourcePolicyFor:Ro,getResourceAcrPolicy:au,getResourceAcrPolicyAll:af,getResourcePolicy:su,getResourcePolicyAll:sf,removeResourceAcrPolicy:uf,removeResourcePolicy:lf,setResourcePolicy:v_},...{addAgent:pg,createMatcher:P_,getAgentAll:D_,getMatcher:T_,getMatcherAll:I_,removeAgent:gg,removeMatcher:O_,setAgent:L_,setMatcher:k_,addClient:H_,getClientAll:j_,hasAnyClient:V_,removeClient:$_,setAnyClient:K_,setClient:lT,removeAnyClient:uT,hasAuthenticated:vg,hasCreator:_g,hasPublic:yg,setAuthenticated:wg,setCreator:Sg,setPublic:mg,removeAuthenticated:M_,removeCreator:B_,removePublic:U_,getAnyOfMatcherUrlAll:gf,addAnyOfMatcherUrl:E_,removeAnyOfMatcherUrl:b_,setAnyOfMatcherUrl:A_,getAllOfMatcherUrlAll:pf,addAllOfMatcherUrl:w_,removeAllOfMatcherUrl:__,setAllOfMatcherUrl:S_,getNoneOfMatcherUrlAll:yf,addNoneOfMatcherUrl:R_,removeNoneOfMatcherUrl:C_,setNoneOfMatcherUrl:x_,createResourceMatcherFor:mf,getResourceMatcher:hg,getResourceMatcherAll:F_,removeResourceMatcher:N_,setResourceMatcher:el},...{addMockAcrTo:Za,mockAcrFor:Js}},Eg=[O.agent,O.group];function tl(l,d,v){if(l.inaccessibleUrls.length>0)return null;const x=l.acrPolicies.filter(ke=>vf(ke,d,v,l)),L=l.policies.filter(ke=>vf(ke,d,v,l)),V={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},z=x.reduce((ke,ot)=>{const ft={...ke},Pt=qs(ot);return Pt.read&&(ft.controlRead=!0),Pt.write&&(ft.controlWrite=!0),ft},V),se=L.reduce((ke,ot)=>{const ft={...ke},Pt=qs(ot);return Pt.read&&(ft.read=!0),Pt.append&&(ft.append=!0),Pt.write&&(ft.write=!0),ft},z),Ie=x.reduce((ke,ot)=>{const ft={...ke},Pt=zs(ot);return Pt.read===!0&&(ft.controlRead=!1),Pt.write===!0&&(ft.controlWrite=!1),ft},se);return L.reduce((ke,ot)=>{const ft={...ke},Pt=zs(ot);return Pt.read===!0&&(ft.read=!1),Pt.append===!0&&(ft.append=!1),Pt.write===!0&&(ft.write=!1),ft},Ie)}function dT(l,d){return tl(l,O.agent,d)}function fT(l,d){return tl(l,O.group,d)}function hT(l){return tl(l,O.agent,O.PublicAgent)}function vf(l,d,v,x){const L=f(l,O.allow),V=f(l,O.deny);if(L.length+V.length===0)return!1;const z=Ws(l).map(Te=>x.rules.find(ke=>ar(ke)===Te)),se=Gs(l).map(Te=>x.rules.find(ke=>ar(ke)===Te)),Ie=Do(l).map(Te=>x.rules.find(ke=>ar(ke)===Te));return z.every(Te=>G_(Te,d,v))&&(se.length===0||se.some(Te=>G_(Te,d,v)))&&Ie.length===0}function W_(l,d){const v=f(l,O.allow),x=f(l,O.deny);return d.read===!0&&x.includes(O.Read)||d.read===!1&&v.includes(O.Read)&&!x.includes(O.Read)||d.append===!0&&x.includes(O.Append)||d.append===!1&&v.includes(O.Append)&&!x.includes(O.Append)||d.write===!0&&x.includes(O.Write)||d.write===!1&&v.includes(O.Write)&&!x.includes(O.Write)}function G_(l,d,v){let x=!0;return Eg.forEach(L=>{x&&(x=Zr(l,L)===null)}),x||f(l,d).includes(v)}function pT(l,d){const v=new Set;return l.rules.forEach(x=>{f(x,d).filter(L=>![O.PublicAgent,O.CreatorAgent,O.AuthenticatedAgent].includes(L)||d!==O.agent).forEach(L=>v.add(L))}),v}function q_(l,d){if(l.inaccessibleUrls.length>0)return null;const v={};return pT(l,d).forEach(L=>{const V=tl(l,d,L);v[L]=V}),v}function gT(l){return q_(l,O.group)}function yT(l){return q_(l,O.agent)}function bg(l,d,v,x,L){var V,z,se,Ie,Te;if(!xn(l)||d.inaccessibleUrls.length>0)return null;const ke=tl(d,v,x);if(ke===null)return null;const ot=d.acrPolicies.filter(ur=>vf(ur,v,x,d)),ft=d.policies.filter(ur=>vf(ur,v,x,d)),Pt=ot.filter(ur=>W_(ur,{read:L.controlRead,write:L.controlWrite})),mr=ft.filter(ur=>W_(ur,{read:L.read,append:L.append,write:L.write})),jr=Pt.filter(ur=>z_(ur,v,x,d)),Dr=mr.filter(ur=>z_(ur,v,x,d)),eo={...d,acrPolicies:d.acrPolicies.filter(ur=>!jr.includes(ur)),policies:d.policies.filter(ur=>!Dr.includes(ur))},un=tl(eo,v,x);if(un===null)return null;let or=l;jr.forEach(ur=>{const[tn,Ys]=J_(ur,l,d,v,x);or=Xa(or,tn),or=Ys.reduce(ja,or)}),Dr.forEach(ur=>{const[tn,Ys]=J_(ur,l,d,v,x);or=Ya(or,tn),or=Ys.reduce(ja,or)});const mi=`rule_${encodeURIComponent(`${v}_${x}`)}`;let jn=Bd(l,mi);jn=hn(jn,v,x);const xi=(V=L.controlRead)!==null&&V!==void 0?V:ke.controlRead,Lo=(z=L.controlWrite)!==null&&z!==void 0?z:ke.controlWrite;let Qs=jr;if(xi!==un.controlRead||Lo!==un.controlWrite){const ur=u.v4();let tn=Ro(l,ur);tn=Qa(tn,{read:xi===!0,append:!1,write:Lo===!0}),tn=Xe(tn,O.allOf,jn),or=Xa(or,tn),or=ja(or,jn),Qs=Pt}const Uo=(se=L.read)!==null&&se!==void 0?se:ke.read,fu=(Ie=L.append)!==null&&Ie!==void 0?Ie:ke.append,hu=(Te=L.write)!==null&&Te!==void 0?Te:ke.write;let pu=Dr;if(Uo!==un.read||fu!==un.append||hu!==un.write){const ur=u.v4();let tn=Ro(l,ur);tn=Qa(tn,{read:Uo===!0,append:fu===!0,write:hu===!0}),tn=Xe(tn,O.allOf,jn),or=Ya(or,tn),or=ja(or,jn),pu=mr}return Qs.forEach(ur=>{or=Vs(or,ar(ur))}),pu.forEach(ur=>{or=Fa(or,ar(ur))}),or}function mT(l,d,v,x){return bg(l,d,O.agent,v,x)}function vT(l,d,v,x){return bg(l,d,O.group,v,x)}function wT(l,d,v){return bg(l,d,O.agent,O.PublicAgent,v)}function z_(l,d,v,x){const V=f(l,O.allOf).map(ke=>x.rules.find(ot=>ar(ot)===ke)).some(ke=>Ag(ke,d,v)),se=f(l,O.anyOf).map(ke=>x.rules.find(ot=>ar(ot)===ke)).some(ke=>Ag(ke,d,v)),Te=f(l,O.noneOf).map(ke=>x.rules.find(ot=>ar(ot)===ke)).some(ke=>Ag(ke,d,v));return V||se||Te}function Ag(l,d,v){const x=[];return Eg.forEach(L=>{const V=f(l,L).filter(z=>z!==v||L!==d);x.push(...V)}),x.length>0}function J_(l,d,v,x,L){const V=u.v4(),z=Rg(f(l,O.allOf),d,v,V,x,L),se=Rg(f(l,O.anyOf),d,v,V,x,L),Ie=Rg(f(l,O.noneOf),d,v,V,x,L);let Te=Ro(d,encodeURI(ar(l))+V);return f(l,O.allow).forEach(ke=>{Te=Xe(Te,O.allow,ke)}),f(l,O.deny).forEach(ke=>{Te=Xe(Te,O.deny,ke)}),z.forEach(ke=>{Te=Xe(Te,O.allOf,ke)}),se.forEach(ke=>{Te=Xe(Te,O.anyOf,ke)}),Ie.forEach(ke=>{Te=Xe(Te,O.noneOf,ke)}),[Te,z.concat(se).concat(Ie)]}function Rg(l,d,v,x,L,V){return l.map(z=>{const se=v.rules.find(ke=>ar(ke)===z);if(typeof se>"u")return null;let Ie=Bd(d,encodeURI(ar(se))+x),Te=!1;return Eg.forEach(ke=>{f(se,ke).forEach(ot=>{ke===L&&ot===V||(Te=!0,Ie=Xe(Ie,ke,ot))})}),Te?Ie:null}).filter(wf)}function wf(l){return l!==null}async function ns(l,d=Q){const v=Ao(l),x=ko(l),L=Q_(v).concat(Q_(x)),V=await Y_(L,d),z=xg(v,V).filter(wf),se=xg(x,V).filter(wf),Ie=new Set;z.forEach(Dr=>{X_(Dr).forEach(un=>{Ie.add(un)})}),se.forEach(Dr=>{X_(Dr).forEach(un=>{Ie.add(un)})});const Te=Array.from(Ie),ot=Te.map(Dr=>Cg(Dr)).filter(Dr=>!L.includes(Dr)),ft=await Y_(ot,d),Pt={...V,...ft},mr=xg(Te,Pt).filter(wf);return{inaccessibleUrls:Object.keys(Pt).filter(Dr=>Pt[Dr]===null),acrPolicies:z,policies:se,rules:mr}}function Cg(l){const d=new URL(l);return d.hash="",d.href}function Q_(l){const d=[];return l.forEach(v=>{const x=Cg(v);d.includes(x)||d.push(x)}),d}async function Y_(l,d){const v=Array.from(new Set(l)),x={};return await Promise.all(v.map(async L=>{try{const V=await Fn(L,d);x[L]=V}catch{x[L]=null}})),x}function xg(l,d){return l.map(v=>{const x=Cg(v),L=d[x];return L?Wt(L,v):null})}function X_(l){return Ws(l).concat(Gs(l)).concat(Do(l))}function Z_(l,d){var v,x,L,V;if(l.controlRead!==l.controlWrite)throw new Error("For Pods using Web Access Control, controlRead and controlWrite must be equal.");return{read:(v=l.read)!==null&&v!==void 0?v:d.read,append:(x=l.append)!==null&&x!==void 0?x:d.append,write:(L=l.write)!==null&&L!==void 0?L:d.write,control:(V=l.controlRead)!==null&&V!==void 0?V:d.control}}function Pg(l){return{read:l.read,write:l.write,append:l.append,controlRead:l.control,controlWrite:l.control}}async function eS(l,d,v,x){const L=await bo(l,x),V=v(ji(l,L),d);return V===null?null:Pg(V)}async function _T(l,d,v){const x=await bo(l,v),L=d(ji(l,x));return L===null?null:Pg(L)}async function tS(l,d,v){const x=await bo(l,v),L=d(ji(l,x));if(L===null)return null;const V={};for(const[z,se]of Object.entries(L))V[z]=Pg(se);return V}function rl(l,d,v=Q){return eS(l,d,Vp,v)}function rS(l,d,v=Q){return eS(l,d,Kp,v)}function nl(l,d=Q){return _T(l,Wp,d)}function Tg(l,d=Q){return tS(l,dw,d)}function ST(l,d=Q){return tS(l,_w,d)}async function nS(l,d){if(!Cn(l))return null;const v=await bo(l,d),x=ji(l,v);let L;if(ts(x))L=TP(x);else if(rs(x))L=uw(x);else return null;return lw(x,L)}async function iS(l,d,v){let x=null;try{return x=await cw(l,d,v),lw(l,x)}catch{return null}}async function ET(l,d,v,x,L){const V=await nS(l,L);if(V===null)return null;const z=Yl(V),se=v(V),Ie=Z_(d,se),Te=x(z,Ie);return iS(V,Te,L)}async function oS(l,d,v,x,L,V){const z=await nS(l,V);if(z===null)return null;const se=x(z,d),Ie=Yl(z),Te=Z_(v,se),ke=L(Ie,d,Te);return iS(z,ke,V)}async function Ig(l,d,v,x=Q){return oS(l,d,v,Vp,pw,x)}async function bT(l,d,v,x=Q){return oS(l,d,v,Kp,xw,x)}async function Fg(l,d,v=Q){return ET(l,d,Wp,Iw,v)}var AT=Object.freeze({__proto__:null,getAccessFor:Og,getAccessForAll:Ng,getAgentAccess:_f,getAgentAccessAll:Lg,getGroupAccess:Sf,getGroupAccessAll:Ug,getPublicAccess:Ef,setAccessFor:kg,setAgentAccess:Dg,setGroupAccess:Mg,setPublicAccess:Bg});async function Og(l,d,v=Q,x=Q){if(d==="agent"){if(typeof v!="string")throw new Error("When reading Agent-specific access, the given agent cannot be left undefined.");return _f(l,v,x)}if(d==="group"){if(typeof v!="string")throw new Error("When reading Group-specific access, the given group cannot be left undefined.");return Sf(l,v,x)}if(d==="public"){if(typeof v=="string")throw new Error(`When reading public access, no actor type should be specified (here [${v}]).`);return Ef(l,v)}return null}async function Ng(l,d,v=Q){return d==="agent"?Lg(l,v):d==="group"?Ug(l,v):null}async function kg(l,d,v,x=Q,L=Q){if(d==="agent"){if(typeof x!="string")throw new Error("When writing Agent-specific access, the given agent cannot be left undefined.");return Dg(l,x,v,L)}if(d==="group"){if(typeof x!="string")throw new Error("When writing Group-specific access, the given group cannot be left undefined.");return Mg(l,x,v,L)}if(d==="public"){if(typeof x=="string")throw new Error(`When writing public access, no actor type should be specified (here [${x}]).`);return Bg(l,v,x)}return null}async function _f(l,d,v=Q){const x=await qn(l,v);if(xn(x)){const L=await ns(x,v);return dT(L,d)}return Cn(x)?rl(x,d,v):null}async function Dg(l,d,v,x=Q){const L=await qn(l,x);if(xn(L)){const V=await ns(L,x),z=mT(L,V,d,v);if(z)try{return await Hi(z,x),await _f(l,d,x)}catch{return null}return null}if(Cn(L)){if(v.controlRead!==v.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${we(L)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await Ig(L,d,v,x),rl(L,d,x)}return null}async function Lg(l,d=Q){const v=await qn(l,d);if(xn(v)){const x=await ns(v,d);return yT(x)}return Cn(v)?Tg(v,d):null}async function Sf(l,d,v=Q){const x=await qn(l,v);if(xn(x)){const L=await ns(x,v);return fT(L,d)}return Cn(x)?rS(x,d,v):null}async function Ug(l,d=Q){const v=await qn(l,d);if(xn(v)){const x=await ns(v,d);return gT(x)}return Cn(v)?ST(v,d):null}async function Mg(l,d,v,x=Q){const L=await qn(l,x);if(xn(L)){const V=await ns(L,x),z=vT(L,V,d,v);if(z)try{return await Hi(z,x),await Sf(l,d,x)}catch{return null}return null}if(Cn(L)){if(v.controlRead!==v.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${we(L)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await bT(L,d,v,x),rS(L,d,x)}return null}async function Ef(l,d=Q){const v=await qn(l,d);if(xn(v)){const x=await ns(v,d);return hT(x)}return Cn(v)?nl(v,d):null}async function Bg(l,d,v=Q){const x=await qn(l,v);if(xn(x)){const L=await ns(x,v),V=wT(x,L,d);if(V)try{return await Hi(V,v),await Ef(l,v)}catch{return null}return null}if(Cn(x)){if(d.controlRead!==d.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${we(x)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await Fg(x,d,v),nl(x,v)}return null}var RT=Object.freeze({__proto__:null,getAccessFor:Og,getAccessForAll:Ng,getAgentAccess:_f,getAgentAccessAll:Lg,getGroupAccess:Sf,getGroupAccessAll:Ug,getPublicAccess:Ef,setAccessFor:kg,setAgentAccess:Dg,setGroupAccess:Mg,setPublicAccess:Bg});const sS=[O.agent];function lu(l,d,v){if(l.inaccessibleUrls.length>0)return null;const x=l.acrPolicies.filter(ke=>bf(ke,d,v,l)),L=l.policies.filter(ke=>bf(ke,d,v,l)),V={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},z=x.reduce((ke,ot)=>{const ft={...ke},Pt=rf(ot);return Pt.read&&(ft.controlRead=!0),Pt.write&&(ft.controlWrite=!0),ft},V),se=L.reduce((ke,ot)=>{const ft={...ke},Pt=rf(ot);return Pt.read&&(ft.read=!0),Pt.append&&(ft.append=!0),Pt.write&&(ft.write=!0),ft},z),Ie=x.reduce((ke,ot)=>{const ft={...ke},Pt=of(ot);return Pt.read===!0&&(ft.controlRead=!1),Pt.write===!0&&(ft.controlWrite=!1),ft},se);return L.reduce((ke,ot)=>{const ft={...ke},Pt=of(ot);return Pt.read===!0&&(ft.read=!1),Pt.append===!0&&(ft.append=!1),Pt.write===!0&&(ft.write=!1),ft},Ie)}function CT(l,d){return lu(l,O.agent,d)}function xT(l){return lu(l,O.agent,O.PublicAgent)}function bf(l,d,v,x){const L=f(l,O.allow),V=f(l,O.deny);if(L.length+V.length===0)return!1;const z=pf(l).map(Te=>x.matchers.find(ke=>ar(ke)===Te)),se=gf(l).map(Te=>x.matchers.find(ke=>ar(ke)===Te)),Ie=yf(l).map(Te=>x.matchers.find(ke=>ar(ke)===Te));return z.every(Te=>lS(Te,d,v))&&(se.length===0||se.some(Te=>lS(Te,d,v)))&&z.length+se.length>0&&Ie.length===0}function aS(l,d){const v=f(l,O.allow),x=f(l,O.deny);return d.read===!0&&x.includes(Yr.read)||d.read===!1&&v.includes(Yr.read)&&!x.includes(Yr.read)||d.append===!0&&x.includes(Yr.append)||d.append===!1&&v.includes(Yr.append)&&!x.includes(Yr.append)||d.write===!0&&x.includes(Yr.write)||d.write===!1&&v.includes(Yr.write)&&!x.includes(Yr.write)}function lS(l,d,v){return f(l,d).includes(v)}function PT(l,d){const v=new Set;return l.matchers.forEach(x=>{f(x,d).filter(L=>![O.PublicAgent,O.CreatorAgent,O.AuthenticatedAgent].includes(L)||d!==O.agent).forEach(L=>v.add(L))}),v}function TT(l,d){if(l.inaccessibleUrls.length>0)return null;const v={};return PT(l,d).forEach(L=>{const V=lu(l,d,L);v[L]=V}),v}function IT(l){return TT(l,O.agent)}function uS(l,d,v,x,L){var V,z,se,Ie,Te;if(!xn(l)||d.inaccessibleUrls.length>0)return null;const ke=lu(d,v,x);if(ke===null)return null;const ot=d.acrPolicies.filter(ur=>bf(ur,v,x,d)),ft=d.policies.filter(ur=>bf(ur,v,x,d)),Pt=ot.filter(ur=>aS(ur,{read:L.controlRead,write:L.controlWrite})),mr=ft.filter(ur=>aS(ur,{read:L.read,append:L.append,write:L.write})),jr=Pt.filter(ur=>cS(ur,v,x,d)),Dr=mr.filter(ur=>cS(ur,v,x,d)),eo={...d,acrPolicies:d.acrPolicies.filter(ur=>!jr.includes(ur)),policies:d.policies.filter(ur=>!Dr.includes(ur))},un=lu(eo,v,x);if(un===null)return null;let or=l;jr.forEach(ur=>{const[tn,Ys]=dS(ur,l,d,v,x);or=Xa(or,tn),or=Ys.reduce(el,or)}),Dr.forEach(ur=>{const[tn,Ys]=dS(ur,l,d,v,x);or=Ya(or,tn),or=Ys.reduce(el,or)});const mi=`matcher_${encodeURIComponent(`${v}_${x}`)}`;let jn=mf(l,mi);jn=hn(jn,v,x);const xi=(V=L.controlRead)!==null&&V!==void 0?V:ke.controlRead,Lo=(z=L.controlWrite)!==null&&z!==void 0?z:ke.controlWrite;let Qs=jr;if(xi!==un.controlRead||Lo!==un.controlWrite){const ur=u.v4();let tn=Ro(l,ur);tn=tf(tn,{read:xi===!0,append:!1,write:Lo===!0}),tn=Xe(tn,O.allOf,jn),or=Xa(or,tn),or=el(or,jn),Qs=Pt}const Uo=(se=L.read)!==null&&se!==void 0?se:ke.read,fu=(Ie=L.append)!==null&&Ie!==void 0?Ie:ke.append,hu=(Te=L.write)!==null&&Te!==void 0?Te:ke.write;let pu=Dr;if(Uo!==un.read||fu!==un.append||hu!==un.write){const ur=u.v4();let tn=Ro(l,ur);tn=tf(tn,{read:Uo===!0,append:fu===!0,write:hu===!0}),tn=Xe(tn,O.allOf,jn),or=Ya(or,tn),or=el(or,jn),pu=mr}return Qs.forEach(ur=>{or=Vs(or,ar(ur))}),pu.forEach(ur=>{or=Fa(or,ar(ur))}),or}function FT(l,d,v,x){return uS(l,d,O.agent,v,x)}function OT(l,d,v){return uS(l,d,O.agent,O.PublicAgent,v)}function cS(l,d,v,x){const V=f(l,O.allOf).map(ke=>x.matchers.find(ot=>ar(ot)===ke)).some(ke=>jg(ke,d,v)),se=f(l,O.anyOf).map(ke=>x.matchers.find(ot=>ar(ot)===ke)).some(ke=>jg(ke,d,v)),Te=f(l,O.noneOf).map(ke=>x.matchers.find(ot=>ar(ot)===ke)).some(ke=>jg(ke,d,v));return V||se||Te}function jg(l,d,v){const x=[];return sS.forEach(L=>{const V=f(l,L).filter(z=>z!==v||L!==d);x.push(...V)}),x.length>0}function dS(l,d,v,x,L){const V=u.v4(),z=Hg(f(l,O.allOf),d,v,V,x,L),se=Hg(f(l,O.anyOf),d,v,V,x,L),Ie=Hg(f(l,O.noneOf),d,v,V,x,L);let Te=Ro(d,encodeURI(ar(l))+V);return f(l,O.allow).forEach(ke=>{Te=Xe(Te,O.allow,ke)}),f(l,O.deny).forEach(ke=>{Te=Xe(Te,O.deny,ke)}),z.forEach(ke=>{Te=Xe(Te,O.allOf,ke)}),se.forEach(ke=>{Te=Xe(Te,O.anyOf,ke)}),Ie.forEach(ke=>{Te=Xe(Te,O.noneOf,ke)}),[Te,z.concat(se).concat(Ie)]}function Hg(l,d,v,x,L,V){return l.map(z=>{const se=v.matchers.find(ke=>ar(ke)===z);if(typeof se>"u")return null;let Ie=mf(d,encodeURI(ar(se))+x),Te=!1;return sS.forEach(ke=>{f(se,ke).forEach(ot=>{ke===L&&ot===V||(Te=!0,Ie=Xe(Ie,ke,ot))})}),Te?Ie:null}).filter(Af)}function Af(l){return l!==null}async function uu(l,d=Q){const v=Ao(l),x=ko(l),L=fS(v).concat(fS(x)),V=await hS(L,d),z=Vg(v,V).filter(Af),se=Vg(x,V).filter(Af),Ie=new Set;z.forEach(Dr=>{pS(Dr).forEach(un=>{Ie.add(un)})}),se.forEach(Dr=>{pS(Dr).forEach(un=>{Ie.add(un)})});const Te=Array.from(Ie),ot=Te.map(Dr=>$g(Dr)).filter(Dr=>!L.includes(Dr)),ft=await hS(ot,d),Pt={...V,...ft},mr=Vg(Te,Pt).filter(Af);return{inaccessibleUrls:Object.keys(Pt).filter(Dr=>Pt[Dr]===null),acrPolicies:z,policies:se,matchers:mr}}function $g(l){const d=new URL(l);return d.hash="",d.href}function fS(l){const d=[];return l.forEach(v=>{const x=$g(v);d.includes(x)||d.push(x)}),d}async function hS(l,d){const v=Array.from(new Set(l)),x={};return await Promise.all(v.map(async L=>{try{const V=await Fn(L,d);x[L]=V}catch{x[L]=null}})),x}function Vg(l,d){return l.map(v=>{const x=$g(v),L=d[x];return L?Wt(L,v):null})}function pS(l){return pf(l).concat(gf(l)).concat(yf(l))}async function gS(l,d,v=Q){const x=await qn(l,v);if(xn(x)){const L=await uu(x,v);return CT(L,d)}return Cn(x)?rl(x,d,v):null}async function NT(l,d,v,x=Q){const L=await qn(l,x);if(xn(L)){const V=await uu(L,x),z=FT(L,V,d,v);if(z)try{return await Hi(z,x),await gS(l,d,x)}catch{return null}return null}if(Cn(L)){if(v.controlRead!==v.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${we(L)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await Ig(L,d,v,x),rl(L,d,x)}return null}async function kT(l,d=Q){const v=await qn(l,d);if(xn(v)){const x=await uu(v,d);return IT(x)}return Cn(v)?Tg(v,d):null}async function yS(l,d=Q){const v=await qn(l,d);if(xn(v)){const x=await uu(v,d);return xT(x)}return Cn(v)?nl(v,d):null}async function DT(l,d,v=Q){const x=await qn(l,v);if(xn(x)){const L=await uu(x,v),V=OT(x,L,d);if(V)try{return await Hi(V,v),await yS(l,v)}catch{return null}return null}if(Cn(x)){if(d.controlRead!==d.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${we(x)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await Fg(x,d,v),nl(x,v)}return null}var LT=Object.freeze({__proto__:null,getAccessFor:Og,getAccessForAll:Ng,getAgentAccess:gS,getAgentAccessAll:kT,getPublicAccess:yS,setAccessFor:kg,setAgentAccess:NT,setPublicAccess:DT});async function mS(l,d){return typeof l.internal_resourceInfo.aclUrl=="string"?De(l.internal_resourceInfo.aclUrl,d):null}function UT(l){return xd(l,br.allow)}function MT(l){return xd(l,br.deny)}function vS(l,d,v){const x=en(d,br.allOf).map(Te=>Wt(Rr(l),Te)).filter(Te=>Te!==null),L=x.every(Te=>en(Te,br.agent).includes(v)),V=en(d,br.anyOf).map(Te=>Wt(Rr(l),Te)).filter(Te=>Te!==null),z=V.some(Te=>en(Te,br.agent).includes(v)),se=en(d,br.noneOf).map(Te=>Wt(Rr(l),Te)).filter(Te=>Te!==null),Ie=se.some(Te=>en(Te,br.agent).includes(v));return x.length+V.length>0&&(x.length===0||L)&&(V.length===0||z)&&(se.length===0||!Ie)}function wS(l,d,v){const x=UT(l),L=MT(l);return v==="control"?{read:d.read,append:d.append,write:d.write,controlRead:(d.controlRead||x.read)&&!L.read,controlWrite:(d.controlWrite||x.write)&&!L.write}:{read:(d.read||x.read)&&!L.read,append:(d.append||x.append)&&!L.append,write:(d.write||x.write)&&!L.write,controlRead:d.controlRead,controlWrite:d.controlWrite}}async function Rf(l,d){let v={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1};return fg(l).map(V=>Wt(Rr(l),V)).filter(V=>V!==null).forEach(V=>{vS(l,V,d)&&(v=wS(V,v,"resource"))}),dg(l).map(V=>Wt(Rr(l),V)).filter(V=>V!==null).forEach(V=>{vS(l,V,d)&&(v=wS(V,v,"control"))}),v}function BT(l){const d=l.internal_resourceInfo.linkedResources[br.accessControl];return Array.isArray(d)&&d.length===1?d[0]:null}async function jT(l,d){const v=BT(l);if(v!==null)return v;const x=await mS(l,d);if(x===null)return null;const L=We(x).type;return Array.isArray(L)&&L.includes(br.AccessControlResource)?$e(x):null}async function cu(l,d){const v=await jT(l,d);if(v===null)return null;let x;try{x=await Fn(v,d)}catch{return null}return{...l,internal_acp:{acr:{...x,accessTo:$e(l)}}}}async function _S(l,d,v){const x=await De(l,v),L=await cu(x,v);return L===null?rl(x,d,v):Rf(L,d)}function HT(l){return Array.from(new Set(Ur(Rr(l)).map(d=>en(d,br.agent)).reduce((d,v)=>d.concat(v),[])))}async function $T(l){return(await Promise.all(HT(l).map(async d=>({[d]:await Rf(l,d)})))).reduce((d,v)=>({...d,...v}),{})}async function VT(l,d){const v=await De(l,d),x=await cu(v,d);return x===null?Tg(v,d):$T(x)}async function KT(l){return Rf(l,br.PublicAgent)}async function SS(l,d){const v=await De(l,d),x=await cu(v,d);return x===null?nl(v,d):KT(x)}function Kg(l,d,v){return Xp(l,d).concat("AgentMatcher").concat(v.charAt(0).toUpperCase()+v.slice(1)).concat("Policy")}function WT(l,d,v){const x=Kg(l,d,v);return x.includes("Acr")?ug(l,x):cg(l,x)}function ES(l,d,v){return Kg(l,d,v).concat("Matcher")}const bS=br.anyOf;function GT(l,d,v){const x=Kg(l,d,v),L=ES(l,d,v);let V=Wt(Rr(l),x);return V||(l=WT(l,d,v),V=Lr({url:x}),V=Gw(V,{[v]:!0},br.allow)),f(V,bS).includes(L)?l:(V=yi(V).addUrl(bS,L).build(),Zi(l,V))}function du(l,d,v,x,L){var V;const z=ES(l,v,x),se=GT(l,v,x),Ie=(V=Wt(Rr(se),z))!==null&&V!==void 0?V:Lr({url:z});return Zi(se,L==="add"?pg(Ie,d):gg(Ie,d))}async function AS(l,d,v){const x=await Rf(l,d);return typeof v.read=="boolean"&&x.read!==v.read&&(l=du(l,d,Na,"read",v.read?"add":"remove")),typeof v.append=="boolean"&&x.append!==v.append&&(l=du(l,d,Na,"append",v.append?"add":"remove")),typeof v.write=="boolean"&&x.write!==v.write&&(l=du(l,d,Na,"write",v.write?"add":"remove")),typeof v.controlRead=="boolean"&&x.controlRead!==v.controlRead&&(l=du(l,d,nu,"controlRead",v.controlRead?"add":"remove")),typeof v.controlWrite=="boolean"&&x.controlWrite!==v.controlWrite&&(l=du(l,d,nu,"controlWrite",v.controlWrite?"add":"remove")),l}async function qT(l,d,v,x){const L=await De(l,x),V=await cu(L,x);if(V===null)return await Ig(L,d,v,x),rl(L,d,x);try{return await Hi(await AS(V,d,v),x),await _S(l,d,x)}catch{return null}}async function zT(l,d){return AS(l,br.PublicAgent,d)}async function JT(l,d,v){const x=await De(l,v),L=await cu(x,v);if(L===null)return await Fg(x,d,v),nl(x,v);try{return await Hi(await zT(L,d),v),await SS(l,v)}catch{return null}}var QT=Object.freeze({__proto__:null,getAclServerResourceInfo:mS,getAgentAccess:_S,getAgentAccessAll:VT,getPublicAccess:SS,setAgentAccess:qT,setPublicAccess:JT}),YT=Object.freeze({__proto__:null,acrAsMarkdown:Jp,addAcrPolicyUrl:Xl,addAgent:Wd,addAllOfRuleUrl:Td,addAnyOfRuleUrl:Od,addClient:e_,addGroup:zd,addMemberAcrPolicyUrl:bd,addMemberPolicyUrl:qp,addMockAcrTo:Za,addNoneOfRuleUrl:Dd,addPolicyUrl:Rd,createPolicy:Wa,createResourcePolicyFor:Ro,createResourceRuleFor:Bd,createRule:Md,getAcrPolicyUrlAll:Ao,getAgentAll:iu,getAllOfRuleUrlAll:Ws,getAllowModes:qs,getAnyOfRuleUrlAll:Gs,getClientAll:ag,getDenyModes:zs,getFileWithAccessDatasets:Ua,getFileWithAcr:Da,getGroupAll:ou,getLinkedAcrUrl:tg,getMemberAcrPolicyUrlAll:Pa,getMemberPolicyUrlAll:Zl,getNoneOfRuleUrlAll:Do,getPolicy:Ga,getPolicyAll:qa,getPolicyUrlAll:ko,getReferencedPolicyUrlAll:Ba,getResourceAcrPolicy:au,getResourceAcrPolicyAll:af,getResourceInfoWithAccessDatasets:Ma,getResourceInfoWithAcr:qn,getResourcePolicy:su,getResourcePolicyAll:sf,getResourceRule:ng,getResourceRuleAll:Yw,getRule:jd,getRuleAll:Hd,getSolidDatasetWithAccessDatasets:La,getSolidDatasetWithAcr:ka,hasAccessibleAcr:xn,hasAnyClient:Zd,hasAuthenticated:$a,hasCreator:Va,hasLinkedAcr:$s,hasPublic:Ha,isAcpControlled:Pd,mockAcrFor:Js,policyAsMarkdown:cf,removeAcrPolicyUrl:Vs,removeAcrPolicyUrlAll:Ta,removeAgent:Gd,removeAllOfRuleUrl:Id,removeAnyClient:r_,removeAnyOfRuleUrl:Nd,removeAuthenticated:og,removeClient:t_,removeCreator:sg,removeGroup:Jd,removeMemberAcrPolicyUrl:Ad,removeMemberAcrPolicyUrlAll:Ia,removeMemberPolicyUrl:zp,removeMemberPolicyUrlAll:tu,removeNoneOfRuleUrl:Ld,removePolicy:za,removePolicyUrl:Fa,removePolicyUrlAll:eu,removePublic:ig,removeResourceAcrPolicy:uf,removeResourcePolicy:lf,removeResourceRule:Xw,removeRule:$d,ruleAsMarkdown:ef,saveAcrFor:Hi,setAgent:Kd,setAllOfRuleUrl:Fd,setAllowModes:Qa,setAnyClient:lg,setAnyOfRuleUrl:kd,setAuthenticated:Yd,setClient:Zw,setCreator:Xd,setDenyModes:nf,setGroup:qd,setNoneOfRuleUrl:Ud,setPolicy:Ja,setPublic:Qd,setResourceAcrPolicy:Xa,setResourcePolicy:Ya,setResourceRule:ja,setRule:Vd}),XT=Object.freeze({__proto__:null,addAcrPolicyUrl:ug,addAgent:pg,addAllOfMatcherUrl:w_,addAnyOfMatcherUrl:E_,addClient:H_,addMemberAcrPolicyUrl:l_,addMemberPolicyUrl:u_,addMockAcrTo:Za,addNoneOfMatcherUrl:R_,addPolicyUrl:cg,createMatcher:P_,createPolicy:Wa,createResourceMatcherFor:mf,createResourcePolicyFor:Ro,getAcrPolicyUrlAll:dg,getAgentAll:D_,getAllOfMatcherUrlAll:pf,getAllowModes:rf,getAnyOfMatcherUrlAll:gf,getClientAll:j_,getDenyModes:of,getFileWithAccessDatasets:Ua,getFileWithAcr:Da,getLinkedAcrUrl:tg,getMatcher:T_,getMatcherAll:I_,getMemberAcrPolicyUrlAll:f_,getMemberPolicyUrlAll:h_,getNoneOfMatcherUrlAll:yf,getPolicy:Ga,getPolicyAll:qa,getPolicyUrlAll:fg,getReferencedPolicyUrlAll:Ba,getResourceAcrPolicy:au,getResourceAcrPolicyAll:af,getResourceInfoWithAccessDatasets:Ma,getResourceInfoWithAcr:qn,getResourceMatcher:hg,getResourceMatcherAll:F_,getResourcePolicy:su,getResourcePolicyAll:sf,getSolidDatasetWithAccessDatasets:La,getSolidDatasetWithAcr:ka,getVcAccess:Qw,hasAccessibleAcr:xn,hasAuthenticated:vg,hasCreator:_g,hasLinkedAcr:$s,hasPublic:yg,isAcpControlled:Pd,mockAcrFor:Js,removeAcrPolicyUrl:p_,removeAcrPolicyUrlAll:Ta,removeAgent:gg,removeAllOfMatcherUrl:__,removeAnyOfMatcherUrl:b_,removeAuthenticated:M_,removeClient:$_,removeCreator:B_,removeMatcher:O_,removeMemberAcrPolicyUrl:g_,removeMemberAcrPolicyUrlAll:Ia,removeMemberPolicyUrl:y_,removeMemberPolicyUrlAll:tu,removeNoneOfMatcherUrl:C_,removePolicy:za,removePolicyUrl:m_,removePolicyUrlAll:eu,removePublic:U_,removeResourceAcrPolicy:uf,removeResourceMatcher:N_,removeResourcePolicy:lf,saveAcrFor:Hi,setAgent:L_,setAllOfMatcherUrl:S_,setAllowModes:tf,setAnyOfMatcherUrl:A_,setAuthenticated:wg,setCreator:Sg,setDenyModes:n_,setMatcher:k_,setNoneOfMatcherUrl:x_,setPolicy:Ja,setPublic:mg,setResourceMatcher:el,setResourcePolicy:v_,setVcAccess:Jw});const{getJsonLdParser:ZT,getTurtleParser:eI,solidDatasetAsTurtle:tI}=Ct;return Le.FetchError=Et,Le.SolidClientError=y,Le.ThingExpectedError=uo,Le.access=AT,Le.access_v1=RT,Le.access_v2=LT,Le.acp_ess_1=YT,Le.acp_ess_2=XT,Le.acp_v1=oT,Le.acp_v2=iT,Le.acp_v3=aT,Le.acp_v4=cT,Le.addBoolean=gr,Le.addDate=lr,Le.addDatetime=Nr,Le.addDecimal=Vr,Le.addInteger=_r,Le.addIri=Xe,Le.addJwkToJwks=kw,Le.addLiteral=kr,Le.addMockFallbackAclTo=$P,Le.addMockResourceAclTo=HP,Le.addNamedNode=rr,Le.addPublicKeyToProfileJwks=WP,Le.addStringEnglish=Gr,Le.addStringNoLocale=Jr,Le.addStringWithLocale=Fr,Le.addTerm=mn,Le.addTime=fr,Le.addUrl=pr,Le.asIri=ar,Le.asUrl=$r,Le.buildThing=yi,Le.changeLogAsMarkdown=Ze,Le.createAcl=Ed,Le.createAclFromFallbackAcl=uw,Le.createContainerAt=q,Le.createContainerInContainer=le,Le.createSolidDataset=Dn,Le.createThing=Lr,Le.deleteAclFor=kP,Le.deleteContainer=xe,Le.deleteFile=Hr,Le.deleteSolidDataset=N,Le.fromRdfJsDataset=xt,Le.getAgentAccess=Vp,Le.getAgentAccessAll=dw,Le.getAgentDefaultAccess=gw,Le.getAgentDefaultAccessAll=yw,Le.getAgentResourceAccess=fw,Le.getAgentResourceAccessAll=hw,Le.getAltProfileUrlAllFrom=Dw,Le.getBoolean=g,Le.getBooleanAll=w,Le.getContainedResourceUrlAll=Ye,Le.getContentType=Ve,Le.getDate=W,Le.getDateAll=Y,Le.getDatetime=A,Le.getDatetimeAll=M,Le.getDecimal=ce,Le.getDecimalAll=he,Le.getEffectiveAccess=et,Le.getFallbackAcl=$p,Le.getFile=sr,Le.getFileWithAcl=OP,Le.getGroupAccess=Kp,Le.getGroupAccessAll=_w,Le.getGroupDefaultAccess=bw,Le.getGroupDefaultAccessAll=Aw,Le.getGroupResourceAccess=Sw,Le.getGroupResourceAccessAll=Ew,Le.getInteger=ye,Le.getIntegerAll=Ae,Le.getIri=Zr,Le.getIriAll=f,Le.getJsonLdParser=ZT,Le.getLinkedResourceUrlAll=We,Le.getLiteral=Je,Le.getLiteralAll=Ut,Le.getNamedNode=be,Le.getNamedNodeAll=He,Le.getPodOwner=Oe,Le.getPodUrlAll=GP,Le.getPodUrlAllFrom=Uw,Le.getProfileAll=Lw,Le.getProfileJwksIri=Nw,Le.getPropertyAll=Kn,Le.getPublicAccess=Wp,Le.getPublicDefaultAccess=Tw,Le.getPublicResourceAccess=Pw,Le.getResourceAcl=Yl,Le.getResourceInfo=De,Le.getResourceInfoWithAcl=NP,Le.getSolidDataset=Fn,Le.getSolidDatasetWithAcl=FP,Le.getSourceIri=we,Le.getSourceUrl=$e,Le.getStringByLocaleAll=X,Le.getStringEnglish=Fe,Le.getStringEnglishAll=Ge,Le.getStringNoLocale=pe,Le.getStringNoLocaleAll=ve,Le.getStringWithLocale=Ue,Le.getStringWithLocaleAll=ze,Le.getTerm=at,Le.getTermAll=Ir,Le.getThing=Wt,Le.getThingAll=Ur,Le.getTime=ue,Le.getTimeAll=ie,Le.getTurtleParser=eI,Le.getUrl=Wn,Le.getUrlAll=en,Le.getWebIdDataset=qP,Le.getWellKnownSolid=Lt,Le.hasAccessibleAcl=Cn,Le.hasAcl=IP,Le.hasFallbackAcl=rs,Le.hasResourceAcl=ts,Le.hasResourceInfo=h,Le.hasServerResourceInfo=c,Le.isContainer=Ce,Le.isPodOwner=me,Le.isRawData=Be,Le.isThing=gn,Le.isThingLocal=yn,Le.mockContainerFrom=Cr,Le.mockFetchError=Rt,Le.mockFileFrom=nr,Le.mockSolidDatasetFrom=tr,Le.mockThingFrom=Sd,Le.overwriteFile=Mt,Le.removeAll=It,Le.removeBoolean=Xn,Le.removeDate=fo,Le.removeDatetime=Ln,Le.removeDecimal=Gl,Le.removeInteger=Aa,Le.removeIri=yr,Le.removeLiteral=Ls,Le.removeNamedNode=zl,Le.removeStringEnglish=jp,Le.removeStringNoLocale=ql,Le.removeStringWithLocale=Eo,Le.removeThing=fn,Le.removeTime=Ji,Le.removeUrl=sn,Le.responseToResourceInfo=ae,Le.responseToSolidDataset=ni,Le.saveAclFor=cw,Le.saveFileInContainer=ir,Le.saveSolidDatasetAt=Bi,Le.saveSolidDatasetInContainer=Re,Le.setAgentDefaultAccess=DP,Le.setAgentResourceAccess=pw,Le.setBoolean=yd,Le.setDate=gi,Le.setDatetime=md,Le.setDecimal=vd,Le.setGroupDefaultAccess=UP,Le.setGroupResourceAccess=xw,Le.setInteger=Us,Le.setIri=hn,Le.setLiteral=_d,Le.setNamedNode=wd,Le.setProfileJwks=VP,Le.setPublicDefaultAccess=MP,Le.setPublicResourceAccess=Iw,Le.setStringNoLocale=Jl,Le.setStringWithLocale=An,Le.setTerm=Ms,Le.setThing=Sr,Le.setTime=Ra,Le.setUrl=Yi,Le.solidDatasetAsMarkdown=qe,Le.solidDatasetAsTurtle=tI,Le.thingAsMarkdown=En,Le.toRdfJsDataset=vr,Le.universalAccess=QT,Le}var dm={},Xs={},Xr={};const Tr=crypto,Li=e=>e instanceof CryptoKey,bx=async(e,t)=>{const r=`SHA-${e.slice(-3)}`;return new Uint8Array(await Tr.subtle.digest(r,t))},Bn=new TextEncoder,ao=new TextDecoder,Yh=2**32;function Fo(...e){const t=e.reduce((o,{length:a})=>o+a,0),r=new Uint8Array(t);let n=0;return e.forEach(o=>{r.set(o,n),n+=o.length}),r}function ck(e,t){return Fo(Bn.encode(e),new Uint8Array([0]),t)}function m0(e,t,r){if(t<0||t>=Yh)throw new RangeError(`value must be >= 0 and <= ${Yh-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,t&255],r)}function Ax(e){const t=Math.floor(e/Yh),r=e%Yh,n=new Uint8Array(8);return m0(n,t,0),m0(n,r,4),n}function Lv(e){const t=new Uint8Array(4);return m0(t,e),t}function fm(e){return Fo(Lv(e.length),e)}async function dk(e,t,r){const n=Math.ceil((t>>3)/32),o=new Uint8Array(n*32);for(let a=0;a<n;a++){const s=new Uint8Array(4+e.length+r.length);s.set(Lv(a+1)),s.set(e,4),s.set(r,4+e.length),o.set(await bx("sha256",s),a*32)}return o.slice(0,t>>3)}const Uv=e=>{let t=e;typeof t=="string"&&(t=Bn.encode(t));const r=32768,n=[];for(let o=0;o<t.length;o+=r)n.push(String.fromCharCode.apply(null,t.subarray(o,o+r)));return btoa(n.join(""))},Hn=e=>Uv(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),Rx=e=>{const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r},Jn=e=>{let t=e;t instanceof Uint8Array&&(t=ao.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Rx(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class li extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var r;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,this.constructor)}}class Pi extends li{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(t,r="unspecified",n="unspecified"){super(t),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=n}}class v0 extends li{static get code(){return"ERR_JWT_EXPIRED"}constructor(t,r="unspecified",n="unspecified"){super(t),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=n}}class Xh extends li{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class zr extends li{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class id extends li{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class cr extends li{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class pn extends li{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class Ti extends li{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class Cx extends li{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class Np extends li{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class Mv extends li{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class xx extends li{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class Px extends li{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class Bv extends li{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const fk=Object.freeze(Object.defineProperty({__proto__:null,JOSEAlgNotAllowed:Xh,JOSEError:li,JOSENotSupported:zr,JWEDecryptionFailed:id,JWEInvalid:cr,JWKInvalid:Cx,JWKSInvalid:Np,JWKSMultipleMatchingKeys:xx,JWKSNoMatchingKey:Mv,JWKSTimeout:Px,JWSInvalid:pn,JWSSignatureVerificationFailed:Bv,JWTClaimValidationFailed:Pi,JWTExpired:v0,JWTInvalid:Ti},Symbol.toStringTag,{value:"Module"})),kp=Tr.getRandomValues.bind(Tr);function Tx(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new zr(`Unsupported JWE Algorithm: ${e}`)}}const Ix=e=>kp(new Uint8Array(Tx(e)>>3)),Fx=(e,t)=>{if(t.length<<3!==Tx(e))throw new cr("Invalid Initialization Vector length")},Zh=(e,t)=>{const r=e.byteLength<<3;if(r!==t)throw new cr(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)},hk=(e,t)=>{if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(e.length!==t.length)throw new TypeError("Input buffers must have the same length");const r=e.length;let n=0,o=-1;for(;++o<r;)n|=e[o]^t[o];return n===0};function Vl(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}function Zn(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function $o(e,t){return e.name===t}function mh(e){return parseInt(e.name.slice(4),10)}function pk(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function Ox(e,t){if(t.length&&!t.some(r=>e.usages.includes(r))){let r="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const n=t.pop();r+=`one of ${t.join(", ")}, or ${n}.`}else t.length===2?r+=`one of ${t[0]} or ${t[1]}.`:r+=`${t[0]}.`;throw new TypeError(r)}}function gk(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!$o(e.algorithm,"HMAC"))throw Zn("HMAC");const n=parseInt(t.slice(2),10);if(mh(e.algorithm.hash)!==n)throw Zn(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!$o(e.algorithm,"RSASSA-PKCS1-v1_5"))throw Zn("RSASSA-PKCS1-v1_5");const n=parseInt(t.slice(2),10);if(mh(e.algorithm.hash)!==n)throw Zn(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!$o(e.algorithm,"RSA-PSS"))throw Zn("RSA-PSS");const n=parseInt(t.slice(2),10);if(mh(e.algorithm.hash)!==n)throw Zn(`SHA-${n}`,"algorithm.hash");break}case"EdDSA":{if(e.algorithm.name!=="Ed25519"&&e.algorithm.name!=="Ed448"){if(Vl()){if($o(e.algorithm,"NODE-ED25519"))break;throw Zn("Ed25519, Ed448, or NODE-ED25519")}throw Zn("Ed25519 or Ed448")}break}case"ES256":case"ES384":case"ES512":{if(!$o(e.algorithm,"ECDSA"))throw Zn("ECDSA");const n=pk(t);if(e.algorithm.namedCurve!==n)throw Zn(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}Ox(e,r)}function Ts(e,t,...r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!$o(e.algorithm,"AES-GCM"))throw Zn("AES-GCM");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw Zn(n,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!$o(e.algorithm,"AES-KW"))throw Zn("AES-KW");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw Zn(n,"algorithm.length");break}case"ECDH":{switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw Zn("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!$o(e.algorithm,"PBKDF2"))throw Zn("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!$o(e.algorithm,"RSA-OAEP"))throw Zn("RSA-OAEP");const n=parseInt(t.slice(9),10)||1;if(mh(e.algorithm.hash)!==n)throw Zn(`SHA-${n}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}Ox(e,r)}function Nx(e,t,...r){if(r.length>2){const n=r.pop();e+=`one of type ${r.join(", ")}, or ${n}.`}else r.length===2?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&t.constructor&&t.constructor.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const pi=(e,...t)=>Nx("Key must be ",e,...t);function kx(e,t,...r){return Nx(`Key for the ${e} algorithm must be `,t,...r)}const Dx=e=>Li(e),Nn=["CryptoKey"];async function yk(e,t,r,n,o,a){if(!(t instanceof Uint8Array))throw new TypeError(pi(t,"Uint8Array"));const s=parseInt(e.slice(1,4),10),u=await Tr.subtle.importKey("raw",t.subarray(s>>3),"AES-CBC",!1,["decrypt"]),h=await Tr.subtle.importKey("raw",t.subarray(0,s>>3),{hash:`SHA-${s<<1}`,name:"HMAC"},!1,["sign"]),c=Fo(a,n,r,Ax(a.length<<3)),p=new Uint8Array((await Tr.subtle.sign("HMAC",h,c)).slice(0,s>>3));let y;try{y=hk(o,p)}catch{}if(!y)throw new id;let m;try{m=new Uint8Array(await Tr.subtle.decrypt({iv:n,name:"AES-CBC"},u,r))}catch{}if(!m)throw new id;return m}async function mk(e,t,r,n,o,a){let s;t instanceof Uint8Array?s=await Tr.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(Ts(t,e,"decrypt"),s=t);try{return new Uint8Array(await Tr.subtle.decrypt({additionalData:a,iv:n,name:"AES-GCM",tagLength:128},s,Fo(r,o)))}catch{throw new id}}const Lx=async(e,t,r,n,o,a)=>{if(!Li(t)&&!(t instanceof Uint8Array))throw new TypeError(pi(t,...Nn,"Uint8Array"));switch(Fx(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&Zh(t,parseInt(e.slice(-3),10)),yk(e,t,r,n,o,a);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&Zh(t,parseInt(e.slice(1,4),10)),mk(e,t,r,n,o,a);default:throw new zr("Unsupported JWE Content Encryption Algorithm")}},vk=async()=>{throw new zr('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},wk=async()=>{throw new zr('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},pd=(...e)=>{const t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let r;for(const n of t){const o=Object.keys(n);if(!r||r.size===0){r=new Set(o);continue}for(const a of o){if(r.has(a))return!1;r.add(a)}}return!0};function _k(e){return typeof e=="object"&&e!==null}function ri(e){if(!_k(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}const Dp=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function Ux(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}function Mx(e,t,r){if(Li(e))return Ts(e,t,r),e;if(e instanceof Uint8Array)return Tr.subtle.importKey("raw",e,"AES-KW",!0,[r]);throw new TypeError(pi(e,...Nn,"Uint8Array"))}const w0=async(e,t,r)=>{const n=await Mx(t,e,"wrapKey");Ux(n,e);const o=await Tr.subtle.importKey("raw",r,...Dp);return new Uint8Array(await Tr.subtle.wrapKey("raw",o,n,"AES-KW"))},_0=async(e,t,r)=>{const n=await Mx(t,e,"unwrapKey");Ux(n,e);const o=await Tr.subtle.unwrapKey("raw",r,n,"AES-KW",...Dp);return new Uint8Array(await Tr.subtle.exportKey("raw",o))};async function Bx(e,t,r,n,o=new Uint8Array(0),a=new Uint8Array(0)){if(!Li(e))throw new TypeError(pi(e,...Nn));if(Ts(e,"ECDH"),!Li(t))throw new TypeError(pi(t,...Nn));Ts(t,"ECDH","deriveBits");const s=Fo(fm(Bn.encode(r)),fm(o),fm(a),Lv(n));let u;e.algorithm.name==="X25519"?u=256:e.algorithm.name==="X448"?u=448:u=Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3;const h=new Uint8Array(await Tr.subtle.deriveBits({name:e.algorithm.name,public:e},t,u));return dk(h,n,s)}async function Sk(e){if(!Li(e))throw new TypeError(pi(e,...Nn));return Tr.subtle.generateKey(e.algorithm,!0,["deriveBits"])}function jx(e){if(!Li(e))throw new TypeError(pi(e,...Nn));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||e.algorithm.name==="X25519"||e.algorithm.name==="X448"}function Ek(e){if(!(e instanceof Uint8Array)||e.length<8)throw new cr("PBES2 Salt Input must be 8 or more octets")}function bk(e,t){if(e instanceof Uint8Array)return Tr.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(Li(e))return Ts(e,t,"deriveBits","deriveKey"),e;throw new TypeError(pi(e,...Nn,"Uint8Array"))}async function Hx(e,t,r,n){Ek(e);const o=ck(t,e),a=parseInt(t.slice(13,16),10),s={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:o},u={length:a,name:"AES-KW"},h=await bk(n,t);if(h.usages.includes("deriveBits"))return new Uint8Array(await Tr.subtle.deriveBits(s,h,a));if(h.usages.includes("deriveKey"))return Tr.subtle.deriveKey(s,h,u,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const Ak=async(e,t,r,n=2048,o=kp(new Uint8Array(16)))=>{const a=await Hx(o,e,n,t);return{encryptedKey:await w0(e.slice(-6),a,r),p2c:n,p2s:Hn(o)}},Rk=async(e,t,r,n,o)=>{const a=await Hx(o,e,n,t);return _0(e.slice(-6),a,r)};function ep(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new zr(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}const Lp=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:r}=t.algorithm;if(typeof r!="number"||r<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}},Ck=async(e,t,r)=>{if(!Li(t))throw new TypeError(pi(t,...Nn));if(Ts(t,e,"encrypt","wrapKey"),Lp(e,t),t.usages.includes("encrypt"))return new Uint8Array(await Tr.subtle.encrypt(ep(e),t,r));if(t.usages.includes("wrapKey")){const n=await Tr.subtle.importKey("raw",r,...Dp);return new Uint8Array(await Tr.subtle.wrapKey("raw",n,t,ep(e)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},xk=async(e,t,r)=>{if(!Li(t))throw new TypeError(pi(t,...Nn));if(Ts(t,e,"decrypt","unwrapKey"),Lp(e,t),t.usages.includes("decrypt"))return new Uint8Array(await Tr.subtle.decrypt(ep(e),t,r));if(t.usages.includes("unwrapKey")){const n=await Tr.subtle.unwrapKey("raw",r,t,ep(e),...Dp);return new Uint8Array(await Tr.subtle.exportKey("raw",n))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function jv(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new zr(`Unsupported JWE Algorithm: ${e}`)}}const na=e=>kp(new Uint8Array(jv(e)>>3)),$x=(e,t)=>{const r=(e.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${t}-----
${r}
-----END ${t}-----`},Vx=async(e,t,r)=>{if(!Li(r))throw new TypeError(pi(r,...Nn));if(!r.extractable)throw new TypeError("CryptoKey is not extractable");if(r.type!==e)throw new TypeError(`key is not a ${e} key`);return $x(Uv(new Uint8Array(await Tr.subtle.exportKey(t,r))),`${e.toUpperCase()} KEY`)},Pk=e=>Vx("public","spki",e),Tk=e=>Vx("private","pkcs8",e),us=(e,t,r=0)=>{r===0&&(t.unshift(t.length),t.unshift(6));let n=e.indexOf(t[0],r);if(n===-1)return!1;const o=e.subarray(n,n+t.length);return o.length!==t.length?!1:o.every((a,s)=>a===t[s])||us(e,t,n+1)},zb=e=>{switch(!0){case us(e,[42,134,72,206,61,3,1,7]):return"P-256";case us(e,[43,129,4,0,34]):return"P-384";case us(e,[43,129,4,0,35]):return"P-521";case us(e,[43,101,110]):return"X25519";case us(e,[43,101,111]):return"X448";case us(e,[43,101,112]):return"Ed25519";case us(e,[43,101,113]):return"Ed448";default:throw new zr("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},Kx=async(e,t,r,n,o)=>{var a,s;let u,h;const c=new Uint8Array(atob(r.replace(e,"")).split("").map(y=>y.charCodeAt(0))),p=t==="spki";switch(n){case"PS256":case"PS384":case"PS512":u={name:"RSA-PSS",hash:`SHA-${n.slice(-3)}`},h=p?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":u={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.slice(-3)}`},h=p?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":u={name:"RSA-OAEP",hash:`SHA-${parseInt(n.slice(-3),10)||1}`},h=p?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":u={name:"ECDSA",namedCurve:"P-256"},h=p?["verify"]:["sign"];break;case"ES384":u={name:"ECDSA",namedCurve:"P-384"},h=p?["verify"]:["sign"];break;case"ES512":u={name:"ECDSA",namedCurve:"P-521"},h=p?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const y=zb(c);u=y.startsWith("P-")?{name:"ECDH",namedCurve:y}:{name:y},h=p?[]:["deriveBits"];break}case"EdDSA":u={name:zb(c)},h=p?["verify"]:["sign"];break;default:throw new zr('Invalid or unsupported "alg" (Algorithm) value')}try{return await Tr.subtle.importKey(t,c,u,(a=o==null?void 0:o.extractable)!==null&&a!==void 0?a:!1,h)}catch(y){if(u.name==="Ed25519"&&(y==null?void 0:y.name)==="NotSupportedError"&&Vl())return u={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},await Tr.subtle.importKey(t,c,u,(s=o==null?void 0:o.extractable)!==null&&s!==void 0?s:!1,h);throw y}},Ik=(e,t,r)=>Kx(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,t,r),Wx=(e,t,r)=>Kx(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",e,t,r);function Jb(e){let t=[],r=0;for(;r<e.length;){let n=Gx(e.subarray(r));t.push(n),r+=n.byteLength}return t}function Gx(e){let t=0,r=e[0]&31;if(t++,r===31){for(r=0;e[t]>=128;)r=r*128+e[t]-128,t++;r=r*128+e[t]-128,t++}let n=0;if(e[t]<128)n=e[t],t++;else if(n===128){for(n=0;e[t+n]!==0||e[t+n+1]!==0;){if(n>e.byteLength)throw new TypeError("invalid indefinite form length");n++}const a=t+n+2;return{byteLength:a,contents:e.subarray(t,t+n),raw:e.subarray(0,a)}}else{let a=e[t]&127;t++,n=0;for(let s=0;s<a;s++)n=n*256+e[t],t++}const o=t+n;return{byteLength:o,contents:e.subarray(t,o),raw:e.subarray(0,o)}}function Fk(e){const t=Jb(Jb(Gx(e).contents)[0].contents);return Uv(t[t[0].raw[0]===160?6:5].raw)}function Ok(e){const t=e.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),r=Rx(t);return $x(Fk(r),"PUBLIC KEY")}const Nk=(e,t,r)=>{let n;try{n=Ok(e)}catch(o){throw new TypeError("failed to parse the X.509 certificate",{cause:o})}return Wx(n,t,r)};function kk(e){let t,r;switch(e.kty){case"oct":{switch(e.alg){case"HS256":case"HS384":case"HS512":t={name:"HMAC",hash:`SHA-${e.alg.slice(-3)}`},r=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new zr(`${e.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":t={name:"AES-GCM"},r=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":t={name:"AES-KW"},r=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":t={name:"PBKDF2"},r=["deriveBits"];break;default:throw new zr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new zr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new zr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(e.alg){case"EdDSA":t={name:e.crv},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new zr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new zr('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}const Dk=async e=>{var t,r;if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:n,keyUsages:o}=kk(e),a=[n,(t=e.ext)!==null&&t!==void 0?t:!1,(r=e.key_ops)!==null&&r!==void 0?r:o];if(n.name==="PBKDF2")return Tr.subtle.importKey("raw",Jn(e.k),...a);const s={...e};delete s.alg,delete s.use;try{return await Tr.subtle.importKey("jwk",s,...a)}catch(u){if(n.name==="Ed25519"&&(u==null?void 0:u.name)==="NotSupportedError"&&Vl())return a[0]={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},await Tr.subtle.importKey("jwk",s,...a);throw u}},Qb=Dk;async function Lk(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return Wx(e,t,r)}async function Uk(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');return Nk(e,t,r)}async function Mk(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return Ik(e,t,r)}async function Up(e,t,r){var n;if(!ri(e))throw new TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return r??(r=e.ext!==!0),r?Qb({...e,alg:t,ext:(n=e.ext)!==null&&n!==void 0?n:!1}):Jn(e.k);case"RSA":if(e.oth!==void 0)throw new zr('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Qb({...e,alg:t});default:throw new zr('Unsupported "kty" (Key Type) Parameter value')}}const Bk=(e,t)=>{if(!(t instanceof Uint8Array)){if(!Dx(t))throw new TypeError(kx(e,t,...Nn,"Uint8Array"));if(t.type!=="secret")throw new TypeError(`${Nn.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},jk=(e,t,r)=>{if(!Dx(t))throw new TypeError(kx(e,t,...Nn));if(t.type==="secret")throw new TypeError(`${Nn.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(r==="sign"&&t.type==="public")throw new TypeError(`${Nn.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(r==="decrypt"&&t.type==="public")throw new TypeError(`${Nn.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&r==="verify"&&t.type==="private")throw new TypeError(`${Nn.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&r==="encrypt"&&t.type==="private")throw new TypeError(`${Nn.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},Mp=(e,t,r)=>{e.startsWith("HS")||e==="dir"||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?Bk(e,t):jk(e,t,r)};async function Hk(e,t,r,n,o){if(!(r instanceof Uint8Array))throw new TypeError(pi(r,"Uint8Array"));const a=parseInt(e.slice(1,4),10),s=await Tr.subtle.importKey("raw",r.subarray(a>>3),"AES-CBC",!1,["encrypt"]),u=await Tr.subtle.importKey("raw",r.subarray(0,a>>3),{hash:`SHA-${a<<1}`,name:"HMAC"},!1,["sign"]),h=new Uint8Array(await Tr.subtle.encrypt({iv:n,name:"AES-CBC"},s,t)),c=Fo(o,n,h,Ax(o.length<<3)),p=new Uint8Array((await Tr.subtle.sign("HMAC",u,c)).slice(0,a>>3));return{ciphertext:h,tag:p}}async function $k(e,t,r,n,o){let a;r instanceof Uint8Array?a=await Tr.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(Ts(r,e,"encrypt"),a=r);const s=new Uint8Array(await Tr.subtle.encrypt({additionalData:o,iv:n,name:"AES-GCM",tagLength:128},a,t)),u=s.slice(-16);return{ciphertext:s.slice(0,-16),tag:u}}const S0=async(e,t,r,n,o)=>{if(!Li(r)&&!(r instanceof Uint8Array))throw new TypeError(pi(r,...Nn,"Uint8Array"));switch(Fx(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&Zh(r,parseInt(e.slice(-3),10)),Hk(e,t,r,n,o);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&Zh(r,parseInt(e.slice(1,4),10)),$k(e,t,r,n,o);default:throw new zr("Unsupported JWE Content Encryption Algorithm")}};async function Vk(e,t,r,n){const o=e.slice(0,7);n||(n=Ix(o));const{ciphertext:a,tag:s}=await S0(o,r,t,n,new Uint8Array(0));return{encryptedKey:a,iv:Hn(n),tag:Hn(s)}}async function Kk(e,t,r,n,o){const a=e.slice(0,7);return Lx(a,t,r,n,o,new Uint8Array(0))}async function Wk(e,t,r,n,o){switch(Mp(e,t,"decrypt"),e){case"dir":{if(r!==void 0)throw new cr("Encountered unexpected JWE Encrypted Key");return t}case"ECDH-ES":if(r!==void 0)throw new cr("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!ri(n.epk))throw new cr('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!jx(t))throw new zr("ECDH with the provided key is not allowed or not supported by your javascript runtime");const a=await Up(n.epk,e);let s,u;if(n.apu!==void 0){if(typeof n.apu!="string")throw new cr('JOSE Header "apu" (Agreement PartyUInfo) invalid');s=Jn(n.apu)}if(n.apv!==void 0){if(typeof n.apv!="string")throw new cr('JOSE Header "apv" (Agreement PartyVInfo) invalid');u=Jn(n.apv)}const h=await Bx(a,t,e==="ECDH-ES"?n.enc:e,e==="ECDH-ES"?jv(n.enc):parseInt(e.slice(-5,-2),10),s,u);if(e==="ECDH-ES")return h;if(r===void 0)throw new cr("JWE Encrypted Key missing");return _0(e.slice(-6),h,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(r===void 0)throw new cr("JWE Encrypted Key missing");return xk(e,t,r)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(r===void 0)throw new cr("JWE Encrypted Key missing");if(typeof n.p2c!="number")throw new cr('JOSE Header "p2c" (PBES2 Count) missing or invalid');const a=(o==null?void 0:o.maxPBES2Count)||1e4;if(n.p2c>a)throw new cr('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof n.p2s!="string")throw new cr('JOSE Header "p2s" (PBES2 Salt) missing or invalid');return Rk(e,t,r,n.p2c,Jn(n.p2s))}case"A128KW":case"A192KW":case"A256KW":{if(r===void 0)throw new cr("JWE Encrypted Key missing");return _0(e,t,r)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(r===void 0)throw new cr("JWE Encrypted Key missing");if(typeof n.iv!="string")throw new cr('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof n.tag!="string")throw new cr('JOSE Header "tag" (Authentication Tag) missing or invalid');const a=Jn(n.iv),s=Jn(n.tag);return Kk(e,t,r,a,s)}default:throw new zr('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function gd(e,t,r,n,o){if(o.crit!==void 0&&n.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(s=>typeof s!="string"||s.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let a;r!==void 0?a=new Map([...Object.entries(r),...t.entries()]):a=t;for(const s of n.crit){if(!a.has(s))throw new zr(`Extension Header Parameter "${s}" is not recognized`);if(o[s]===void 0)throw new e(`Extension Header Parameter "${s}" is missing`);if(a.get(s)&&n[s]===void 0)throw new e(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(n.crit)}const E0=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(r=>typeof r!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function Hv(e,t,r){var n;if(!ri(e))throw new cr("Flattened JWE must be an object");if(e.protected===void 0&&e.header===void 0&&e.unprotected===void 0)throw new cr("JOSE Header missing");if(typeof e.iv!="string")throw new cr("JWE Initialization Vector missing or incorrect type");if(typeof e.ciphertext!="string")throw new cr("JWE Ciphertext missing or incorrect type");if(typeof e.tag!="string")throw new cr("JWE Authentication Tag missing or incorrect type");if(e.protected!==void 0&&typeof e.protected!="string")throw new cr("JWE Protected Header incorrect type");if(e.encrypted_key!==void 0&&typeof e.encrypted_key!="string")throw new cr("JWE Encrypted Key incorrect type");if(e.aad!==void 0&&typeof e.aad!="string")throw new cr("JWE AAD incorrect type");if(e.header!==void 0&&!ri(e.header))throw new cr("JWE Shared Unprotected Header incorrect type");if(e.unprotected!==void 0&&!ri(e.unprotected))throw new cr("JWE Per-Recipient Unprotected Header incorrect type");let o;if(e.protected)try{const P=Jn(e.protected);o=JSON.parse(ao.decode(P))}catch{throw new cr("JWE Protected Header is invalid")}if(!pd(o,e.header,e.unprotected))throw new cr("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const a={...o,...e.header,...e.unprotected};if(gd(cr,new Map,r==null?void 0:r.crit,o,a),a.zip!==void 0){if(!o||!o.zip)throw new cr('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(a.zip!=="DEF")throw new zr('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:s,enc:u}=a;if(typeof s!="string"||!s)throw new cr("missing JWE Algorithm (alg) in JWE Header");if(typeof u!="string"||!u)throw new cr("missing JWE Encryption Algorithm (enc) in JWE Header");const h=r&&E0("keyManagementAlgorithms",r.keyManagementAlgorithms),c=r&&E0("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(h&&!h.has(s))throw new Xh('"alg" (Algorithm) Header Parameter not allowed');if(c&&!c.has(u))throw new Xh('"enc" (Encryption Algorithm) Header Parameter not allowed');let p;e.encrypted_key!==void 0&&(p=Jn(e.encrypted_key));let y=!1;typeof t=="function"&&(t=await t(o,e),y=!0);let m;try{m=await Wk(s,t,p,a,r)}catch(P){if(P instanceof TypeError||P instanceof cr||P instanceof zr)throw P;m=na(u)}const _=Jn(e.iv),C=Jn(e.tag),R=Bn.encode((n=e.protected)!==null&&n!==void 0?n:"");let F;e.aad!==void 0?F=Fo(R,Bn.encode("."),Bn.encode(e.aad)):F=R;let b=await Lx(u,m,Jn(e.ciphertext),_,C,F);a.zip==="DEF"&&(b=await((r==null?void 0:r.inflateRaw)||vk)(b));const E={plaintext:b};return e.protected!==void 0&&(E.protectedHeader=o),e.aad!==void 0&&(E.additionalAuthenticatedData=Jn(e.aad)),e.unprotected!==void 0&&(E.sharedUnprotectedHeader=e.unprotected),e.header!==void 0&&(E.unprotectedHeader=e.header),y?{...E,key:t}:E}async function qx(e,t,r){if(e instanceof Uint8Array&&(e=ao.decode(e)),typeof e!="string")throw new cr("Compact JWE must be a string or Uint8Array");const{0:n,1:o,2:a,3:s,4:u,length:h}=e.split(".");if(h!==5)throw new cr("Invalid Compact JWE");const c=await Hv({ciphertext:s,iv:a||void 0,protected:n||void 0,tag:u||void 0,encrypted_key:o||void 0},t,r),p={plaintext:c.plaintext,protectedHeader:c.protectedHeader};return typeof t=="function"?{...p,key:c.key}:p}async function Gk(e,t,r){if(!ri(e))throw new cr("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(ri))throw new cr("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new cr("JWE Recipients has no members");for(const n of e.recipients)try{return await Hv({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:n.encrypted_key,header:n.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,r)}catch{}throw new id}const qk=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:Hn(e)};if(!Li(e))throw new TypeError(pi(e,...Nn,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:r,alg:n,use:o,...a}=await Tr.subtle.exportKey("jwk",e);return a},zk=qk;async function Jk(e){return Pk(e)}async function Qk(e){return Tk(e)}async function zx(e){return zk(e)}async function Jx(e,t,r,n,o={}){let a,s,u;switch(Mp(e,r,"encrypt"),e){case"dir":{u=r;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!jx(r))throw new zr("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:h,apv:c}=o;let{epk:p}=o;p||(p=(await Sk(r)).privateKey);const{x:y,y:m,crv:_,kty:C}=await zx(p),R=await Bx(r,p,e==="ECDH-ES"?t:e,e==="ECDH-ES"?jv(t):parseInt(e.slice(-5,-2),10),h,c);if(s={epk:{x:y,crv:_,kty:C}},C==="EC"&&(s.epk.y=m),h&&(s.apu=Hn(h)),c&&(s.apv=Hn(c)),e==="ECDH-ES"){u=R;break}u=n||na(t);const F=e.slice(-6);a=await w0(F,R,u);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{u=n||na(t),a=await Ck(e,r,u);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{u=n||na(t);const{p2c:h,p2s:c}=o;({encryptedKey:a,...s}=await Ak(e,r,u,h,c));break}case"A128KW":case"A192KW":case"A256KW":{u=n||na(t),a=await w0(e,r,u);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{u=n||na(t);const{iv:h}=o;({encryptedKey:a,...s}=await Vk(e,r,u,h));break}default:throw new zr('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:u,encryptedKey:a,parameters:s}}const Qx=Symbol();class tp{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=t}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}async encrypt(t,r){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new cr("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!pd(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new cr("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(gd(cr,new Map,r==null?void 0:r.crit,this._protectedHeader,n),n.zip!==void 0){if(!this._protectedHeader||!this._protectedHeader.zip)throw new cr('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(n.zip!=="DEF")throw new zr('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:o,enc:a}=n;if(typeof o!="string"||!o)throw new cr('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof a!="string"||!a)throw new cr('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let s;if(o==="dir"){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if(o==="ECDH-ES"&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");let u;{let C;({cek:u,encryptedKey:s,parameters:C}=await Jx(o,a,t,this._cek,this._keyManagementParameters)),C&&(r&&Qx in r?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...C}:this.setUnprotectedHeader(C):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...C}:this.setProtectedHeader(C))}this._iv||(this._iv=Ix(a));let h,c,p;this._protectedHeader?c=Bn.encode(Hn(JSON.stringify(this._protectedHeader))):c=Bn.encode(""),this._aad?(p=Hn(this._aad),h=Fo(c,Bn.encode("."),Bn.encode(p))):h=c;let y,m;if(n.zip==="DEF"){const C=await((r==null?void 0:r.deflateRaw)||wk)(this._plaintext);({ciphertext:y,tag:m}=await S0(a,C,u,this._iv,h))}else({ciphertext:y,tag:m}=await S0(a,this._plaintext,u,this._iv,h));const _={ciphertext:Hn(y),iv:Hn(this._iv),tag:Hn(m)};return s&&(_.encrypted_key=Hn(s)),p&&(_.aad=p),this._protectedHeader&&(_.protected=ao.decode(c)),this._sharedUnprotectedHeader&&(_.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(_.header=this._unprotectedHeader),_}}class Yk{constructor(t,r,n){this.parent=t,this.key=r,this.options=n}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addRecipient(...t){return this.parent.addRecipient(...t)}encrypt(...t){return this.parent.encrypt(...t)}done(){return this.parent}}class Xk{constructor(t){this._recipients=[],this._plaintext=t}addRecipient(t,r){const n=new Yk(this,t,{crit:r==null?void 0:r.crit});return this._recipients.push(n),n}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}async encrypt(t){var r,n,o;if(!this._recipients.length)throw new cr("at least one recipient must be added");if(t={deflateRaw:t==null?void 0:t.deflateRaw},this._recipients.length===1){const[h]=this._recipients,c=await new tp(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(h.unprotectedHeader).encrypt(h.key,{...h.options,...t});let p={ciphertext:c.ciphertext,iv:c.iv,recipients:[{}],tag:c.tag};return c.aad&&(p.aad=c.aad),c.protected&&(p.protected=c.protected),c.unprotected&&(p.unprotected=c.unprotected),c.encrypted_key&&(p.recipients[0].encrypted_key=c.encrypted_key),c.header&&(p.recipients[0].header=c.header),p}let a;for(let h=0;h<this._recipients.length;h++){const c=this._recipients[h];if(!pd(this._protectedHeader,this._unprotectedHeader,c.unprotectedHeader))throw new cr("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const p={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader},{alg:y}=p;if(typeof y!="string"||!y)throw new cr('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(y==="dir"||y==="ECDH-ES")throw new cr('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof p.enc!="string"||!p.enc)throw new cr('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!a)a=p.enc;else if(a!==p.enc)throw new cr('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(gd(cr,new Map,c.options.crit,this._protectedHeader,p),p.zip!==void 0&&(!this._protectedHeader||!this._protectedHeader.zip))throw new cr('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}const s=na(a);let u={ciphertext:"",iv:"",recipients:[],tag:""};for(let h=0;h<this._recipients.length;h++){const c=this._recipients[h],p={};u.recipients.push(p);const m={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader}.alg.startsWith("PBES2")?2048+h:void 0;if(h===0){const R=await new tp(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(s).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(c.unprotectedHeader).setKeyManagementParameters({p2c:m}).encrypt(c.key,{...c.options,...t,[Qx]:!0});u.ciphertext=R.ciphertext,u.iv=R.iv,u.tag=R.tag,R.aad&&(u.aad=R.aad),R.protected&&(u.protected=R.protected),R.unprotected&&(u.unprotected=R.unprotected),p.encrypted_key=R.encrypted_key,R.header&&(p.header=R.header);continue}const{encryptedKey:_,parameters:C}=await Jx(((r=c.unprotectedHeader)===null||r===void 0?void 0:r.alg)||((n=this._protectedHeader)===null||n===void 0?void 0:n.alg)||((o=this._unprotectedHeader)===null||o===void 0?void 0:o.alg),a,c.key,s,{p2c:m});p.encrypted_key=Hn(_),(c.unprotectedHeader||C)&&(p.header={...c.unprotectedHeader,...C})}return u}}function Yx(e,t){const r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return Vl()&&t.name==="NODE-ED25519"?{name:"NODE-ED25519",namedCurve:"NODE-ED25519"}:{name:t.name};default:throw new zr(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function Xx(e,t,r){if(Li(t))return gk(t,e,r),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(pi(t,...Nn));return Tr.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}throw new TypeError(pi(t,...Nn,"Uint8Array"))}const Zk=async(e,t,r,n)=>{const o=await Xx(e,t,"verify");Lp(e,o);const a=Yx(e,o.algorithm);try{return await Tr.subtle.verify(a,o,r,n)}catch{return!1}};async function $v(e,t,r){var n;if(!ri(e))throw new pn("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new pn('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new pn("JWS Protected Header incorrect type");if(e.payload===void 0)throw new pn("JWS Payload missing");if(typeof e.signature!="string")throw new pn("JWS Signature missing or incorrect type");if(e.header!==void 0&&!ri(e.header))throw new pn("JWS Unprotected Header incorrect type");let o={};if(e.protected)try{const F=Jn(e.protected);o=JSON.parse(ao.decode(F))}catch{throw new pn("JWS Protected Header is invalid")}if(!pd(o,e.header))throw new pn("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const a={...o,...e.header},s=gd(pn,new Map([["b64",!0]]),r==null?void 0:r.crit,o,a);let u=!0;if(s.has("b64")&&(u=o.b64,typeof u!="boolean"))throw new pn('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:h}=a;if(typeof h!="string"||!h)throw new pn('JWS "alg" (Algorithm) Header Parameter missing or invalid');const c=r&&E0("algorithms",r.algorithms);if(c&&!c.has(h))throw new Xh('"alg" (Algorithm) Header Parameter not allowed');if(u){if(typeof e.payload!="string")throw new pn("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new pn("JWS Payload must be a string or an Uint8Array instance");let p=!1;typeof t=="function"&&(t=await t(o,e),p=!0),Mp(h,t,"verify");const y=Fo(Bn.encode((n=e.protected)!==null&&n!==void 0?n:""),Bn.encode("."),typeof e.payload=="string"?Bn.encode(e.payload):e.payload),m=Jn(e.signature);if(!await Zk(h,t,m,y))throw new Bv;let C;u?C=Jn(e.payload):typeof e.payload=="string"?C=Bn.encode(e.payload):C=e.payload;const R={payload:C};return e.protected!==void 0&&(R.protectedHeader=o),e.header!==void 0&&(R.unprotectedHeader=e.header),p?{...R,key:t}:R}async function Zx(e,t,r){if(e instanceof Uint8Array&&(e=ao.decode(e)),typeof e!="string")throw new pn("Compact JWS must be a string or Uint8Array");const{0:n,1:o,2:a,length:s}=e.split(".");if(s!==3)throw new pn("Invalid Compact JWS");const u=await $v({payload:o,protected:n,signature:a},t,r),h={payload:u.payload,protectedHeader:u.protectedHeader};return typeof t=="function"?{...h,key:u.key}:h}async function eD(e,t,r){if(!ri(e))throw new pn("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(ri))throw new pn("JWS Signatures missing or incorrect type");for(const n of e.signatures)try{return await $v({header:n.header,payload:e.payload,protected:n.protected,signature:n.signature},t,r)}catch{}throw new Bv}const vh=e=>Math.floor(e.getTime()/1e3),eP=60,tP=eP*60,Vv=tP*24,tD=Vv*7,rD=Vv*365.25,nD=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,rp=e=>{const t=nD.exec(e);if(!t)throw new TypeError("Invalid time period format");const r=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(r);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(r*eP);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(r*tP);case"day":case"days":case"d":return Math.round(r*Vv);case"week":case"weeks":case"w":return Math.round(r*tD);default:return Math.round(r*rD)}},Yb=e=>e.toLowerCase().replace(/^application\//,""),iD=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1,Kv=(e,t,r={})=>{const{typ:n}=r;if(n&&(typeof e.typ!="string"||Yb(e.typ)!==Yb(n)))throw new Pi('unexpected "typ" JWT header value',"typ","check_failed");let o;try{o=JSON.parse(ao.decode(t))}catch{}if(!ri(o))throw new Ti("JWT Claims Set must be a top-level JSON object");const{requiredClaims:a=[],issuer:s,subject:u,audience:h,maxTokenAge:c}=r;c!==void 0&&a.push("iat"),h!==void 0&&a.push("aud"),u!==void 0&&a.push("sub"),s!==void 0&&a.push("iss");for(const _ of new Set(a.reverse()))if(!(_ in o))throw new Pi(`missing required "${_}" claim`,_,"missing");if(s&&!(Array.isArray(s)?s:[s]).includes(o.iss))throw new Pi('unexpected "iss" claim value',"iss","check_failed");if(u&&o.sub!==u)throw new Pi('unexpected "sub" claim value',"sub","check_failed");if(h&&!iD(o.aud,typeof h=="string"?[h]:h))throw new Pi('unexpected "aud" claim value',"aud","check_failed");let p;switch(typeof r.clockTolerance){case"string":p=rp(r.clockTolerance);break;case"number":p=r.clockTolerance;break;case"undefined":p=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:y}=r,m=vh(y||new Date);if((o.iat!==void 0||c)&&typeof o.iat!="number")throw new Pi('"iat" claim must be a number',"iat","invalid");if(o.nbf!==void 0){if(typeof o.nbf!="number")throw new Pi('"nbf" claim must be a number',"nbf","invalid");if(o.nbf>m+p)throw new Pi('"nbf" claim timestamp check failed',"nbf","check_failed")}if(o.exp!==void 0){if(typeof o.exp!="number")throw new Pi('"exp" claim must be a number',"exp","invalid");if(o.exp<=m-p)throw new v0('"exp" claim timestamp check failed',"exp","check_failed")}if(c){const _=m-o.iat,C=typeof c=="number"?c:rp(c);if(_-p>C)throw new v0('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(_<0-p)throw new Pi('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return o};async function oD(e,t,r){var n;const o=await Zx(e,t,r);if(!((n=o.protectedHeader.crit)===null||n===void 0)&&n.includes("b64")&&o.protectedHeader.b64===!1)throw new Ti("JWTs MUST NOT use unencoded payload");const s={payload:Kv(o.protectedHeader,o.payload,r),protectedHeader:o.protectedHeader};return typeof t=="function"?{...s,key:o.key}:s}async function sD(e,t,r){const n=await qx(e,t,r),o=Kv(n.protectedHeader,n.plaintext,r),{protectedHeader:a}=n;if(a.iss!==void 0&&a.iss!==o.iss)throw new Pi('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(a.sub!==void 0&&a.sub!==o.sub)throw new Pi('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(a.aud!==void 0&&JSON.stringify(a.aud)!==JSON.stringify(o.aud))throw new Pi('replicated "aud" claim header parameter mismatch',"aud","mismatch");const s={payload:o,protectedHeader:a};return typeof t=="function"?{...s,key:n.key}:s}class rP{constructor(t){this._flattened=new tp(t)}setContentEncryptionKey(t){return this._flattened.setContentEncryptionKey(t),this}setInitializationVector(t){return this._flattened.setInitializationVector(t),this}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}setKeyManagementParameters(t){return this._flattened.setKeyManagementParameters(t),this}async encrypt(t,r){const n=await this._flattened.encrypt(t,r);return[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join(".")}}const aD=async(e,t,r)=>{const n=await Xx(e,t,"sign");Lp(e,n);const o=await Tr.subtle.sign(Yx(e,n.algorithm),n,r);return new Uint8Array(o)};class Wv{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,r){if(!this._protectedHeader&&!this._unprotectedHeader)throw new pn("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!pd(this._protectedHeader,this._unprotectedHeader))throw new pn("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader},o=gd(pn,new Map([["b64",!0]]),r==null?void 0:r.crit,this._protectedHeader,n);let a=!0;if(o.has("b64")&&(a=this._protectedHeader.b64,typeof a!="boolean"))throw new pn('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:s}=n;if(typeof s!="string"||!s)throw new pn('JWS "alg" (Algorithm) Header Parameter missing or invalid');Mp(s,t,"sign");let u=this._payload;a&&(u=Bn.encode(Hn(u)));let h;this._protectedHeader?h=Bn.encode(Hn(JSON.stringify(this._protectedHeader))):h=Bn.encode("");const c=Fo(h,Bn.encode("."),u),p=await aD(s,t,c),y={signature:Hn(p),payload:""};return a&&(y.payload=ao.decode(u)),this._unprotectedHeader&&(y.header=this._unprotectedHeader),this._protectedHeader&&(y.protected=ao.decode(h)),y}}class nP{constructor(t){this._flattened=new Wv(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,r){const n=await this._flattened.sign(t,r);if(n.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}}class lD{constructor(t,r,n){this.parent=t,this.key=r,this.options=n}setProtectedHeader(t){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=t,this}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addSignature(...t){return this.parent.addSignature(...t)}sign(...t){return this.parent.sign(...t)}done(){return this.parent}}class uD{constructor(t){this._signatures=[],this._payload=t}addSignature(t,r){const n=new lD(this,t,r);return this._signatures.push(n),n}async sign(){if(!this._signatures.length)throw new pn("at least one signature must be added");const t={signatures:[],payload:""};for(let r=0;r<this._signatures.length;r++){const n=this._signatures[r],o=new Wv(this._payload);o.setProtectedHeader(n.protectedHeader),o.setUnprotectedHeader(n.unprotectedHeader);const{payload:a,...s}=await o.sign(n.key,n.options);if(r===0)t.payload=a;else if(t.payload!==a)throw new pn("inconsistent use of JWS Unencoded Payload (RFC7797)");t.signatures.push(s)}return t}}class Gv{constructor(t){if(!ri(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return typeof t=="number"?this._payload={...this._payload,nbf:t}:this._payload={...this._payload,nbf:vh(new Date)+rp(t)},this}setExpirationTime(t){return typeof t=="number"?this._payload={...this._payload,exp:t}:this._payload={...this._payload,exp:vh(new Date)+rp(t)},this}setIssuedAt(t){return typeof t>"u"?this._payload={...this._payload,iat:vh(new Date)}:this._payload={...this._payload,iat:t},this}}class cD extends Gv{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,r){var n;const o=new nP(Bn.encode(JSON.stringify(this._payload)));if(o.setProtectedHeader(this._protectedHeader),Array.isArray((n=this._protectedHeader)===null||n===void 0?void 0:n.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new Ti("JWTs MUST NOT use unencoded payload");return o.sign(t,r)}}class dD extends Gv{setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(t,r){const n=new rP(Bn.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),n.setProtectedHeader(this._protectedHeader),this._iv&&n.setInitializationVector(this._iv),this._cek&&n.setContentEncryptionKey(this._cek),this._keyManagementParameters&&n.setKeyManagementParameters(this._keyManagementParameters),n.encrypt(t,r)}}const as=(e,t)=>{if(typeof e!="string"||!e)throw new Cx(`${t} missing or invalid`)};async function iP(e,t){if(!ri(e))throw new TypeError("JWK must be an object");if(t??(t="sha256"),t!=="sha256"&&t!=="sha384"&&t!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let r;switch(e.kty){case"EC":as(e.crv,'"crv" (Curve) Parameter'),as(e.x,'"x" (X Coordinate) Parameter'),as(e.y,'"y" (Y Coordinate) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":as(e.crv,'"crv" (Subtype of Key Pair) Parameter'),as(e.x,'"x" (Public Key) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":as(e.e,'"e" (Exponent) Parameter'),as(e.n,'"n" (Modulus) Parameter'),r={e:e.e,kty:e.kty,n:e.n};break;case"oct":as(e.k,'"k" (Key Value) Parameter'),r={k:e.k,kty:e.kty};break;default:throw new zr('"kty" (Key Type) Parameter missing or unsupported')}const n=Bn.encode(JSON.stringify(r));return Hn(await bx(t,n))}async function fD(e,t){t??(t="sha256");const r=await iP(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${r}`}async function hD(e,t){const r={...e,...t==null?void 0:t.header};if(!ri(r.jwk))throw new pn('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const n=await Up({...r.jwk,ext:!0},r.alg,!0);if(n instanceof Uint8Array||n.type!=="public")throw new pn('"jwk" (JSON Web Key) Header Parameter must be a public key');return n}function pD(e){switch(typeof e=="string"&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new zr('Unsupported "alg" value for a JSON Web Key Set')}}function oP(e){return e&&typeof e=="object"&&Array.isArray(e.keys)&&e.keys.every(gD)}function gD(e){return ri(e)}function yD(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}class sP{constructor(t){if(this._cached=new WeakMap,!oP(t))throw new Np("JSON Web Key Set malformed");this._jwks=yD(t)}async getKey(t,r){const{alg:n,kid:o}={...t,...r==null?void 0:r.header},a=pD(n),s=this._jwks.keys.filter(c=>{let p=a===c.kty;if(p&&typeof o=="string"&&(p=o===c.kid),p&&typeof c.alg=="string"&&(p=n===c.alg),p&&typeof c.use=="string"&&(p=c.use==="sig"),p&&Array.isArray(c.key_ops)&&(p=c.key_ops.includes("verify")),p&&n==="EdDSA"&&(p=c.crv==="Ed25519"||c.crv==="Ed448"),p)switch(n){case"ES256":p=c.crv==="P-256";break;case"ES256K":p=c.crv==="secp256k1";break;case"ES384":p=c.crv==="P-384";break;case"ES512":p=c.crv==="P-521";break}return p}),{0:u,length:h}=s;if(h===0)throw new Mv;if(h!==1){const c=new xx,{_cached:p}=this;throw c[Symbol.asyncIterator]=async function*(){for(const y of s)try{yield await Xb(p,y,n)}catch{continue}},c}return Xb(this._cached,u,n)}}async function Xb(e,t,r){const n=e.get(t)||e.set(t,{}).get(t);if(n[r]===void 0){const o=await Up({...t,ext:!0},r);if(o instanceof Uint8Array||o.type!=="public")throw new Np("JSON Web Key Set members must be public keys");n[r]=o}return n[r]}function mD(e){const t=new sP(e);return async function(r,n){return t.getKey(r,n)}}const vD=async(e,t,r)=>{let n,o,a=!1;typeof AbortController=="function"&&(n=new AbortController,o=setTimeout(()=>{a=!0,n.abort()},t));const s=await fetch(e.href,{signal:n?n.signal:void 0,redirect:"manual",headers:r.headers}).catch(u=>{throw a?new Px:u});if(o!==void 0&&clearTimeout(o),s.status!==200)throw new li("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await s.json()}catch{throw new li("Failed to parse the JSON Web Key Set HTTP response as JSON")}};class wD extends sP{constructor(t,r){if(super({keys:[]}),this._jwks=void 0,!(t instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(t.href),this._options={agent:r==null?void 0:r.agent,headers:r==null?void 0:r.headers},this._timeoutDuration=typeof(r==null?void 0:r.timeoutDuration)=="number"?r==null?void 0:r.timeoutDuration:5e3,this._cooldownDuration=typeof(r==null?void 0:r.cooldownDuration)=="number"?r==null?void 0:r.cooldownDuration:3e4,this._cacheMaxAge=typeof(r==null?void 0:r.cacheMaxAge)=="number"?r==null?void 0:r.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(t,r){(!this._jwks||!this.fresh())&&await this.reload();try{return await super.getKey(t,r)}catch(n){if(n instanceof Mv&&this.coolingDown()===!1)return await this.reload(),super.getKey(t,r);throw n}}async reload(){this._pendingFetch&&Vl()&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=vD(this._url,this._timeoutDuration,this._options).then(t=>{if(!oP(t))throw new Np("JSON Web Key Set malformed");this._jwks={keys:t.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(t=>{throw this._pendingFetch=void 0,t})),await this._pendingFetch}}function _D(e,t){const r=new wD(e,t);return async function(n,o){return r.getKey(n,o)}}class SD extends Gv{encode(){const t=Hn(JSON.stringify({alg:"none"})),r=Hn(JSON.stringify(this._payload));return`${t}.${r}.`}static decode(t,r){if(typeof t!="string")throw new Ti("Unsecured JWT must be a string");const{0:n,1:o,2:a,length:s}=t.split(".");if(s!==3||a!=="")throw new Ti("Invalid Unsecured JWT");let u;try{if(u=JSON.parse(ao.decode(Jn(n))),u.alg!=="none")throw new Error}catch{throw new Ti("Invalid Unsecured JWT")}return{payload:Kv(u,Jn(o),r),header:u}}}const ED=Hn,qv=Jn,bD=Object.freeze(Object.defineProperty({__proto__:null,decode:qv,encode:ED},Symbol.toStringTag,{value:"Module"}));function AD(e){let t;if(typeof e=="string"){const r=e.split(".");(r.length===3||r.length===5)&&([t]=r)}else if(typeof e=="object"&&e)if("protected"in e)t=e.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof t!="string"||!t)throw new Error;const r=JSON.parse(ao.decode(qv(t)));if(!ri(r))throw new Error;return r}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function RD(e){if(typeof e!="string")throw new Ti("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:r}=e.split(".");if(r===5)throw new Ti("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new Ti("Invalid JWT");if(!t)throw new Ti("JWTs must contain a payload");let n;try{n=qv(t)}catch{throw new Ti("Failed to parse the base64url encoded payload")}let o;try{o=JSON.parse(ao.decode(n))}catch{throw new Ti("Failed to parse the decoded payload as JSON")}if(!ri(o))throw new Ti("Invalid JWT Claims Set");return o}async function CD(e,t){var r;let n,o,a;switch(e){case"HS256":case"HS384":case"HS512":n=parseInt(e.slice(-3),10),o={name:"HMAC",hash:`SHA-${n}`,length:n},a=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n=parseInt(e.slice(-3),10),kp(new Uint8Array(n>>3));case"A128KW":case"A192KW":case"A256KW":n=parseInt(e.slice(1,4),10),o={name:"AES-KW",length:n},a=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":n=parseInt(e.slice(1,4),10),o={name:"AES-GCM",length:n},a=["encrypt","decrypt"];break;default:throw new zr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return Tr.subtle.generateKey(o,(r=t==null?void 0:t.extractable)!==null&&r!==void 0?r:!1,a)}function hm(e){var t;const r=(t=e==null?void 0:e.modulusLength)!==null&&t!==void 0?t:2048;if(typeof r!="number"||r<2048)throw new zr("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return r}async function xD(e,t){var r,n,o,a;let s,u;switch(e){case"PS256":case"PS384":case"PS512":s={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:hm(t)},u=["sign","verify"];break;case"RS256":case"RS384":case"RS512":s={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:hm(t)},u=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:hm(t)},u=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":s={name:"ECDSA",namedCurve:"P-256"},u=["sign","verify"];break;case"ES384":s={name:"ECDSA",namedCurve:"P-384"},u=["sign","verify"];break;case"ES512":s={name:"ECDSA",namedCurve:"P-521"},u=["sign","verify"];break;case"EdDSA":u=["sign","verify"];const h=(r=t==null?void 0:t.crv)!==null&&r!==void 0?r:"Ed25519";switch(h){case"Ed25519":case"Ed448":s={name:h};break;default:throw new zr("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{u=["deriveKey","deriveBits"];const c=(n=t==null?void 0:t.crv)!==null&&n!==void 0?n:"P-256";switch(c){case"P-256":case"P-384":case"P-521":{s={name:"ECDH",namedCurve:c};break}case"X25519":case"X448":s={name:c};break;default:throw new zr("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new zr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}try{return await Tr.subtle.generateKey(s,(o=t==null?void 0:t.extractable)!==null&&o!==void 0?o:!1,u)}catch(h){if(s.name==="Ed25519"&&(h==null?void 0:h.name)==="NotSupportedError"&&Vl())return s={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},await Tr.subtle.generateKey(s,(a=t==null?void 0:t.extractable)!==null&&a!==void 0?a:!1,u);throw h}}async function PD(e,t){return xD(e,t)}async function TD(e,t){return CD(e,t)}const ID=Object.freeze(Object.defineProperty({__proto__:null,CompactEncrypt:rP,CompactSign:nP,EmbeddedJWK:hD,EncryptJWT:dD,FlattenedEncrypt:tp,FlattenedSign:Wv,GeneralEncrypt:Xk,GeneralSign:uD,SignJWT:cD,UnsecuredJWT:SD,base64url:bD,calculateJwkThumbprint:iP,calculateJwkThumbprintUri:fD,compactDecrypt:qx,compactVerify:Zx,createLocalJWKSet:mD,createRemoteJWKSet:_D,decodeJwt:RD,decodeProtectedHeader:AD,errors:fk,exportJWK:zx,exportPKCS8:Qk,exportSPKI:Jk,flattenedDecrypt:Hv,flattenedVerify:$v,generalDecrypt:Gk,generalVerify:eD,generateKeyPair:PD,generateSecret:TD,importJWK:Up,importPKCS8:Mk,importSPKI:Lk,importX509:Uk,jwtDecrypt:sD,jwtVerify:oD},Symbol.toStringTag,{value:"Module"})),FD=ip(ID);var Zb;function Ri(){if(Zb)return Xr;Zb=1;var e=fd(),t=Sa(),r=FD,n=Op();const o="solidClientAuthn:",a=["ES256","RS256"],s={ERROR:"error",LOGIN:"login",LOGOUT:"logout",NEW_REFRESH_TOKEN:"newRefreshToken",SESSION_EXPIRED:"sessionExpired",SESSION_EXTENDED:"sessionExtended",SESSION_RESTORED:"sessionRestore",TIMEOUT_SET:"timeoutSet"},u=5,y=["openid","offline_access","webid"].join(" "),m=(Z,I)=>({get(S,B,G){if(!Object.getOwnPropertyNames(e.EventEmitter).includes(B)&&Object.getOwnPropertyNames(Z).includes(B))throw new Error(`${I}: [${B}] is not supported`);return Reflect.get(S,B,G)}});class _{constructor(I){this.handleables=I}async getProperHandler(I){const S=await Promise.all(this.handleables.map(B=>B.canHandle(...I)));for(let B=0;B<S.length;B+=1)if(S[B])return this.handleables[B];return null}async canHandle(...I){return await this.getProperHandler(I)!==null}async handle(...I){const S=await this.getProperHandler(I);if(S)return S.handle(...I);throw new Error(`[${this.constructor.name}] cannot find a suitable handler for: ${I.map(B=>{try{return JSON.stringify(B)}catch{return B.toString()}}).join(", ")}`)}}async function C(Z,I){const S=await t.fetch(Z);if(S.status!==200)throw new Error(`Could not fetch JWKS for [${I}] at [${Z}]: ${S.status} ${S.statusText}`);let B;try{B=(await S.json()).keys[0]}catch(G){throw new Error(`Malformed JWKS for [${I}] at [${Z}]: ${G.message}`)}return B}async function R(Z,I,S,B){const G=await C(I,S);let de;try{const{payload:Ee}=await r.jwtVerify(Z,await r.importJWK(G),{issuer:S,audience:B});de=Ee}catch(Ee){throw new Error(`Token verification failed: ${Ee.stack}`)}if(typeof de.webid=="string")return de.webid;if(typeof de.sub!="string")throw new Error(`The token ${JSON.stringify(de)} is invalid: it has no 'webid' claim and no 'sub' claim.`);try{return new URL(de.sub),de.sub}catch(Ee){throw new Error(`The token has no 'webid' claim, and its 'sub' claim of [${de.sub}] is invalid as a URL - error [${Ee}].`)}}function F(Z){try{return new URL(Z).hash===""}catch{return!1}}function b(Z){return typeof Z=="string"&&["DPoP","Bearer"].includes(Z)}const E="solidClientAuthenticationUser";function P(Z){try{return new URL(Z),!0}catch{return!1}}function j(Z,I){var S;return(S=I.find(B=>Z.includes(B)))!==null&&S!==void 0?S:null}function H(Z,I){return Z.clientId!==void 0&&!P(Z.clientId)?"static":I.scopesSupported.includes("webid")&&Z.clientId!==void 0&&P(Z.clientId)?"solid-oidc":"dynamic"}async function $(Z,I,S,B){const G=H(Z,I);return G==="dynamic"?B.getClient({sessionId:Z.sessionId,clientName:Z.clientName,redirectUrl:Z.redirectUrl},I):(await S.setForUser(Z.sessionId,{clientId:Z.clientId}),Z.clientSecret&&await S.setForUser(Z.sessionId,{clientSecret:Z.clientSecret}),Z.clientName&&await S.setForUser(Z.sessionId,{clientName:Z.clientName}),{clientId:Z.clientId,clientSecret:Z.clientSecret,clientName:Z.clientName,clientType:G})}async function O(Z,I){return Z.getForUser(I,"sessionId")}async function ne(Z,I,S){try{const[B,G,de,Ee]=await Promise.all([I.getForUser(Z,"issuer",{errorIfNull:!0}),I.getForUser(Z,"codeVerifier"),I.getForUser(Z,"redirectUrl"),I.getForUser(Z,"dpop",{errorIfNull:!0})]);await I.deleteForUser(Z,"codeVerifier");const rt=await S.fetchConfig(B);return{codeVerifier:G,redirectUrl:de,issuerConfig:rt,dpop:Ee==="true"}}catch(B){throw new Error(`Failed to retrieve OIDC context from storage associated with session [${Z}]: ${B}`)}}async function ee(Z,I,S,B,G,de,Ee){G!==void 0&&await Z.setForUser(I,{refreshToken:G},{secure:de}),S!==void 0&&await Z.setForUser(I,{webId:S},{secure:de}),B!==void 0&&await Z.setForUser(I,{isLoggedIn:B},{secure:de}),Ee!==void 0&&await Z.setForUser(I,{publicKey:JSON.stringify(Ee.publicKey),privateKey:JSON.stringify(await r.exportJWK(Ee.privateKey))},{secure:de})}class D{constructor(I,S){this.secureStorage=I,this.insecureStorage=S}getKey(I){return`solidClientAuthenticationUser:${I}`}async getUserData(I,S){const B=await(S?this.secureStorage:this.insecureStorage).get(this.getKey(I));if(B===void 0)return{};try{return JSON.parse(B)}catch{throw new Error(`Data for user [${I}] in [${S?"secure":"unsecure"}] storage is corrupted - expected valid JSON, but got: ${B}`)}}async setUserData(I,S,B){await(B?this.secureStorage:this.insecureStorage).set(this.getKey(I),JSON.stringify(S))}async get(I,S){const B=await(S!=null&&S.secure?this.secureStorage:this.insecureStorage).get(I);if(B===void 0&&(S!=null&&S.errorIfNull))throw new Error(`[${I}] is not stored`);return B}async set(I,S,B){return(B!=null&&B.secure?this.secureStorage:this.insecureStorage).set(I,S)}async delete(I,S){return(S!=null&&S.secure?this.secureStorage:this.insecureStorage).delete(I)}async getForUser(I,S,B){const G=await this.getUserData(I,B==null?void 0:B.secure);let de;if((!G||!G[S])&&(de=void 0),de=G[S],de===void 0&&(B!=null&&B.errorIfNull))throw new Error(`Field [${S}] for user [${I}] is not stored`);return de||void 0}async setForUser(I,S,B){let G;try{G=await this.getUserData(I,B==null?void 0:B.secure)}catch{G={}}await this.setUserData(I,{...G,...S},B==null?void 0:B.secure)}async deleteForUser(I,S,B){const G=await this.getUserData(I,B==null?void 0:B.secure);delete G[S],await this.setUserData(I,G,B==null?void 0:B.secure)}async deleteAllUserData(I,S){await(S!=null&&S.secure?this.secureStorage:this.insecureStorage).delete(this.getKey(I))}}class Q{constructor(){this.map={}}async get(I){return this.map[I]||void 0}async set(I,S){this.map[I]=S}async delete(I){delete this.map[I]}}class De extends Error{constructor(I){super(I)}}class ae extends Error{constructor(I){super(`[${I}] is not implemented`)}}class Ce extends Error{constructor(I){super(`Invalid response from OIDC provider: missing fields ${I}`),this.missingFields=I}}class Be extends Error{constructor(I,S,B){super(I),this.error=S,this.errorDescription=B}}function Ve(Z){const I=new URL(Z);return new URL(I.pathname,I.origin).toString()}async function $e(Z,I,S){return new r.SignJWT({htu:Ve(Z),htm:I.toUpperCase(),jti:n.v4()}).setProtectedHeader({alg:a[0],jwk:S.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(S.privateKey,{})}async function we(){const{privateKey:Z,publicKey:I}=await r.generateKeyPair(a[0]),S={privateKey:Z,publicKey:await r.exportJWK(I)};return[S.publicKey.alg]=a,S}const Oe=600;function me(Z){return[401,403].includes(Z)}async function We(Z,I,S,B){var G;const de=new t.Headers(B==null?void 0:B.headers);return de.set("Authorization",`DPoP ${I}`),de.set("DPoP",await $e(Z,(G=B==null?void 0:B.method)!==null&&G!==void 0?G:"get",S)),{...B,headers:de}}async function et(Z,I,S,B){if(S!==void 0)return We(Z,I,S,B);const G=new t.Headers(B==null?void 0:B.headers);return G.set("Authorization",`Bearer ${I}`),{...B,headers:G}}async function Et(Z,I,S,B,G){return Z(S,await et(S.toString(),I,G,B))}async function Bt(Z,I,S){var B;const G=await Z.tokenRefresher.refresh(Z.sessionId,Z.refreshToken,I);return S==null||S.emit(s.SESSION_EXTENDED,(B=G.expiresIn)!==null&&B!==void 0?B:Oe),typeof G.refreshToken=="string"&&(S==null||S.emit(s.NEW_REFRESH_TOKEN,G.refreshToken)),{accessToken:G.accessToken,refreshToken:G.refreshToken,expiresIn:G.expiresIn}}const Vt=Z=>Z!==void 0?Z-u>0?Z-u:Z:Oe;async function Ke(Z,I,S){var B;let G=I,de;const Ee=S==null?void 0:S.refreshOptions;if(Ee!==void 0){const rt=async()=>{var lt,Nt,Kt,Xt;try{const{accessToken:dr,refreshToken:dn,expiresIn:te}=await Bt(Ee,S.dpopKey,S.eventEmitter);G=dr,dn!==void 0&&(Ee.refreshToken=dn),clearTimeout(de),de=setTimeout(rt,Vt(te)*1e3),(lt=S.eventEmitter)===null||lt===void 0||lt.emit(s.TIMEOUT_SET,de)}catch(dr){dr instanceof Be&&((Nt=S==null?void 0:S.eventEmitter)===null||Nt===void 0||Nt.emit(s.ERROR,dr.error,dr.errorDescription),(Kt=S==null?void 0:S.eventEmitter)===null||Kt===void 0||Kt.emit(s.SESSION_EXPIRED)),dr instanceof Ce&&dr.missingFields.includes("access_token")&&((Xt=S==null?void 0:S.eventEmitter)===null||Xt===void 0||Xt.emit(s.SESSION_EXPIRED))}};de=setTimeout(rt,Vt(S.expiresIn)*1e3),(B=S.eventEmitter)===null||B===void 0||B.emit(s.TIMEOUT_SET,de)}else if(S!==void 0&&S.eventEmitter!==void 0){const rt=setTimeout(()=>{S.eventEmitter.emit(s.SESSION_EXPIRED)},Vt(S.expiresIn)*1e3);S.eventEmitter.emit(s.TIMEOUT_SET,rt)}return async(rt,lt)=>{let Nt=await Et(Z,G,rt,lt,S==null?void 0:S.dpopKey);const Kt=!Nt.ok&&!me(Nt.status);return Nt.ok||Kt||Nt.url!==rt&&(S==null?void 0:S.dpopKey)!==void 0&&(Nt=await Et(Z,G,Nt.url,lt,S.dpopKey)),Nt}}const St="getResponse",jt={get:async(Z,I)=>St,set:async(Z,I)=>{},delete:async Z=>{},getForUser:async(Z,I,S)=>St,setForUser:async(Z,I,S)=>{},deleteForUser:async(Z,I,S)=>{},deleteAllUserData:async(Z,I)=>{}},Yt=Z=>{const I=Z;return{get:async S=>{if(I[S]!==void 0)return typeof I[S]=="string"?I[S]:JSON.stringify(I[S])},set:async(S,B)=>{I[S]=B},delete:async S=>{delete I[S]}}},ut=(Z,I=!1)=>I?new D(Yt(Z),Yt({})):new D(Yt({}),Yt(Z));return Xr.AggregateHandler=_,Xr.ConfigurationError=De,Xr.DEFAULT_SCOPES=y,Xr.EVENTS=s,Xr.InMemoryStorage=Q,Xr.InvalidResponseError=Ce,Xr.NotImplementedError=ae,Xr.OidcProviderError=Be,Xr.PREFERRED_SIGNING_ALG=a,Xr.REFRESH_BEFORE_EXPIRATION_SECONDS=u,Xr.SOLID_CLIENT_AUTHN_KEY_PREFIX=o,Xr.StorageUtility=D,Xr.StorageUtilityGetResponse=St,Xr.StorageUtilityMock=jt,Xr.USER_SESSION_PREFIX=E,Xr.buildAuthenticatedFetch=Ke,Xr.buildProxyHandler=m,Xr.createDpopHeader=$e,Xr.determineSigningAlg=j,Xr.fetchJwks=C,Xr.generateDpopKeyPair=we,Xr.getSessionIdFromOauthState=O,Xr.getWebidFromTokenPayload=R,Xr.handleRegistration=$,Xr.isSupportedTokenType=b,Xr.isValidRedirectUrl=F,Xr.loadOidcContextFromStorage=ne,Xr.mockStorage=Yt,Xr.mockStorageUtility=ut,Xr.saveSessionInfoToStorage=ee,Xr}var vc={},zf={},eA;function OD(){if(eA)return zf;eA=1,Object.defineProperty(zf,"__esModule",{value:!0});const e=Ri();class t extends e.StorageUtility{constructor(n,o){super(n,o)}}return zf.default=t,zf}var Jf={},vi={},ND={get exports(){return vi},set exports(e){vi=e}};(function(e,t){(function(n,o){e.exports=o()})(an,function(){return function(r){var n={};function o(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return r[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=r,o.c=n,o.d=function(a,s,u){o.o(a,s)||Object.defineProperty(a,s,{enumerable:!0,get:u})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,s){if(1&s&&(a=o(a)),8&s||4&s&&typeof a=="object"&&a&&a.__esModule)return a;var u=Object.create(null);if(o.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:a}),2&s&&typeof a!="string")for(var h in a)o.d(u,h,function(c){return a[c]}.bind(null,h));return u},o.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(s,"a",s),s},o.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},o.p="",o(o.s=22)}([function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function c(p,y){for(var m=0;m<y.length;m++){var _=y[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,_.key,_)}}return function(p,y,m){return y&&c(p.prototype,y),m&&c(p,m),p}}(),s={debug:function(){},info:function(){},warn:function(){},error:function(){}},u=void 0,h=void 0;(n.Log=function(){function c(){(function(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")})(this,c)}return c.reset=function(){h=3,u=s},c.debug=function(){if(h>=4){for(var y=arguments.length,m=Array(y),_=0;_<y;_++)m[_]=arguments[_];u.debug.apply(u,Array.from(m))}},c.info=function(){if(h>=3){for(var y=arguments.length,m=Array(y),_=0;_<y;_++)m[_]=arguments[_];u.info.apply(u,Array.from(m))}},c.warn=function(){if(h>=2){for(var y=arguments.length,m=Array(y),_=0;_<y;_++)m[_]=arguments[_];u.warn.apply(u,Array.from(m))}},c.error=function(){if(h>=1){for(var y=arguments.length,m=Array(y),_=0;_<y;_++)m[_]=arguments[_];u.error.apply(u,Array.from(m))}},a(c,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return h},set:function(y){if(!(0<=y&&y<=4))throw new Error("Invalid log level");h=y}},{key:"logger",get:function(){return u},set:function(y){if(!y.debug&&y.info&&(y.debug=y.info),!(y.debug&&y.info&&y.warn&&y.error))throw new Error("Invalid logger");u=y}}]),c}()).reset()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function c(p,y){for(var m=0;m<y.length;m++){var _=y[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,_.key,_)}}return function(p,y,m){return y&&c(p.prototype,y),m&&c(p,m),p}}(),s={setInterval:function(c){function p(y,m){return c.apply(this,arguments)}return p.toString=function(){return c.toString()},p}(function(c,p){return setInterval(c,p)}),clearInterval:function(c){function p(y){return c.apply(this,arguments)}return p.toString=function(){return c.toString()},p}(function(c){return clearInterval(c)})},u=!1,h=null;n.Global=function(){function c(){(function(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")})(this,c)}return c._testing=function(){u=!0},c.setXMLHttpRequest=function(y){h=y},a(c,null,[{key:"location",get:function(){if(!u)return location}},{key:"localStorage",get:function(){if(!u&&typeof window<"u")return localStorage}},{key:"sessionStorage",get:function(){if(!u&&typeof window<"u")return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!u&&typeof window<"u")return h||XMLHttpRequest}},{key:"timer",get:function(){if(!u)return s}}]),c}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.MetadataService=void 0;var a=function(){function p(y,m){for(var _=0;_<m.length;_++){var C=m[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(y,C.key,C)}}return function(y,m,_){return m&&p(y.prototype,m),_&&p(y,_),y}}(),s=o(0),u=o(7);function h(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}var c=".well-known/openid-configuration";n.MetadataService=function(){function p(y){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.JsonService;if(h(this,p),!y)throw s.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=y,this._jsonService=new m(["application/jwk-set+json"])}return p.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},p.prototype.getMetadata=function(){var m=this;return this._settings.metadata?(s.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(s.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(_){s.Log.debug("MetadataService.getMetadata: json received");var C=m._settings.metadataSeed||{};return m._settings.metadata=Object.assign({},C,_),m._settings.metadata})):(s.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},p.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},p.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},p.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},p.prototype.getTokenEndpoint=function(){var m=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this._getMetadataProperty("token_endpoint",m)},p.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},p.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},p.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},p.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},p.prototype._getMetadataProperty=function(m){var _=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return s.Log.debug("MetadataService.getMetadataProperty for: "+m),this.getMetadata().then(function(C){if(s.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),C[m]===void 0){if(_===!0)return void s.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+m);throw s.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+m),new Error("Metadata does not contain property "+m)}return C[m]})},p.prototype.getSigningKeys=function(){var m=this;return this._settings.signingKeys?(s.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(_){return s.Log.debug("MetadataService.getSigningKeys: jwks_uri received",_),m._jsonService.getJson(_).then(function(C){if(s.Log.debug("MetadataService.getSigningKeys: key set received",C),!C.keys)throw s.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return m._settings.signingKeys=C.keys,m._settings.signingKeys})})},a(p,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(c)<0&&(this._metadataUrl[this._metadataUrl.length-1]!=="/"&&(this._metadataUrl+="/"),this._metadataUrl+=c))),this._metadataUrl}}]),p}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.UrlUtility=void 0;var a=o(0),s=o(1);n.UrlUtility=function(){function u(){(function(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u)}return u.addQueryParam=function(c,p,y){return c.indexOf("?")<0&&(c+="?"),c[c.length-1]!=="?"&&(c+="&"),c+=encodeURIComponent(p),c+="=",c+=encodeURIComponent(y)},u.parseUrlFragment=function(c){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#",y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.Global;typeof c!="string"&&(c=y.location.href);var m=c.lastIndexOf(p);m>=0&&(c=c.substr(m+1)),p==="?"&&(m=c.indexOf("#"))>=0&&(c=c.substr(0,m));for(var _,C={},R=/([^&=]+)=([^&]*)/g,F=0;_=R.exec(c);)if(C[decodeURIComponent(_[1])]=decodeURIComponent(_[2].replace(/\+/g," ")),F++>50)return a.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",c),{error:"Response exceeded expected number of parameters"};for(var b in C)return C;return{}},u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.JoseUtil=void 0;var a=o(26),s=function(h){return h&&h.__esModule?h:{default:h}}(o(33));n.JoseUtil=(0,s.default)({jws:a.jws,KeyUtil:a.KeyUtil,X509:a.X509,crypto:a.crypto,hextob64u:a.hextob64u,b64tohex:a.b64tohex,AllowedSigningAlgs:a.AllowedSigningAlgs})},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.OidcClientSettings=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},s=function(){function b(E,P){for(var j=0;j<P.length;j++){var H=P[j];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(E,H.key,H)}}return function(E,P,j){return P&&b(E.prototype,P),j&&b(E,j),E}}(),u=o(0),h=o(23),c=o(6),p=o(24),y=o(2);function m(b,E){if(!(b instanceof E))throw new TypeError("Cannot call a class as a function")}var _=".well-known/openid-configuration",C="id_token",R="openid",F="client_secret_post";n.OidcClientSettings=function(){function b(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=E.authority,j=E.metadataUrl,H=E.metadata,$=E.signingKeys,O=E.metadataSeed,ne=E.client_id,ee=E.client_secret,D=E.response_type,Q=D===void 0?C:D,De=E.scope,ae=De===void 0?R:De,Ce=E.redirect_uri,Be=E.post_logout_redirect_uri,Ve=E.client_authentication,$e=Ve===void 0?F:Ve,we=E.prompt,Oe=E.display,me=E.max_age,We=E.ui_locales,et=E.acr_values,Et=E.resource,Bt=E.response_mode,Vt=E.filterProtocolClaims,Ke=Vt===void 0||Vt,St=E.loadUserInfo,jt=St===void 0||St,Yt=E.staleStateAge,ut=Yt===void 0?900:Yt,Z=E.clockSkew,I=Z===void 0?300:Z,S=E.clockService,B=S===void 0?new h.ClockService:S,G=E.userInfoJwtIssuer,de=G===void 0?"OP":G,Ee=E.mergeClaims,rt=Ee!==void 0&&Ee,lt=E.stateStore,Nt=lt===void 0?new c.WebStorageStateStore:lt,Kt=E.ResponseValidatorCtor,Xt=Kt===void 0?p.ResponseValidator:Kt,dr=E.MetadataServiceCtor,dn=dr===void 0?y.MetadataService:dr,te=E.extraQueryParams,fe=te===void 0?{}:te,K=E.extraTokenParams,T=K===void 0?{}:K;m(this,b),this._authority=P,this._metadataUrl=j,this._metadata=H,this._metadataSeed=O,this._signingKeys=$,this._client_id=ne,this._client_secret=ee,this._response_type=Q,this._scope=ae,this._redirect_uri=Ce,this._post_logout_redirect_uri=Be,this._client_authentication=$e,this._prompt=we,this._display=Oe,this._max_age=me,this._ui_locales=We,this._acr_values=et,this._resource=Et,this._response_mode=Bt,this._filterProtocolClaims=!!Ke,this._loadUserInfo=!!jt,this._staleStateAge=ut,this._clockSkew=I,this._clockService=B,this._userInfoJwtIssuer=de,this._mergeClaims=!!rt,this._stateStore=Nt,this._validator=new Xt(this),this._metadataService=new dn(this),this._extraQueryParams=(fe===void 0?"undefined":a(fe))==="object"?fe:{},this._extraTokenParams=(T===void 0?"undefined":a(T))==="object"?T:{}}return b.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},s(b,[{key:"client_id",get:function(){return this._client_id},set:function(P){if(this._client_id)throw u.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=P}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(P){if(this._authority)throw u.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=P}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(_)<0&&(this._metadataUrl[this._metadataUrl.length-1]!=="/"&&(this._metadataUrl+="/"),this._metadataUrl+=_)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(P){this._metadata=P}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(P){this._metadataSeed=P}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(P){this._signingKeys=P}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(P){(P===void 0?"undefined":a(P))==="object"?this._extraQueryParams=P:this._extraQueryParams={}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(P){(P===void 0?"undefined":a(P))==="object"?this._extraTokenParams=P:this._extraTokenParams={}}}]),b}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.WebStorageStateStore=void 0;var a=o(0),s=o(1);function u(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}n.WebStorageStateStore=function(){function h(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=c.prefix,y=p===void 0?"oidc.":p,m=c.store,_=m===void 0?s.Global.localStorage:m;u(this,h),this._store=_,this._prefix=y}return h.prototype.set=function(p,y){return a.Log.debug("WebStorageStateStore.set",p),p=this._prefix+p,this._store.setItem(p,y),Promise.resolve()},h.prototype.get=function(p){a.Log.debug("WebStorageStateStore.get",p),p=this._prefix+p;var y=this._store.getItem(p);return Promise.resolve(y)},h.prototype.remove=function(p){a.Log.debug("WebStorageStateStore.remove",p),p=this._prefix+p;var y=this._store.getItem(p);return this._store.removeItem(p),Promise.resolve(y)},h.prototype.getAllKeys=function(){a.Log.debug("WebStorageStateStore.getAllKeys");for(var p=[],y=0;y<this._store.length;y++){var m=this._store.key(y);m.indexOf(this._prefix)===0&&p.push(m.substr(this._prefix.length))}return Promise.resolve(p)},h}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.JsonService=void 0;var a=o(0),s=o(1);function u(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}n.JsonService=function(){function h(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.Global.XMLHttpRequest,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;u(this,h),c&&Array.isArray(c)?this._contentTypes=c.slice():this._contentTypes=[],this._contentTypes.push("application/json"),y&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=p,this._jwtHandler=y}return h.prototype.getJson=function(p,y){var m=this;if(!p)throw a.Log.error("JsonService.getJson: No url passed"),new Error("url");return a.Log.debug("JsonService.getJson, url: ",p),new Promise(function(_,C){var R=new m._XMLHttpRequest;R.open("GET",p);var F=m._contentTypes,b=m._jwtHandler;R.onload=function(){if(a.Log.debug("JsonService.getJson: HTTP response received, status",R.status),R.status===200){var E=R.getResponseHeader("Content-Type");if(E){var P=F.find(function(j){if(E.startsWith(j))return!0});if(P=="application/jwt")return void b(R).then(_,C);if(P)try{return void _(JSON.parse(R.responseText))}catch(j){return a.Log.error("JsonService.getJson: Error parsing JSON response",j.message),void C(j)}}C(Error("Invalid response Content-Type: "+E+", from URL: "+p))}else C(Error(R.statusText+" ("+R.status+")"))},R.onerror=function(){a.Log.error("JsonService.getJson: network error"),C(Error("Network Error"))},y&&(a.Log.debug("JsonService.getJson: token passed, setting Authorization header"),R.setRequestHeader("Authorization","Bearer "+y)),R.send()})},h.prototype.postForm=function(p,y,m){var _=this;if(!p)throw a.Log.error("JsonService.postForm: No url passed"),new Error("url");return a.Log.debug("JsonService.postForm, url: ",p),new Promise(function(C,R){var F=new _._XMLHttpRequest;F.open("POST",p);var b=_._contentTypes;F.onload=function(){if(a.Log.debug("JsonService.postForm: HTTP response received, status",F.status),F.status!==200){if(F.status===400&&($=F.getResponseHeader("Content-Type"))&&b.find(function(O){if($.startsWith(O))return!0}))try{var H=JSON.parse(F.responseText);if(H&&H.error)return a.Log.error("JsonService.postForm: Error from server: ",H.error),void R(new Error(H.error))}catch(O){return a.Log.error("JsonService.postForm: Error parsing JSON response",O.message),void R(O)}R(Error(F.statusText+" ("+F.status+")"))}else{var $;if(($=F.getResponseHeader("Content-Type"))&&b.find(function(O){if($.startsWith(O))return!0}))try{return void C(JSON.parse(F.responseText))}catch(O){return a.Log.error("JsonService.postForm: Error parsing JSON response",O.message),void R(O)}R(Error("Invalid response Content-Type: "+$+", from URL: "+p))}},F.onerror=function(){a.Log.error("JsonService.postForm: network error"),R(Error("Network Error"))};var E="";for(var P in y){var j=y[P];j&&(E.length>0&&(E+="&"),E+=encodeURIComponent(P),E+="=",E+=encodeURIComponent(j))}F.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),m!==void 0&&F.setRequestHeader("Authorization","Basic "+btoa(m)),F.send(E)})},h}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.SigninRequest=void 0;var a=o(0),s=o(3),u=o(13);n.SigninRequest=function(){function h(c){var p=c.url,y=c.client_id,m=c.redirect_uri,_=c.response_type,C=c.scope,R=c.authority,F=c.data,b=c.prompt,E=c.display,P=c.max_age,j=c.ui_locales,H=c.id_token_hint,$=c.login_hint,O=c.acr_values,ne=c.resource,ee=c.response_mode,D=c.request,Q=c.request_uri,De=c.extraQueryParams,ae=c.request_type,Ce=c.client_secret,Be=c.extraTokenParams,Ve=c.skipUserInfo;if(function(Et,Bt){if(!(Et instanceof Bt))throw new TypeError("Cannot call a class as a function")}(this,h),!p)throw a.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!y)throw a.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!m)throw a.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!_)throw a.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!C)throw a.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!R)throw a.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var $e=h.isOidc(_),we=h.isCode(_);ee||(ee=h.isCode(_)?"query":null),this.state=new u.SigninState({nonce:$e,data:F,client_id:y,authority:R,redirect_uri:m,code_verifier:we,request_type:ae,response_mode:ee,client_secret:Ce,scope:C,extraTokenParams:Be,skipUserInfo:Ve}),p=s.UrlUtility.addQueryParam(p,"client_id",y),p=s.UrlUtility.addQueryParam(p,"redirect_uri",m),p=s.UrlUtility.addQueryParam(p,"response_type",_),p=s.UrlUtility.addQueryParam(p,"scope",C),p=s.UrlUtility.addQueryParam(p,"state",this.state.id),$e&&(p=s.UrlUtility.addQueryParam(p,"nonce",this.state.nonce)),we&&(p=s.UrlUtility.addQueryParam(p,"code_challenge",this.state.code_challenge),p=s.UrlUtility.addQueryParam(p,"code_challenge_method","S256"));var Oe={prompt:b,display:E,max_age:P,ui_locales:j,id_token_hint:H,login_hint:$,acr_values:O,resource:ne,request:D,request_uri:Q,response_mode:ee};for(var me in Oe)Oe[me]&&(p=s.UrlUtility.addQueryParam(p,me,Oe[me]));for(var We in De)p=s.UrlUtility.addQueryParam(p,We,De[We]);this.url=p}return h.isOidc=function(p){return!!p.split(/\s+/g).filter(function(y){return y==="id_token"})[0]},h.isOAuth=function(p){return!!p.split(/\s+/g).filter(function(y){return y==="token"})[0]},h.isCode=function(p){return!!p.split(/\s+/g).filter(function(y){return y==="code"})[0]},h}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.State=void 0;var a=function(){function c(p,y){for(var m=0;m<y.length;m++){var _=y[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,_.key,_)}}return function(p,y,m){return y&&c(p.prototype,y),m&&c(p,m),p}}(),s=o(0),u=function(p){return p&&p.__esModule?p:{default:p}}(o(14));function h(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}n.State=function(){function c(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=p.id,m=p.data,_=p.created,C=p.request_type;h(this,c),this._id=y||(0,u.default)(),this._data=m,this._created=typeof _=="number"&&_>0?_:parseInt(Date.now()/1e3),this._request_type=C}return c.prototype.toStorageString=function(){return s.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},c.fromStorageString=function(y){return s.Log.debug("State.fromStorageString"),new c(JSON.parse(y))},c.clearStaleState=function(y,m){var _=Date.now()/1e3-m;return y.getAllKeys().then(function(C){s.Log.debug("State.clearStaleState: got keys",C);for(var R=[],F=function(j){var H=C[j];E=y.get(H).then(function($){var O=!1;if($)try{var ne=c.fromStorageString($);s.Log.debug("State.clearStaleState: got item from key: ",H,ne.created),ne.created<=_&&(O=!0)}catch(ee){s.Log.error("State.clearStaleState: Error parsing state for key",H,ee.message),O=!0}else s.Log.debug("State.clearStaleState: no item in storage for key: ",H),O=!0;if(O)return s.Log.debug("State.clearStaleState: removed item for key: ",H),y.remove(H)}),R.push(E)},b=0;b<C.length;b++){var E;F(b)}return s.Log.debug("State.clearStaleState: waiting on promise count:",R.length),Promise.all(R)})},a(c,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),c}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.OidcClient=void 0;var a=function(){function F(b,E){for(var P=0;P<E.length;P++){var j=E[P];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,j.key,j)}}return function(b,E,P){return E&&F(b.prototype,E),P&&F(b,P),b}}(),s=o(0),u=o(5),h=o(12),c=o(8),p=o(34),y=o(35),m=o(36),_=o(13),C=o(9);function R(F,b){if(!(F instanceof b))throw new TypeError("Cannot call a class as a function")}n.OidcClient=function(){function F(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};R(this,F),b instanceof u.OidcClientSettings?this._settings=b:this._settings=new u.OidcClientSettings(b)}return F.prototype.createSigninRequest=function(){var E=this,P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=P.response_type,H=P.scope,$=P.redirect_uri,O=P.data,ne=P.state,ee=P.prompt,D=P.display,Q=P.max_age,De=P.ui_locales,ae=P.id_token_hint,Ce=P.login_hint,Be=P.acr_values,Ve=P.resource,$e=P.request,we=P.request_uri,Oe=P.response_mode,me=P.extraQueryParams,We=P.extraTokenParams,et=P.request_type,Et=P.skipUserInfo,Bt=arguments[1];s.Log.debug("OidcClient.createSigninRequest");var Vt=this._settings.client_id;j=j||this._settings.response_type,H=H||this._settings.scope,$=$||this._settings.redirect_uri,ee=ee||this._settings.prompt,D=D||this._settings.display,Q=Q||this._settings.max_age,De=De||this._settings.ui_locales,Be=Be||this._settings.acr_values,Ve=Ve||this._settings.resource,Oe=Oe||this._settings.response_mode,me=me||this._settings.extraQueryParams,We=We||this._settings.extraTokenParams;var Ke=this._settings.authority;return c.SigninRequest.isCode(j)&&j!=="code"?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(St){s.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",St);var jt=new c.SigninRequest({url:St,client_id:Vt,redirect_uri:$,response_type:j,scope:H,data:O||ne,authority:Ke,prompt:ee,display:D,max_age:Q,ui_locales:De,id_token_hint:ae,login_hint:Ce,acr_values:Be,resource:Ve,request:$e,request_uri:we,extraQueryParams:me,extraTokenParams:We,request_type:et,response_mode:Oe,client_secret:E._settings.client_secret,skipUserInfo:Et}),Yt=jt.state;return(Bt=Bt||E._stateStore).set(Yt.id,Yt.toStorageString()).then(function(){return jt})})},F.prototype.readSigninResponseState=function(E,P){var j=arguments.length>2&&arguments[2]!==void 0&&arguments[2];s.Log.debug("OidcClient.readSigninResponseState");var H=this._settings.response_mode==="query"||!this._settings.response_mode&&c.SigninRequest.isCode(this._settings.response_type),$=H?"?":"#",O=new p.SigninResponse(E,$);if(!O.state)return s.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response"));P=P||this._stateStore;var ne=j?P.remove.bind(P):P.get.bind(P);return ne(O.state).then(function(ee){if(!ee)throw s.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:_.SigninState.fromStorageString(ee),response:O}})},F.prototype.processSigninResponse=function(E,P){var j=this;return s.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(E,P,!0).then(function(H){var $=H.state,O=H.response;return s.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),j._validator.validateSigninResponse($,O)})},F.prototype.createSignoutRequest=function(){var E=this,P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=P.id_token_hint,H=P.data,$=P.state,O=P.post_logout_redirect_uri,ne=P.extraQueryParams,ee=P.request_type,D=arguments[1];return s.Log.debug("OidcClient.createSignoutRequest"),O=O||this._settings.post_logout_redirect_uri,ne=ne||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(Q){if(!Q)throw s.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");s.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",Q);var De=new y.SignoutRequest({url:Q,id_token_hint:j,post_logout_redirect_uri:O,data:H||$,extraQueryParams:ne,request_type:ee}),ae=De.state;return ae&&(s.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(D=D||E._stateStore).set(ae.id,ae.toStorageString())),De})},F.prototype.readSignoutResponseState=function(E,P){var j=arguments.length>2&&arguments[2]!==void 0&&arguments[2];s.Log.debug("OidcClient.readSignoutResponseState");var H=new m.SignoutResponse(E);if(!H.state)return s.Log.debug("OidcClient.readSignoutResponseState: No state in response"),H.error?(s.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",H.error),Promise.reject(new h.ErrorResponse(H))):Promise.resolve({state:void 0,response:H});var $=H.state;P=P||this._stateStore;var O=j?P.remove.bind(P):P.get.bind(P);return O($).then(function(ne){if(!ne)throw s.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:C.State.fromStorageString(ne),response:H}})},F.prototype.processSignoutResponse=function(E,P){var j=this;return s.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(E,P,!0).then(function(H){var $=H.state,O=H.response;return $?(s.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),j._validator.validateSignoutResponse($,O)):(s.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),O)})},F.prototype.clearStaleState=function(E){return s.Log.debug("OidcClient.clearStaleState"),E=E||this._stateStore,C.State.clearStaleState(E,this.settings.staleStateAge)},a(F,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),F}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenClient=void 0;var a=o(7),s=o(2),u=o(0);function h(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}n.TokenClient=function(){function c(p){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.JsonService,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.MetadataService;if(h(this,c),!p)throw u.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=p,this._jsonService=new y,this._metadataService=new m(this._settings)}return c.prototype.exchangeCode=function(){var y=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(m=Object.assign({},m)).grant_type=m.grant_type||"authorization_code",m.client_id=m.client_id||this._settings.client_id,m.client_secret=m.client_secret||this._settings.client_secret,m.redirect_uri=m.redirect_uri||this._settings.redirect_uri;var _=void 0,C=m._client_authentication||this._settings._client_authentication;return delete m._client_authentication,m.code?m.redirect_uri?m.code_verifier?m.client_id?m.client_secret||C!="client_secret_basic"?(C=="client_secret_basic"&&(_=m.client_id+":"+m.client_secret,delete m.client_id,delete m.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(R){return u.Log.debug("TokenClient.exchangeCode: Received token endpoint"),y._jsonService.postForm(R,m,_).then(function(F){return u.Log.debug("TokenClient.exchangeCode: response received"),F})})):(u.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(u.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(u.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(u.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(u.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},c.prototype.exchangeRefreshToken=function(){var y=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(m=Object.assign({},m)).grant_type=m.grant_type||"refresh_token",m.client_id=m.client_id||this._settings.client_id,m.client_secret=m.client_secret||this._settings.client_secret;var _=void 0,C=m._client_authentication||this._settings._client_authentication;return delete m._client_authentication,m.refresh_token?m.client_id?(C=="client_secret_basic"&&(_=m.client_id+":"+m.client_secret,delete m.client_id,delete m.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(R){return u.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),y._jsonService.postForm(R,m,_).then(function(F){return u.Log.debug("TokenClient.exchangeRefreshToken: response received"),F})})):(u.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(u.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},c}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorResponse=void 0;var a=o(0);function s(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function u(h,c){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||typeof c!="object"&&typeof c!="function"?h:c}n.ErrorResponse=function(h){function c(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=p.error,m=p.error_description,_=p.error_uri,C=p.state,R=p.session_state;if(s(this,c),!y)throw a.Log.error("No error passed to ErrorResponse"),new Error("error");var F=u(this,h.call(this,m||y));return F.name="ErrorResponse",F.error=y,F.error_description=m,F.error_uri=_,F.state=C,F.session_state=R,F}return function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);y.prototype=Object.create(m&&m.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(y,m):y.__proto__=m)}(c,h),c}(Error)},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.SigninState=void 0;var a=function(){function m(_,C){for(var R=0;R<C.length;R++){var F=C[R];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(_,F.key,F)}}return function(_,C,R){return C&&m(_.prototype,C),R&&m(_,R),_}}(),s=o(0),u=o(9),h=o(4),c=function(_){return _&&_.__esModule?_:{default:_}}(o(14));function p(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}function y(m,_){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||typeof _!="object"&&typeof _!="function"?m:_}n.SigninState=function(m){function _(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},R=C.nonce,F=C.authority,b=C.client_id,E=C.redirect_uri,P=C.code_verifier,j=C.response_mode,H=C.client_secret,$=C.scope,O=C.extraTokenParams,ne=C.skipUserInfo;p(this,_);var ee=y(this,m.call(this,arguments[0]));if(R===!0?ee._nonce=(0,c.default)():R&&(ee._nonce=R),P===!0?ee._code_verifier=(0,c.default)()+(0,c.default)()+(0,c.default)():P&&(ee._code_verifier=P),ee.code_verifier){var D=h.JoseUtil.hashString(ee.code_verifier,"SHA256");ee._code_challenge=h.JoseUtil.hexToBase64Url(D)}return ee._redirect_uri=E,ee._authority=F,ee._client_id=b,ee._response_mode=j,ee._client_secret=H,ee._scope=$,ee._extraTokenParams=O,ee._skipUserInfo=ne,ee}return function(R,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);R.prototype=Object.create(F&&F.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(R,F):R.__proto__=F)}(_,m),_.prototype.toStorageString=function(){return s.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},_.fromStorageString=function(R){return s.Log.debug("SigninState.fromStorageString"),new _(JSON.parse(R))},a(_,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),_}(u.State)},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return(a!="undefined"&&a!==null&&a.getRandomValues!==void 0?s:u)().replace(/-/g,"")};var a=typeof window<"u"?window.crypto||window.msCrypto:null;function s(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(h){return(h^a.getRandomValues(new Uint8Array(1))[0]&15>>h/4).toString(16)})}function u(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(h){return(h^16*Math.random()>>h/4).toString(16)})}r.exports=n.default},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.User=void 0;var a=function(){function u(h,c){for(var p=0;p<c.length;p++){var y=c[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,c,p){return c&&u(h.prototype,c),p&&u(h,p),h}}(),s=o(0);n.User=function(){function u(h){var c=h.id_token,p=h.session_state,y=h.access_token,m=h.refresh_token,_=h.token_type,C=h.scope,R=h.profile,F=h.expires_at,b=h.state;(function(P,j){if(!(P instanceof j))throw new TypeError("Cannot call a class as a function")})(this,u),this.id_token=c,this.session_state=p,this.access_token=y,this.refresh_token=m,this.token_type=_,this.scope=C,this.profile=R,this.expires_at=F,this.state=b}return u.prototype.toStorageString=function(){return s.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},u.fromStorageString=function(c){return s.Log.debug("User.fromStorageString"),new u(JSON.parse(c))},a(u,[{key:"expires_in",get:function(){if(this.expires_at){var c=parseInt(Date.now()/1e3);return this.expires_at-c}},set:function(c){var p=parseInt(c);if(typeof p=="number"&&p>0){var y=parseInt(Date.now()/1e3);this.expires_at=y+p}}},{key:"expired",get:function(){var c=this.expires_in;if(c!==void 0)return c<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.AccessTokenEvents=void 0;var a=o(0),s=o(46);function u(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}n.AccessTokenEvents=function(){function h(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=c.accessTokenExpiringNotificationTime,y=p===void 0?60:p,m=c.accessTokenExpiringTimer,_=m===void 0?new s.Timer("Access token expiring"):m,C=c.accessTokenExpiredTimer,R=C===void 0?new s.Timer("Access token expired"):C;u(this,h),this._accessTokenExpiringNotificationTime=y,this._accessTokenExpiring=_,this._accessTokenExpired=R}return h.prototype.load=function(p){if(p.access_token&&p.expires_in!==void 0){var y=p.expires_in;if(a.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",y),y>0){var m=y-this._accessTokenExpiringNotificationTime;m<=0&&(m=1),a.Log.debug("AccessTokenEvents.load: registering expiring timer in:",m),this._accessTokenExpiring.init(m)}else a.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var _=y+1;a.Log.debug("AccessTokenEvents.load: registering expired timer in:",_),this._accessTokenExpired.init(_)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},h.prototype.unload=function(){a.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},h.prototype.addAccessTokenExpiring=function(p){this._accessTokenExpiring.addHandler(p)},h.prototype.removeAccessTokenExpiring=function(p){this._accessTokenExpiring.removeHandler(p)},h.prototype.addAccessTokenExpired=function(p){this._accessTokenExpired.addHandler(p)},h.prototype.removeAccessTokenExpired=function(p){this._accessTokenExpired.removeHandler(p)},h}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.Event=void 0;var a=o(0);n.Event=function(){function s(u){(function(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")})(this,s),this._name=u,this._callbacks=[]}return s.prototype.addHandler=function(h){this._callbacks.push(h)},s.prototype.removeHandler=function(h){var c=this._callbacks.findIndex(function(p){return p===h});c>=0&&this._callbacks.splice(c,1)},s.prototype.raise=function(){a.Log.debug("Event: Raising event: "+this._name);for(var h=0;h<this._callbacks.length;h++){var c;(c=this._callbacks)[h].apply(c,arguments)}},s}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.SessionMonitor=void 0;var a=function(){function p(y,m){for(var _=0;_<m.length;_++){var C=m[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(y,C.key,C)}}return function(y,m,_){return m&&p(y.prototype,m),_&&p(y,_),y}}(),s=o(0),u=o(19),h=o(1);function c(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}n.SessionMonitor=function(){function p(y){var m=this,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.CheckSessionIFrame,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h.Global.timer;if(c(this,p),!y)throw s.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=y,this._CheckSessionIFrameCtor=_,this._timer=C,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(R){R?m._start(R):m._settings.monitorAnonymousSession&&m._userManager.querySessionStatus().then(function(F){var b={session_state:F.session_state};F.sub&&F.sid&&(b.profile={sub:F.sub,sid:F.sid}),m._start(b)}).catch(function(F){s.Log.error("SessionMonitor ctor: error from querySessionStatus:",F.message)})}).catch(function(R){s.Log.error("SessionMonitor ctor: error from getUser:",R.message)}))}return p.prototype._start=function(m){var _=this,C=m.session_state;C&&(m.profile?(this._sub=m.profile.sub,this._sid=m.profile.sid,s.Log.debug("SessionMonitor._start: session_state:",C,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,s.Log.debug("SessionMonitor._start: session_state:",C,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(C):this._metadataService.getCheckSessionIframe().then(function(R){if(R){s.Log.debug("SessionMonitor._start: Initializing check session iframe");var F=_._client_id,b=_._checkSessionInterval,E=_._stopCheckSessionOnError;_._checkSessionIFrame=new _._CheckSessionIFrameCtor(_._callback.bind(_),F,R,b,E),_._checkSessionIFrame.load().then(function(){_._checkSessionIFrame.start(C)})}else s.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(R){s.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",R.message)}))},p.prototype._stop=function(){var m=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(s.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var _=this._timer.setInterval(function(){m._timer.clearInterval(_),m._userManager.querySessionStatus().then(function(C){var R={session_state:C.session_state};C.sub&&C.sid&&(R.profile={sub:C.sub,sid:C.sid}),m._start(R)}).catch(function(C){s.Log.error("SessionMonitor: error from querySessionStatus:",C.message)})},1e3)},p.prototype._callback=function(){var m=this;this._userManager.querySessionStatus().then(function(_){var C=!0;_?_.sub===m._sub?(C=!1,m._checkSessionIFrame.start(_.session_state),_.sid===m._sid?s.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",_.session_state):(s.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",_.session_state),m._userManager.events._raiseUserSessionChanged())):s.Log.debug("SessionMonitor._callback: Different subject signed into OP:",_.sub):s.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),C&&(m._sub?(s.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),m._userManager.events._raiseUserSignedOut()):(s.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),m._userManager.events._raiseUserSignedIn()))}).catch(function(_){m._sub&&(s.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",_.message),m._userManager.events._raiseUserSignedOut())})},a(p,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),p}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.CheckSessionIFrame=void 0;var a=o(0);function s(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}n.CheckSessionIFrame=function(){function u(h,c,p,y){var m=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];s(this,u),this._callback=h,this._client_id=c,this._url=p,this._interval=y||2e3,this._stopOnError=m;var _=p.indexOf("/",p.indexOf("//")+2);this._frame_origin=p.substr(0,_),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=p}return u.prototype.load=function(){var c=this;return new Promise(function(p){c._frame.onload=function(){p()},window.document.body.appendChild(c._frame),c._boundMessageEvent=c._message.bind(c),window.addEventListener("message",c._boundMessageEvent,!1)})},u.prototype._message=function(c){c.origin===this._frame_origin&&c.source===this._frame.contentWindow&&(c.data==="error"?(a.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):c.data==="changed"?(a.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):a.Log.debug("CheckSessionIFrame: "+c.data+" message from check session op iframe"))},u.prototype.start=function(c){var p=this;if(this._session_state!==c){a.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=c;var y=function(){p._frame.contentWindow.postMessage(p._client_id+" "+p._session_state,p._frame_origin)};y(),this._timer=window.setInterval(y,this._interval)}},u.prototype.stop=function(){this._session_state=null,this._timer&&(a.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenRevocationClient=void 0;var a=o(0),s=o(2),u=o(1);function h(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")}var c="access_token",p="refresh_token";n.TokenRevocationClient=function(){function y(m){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.Global.XMLHttpRequest,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.MetadataService;if(h(this,y),!m)throw a.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=m,this._XMLHttpRequestCtor=_,this._metadataService=new C(this._settings)}return y.prototype.revoke=function(_,C){var R=this,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"access_token";if(!_)throw a.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(F!==c&&F!=p)throw a.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(b){if(b){a.Log.debug("TokenRevocationClient.revoke: Revoking "+F);var E=R._settings.client_id,P=R._settings.client_secret;return R._revoke(b,E,P,_,F)}if(C)throw a.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},y.prototype._revoke=function(_,C,R,F,b){var E=this;return new Promise(function(P,j){var H=new E._XMLHttpRequestCtor;H.open("POST",_),H.onload=function(){a.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",H.status),H.status===200?P():j(Error(H.statusText+" ("+H.status+")"))},H.onerror=function(){a.Log.debug("TokenRevocationClient.revoke: Network Error."),j("Network Error")};var $="client_id="+encodeURIComponent(C);R&&($+="&client_secret="+encodeURIComponent(R)),$+="&token_type_hint="+encodeURIComponent(b),$+="&token="+encodeURIComponent(F),H.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),H.send($)})},y}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.CordovaPopupWindow=void 0;var a=function(){function u(h,c){for(var p=0;p<c.length;p++){var y=c[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,c,p){return c&&u(h.prototype,c),p&&u(h,p),h}}(),s=o(0);n.CordovaPopupWindow=function(){function u(h){var c=this;(function(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")})(this,u),this._promise=new Promise(function(p,y){c._resolve=p,c._reject=y}),this.features=h.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=h.popupWindowTarget||"_blank",this.redirect_uri=h.startUrl,s.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return u.prototype._isInAppBrowserInstalled=function(c){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(p){return c.hasOwnProperty(p)})},u.prototype.navigate=function(c){if(c&&c.url){if(!window.cordova)return this._error("cordova is undefined");var p=window.cordova.require("cordova/plugin_list").metadata;if(this._isInAppBrowserInstalled(p)===!1)return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(c.url,this.target,this.features),this._popup?(s.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},u.prototype._loadStartCallback=function(c){c.url.indexOf(this.redirect_uri)===0&&this._success({url:c.url})},u.prototype._exitCallback=function(c){this._error(c)},u.prototype._success=function(c){this._cleanup(),s.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(c)},u.prototype._error=function(c){this._cleanup(),s.Log.error(c),this._reject(new Error(c))},u.prototype.close=function(){this._cleanup()},u.prototype._cleanup=function(){this._popup&&(s.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},a(u,[{key:"promise",get:function(){return this._promise}}]),u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0});var a=o(0),s=o(10),u=o(5),h=o(6),c=o(37),p=o(38),y=o(16),m=o(2),_=o(48),C=o(49),R=o(19),F=o(20),b=o(18),E=o(1),P=o(15),j=o(50);n.default={Version:j.Version,Log:a.Log,OidcClient:s.OidcClient,OidcClientSettings:u.OidcClientSettings,WebStorageStateStore:h.WebStorageStateStore,InMemoryWebStorage:c.InMemoryWebStorage,UserManager:p.UserManager,AccessTokenEvents:y.AccessTokenEvents,MetadataService:m.MetadataService,CordovaPopupNavigator:_.CordovaPopupNavigator,CordovaIFrameNavigator:C.CordovaIFrameNavigator,CheckSessionIFrame:R.CheckSessionIFrame,TokenRevocationClient:F.TokenRevocationClient,SessionMonitor:b.SessionMonitor,Global:E.Global,User:P.User},r.exports=n.default},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.ClockService=function(){function a(){(function(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")})(this,a)}return a.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},a}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.ResponseValidator=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},s=o(0),u=o(2),h=o(25),c=o(11),p=o(12),y=o(4);function m(C,R){if(!(C instanceof R))throw new TypeError("Cannot call a class as a function")}var _=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];n.ResponseValidator=function(){function C(R){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.MetadataService,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h.UserInfoService,E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:y.JoseUtil,P=arguments.length>4&&arguments[4]!==void 0?arguments[4]:c.TokenClient;if(m(this,C),!R)throw s.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=R,this._metadataService=new F(this._settings),this._userInfoService=new b(this._settings),this._joseUtil=E,this._tokenClient=new P(this._settings)}return C.prototype.validateSigninResponse=function(F,b){var E=this;return s.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(F,b).then(function(P){return s.Log.debug("ResponseValidator.validateSigninResponse: state processed"),E._validateTokens(F,P).then(function(j){return s.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),E._processClaims(F,j).then(function(H){return s.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),H})})})},C.prototype.validateSignoutResponse=function(F,b){return F.id!==b.state?(s.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(s.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),b.state=F.data,b.error?(s.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",b.error),Promise.reject(new p.ErrorResponse(b))):Promise.resolve(b))},C.prototype._processSigninParams=function(F,b){if(F.id!==b.state)return s.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!F.client_id)return s.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!F.authority)return s.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==F.authority)return s.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=F.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==F.client_id)return s.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=F.client_id;return s.Log.debug("ResponseValidator._processSigninParams: state validated"),b.state=F.data,b.error?(s.Log.warn("ResponseValidator._processSigninParams: Response was error",b.error),Promise.reject(new p.ErrorResponse(b))):F.nonce&&!b.id_token?(s.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!F.nonce&&b.id_token?(s.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):F.code_verifier&&!b.code?(s.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!F.code_verifier&&b.code?(s.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(b.scope||(b.scope=F.scope),Promise.resolve(b))},C.prototype._processClaims=function(F,b){var E=this;if(b.isOpenIdConnect){if(s.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),b.profile=this._filterProtocolClaims(b.profile),F.skipUserInfo!==!0&&this._settings.loadUserInfo&&b.access_token)return s.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(b.access_token).then(function(P){return s.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),P.sub!==b.profile.sub?(s.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(b.profile=E._mergeClaims(b.profile,P),s.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",b.profile),b)});s.Log.debug("ResponseValidator._processClaims: not loading user info")}else s.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(b)},C.prototype._mergeClaims=function(F,b){var E=Object.assign({},F);for(var P in b){var j=b[P];Array.isArray(j)||(j=[j]);for(var H=0;H<j.length;H++){var $=j[H];E[P]?Array.isArray(E[P])?E[P].indexOf($)<0&&E[P].push($):E[P]!==$&&(($===void 0?"undefined":a($))==="object"&&this._settings.mergeClaims?E[P]=this._mergeClaims(E[P],$):E[P]=[E[P],$]):E[P]=$}}return E},C.prototype._filterProtocolClaims=function(F){s.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",F);var b=Object.assign({},F);return this._settings._filterProtocolClaims?(_.forEach(function(E){delete b[E]}),s.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",b)):s.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),b},C.prototype._validateTokens=function(F,b){return b.code?(s.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(F,b)):b.id_token?b.access_token?(s.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(F,b)):(s.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(F,b)):(s.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(b))},C.prototype._processCode=function(F,b){var E=this,P={client_id:F.client_id,client_secret:F.client_secret,code:b.code,redirect_uri:F.redirect_uri,code_verifier:F.code_verifier};return F.extraTokenParams&&a(F.extraTokenParams)==="object"&&Object.assign(P,F.extraTokenParams),this._tokenClient.exchangeCode(P).then(function(j){for(var H in j)b[H]=j[H];return b.id_token?(s.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),E._validateIdTokenAttributes(F,b)):(s.Log.debug("ResponseValidator._processCode: token response successful, returning response"),b)})},C.prototype._validateIdTokenAttributes=function(F,b){var E=this;return this._metadataService.getIssuer().then(function(P){var j=F.client_id,H=E._settings.clockSkew;return s.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",H),E._settings.getEpochTime().then(function($){return E._joseUtil.validateJwtAttributes(b.id_token,P,j,H,$).then(function(O){return F.nonce&&F.nonce!==O.nonce?(s.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):O.sub?(b.profile=O,b):(s.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},C.prototype._validateIdTokenAndAccessToken=function(F,b){var E=this;return this._validateIdToken(F,b).then(function(P){return E._validateAccessToken(P)})},C.prototype._getSigningKeyForJwt=function(F){var b=this;return this._metadataService.getSigningKeys().then(function(E){var P=F.header.kid;if(!E)return s.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));s.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var j=void 0;if(P)j=E.filter(function(H){return H.kid===P})[0];else{if((E=b._filterByAlg(E,F.header.alg)).length>1)return s.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));j=E[0]}return Promise.resolve(j)})},C.prototype._getSigningKeyForJwtWithSingleRetry=function(F){var b=this;return this._getSigningKeyForJwt(F).then(function(E){return E?Promise.resolve(E):(b._metadataService.resetSigningKeys(),b._getSigningKeyForJwt(F))})},C.prototype._validateIdToken=function(F,b){var E=this;if(!F.nonce)return s.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var P=this._joseUtil.parseJwt(b.id_token);return P&&P.header&&P.payload?F.nonce!==P.payload.nonce?(s.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(j){return s.Log.debug("ResponseValidator._validateIdToken: Received issuer"),E._getSigningKeyForJwtWithSingleRetry(P).then(function(H){if(!H)return s.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var $=F.client_id,O=E._settings.clockSkew;return s.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",O),E._joseUtil.validateJwt(b.id_token,H,j,$,O).then(function(){return s.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),P.payload.sub?(b.profile=P.payload,b):(s.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})}):(s.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",P),Promise.reject(new Error("Failed to parse id_token")))},C.prototype._filterByAlg=function(F,b){var E=null;if(b.startsWith("RS"))E="RSA";else if(b.startsWith("PS"))E="PS";else{if(!b.startsWith("ES"))return s.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",b),[];E="EC"}return s.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",E),F=F.filter(function(P){return P.kty===E}),s.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",E,F.length),F},C.prototype._validateAccessToken=function(F){if(!F.profile)return s.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!F.profile.at_hash)return s.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!F.id_token)return s.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var b=this._joseUtil.parseJwt(F.id_token);if(!b||!b.header)return s.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",b),Promise.reject(new Error("Failed to parse id_token"));var E=b.header.alg;if(!E||E.length!==5)return s.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",E),Promise.reject(new Error("Unsupported alg: "+E));var P=E.substr(2,3);if(!P)return s.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",E,P),Promise.reject(new Error("Unsupported alg: "+E));if((P=parseInt(P))!==256&&P!==384&&P!==512)return s.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",E,P),Promise.reject(new Error("Unsupported alg: "+E));var j="sha"+P,H=this._joseUtil.hashString(F.access_token,j);if(!H)return s.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",j),Promise.reject(new Error("Failed to validate at_hash"));var $=H.substr(0,H.length/2),O=this._joseUtil.hexToBase64Url($);return O!==F.profile.at_hash?(s.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",O,F.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(s.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(F))},C}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.UserInfoService=void 0;var a=o(7),s=o(2),u=o(0),h=o(4);function c(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}n.UserInfoService=function(){function p(y){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.JsonService,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.MetadataService,C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:h.JoseUtil;if(c(this,p),!y)throw u.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=y,this._jsonService=new m(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new _(this._settings),this._joseUtil=C}return p.prototype.getClaims=function(m){var _=this;return m?this._metadataService.getUserInfoEndpoint().then(function(C){return u.Log.debug("UserInfoService.getClaims: received userinfo url",C),_._jsonService.getJson(C,m).then(function(R){return u.Log.debug("UserInfoService.getClaims: claims received",R),R})}):(u.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},p.prototype._getClaimsFromJwt=function(m){var _=this;try{var C=this._joseUtil.parseJwt(m.responseText);if(!C||!C.header||!C.payload)return u.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",C),Promise.reject(new Error("Failed to parse id_token"));var R=C.header.kid,F=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":F=this._metadataService.getIssuer();break;case"ANY":F=Promise.resolve(C.payload.iss);break;default:F=Promise.resolve(this._settings.userInfoJwtIssuer)}return F.then(function(b){return u.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+b),_._metadataService.getSigningKeys().then(function(E){if(!E)return u.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));u.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var P=void 0;if(R)P=E.filter(function($){return $.kid===R})[0];else{if((E=_._filterByAlg(E,C.header.alg)).length>1)return u.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));P=E[0]}if(!P)return u.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var j=_._settings.client_id,H=_._settings.clockSkew;return u.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",H),_._joseUtil.validateJwt(m.responseText,P,b,j,H,void 0,!0).then(function(){return u.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),C.payload})})})}catch(b){return u.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",b.message),void reject(b)}},p.prototype._filterByAlg=function(m,_){var C=null;if(_.startsWith("RS"))C="RSA";else if(_.startsWith("PS"))C="PS";else{if(!_.startsWith("ES"))return u.Log.debug("UserInfoService._filterByAlg: alg not supported: ",_),[];C="EC"}return u.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",C),m=m.filter(function(R){return R.kty===C}),u.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",C,m.length),m},p}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.AllowedSigningAlgs=n.b64tohex=n.hextob64u=n.crypto=n.X509=n.KeyUtil=n.jws=void 0;var a=o(27);n.jws=a.jws,n.KeyUtil=a.KEYUTIL,n.X509=a.X509,n.crypto=a.crypto,n.hextob64u=a.hextob64u,n.b64tohex=a.b64tohex,n.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(r,n,o){(function(a){Object.defineProperty(n,"__esModule",{value:!0});var s,u,h,c,p,y,m,_,C,R,F,b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},E={userAgent:!1},P={},j=j||(s=Math,h=(u={}).lib={},c=h.Base=function(){function f(){}return{extend:function(w){f.prototype=this;var A=new f;return w&&A.mixIn(w),A.hasOwnProperty("init")||(A.init=function(){A.$super.init.apply(this,arguments)}),A.init.prototype=A,A.$super=this,A},create:function(){var w=this.extend();return w.init.apply(w,arguments),w},init:function(){},mixIn:function(w){for(var A in w)w.hasOwnProperty(A)&&(this[A]=w[A]);w.hasOwnProperty("toString")&&(this.toString=w.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),p=h.WordArray=c.extend({init:function(g,w){g=this.words=g||[],this.sigBytes=w??4*g.length},toString:function(g){return(g||m).stringify(this)},concat:function(g){var w=this.words,A=g.words,M=this.sigBytes,W=g.sigBytes;if(this.clamp(),M%4)for(var Y=0;Y<W;Y++){var ue=A[Y>>>2]>>>24-Y%4*8&255;w[M+Y>>>2]|=ue<<24-(M+Y)%4*8}else for(Y=0;Y<W;Y+=4)w[M+Y>>>2]=A[Y>>>2];return this.sigBytes+=W,this},clamp:function(){var g=this.words,w=this.sigBytes;g[w>>>2]&=4294967295<<32-w%4*8,g.length=s.ceil(w/4)},clone:function(){var g=c.clone.call(this);return g.words=this.words.slice(0),g},random:function(g){for(var w=[],A=0;A<g;A+=4)w.push(4294967296*s.random()|0);return new p.init(w,g)}}),y=u.enc={},m=y.Hex={stringify:function(g){for(var w=g.words,A=g.sigBytes,M=[],W=0;W<A;W++){var Y=w[W>>>2]>>>24-W%4*8&255;M.push((Y>>>4).toString(16)),M.push((15&Y).toString(16))}return M.join("")},parse:function(g){for(var w=g.length,A=[],M=0;M<w;M+=2)A[M>>>3]|=parseInt(g.substr(M,2),16)<<24-M%8*4;return new p.init(A,w/2)}},_=y.Latin1={stringify:function(g){for(var w=g.words,A=g.sigBytes,M=[],W=0;W<A;W++){var Y=w[W>>>2]>>>24-W%4*8&255;M.push(String.fromCharCode(Y))}return M.join("")},parse:function(g){for(var w=g.length,A=[],M=0;M<w;M++)A[M>>>2]|=(255&g.charCodeAt(M))<<24-M%4*8;return new p.init(A,w)}},C=y.Utf8={stringify:function(g){try{return decodeURIComponent(escape(_.stringify(g)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(g){return _.parse(unescape(encodeURIComponent(g)))}},R=h.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(g){typeof g=="string"&&(g=C.parse(g)),this._data.concat(g),this._nDataBytes+=g.sigBytes},_process:function(g){var w=this._data,A=w.words,M=w.sigBytes,W=this.blockSize,Y=M/(4*W),ue=(Y=g?s.ceil(Y):s.max((0|Y)-this._minBufferSize,0))*W,ie=s.min(4*ue,M);if(ue){for(var ce=0;ce<ue;ce+=W)this._doProcessBlock(A,ce);var he=A.splice(0,ue);w.sigBytes-=ie}return new p.init(he,ie)},clone:function(){var g=c.clone.call(this);return g._data=this._data.clone(),g},_minBufferSize:0}),h.Hasher=R.extend({cfg:c.extend(),init:function(g){this.cfg=this.cfg.extend(g),this.reset()},reset:function(){R.reset.call(this),this._doReset()},update:function(g){return this._append(g),this._process(),this},finalize:function(g){return g&&this._append(g),this._doFinalize()},blockSize:16,_createHelper:function(g){return function(w,A){return new g.init(A).finalize(w)}},_createHmacHelper:function(g){return function(w,A){return new F.HMAC.init(g,A).finalize(w)}}}),F=u.algo={},u);(function(f){var g,w=(g=j).lib,A=w.Base,M=w.WordArray;(g=g.x64={}).Word=A.extend({init:function(Y,ue){this.high=Y,this.low=ue}}),g.WordArray=A.extend({init:function(Y,ue){Y=this.words=Y||[],this.sigBytes=ue??8*Y.length},toX32:function(){for(var Y=this.words,ue=Y.length,ie=[],ce=0;ce<ue;ce++){var he=Y[ce];ie.push(he.high),ie.push(he.low)}return M.create(ie,this.sigBytes)},clone:function(){for(var Y=A.clone.call(this),ue=Y.words=this.words.slice(0),ie=ue.length,ce=0;ce<ie;ce++)ue[ce]=ue[ce].clone();return Y}})})(),function(){var f=j,g=f.lib.WordArray;f.enc.Base64={stringify:function(A){var M=A.words,W=A.sigBytes,Y=this._map;A.clamp(),A=[];for(var ue=0;ue<W;ue+=3)for(var ie=(M[ue>>>2]>>>24-ue%4*8&255)<<16|(M[ue+1>>>2]>>>24-(ue+1)%4*8&255)<<8|M[ue+2>>>2]>>>24-(ue+2)%4*8&255,ce=0;4>ce&&ue+.75*ce<W;ce++)A.push(Y.charAt(ie>>>6*(3-ce)&63));if(M=Y.charAt(64))for(;A.length%4;)A.push(M);return A.join("")},parse:function(A){var M=A.length,W=this._map;(Y=W.charAt(64))&&(Y=A.indexOf(Y))!=-1&&(M=Y);for(var Y=[],ue=0,ie=0;ie<M;ie++)if(ie%4){var ce=W.indexOf(A.charAt(ie-1))<<ie%4*2,he=W.indexOf(A.charAt(ie))>>>6-ie%4*2;Y[ue>>>2]|=(ce|he)<<24-ue%4*8,ue++}return g.create(Y,ue)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(f){for(var g=j,w=(M=g.lib).WordArray,A=M.Hasher,M=g.algo,W=[],Y=[],ue=function(Ge){return 4294967296*(Ge-(0|Ge))|0},ie=2,ce=0;64>ce;){var he;e:{he=ie;for(var ye=f.sqrt(he),Ae=2;Ae<=ye;Ae++)if(!(he%Ae)){he=!1;break e}he=!0}he&&(8>ce&&(W[ce]=ue(f.pow(ie,.5))),Y[ce]=ue(f.pow(ie,1/3)),ce++),ie++}var Fe=[];M=M.SHA256=A.extend({_doReset:function(){this._hash=new w.init(W.slice(0))},_doProcessBlock:function(Ge,ze){for(var X=this._hash.words,pe=X[0],ve=X[1],be=X[2],He=X[3],Je=X[4],Ut=X[5],at=X[6],Ir=X[7],Tt=0;64>Tt;Tt++){if(16>Tt)Fe[Tt]=0|Ge[ze+Tt];else{var qt=Fe[Tt-15],Wt=Fe[Tt-2];Fe[Tt]=((qt<<25|qt>>>7)^(qt<<14|qt>>>18)^qt>>>3)+Fe[Tt-7]+((Wt<<15|Wt>>>17)^(Wt<<13|Wt>>>19)^Wt>>>10)+Fe[Tt-16]}qt=Ir+((Je<<26|Je>>>6)^(Je<<21|Je>>>11)^(Je<<7|Je>>>25))+(Je&Ut^~Je&at)+Y[Tt]+Fe[Tt],Wt=((pe<<30|pe>>>2)^(pe<<19|pe>>>13)^(pe<<10|pe>>>22))+(pe&ve^pe&be^ve&be),Ir=at,at=Ut,Ut=Je,Je=He+qt|0,He=be,be=ve,ve=pe,pe=qt+Wt|0}X[0]=X[0]+pe|0,X[1]=X[1]+ve|0,X[2]=X[2]+be|0,X[3]=X[3]+He|0,X[4]=X[4]+Je|0,X[5]=X[5]+Ut|0,X[6]=X[6]+at|0,X[7]=X[7]+Ir|0},_doFinalize:function(){var Ge=this._data,ze=Ge.words,X=8*this._nDataBytes,pe=8*Ge.sigBytes;return ze[pe>>>5]|=128<<24-pe%32,ze[14+(pe+64>>>9<<4)]=f.floor(X/4294967296),ze[15+(pe+64>>>9<<4)]=X,Ge.sigBytes=4*ze.length,this._process(),this._hash},clone:function(){var Ge=A.clone.call(this);return Ge._hash=this._hash.clone(),Ge}}),g.SHA256=A._createHelper(M),g.HmacSHA256=A._createHmacHelper(M)}(Math),function(){function f(){return A.create.apply(A,arguments)}for(var g=j,w=g.lib.Hasher,A=(W=g.x64).Word,M=W.WordArray,W=g.algo,Y=[f(1116352408,3609767458),f(1899447441,602891725),f(3049323471,3964484399),f(3921009573,2173295548),f(961987163,4081628472),f(1508970993,3053834265),f(2453635748,2937671579),f(2870763221,3664609560),f(3624381080,2734883394),f(310598401,1164996542),f(607225278,1323610764),f(1426881987,3590304994),f(1925078388,4068182383),f(2162078206,991336113),f(2614888103,633803317),f(3248222580,3479774868),f(3835390401,2666613458),f(4022224774,944711139),f(264347078,2341262773),f(604807628,2007800933),f(770255983,1495990901),f(1249150122,1856431235),f(1555081692,3175218132),f(1996064986,2198950837),f(2554220882,3999719339),f(2821834349,766784016),f(2952996808,2566594879),f(3210313671,3203337956),f(3336571891,1034457026),f(3584528711,2466948901),f(113926993,3758326383),f(338241895,168717936),f(666307205,1188179964),f(773529912,1546045734),f(1294757372,1522805485),f(1396182291,2643833823),f(1695183700,2343527390),f(1986661051,1014477480),f(2177026350,1206759142),f(2456956037,344077627),f(2730485921,1290863460),f(2820302411,3158454273),f(3259730800,3505952657),f(3345764771,106217008),f(3516065817,3606008344),f(3600352804,1432725776),f(4094571909,1467031594),f(275423344,851169720),f(430227734,3100823752),f(506948616,1363258195),f(659060556,3750685593),f(883997877,3785050280),f(958139571,3318307427),f(1322822218,3812723403),f(1537002063,2003034995),f(1747873779,3602036899),f(1955562222,1575990012),f(2024104815,1125592928),f(2227730452,2716904306),f(2361852424,442776044),f(2428436474,593698344),f(2756734187,3733110249),f(3204031479,2999351573),f(3329325298,3815920427),f(3391569614,3928383900),f(3515267271,566280711),f(3940187606,3454069534),f(4118630271,4000239992),f(116418474,1914138554),f(174292421,2731055270),f(289380356,3203993006),f(460393269,320620315),f(685471733,587496836),f(852142971,1086792851),f(1017036298,365543100),f(1126000580,2618297676),f(1288033470,3409855158),f(1501505948,4234509866),f(1607167915,987167468),f(1816402316,1246189591)],ue=[],ie=0;80>ie;ie++)ue[ie]=f();W=W.SHA512=w.extend({_doReset:function(){this._hash=new M.init([new A.init(1779033703,4089235720),new A.init(3144134277,2227873595),new A.init(1013904242,4271175723),new A.init(2773480762,1595750129),new A.init(1359893119,2917565137),new A.init(2600822924,725511199),new A.init(528734635,4215389547),new A.init(1541459225,327033209)])},_doProcessBlock:function(he,ye){for(var Ae=(ve=this._hash.words)[0],Fe=ve[1],Ue=ve[2],Ge=ve[3],ze=ve[4],X=ve[5],pe=ve[6],ve=ve[7],be=Ae.high,He=Ae.low,Je=Fe.high,Ut=Fe.low,at=Ue.high,Ir=Ue.low,Tt=Ge.high,qt=Ge.low,Wt=ze.high,Ur=ze.low,Sr=X.high,fn=X.low,Lr=pe.high,gn=pe.low,$r=ve.high,ar=ve.low,En=be,yn=He,uo=Je,on=Ut,Mi=at,co=Ir,Ds=Tt,Ci=qt,Dn=Wt,ni=Ur,Fn=Sr,Oo=fn,es=Lr,Bi=gn,N=$r,q=ar,J=0;80>J;J++){var re=ue[J];if(16>J)var Re=re.high=0|he[ye+2*J],le=re.low=0|he[ye+2*J+1];else{Re=((le=(Re=ue[J-15]).high)>>>1|(xe=Re.low)<<31)^(le>>>8|xe<<24)^le>>>7;var xe=(xe>>>1|le<<31)^(xe>>>8|le<<24)^(xe>>>7|le<<25),Ye=((le=(Ye=ue[J-2]).high)>>>19|(qe=Ye.low)<<13)^(le<<3|qe>>>29)^le>>>6,qe=(qe>>>19|le<<13)^(qe<<3|le>>>29)^(qe>>>6|le<<26),Ze=(le=ue[J-7]).high,pt=(dt=ue[J-16]).high,dt=dt.low;Re=(Re=(Re=Re+Ze+((le=xe+le.low)>>>0<xe>>>0?1:0))+Ye+((le=le+qe)>>>0<qe>>>0?1:0))+pt+((le=le+dt)>>>0<dt>>>0?1:0),re.high=Re,re.low=le}Ze=Dn&Fn^~Dn&es,dt=ni&Oo^~ni&Bi,re=En&uo^En&Mi^uo&Mi;var gt=yn&on^yn&co^on&co,nt=(xe=(En>>>28|yn<<4)^(En<<30|yn>>>2)^(En<<25|yn>>>7),Ye=(yn>>>28|En<<4)^(yn<<30|En>>>2)^(yn<<25|En>>>7),(qe=Y[J]).high),yt=qe.low;pt=N+((Dn>>>14|ni<<18)^(Dn>>>18|ni<<14)^(Dn<<23|ni>>>9))+((qe=q+((ni>>>14|Dn<<18)^(ni>>>18|Dn<<14)^(ni<<23|Dn>>>9)))>>>0<q>>>0?1:0),N=es,q=Bi,es=Fn,Bi=Oo,Fn=Dn,Oo=ni,Dn=Ds+(pt=(pt=(pt=pt+Ze+((qe=qe+dt)>>>0<dt>>>0?1:0))+nt+((qe=qe+yt)>>>0<yt>>>0?1:0))+Re+((qe=qe+le)>>>0<le>>>0?1:0))+((ni=Ci+qe|0)>>>0<Ci>>>0?1:0)|0,Ds=Mi,Ci=co,Mi=uo,co=on,uo=En,on=yn,En=pt+(re=xe+re+((le=Ye+gt)>>>0<Ye>>>0?1:0))+((yn=qe+le|0)>>>0<qe>>>0?1:0)|0}He=Ae.low=He+yn,Ae.high=be+En+(He>>>0<yn>>>0?1:0),Ut=Fe.low=Ut+on,Fe.high=Je+uo+(Ut>>>0<on>>>0?1:0),Ir=Ue.low=Ir+co,Ue.high=at+Mi+(Ir>>>0<co>>>0?1:0),qt=Ge.low=qt+Ci,Ge.high=Tt+Ds+(qt>>>0<Ci>>>0?1:0),Ur=ze.low=Ur+ni,ze.high=Wt+Dn+(Ur>>>0<ni>>>0?1:0),fn=X.low=fn+Oo,X.high=Sr+Fn+(fn>>>0<Oo>>>0?1:0),gn=pe.low=gn+Bi,pe.high=Lr+es+(gn>>>0<Bi>>>0?1:0),ar=ve.low=ar+q,ve.high=$r+N+(ar>>>0<q>>>0?1:0)},_doFinalize:function(){var he=this._data,ye=he.words,Ae=8*this._nDataBytes,Fe=8*he.sigBytes;return ye[Fe>>>5]|=128<<24-Fe%32,ye[30+(Fe+128>>>10<<5)]=Math.floor(Ae/4294967296),ye[31+(Fe+128>>>10<<5)]=Ae,he.sigBytes=4*ye.length,this._process(),this._hash.toX32()},clone:function(){var he=w.clone.call(this);return he._hash=this._hash.clone(),he},blockSize:32}),g.SHA512=w._createHelper(W),g.HmacSHA512=w._createHmacHelper(W)}(),function(){var f=j,g=(M=f.x64).Word,w=M.WordArray,A=(M=f.algo).SHA512,M=M.SHA384=A.extend({_doReset:function(){this._hash=new w.init([new g.init(3418070365,3238371032),new g.init(1654270250,914150663),new g.init(2438529370,812702999),new g.init(355462360,4144912697),new g.init(1731405415,4290775857),new g.init(2394180231,1750603025),new g.init(3675008525,1694076839),new g.init(1203062813,3204075428)])},_doFinalize:function(){var Y=A._doFinalize.call(this);return Y.sigBytes-=16,Y}});f.SHA384=A._createHelper(M),f.HmacSHA384=A._createHmacHelper(M)}();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */var H,$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function O(f){var g,w,A="";for(g=0;g+3<=f.length;g+=3)w=parseInt(f.substring(g,g+3),16),A+=$.charAt(w>>6)+$.charAt(63&w);for(g+1==f.length?(w=parseInt(f.substring(g,g+1),16),A+=$.charAt(w<<2)):g+2==f.length&&(w=parseInt(f.substring(g,g+2),16),A+=$.charAt(w>>2)+$.charAt((3&w)<<4)),"=";(3&A.length)>0;)A+="=";return A}function ne(f){var g,w,A,M="",W=0;for(g=0;g<f.length&&f.charAt(g)!="=";++g)(A=$.indexOf(f.charAt(g)))<0||(W==0?(M+=Be(A>>2),w=3&A,W=1):W==1?(M+=Be(w<<2|A>>4),w=15&A,W=2):W==2?(M+=Be(w),M+=Be(A>>2),w=3&A,W=3):(M+=Be(w<<2|A>>4),M+=Be(15&A),W=0));return W==1&&(M+=Be(w<<2)),M}function ee(f){var g,w=ne(f),A=new Array;for(g=0;2*g<w.length;++g)A[g]=parseInt(w.substring(2*g,2*g+2),16);return A}function D(f,g,w){f!=null&&(typeof f=="number"?this.fromNumber(f,g,w):g==null&&typeof f!="string"?this.fromString(f,256):this.fromString(f,g))}function Q(){return new D(null)}E.appName=="Microsoft Internet Explorer"?(D.prototype.am=function(g,w,A,M,W,Y){for(var ue=32767&w,ie=w>>15;--Y>=0;){var ce=32767&this[g],he=this[g++]>>15,ye=ie*ce+he*ue;W=((ce=ue*ce+((32767&ye)<<15)+A[M]+(1073741823&W))>>>30)+(ye>>>15)+ie*he+(W>>>30),A[M++]=1073741823&ce}return W},H=30):E.appName!="Netscape"?(D.prototype.am=function(g,w,A,M,W,Y){for(;--Y>=0;){var ue=w*this[g++]+A[M]+W;W=Math.floor(ue/67108864),A[M++]=67108863&ue}return W},H=26):(D.prototype.am=function(g,w,A,M,W,Y){for(var ue=16383&w,ie=w>>14;--Y>=0;){var ce=16383&this[g],he=this[g++]>>14,ye=ie*ce+he*ue;W=((ce=ue*ce+((16383&ye)<<14)+A[M]+W)>>28)+(ye>>14)+ie*he,A[M++]=268435455&ce}return W},H=28),D.prototype.DB=H,D.prototype.DM=(1<<H)-1,D.prototype.DV=1<<H,D.prototype.FV=Math.pow(2,52),D.prototype.F1=52-H,D.prototype.F2=2*H-52;var De,ae,Ce=new Array;for(De="0".charCodeAt(0),ae=0;ae<=9;++ae)Ce[De++]=ae;for(De="a".charCodeAt(0),ae=10;ae<36;++ae)Ce[De++]=ae;for(De="A".charCodeAt(0),ae=10;ae<36;++ae)Ce[De++]=ae;function Be(f){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(f)}function Ve(f,g){var w=Ce[f.charCodeAt(g)];return w??-1}function $e(f){var g=Q();return g.fromInt(f),g}function we(f){var g,w=1;return(g=f>>>16)!=0&&(f=g,w+=16),(g=f>>8)!=0&&(f=g,w+=8),(g=f>>4)!=0&&(f=g,w+=4),(g=f>>2)!=0&&(f=g,w+=2),(g=f>>1)!=0&&(f=g,w+=1),w}function Oe(f){this.m=f}function me(f){this.m=f,this.mp=f.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<f.DB-15)-1,this.mt2=2*f.t}function We(f,g){return f&g}function et(f,g){return f|g}function Et(f,g){return f^g}function Bt(f,g){return f&~g}function Vt(f){if(f==0)return-1;var g=0;return!(65535&f)&&(f>>=16,g+=16),!(255&f)&&(f>>=8,g+=8),!(15&f)&&(f>>=4,g+=4),!(3&f)&&(f>>=2,g+=2),!(1&f)&&++g,g}function Ke(f){for(var g=0;f!=0;)f&=f-1,++g;return g}function St(){}function jt(f){return f}function Yt(f){this.r2=Q(),this.q3=Q(),D.ONE.dlShiftTo(2*f.t,this.r2),this.mu=this.r2.divide(f),this.m=f}Oe.prototype.convert=function(g){return g.s<0||g.compareTo(this.m)>=0?g.mod(this.m):g},Oe.prototype.revert=function(g){return g},Oe.prototype.reduce=function(g){g.divRemTo(this.m,null,g)},Oe.prototype.mulTo=function(g,w,A){g.multiplyTo(w,A),this.reduce(A)},Oe.prototype.sqrTo=function(g,w){g.squareTo(w),this.reduce(w)},me.prototype.convert=function(g){var w=Q();return g.abs().dlShiftTo(this.m.t,w),w.divRemTo(this.m,null,w),g.s<0&&w.compareTo(D.ZERO)>0&&this.m.subTo(w,w),w},me.prototype.revert=function(g){var w=Q();return g.copyTo(w),this.reduce(w),w},me.prototype.reduce=function(g){for(;g.t<=this.mt2;)g[g.t++]=0;for(var w=0;w<this.m.t;++w){var A=32767&g[w],M=A*this.mpl+((A*this.mph+(g[w]>>15)*this.mpl&this.um)<<15)&g.DM;for(g[A=w+this.m.t]+=this.m.am(0,M,g,w,0,this.m.t);g[A]>=g.DV;)g[A]-=g.DV,g[++A]++}g.clamp(),g.drShiftTo(this.m.t,g),g.compareTo(this.m)>=0&&g.subTo(this.m,g)},me.prototype.mulTo=function(g,w,A){g.multiplyTo(w,A),this.reduce(A)},me.prototype.sqrTo=function(g,w){g.squareTo(w),this.reduce(w)},D.prototype.copyTo=function(g){for(var w=this.t-1;w>=0;--w)g[w]=this[w];g.t=this.t,g.s=this.s},D.prototype.fromInt=function(g){this.t=1,this.s=g<0?-1:0,g>0?this[0]=g:g<-1?this[0]=g+this.DV:this.t=0},D.prototype.fromString=function(g,w){var A;if(w==16)A=4;else if(w==8)A=3;else if(w==256)A=8;else if(w==2)A=1;else if(w==32)A=5;else{if(w!=4)return void this.fromRadix(g,w);A=2}this.t=0,this.s=0;for(var M=g.length,W=!1,Y=0;--M>=0;){var ue=A==8?255&g[M]:Ve(g,M);ue<0?g.charAt(M)=="-"&&(W=!0):(W=!1,Y==0?this[this.t++]=ue:Y+A>this.DB?(this[this.t-1]|=(ue&(1<<this.DB-Y)-1)<<Y,this[this.t++]=ue>>this.DB-Y):this[this.t-1]|=ue<<Y,(Y+=A)>=this.DB&&(Y-=this.DB))}A==8&&128&g[0]&&(this.s=-1,Y>0&&(this[this.t-1]|=(1<<this.DB-Y)-1<<Y)),this.clamp(),W&&D.ZERO.subTo(this,this)},D.prototype.clamp=function(){for(var g=this.s&this.DM;this.t>0&&this[this.t-1]==g;)--this.t},D.prototype.dlShiftTo=function(g,w){var A;for(A=this.t-1;A>=0;--A)w[A+g]=this[A];for(A=g-1;A>=0;--A)w[A]=0;w.t=this.t+g,w.s=this.s},D.prototype.drShiftTo=function(g,w){for(var A=g;A<this.t;++A)w[A-g]=this[A];w.t=Math.max(this.t-g,0),w.s=this.s},D.prototype.lShiftTo=function(g,w){var A,M=g%this.DB,W=this.DB-M,Y=(1<<W)-1,ue=Math.floor(g/this.DB),ie=this.s<<M&this.DM;for(A=this.t-1;A>=0;--A)w[A+ue+1]=this[A]>>W|ie,ie=(this[A]&Y)<<M;for(A=ue-1;A>=0;--A)w[A]=0;w[ue]=ie,w.t=this.t+ue+1,w.s=this.s,w.clamp()},D.prototype.rShiftTo=function(g,w){w.s=this.s;var A=Math.floor(g/this.DB);if(A>=this.t)w.t=0;else{var M=g%this.DB,W=this.DB-M,Y=(1<<M)-1;w[0]=this[A]>>M;for(var ue=A+1;ue<this.t;++ue)w[ue-A-1]|=(this[ue]&Y)<<W,w[ue-A]=this[ue]>>M;M>0&&(w[this.t-A-1]|=(this.s&Y)<<W),w.t=this.t-A,w.clamp()}},D.prototype.subTo=function(g,w){for(var A=0,M=0,W=Math.min(g.t,this.t);A<W;)M+=this[A]-g[A],w[A++]=M&this.DM,M>>=this.DB;if(g.t<this.t){for(M-=g.s;A<this.t;)M+=this[A],w[A++]=M&this.DM,M>>=this.DB;M+=this.s}else{for(M+=this.s;A<g.t;)M-=g[A],w[A++]=M&this.DM,M>>=this.DB;M-=g.s}w.s=M<0?-1:0,M<-1?w[A++]=this.DV+M:M>0&&(w[A++]=M),w.t=A,w.clamp()},D.prototype.multiplyTo=function(g,w){var A=this.abs(),M=g.abs(),W=A.t;for(w.t=W+M.t;--W>=0;)w[W]=0;for(W=0;W<M.t;++W)w[W+A.t]=A.am(0,M[W],w,W,0,A.t);w.s=0,w.clamp(),this.s!=g.s&&D.ZERO.subTo(w,w)},D.prototype.squareTo=function(g){for(var w=this.abs(),A=g.t=2*w.t;--A>=0;)g[A]=0;for(A=0;A<w.t-1;++A){var M=w.am(A,w[A],g,2*A,0,1);(g[A+w.t]+=w.am(A+1,2*w[A],g,2*A+1,M,w.t-A-1))>=w.DV&&(g[A+w.t]-=w.DV,g[A+w.t+1]=1)}g.t>0&&(g[g.t-1]+=w.am(A,w[A],g,2*A,0,1)),g.s=0,g.clamp()},D.prototype.divRemTo=function(g,w,A){var M=g.abs();if(!(M.t<=0)){var W=this.abs();if(W.t<M.t)return w!=null&&w.fromInt(0),void(A!=null&&this.copyTo(A));A==null&&(A=Q());var Y=Q(),ue=this.s,ie=g.s,ce=this.DB-we(M[M.t-1]);ce>0?(M.lShiftTo(ce,Y),W.lShiftTo(ce,A)):(M.copyTo(Y),W.copyTo(A));var he=Y.t,ye=Y[he-1];if(ye!=0){var Ae=ye*(1<<this.F1)+(he>1?Y[he-2]>>this.F2:0),Fe=this.FV/Ae,Ue=(1<<this.F1)/Ae,Ge=1<<this.F2,ze=A.t,X=ze-he,pe=w??Q();for(Y.dlShiftTo(X,pe),A.compareTo(pe)>=0&&(A[A.t++]=1,A.subTo(pe,A)),D.ONE.dlShiftTo(he,pe),pe.subTo(Y,Y);Y.t<he;)Y[Y.t++]=0;for(;--X>=0;){var ve=A[--ze]==ye?this.DM:Math.floor(A[ze]*Fe+(A[ze-1]+Ge)*Ue);if((A[ze]+=Y.am(0,ve,A,X,0,he))<ve)for(Y.dlShiftTo(X,pe),A.subTo(pe,A);A[ze]<--ve;)A.subTo(pe,A)}w!=null&&(A.drShiftTo(he,w),ue!=ie&&D.ZERO.subTo(w,w)),A.t=he,A.clamp(),ce>0&&A.rShiftTo(ce,A),ue<0&&D.ZERO.subTo(A,A)}}},D.prototype.invDigit=function(){if(this.t<1)return 0;var g=this[0];if(!(1&g))return 0;var w=3&g;return(w=(w=(w=(w=w*(2-(15&g)*w)&15)*(2-(255&g)*w)&255)*(2-((65535&g)*w&65535))&65535)*(2-g*w%this.DV)%this.DV)>0?this.DV-w:-w},D.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},D.prototype.exp=function(g,w){if(g>4294967295||g<1)return D.ONE;var A=Q(),M=Q(),W=w.convert(this),Y=we(g)-1;for(W.copyTo(A);--Y>=0;)if(w.sqrTo(A,M),(g&1<<Y)>0)w.mulTo(M,W,A);else{var ue=A;A=M,M=ue}return w.revert(A)},D.prototype.toString=function(g){if(this.s<0)return"-"+this.negate().toString(g);var w;if(g==16)w=4;else if(g==8)w=3;else if(g==2)w=1;else if(g==32)w=5;else{if(g!=4)return this.toRadix(g);w=2}var A,M=(1<<w)-1,W=!1,Y="",ue=this.t,ie=this.DB-ue*this.DB%w;if(ue-- >0)for(ie<this.DB&&(A=this[ue]>>ie)>0&&(W=!0,Y=Be(A));ue>=0;)ie<w?(A=(this[ue]&(1<<ie)-1)<<w-ie,A|=this[--ue]>>(ie+=this.DB-w)):(A=this[ue]>>(ie-=w)&M,ie<=0&&(ie+=this.DB,--ue)),A>0&&(W=!0),W&&(Y+=Be(A));return W?Y:"0"},D.prototype.negate=function(){var g=Q();return D.ZERO.subTo(this,g),g},D.prototype.abs=function(){return this.s<0?this.negate():this},D.prototype.compareTo=function(g){var w=this.s-g.s;if(w!=0)return w;var A=this.t;if((w=A-g.t)!=0)return this.s<0?-w:w;for(;--A>=0;)if((w=this[A]-g[A])!=0)return w;return 0},D.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+we(this[this.t-1]^this.s&this.DM)},D.prototype.mod=function(g){var w=Q();return this.abs().divRemTo(g,null,w),this.s<0&&w.compareTo(D.ZERO)>0&&g.subTo(w,w),w},D.prototype.modPowInt=function(g,w){var A;return A=g<256||w.isEven()?new Oe(w):new me(w),this.exp(g,A)},D.ZERO=$e(0),D.ONE=$e(1),St.prototype.convert=jt,St.prototype.revert=jt,St.prototype.mulTo=function(g,w,A){g.multiplyTo(w,A)},St.prototype.sqrTo=function(g,w){g.squareTo(w)},Yt.prototype.convert=function(g){if(g.s<0||g.t>2*this.m.t)return g.mod(this.m);if(g.compareTo(this.m)<0)return g;var w=Q();return g.copyTo(w),this.reduce(w),w},Yt.prototype.revert=function(g){return g},Yt.prototype.reduce=function(g){for(g.drShiftTo(this.m.t-1,this.r2),g.t>this.m.t+1&&(g.t=this.m.t+1,g.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);g.compareTo(this.r2)<0;)g.dAddOffset(1,this.m.t+1);for(g.subTo(this.r2,g);g.compareTo(this.m)>=0;)g.subTo(this.m,g)},Yt.prototype.mulTo=function(g,w,A){g.multiplyTo(w,A),this.reduce(A)},Yt.prototype.sqrTo=function(g,w){g.squareTo(w),this.reduce(w)};var ut=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Z=(1<<26)/ut[ut.length-1];/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function I(){this.i=0,this.j=0,this.S=new Array}D.prototype.chunkSize=function(g){return Math.floor(Math.LN2*this.DB/Math.log(g))},D.prototype.toRadix=function(g){if(g==null&&(g=10),this.signum()==0||g<2||g>36)return"0";var w=this.chunkSize(g),A=Math.pow(g,w),M=$e(A),W=Q(),Y=Q(),ue="";for(this.divRemTo(M,W,Y);W.signum()>0;)ue=(A+Y.intValue()).toString(g).substr(1)+ue,W.divRemTo(M,W,Y);return Y.intValue().toString(g)+ue},D.prototype.fromRadix=function(g,w){this.fromInt(0),w==null&&(w=10);for(var A=this.chunkSize(w),M=Math.pow(w,A),W=!1,Y=0,ue=0,ie=0;ie<g.length;++ie){var ce=Ve(g,ie);ce<0?g.charAt(ie)=="-"&&this.signum()==0&&(W=!0):(ue=w*ue+ce,++Y>=A&&(this.dMultiply(M),this.dAddOffset(ue,0),Y=0,ue=0))}Y>0&&(this.dMultiply(Math.pow(w,Y)),this.dAddOffset(ue,0)),W&&D.ZERO.subTo(this,this)},D.prototype.fromNumber=function(g,w,A){if(typeof w=="number")if(g<2)this.fromInt(1);else for(this.fromNumber(g,A),this.testBit(g-1)||this.bitwiseTo(D.ONE.shiftLeft(g-1),et,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(w);)this.dAddOffset(2,0),this.bitLength()>g&&this.subTo(D.ONE.shiftLeft(g-1),this);else{var M=new Array,W=7&g;M.length=1+(g>>3),w.nextBytes(M),W>0?M[0]&=(1<<W)-1:M[0]=0,this.fromString(M,256)}},D.prototype.bitwiseTo=function(g,w,A){var M,W,Y=Math.min(g.t,this.t);for(M=0;M<Y;++M)A[M]=w(this[M],g[M]);if(g.t<this.t){for(W=g.s&this.DM,M=Y;M<this.t;++M)A[M]=w(this[M],W);A.t=this.t}else{for(W=this.s&this.DM,M=Y;M<g.t;++M)A[M]=w(W,g[M]);A.t=g.t}A.s=w(this.s,g.s),A.clamp()},D.prototype.changeBit=function(g,w){var A=D.ONE.shiftLeft(g);return this.bitwiseTo(A,w,A),A},D.prototype.addTo=function(g,w){for(var A=0,M=0,W=Math.min(g.t,this.t);A<W;)M+=this[A]+g[A],w[A++]=M&this.DM,M>>=this.DB;if(g.t<this.t){for(M+=g.s;A<this.t;)M+=this[A],w[A++]=M&this.DM,M>>=this.DB;M+=this.s}else{for(M+=this.s;A<g.t;)M+=g[A],w[A++]=M&this.DM,M>>=this.DB;M+=g.s}w.s=M<0?-1:0,M>0?w[A++]=M:M<-1&&(w[A++]=this.DV+M),w.t=A,w.clamp()},D.prototype.dMultiply=function(g){this[this.t]=this.am(0,g-1,this,0,0,this.t),++this.t,this.clamp()},D.prototype.dAddOffset=function(g,w){if(g!=0){for(;this.t<=w;)this[this.t++]=0;for(this[w]+=g;this[w]>=this.DV;)this[w]-=this.DV,++w>=this.t&&(this[this.t++]=0),++this[w]}},D.prototype.multiplyLowerTo=function(g,w,A){var M,W=Math.min(this.t+g.t,w);for(A.s=0,A.t=W;W>0;)A[--W]=0;for(M=A.t-this.t;W<M;++W)A[W+this.t]=this.am(0,g[W],A,W,0,this.t);for(M=Math.min(g.t,w);W<M;++W)this.am(0,g[W],A,W,0,w-W);A.clamp()},D.prototype.multiplyUpperTo=function(g,w,A){--w;var M=A.t=this.t+g.t-w;for(A.s=0;--M>=0;)A[M]=0;for(M=Math.max(w-this.t,0);M<g.t;++M)A[this.t+M-w]=this.am(w-M,g[M],A,0,0,this.t+M-w);A.clamp(),A.drShiftTo(1,A)},D.prototype.modInt=function(g){if(g<=0)return 0;var w=this.DV%g,A=this.s<0?g-1:0;if(this.t>0)if(w==0)A=this[0]%g;else for(var M=this.t-1;M>=0;--M)A=(w*A+this[M])%g;return A},D.prototype.millerRabin=function(g){var w=this.subtract(D.ONE),A=w.getLowestSetBit();if(A<=0)return!1;var M=w.shiftRight(A);(g=g+1>>1)>ut.length&&(g=ut.length);for(var W=Q(),Y=0;Y<g;++Y){W.fromInt(ut[Math.floor(Math.random()*ut.length)]);var ue=W.modPow(M,this);if(ue.compareTo(D.ONE)!=0&&ue.compareTo(w)!=0){for(var ie=1;ie++<A&&ue.compareTo(w)!=0;)if((ue=ue.modPowInt(2,this)).compareTo(D.ONE)==0)return!1;if(ue.compareTo(w)!=0)return!1}}return!0},D.prototype.clone=function(){var g=Q();return this.copyTo(g),g},D.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},D.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},D.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},D.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},D.prototype.toByteArray=function(){var g=this.t,w=new Array;w[0]=this.s;var A,M=this.DB-g*this.DB%8,W=0;if(g-- >0)for(M<this.DB&&(A=this[g]>>M)!=(this.s&this.DM)>>M&&(w[W++]=A|this.s<<this.DB-M);g>=0;)M<8?(A=(this[g]&(1<<M)-1)<<8-M,A|=this[--g]>>(M+=this.DB-8)):(A=this[g]>>(M-=8)&255,M<=0&&(M+=this.DB,--g)),128&A&&(A|=-256),W==0&&(128&this.s)!=(128&A)&&++W,(W>0||A!=this.s)&&(w[W++]=A);return w},D.prototype.equals=function(g){return this.compareTo(g)==0},D.prototype.min=function(g){return this.compareTo(g)<0?this:g},D.prototype.max=function(g){return this.compareTo(g)>0?this:g},D.prototype.and=function(g){var w=Q();return this.bitwiseTo(g,We,w),w},D.prototype.or=function(g){var w=Q();return this.bitwiseTo(g,et,w),w},D.prototype.xor=function(g){var w=Q();return this.bitwiseTo(g,Et,w),w},D.prototype.andNot=function(g){var w=Q();return this.bitwiseTo(g,Bt,w),w},D.prototype.not=function(){for(var g=Q(),w=0;w<this.t;++w)g[w]=this.DM&~this[w];return g.t=this.t,g.s=~this.s,g},D.prototype.shiftLeft=function(g){var w=Q();return g<0?this.rShiftTo(-g,w):this.lShiftTo(g,w),w},D.prototype.shiftRight=function(g){var w=Q();return g<0?this.lShiftTo(-g,w):this.rShiftTo(g,w),w},D.prototype.getLowestSetBit=function(){for(var g=0;g<this.t;++g)if(this[g]!=0)return g*this.DB+Vt(this[g]);return this.s<0?this.t*this.DB:-1},D.prototype.bitCount=function(){for(var g=0,w=this.s&this.DM,A=0;A<this.t;++A)g+=Ke(this[A]^w);return g},D.prototype.testBit=function(g){var w=Math.floor(g/this.DB);return w>=this.t?this.s!=0:(this[w]&1<<g%this.DB)!=0},D.prototype.setBit=function(g){return this.changeBit(g,et)},D.prototype.clearBit=function(g){return this.changeBit(g,Bt)},D.prototype.flipBit=function(g){return this.changeBit(g,Et)},D.prototype.add=function(g){var w=Q();return this.addTo(g,w),w},D.prototype.subtract=function(g){var w=Q();return this.subTo(g,w),w},D.prototype.multiply=function(g){var w=Q();return this.multiplyTo(g,w),w},D.prototype.divide=function(g){var w=Q();return this.divRemTo(g,w,null),w},D.prototype.remainder=function(g){var w=Q();return this.divRemTo(g,null,w),w},D.prototype.divideAndRemainder=function(g){var w=Q(),A=Q();return this.divRemTo(g,w,A),new Array(w,A)},D.prototype.modPow=function(g,w){var A,M,W=g.bitLength(),Y=$e(1);if(W<=0)return Y;A=W<18?1:W<48?3:W<144?4:W<768?5:6,M=W<8?new Oe(w):w.isEven()?new Yt(w):new me(w);var ue=new Array,ie=3,ce=A-1,he=(1<<A)-1;if(ue[1]=M.convert(this),A>1){var ye=Q();for(M.sqrTo(ue[1],ye);ie<=he;)ue[ie]=Q(),M.mulTo(ye,ue[ie-2],ue[ie]),ie+=2}var Ae,Fe,Ue=g.t-1,Ge=!0,ze=Q();for(W=we(g[Ue])-1;Ue>=0;){for(W>=ce?Ae=g[Ue]>>W-ce&he:(Ae=(g[Ue]&(1<<W+1)-1)<<ce-W,Ue>0&&(Ae|=g[Ue-1]>>this.DB+W-ce)),ie=A;!(1&Ae);)Ae>>=1,--ie;if((W-=ie)<0&&(W+=this.DB,--Ue),Ge)ue[Ae].copyTo(Y),Ge=!1;else{for(;ie>1;)M.sqrTo(Y,ze),M.sqrTo(ze,Y),ie-=2;ie>0?M.sqrTo(Y,ze):(Fe=Y,Y=ze,ze=Fe),M.mulTo(ze,ue[Ae],Y)}for(;Ue>=0&&!(g[Ue]&1<<W);)M.sqrTo(Y,ze),Fe=Y,Y=ze,ze=Fe,--W<0&&(W=this.DB-1,--Ue)}return M.revert(Y)},D.prototype.modInverse=function(g){var w=g.isEven();if(this.isEven()&&w||g.signum()==0)return D.ZERO;for(var A=g.clone(),M=this.clone(),W=$e(1),Y=$e(0),ue=$e(0),ie=$e(1);A.signum()!=0;){for(;A.isEven();)A.rShiftTo(1,A),w?(W.isEven()&&Y.isEven()||(W.addTo(this,W),Y.subTo(g,Y)),W.rShiftTo(1,W)):Y.isEven()||Y.subTo(g,Y),Y.rShiftTo(1,Y);for(;M.isEven();)M.rShiftTo(1,M),w?(ue.isEven()&&ie.isEven()||(ue.addTo(this,ue),ie.subTo(g,ie)),ue.rShiftTo(1,ue)):ie.isEven()||ie.subTo(g,ie),ie.rShiftTo(1,ie);A.compareTo(M)>=0?(A.subTo(M,A),w&&W.subTo(ue,W),Y.subTo(ie,Y)):(M.subTo(A,M),w&&ue.subTo(W,ue),ie.subTo(Y,ie))}return M.compareTo(D.ONE)!=0?D.ZERO:ie.compareTo(g)>=0?ie.subtract(g):ie.signum()<0?(ie.addTo(g,ie),ie.signum()<0?ie.add(g):ie):ie},D.prototype.pow=function(g){return this.exp(g,new St)},D.prototype.gcd=function(g){var w=this.s<0?this.negate():this.clone(),A=g.s<0?g.negate():g.clone();if(w.compareTo(A)<0){var M=w;w=A,A=M}var W=w.getLowestSetBit(),Y=A.getLowestSetBit();if(Y<0)return w;for(W<Y&&(Y=W),Y>0&&(w.rShiftTo(Y,w),A.rShiftTo(Y,A));w.signum()>0;)(W=w.getLowestSetBit())>0&&w.rShiftTo(W,w),(W=A.getLowestSetBit())>0&&A.rShiftTo(W,A),w.compareTo(A)>=0?(w.subTo(A,w),w.rShiftTo(1,w)):(A.subTo(w,A),A.rShiftTo(1,A));return Y>0&&A.lShiftTo(Y,A),A},D.prototype.isProbablePrime=function(g){var w,A=this.abs();if(A.t==1&&A[0]<=ut[ut.length-1]){for(w=0;w<ut.length;++w)if(A[0]==ut[w])return!0;return!1}if(A.isEven())return!1;for(w=1;w<ut.length;){for(var M=ut[w],W=w+1;W<ut.length&&M<Z;)M*=ut[W++];for(M=A.modInt(M);w<W;)if(M%ut[w++]==0)return!1}return A.millerRabin(g)},D.prototype.square=function(){var g=Q();return this.squareTo(g),g},I.prototype.init=function(g){var w,A,M;for(w=0;w<256;++w)this.S[w]=w;for(A=0,w=0;w<256;++w)A=A+this.S[w]+g[w%g.length]&255,M=this.S[w],this.S[w]=this.S[A],this.S[A]=M;this.i=0,this.j=0},I.prototype.next=function(){var g;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,g=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=g,this.S[g+this.S[this.i]&255]};var S,B,G;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function de(){(function(g){B[G++]^=255&g,B[G++]^=g>>8&255,B[G++]^=g>>16&255,B[G++]^=g>>24&255,G>=256&&(G-=256)})(new Date().getTime())}if(B==null){var Ee;if(B=new Array,G=0,P!==void 0&&(P.crypto!==void 0||P.msCrypto!==void 0)){var rt=P.crypto||P.msCrypto;if(rt.getRandomValues){var lt=new Uint8Array(32);for(rt.getRandomValues(lt),Ee=0;Ee<32;++Ee)B[G++]=lt[Ee]}else if(E.appName=="Netscape"&&E.appVersion<"5"){var Nt=P.crypto.random(32);for(Ee=0;Ee<Nt.length;++Ee)B[G++]=255&Nt.charCodeAt(Ee)}}for(;G<256;)Ee=Math.floor(65536*Math.random()),B[G++]=Ee>>>8,B[G++]=255&Ee;G=0,de()}function Kt(){if(S==null){for(de(),(S=function(){return new I}()).init(B),G=0;G<B.length;++G)B[G]=0;G=0}return S.next()}function Xt(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function dr(f,g){return new D(f,g)}function dn(f,g,w){for(var A="",M=0;A.length<g;)A+=w(String.fromCharCode.apply(String,f.concat([(4278190080&M)>>24,(16711680&M)>>16,(65280&M)>>8,255&M]))),M+=1;return A}function te(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function fe(f,g){this.x=g,this.q=f}function K(f,g,w,A){this.curve=f,this.x=g,this.y=w,this.z=A??D.ONE,this.zinv=null}function T(f,g,w){this.q=f,this.a=this.fromBigInteger(g),this.b=this.fromBigInteger(w),this.infinity=new K(this,null,null)}Xt.prototype.nextBytes=function(g){var w;for(w=0;w<g.length;++w)g[w]=Kt()},te.prototype.doPublic=function(g){return g.modPowInt(this.e,this.n)},te.prototype.setPublic=function(g,w){if(this.isPublic=!0,this.isPrivate=!1,typeof g!="string")this.n=g,this.e=w;else{if(!(g!=null&&w!=null&&g.length>0&&w.length>0))throw"Invalid RSA public key";this.n=dr(g,16),this.e=parseInt(w,16)}},te.prototype.encrypt=function(g){var w=function(Y,ue){if(ue<Y.length+11)throw"Message too long for RSA";for(var ie=new Array,ce=Y.length-1;ce>=0&&ue>0;){var he=Y.charCodeAt(ce--);he<128?ie[--ue]=he:he>127&&he<2048?(ie[--ue]=63&he|128,ie[--ue]=he>>6|192):(ie[--ue]=63&he|128,ie[--ue]=he>>6&63|128,ie[--ue]=he>>12|224)}ie[--ue]=0;for(var ye=new Xt,Ae=new Array;ue>2;){for(Ae[0]=0;Ae[0]==0;)ye.nextBytes(Ae);ie[--ue]=Ae[0]}return ie[--ue]=2,ie[--ue]=0,new D(ie)}(g,this.n.bitLength()+7>>3);if(w==null)return null;var A=this.doPublic(w);if(A==null)return null;var M=A.toString(16);return 1&M.length?"0"+M:M},te.prototype.encryptOAEP=function(g,w,A){var M=function(ie,ce,he,ye){var Ae=k.crypto.MessageDigest,Fe=k.crypto.Util,Ue=null;if(he||(he="sha1"),typeof he=="string"&&(Ue=Ae.getCanonicalAlgName(he),ye=Ae.getHashLength(Ue),he=function(at){return it(Fe.hashHex(tt(at),Ue))}),ie.length+2*ye+2>ce)throw"Message too long for RSA";var Ge,ze="";for(Ge=0;Ge<ce-ie.length-2*ye-2;Ge+=1)ze+="\0";var X=he("")+ze+""+ie,pe=new Array(ye);new Xt().nextBytes(pe);var ve=dn(pe,X.length,he),be=[];for(Ge=0;Ge<X.length;Ge+=1)be[Ge]=X.charCodeAt(Ge)^ve.charCodeAt(Ge);var He=dn(be,pe.length,he),Je=[0];for(Ge=0;Ge<pe.length;Ge+=1)Je[Ge+1]=pe[Ge]^He.charCodeAt(Ge);return new D(Je.concat(be))}(g,this.n.bitLength()+7>>3,w,A);if(M==null)return null;var W=this.doPublic(M);if(W==null)return null;var Y=W.toString(16);return 1&Y.length?"0"+Y:Y},te.prototype.type="RSA",fe.prototype.equals=function(g){return g==this||this.q.equals(g.q)&&this.x.equals(g.x)},fe.prototype.toBigInteger=function(){return this.x},fe.prototype.negate=function(){return new fe(this.q,this.x.negate().mod(this.q))},fe.prototype.add=function(g){return new fe(this.q,this.x.add(g.toBigInteger()).mod(this.q))},fe.prototype.subtract=function(g){return new fe(this.q,this.x.subtract(g.toBigInteger()).mod(this.q))},fe.prototype.multiply=function(g){return new fe(this.q,this.x.multiply(g.toBigInteger()).mod(this.q))},fe.prototype.square=function(){return new fe(this.q,this.x.square().mod(this.q))},fe.prototype.divide=function(g){return new fe(this.q,this.x.multiply(g.toBigInteger().modInverse(this.q)).mod(this.q))},K.prototype.getX=function(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},K.prototype.getY=function(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},K.prototype.equals=function(g){return g==this||(this.isInfinity()?g.isInfinity():g.isInfinity()?this.isInfinity():!!g.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(g.z)).mod(this.curve.q).equals(D.ZERO)&&g.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(g.z)).mod(this.curve.q).equals(D.ZERO))},K.prototype.isInfinity=function(){return this.x==null&&this.y==null||this.z.equals(D.ZERO)&&!this.y.toBigInteger().equals(D.ZERO)},K.prototype.negate=function(){return new K(this.curve,this.x,this.y.negate(),this.z)},K.prototype.add=function(g){if(this.isInfinity())return g;if(g.isInfinity())return this;var w=g.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(g.z)).mod(this.curve.q),A=g.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(g.z)).mod(this.curve.q);if(D.ZERO.equals(A))return D.ZERO.equals(w)?this.twice():this.curve.getInfinity();var M=new D("3"),W=this.x.toBigInteger(),Y=this.y.toBigInteger(),ue=(g.x.toBigInteger(),g.y.toBigInteger(),A.square()),ie=ue.multiply(A),ce=W.multiply(ue),he=w.square().multiply(this.z),ye=he.subtract(ce.shiftLeft(1)).multiply(g.z).subtract(ie).multiply(A).mod(this.curve.q),Ae=ce.multiply(M).multiply(w).subtract(Y.multiply(ie)).subtract(he.multiply(w)).multiply(g.z).add(w.multiply(ie)).mod(this.curve.q),Fe=ie.multiply(this.z).multiply(g.z).mod(this.curve.q);return new K(this.curve,this.curve.fromBigInteger(ye),this.curve.fromBigInteger(Ae),Fe)},K.prototype.twice=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var g=new D("3"),w=this.x.toBigInteger(),A=this.y.toBigInteger(),M=A.multiply(this.z),W=M.multiply(A).mod(this.curve.q),Y=this.curve.a.toBigInteger(),ue=w.square().multiply(g);D.ZERO.equals(Y)||(ue=ue.add(this.z.square().multiply(Y)));var ie=(ue=ue.mod(this.curve.q)).square().subtract(w.shiftLeft(3).multiply(W)).shiftLeft(1).multiply(M).mod(this.curve.q),ce=ue.multiply(g).multiply(w).subtract(W.shiftLeft(1)).shiftLeft(2).multiply(W).subtract(ue.square().multiply(ue)).mod(this.curve.q),he=M.square().multiply(M).shiftLeft(3).mod(this.curve.q);return new K(this.curve,this.curve.fromBigInteger(ie),this.curve.fromBigInteger(ce),he)},K.prototype.multiply=function(g){if(this.isInfinity())return this;if(g.signum()==0)return this.curve.getInfinity();var w,A=g,M=A.multiply(new D("3")),W=this.negate(),Y=this,ue=this.curve.q.subtract(g),ie=ue.multiply(new D("3")),ce=new K(this.curve,this.x,this.y),he=ce.negate();for(w=M.bitLength()-2;w>0;--w){Y=Y.twice();var ye=M.testBit(w);ye!=A.testBit(w)&&(Y=Y.add(ye?this:W))}for(w=ie.bitLength()-2;w>0;--w){ce=ce.twice();var Ae=ie.testBit(w);Ae!=ue.testBit(w)&&(ce=ce.add(Ae?ce:he))}return Y},K.prototype.multiplyTwo=function(g,w,A){var M;M=g.bitLength()>A.bitLength()?g.bitLength()-1:A.bitLength()-1;for(var W=this.curve.getInfinity(),Y=this.add(w);M>=0;)W=W.twice(),g.testBit(M)?W=A.testBit(M)?W.add(Y):W.add(this):A.testBit(M)&&(W=W.add(w)),--M;return W},T.prototype.getQ=function(){return this.q},T.prototype.getA=function(){return this.a},T.prototype.getB=function(){return this.b},T.prototype.equals=function(g){return g==this||this.q.equals(g.q)&&this.a.equals(g.a)&&this.b.equals(g.b)},T.prototype.getInfinity=function(){return this.infinity},T.prototype.fromBigInteger=function(g){return new fe(this.q,g)},T.prototype.decodePointHex=function(g){switch(parseInt(g.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var w=(g.length-2)/2,A=g.substr(2,w),M=g.substr(w+2,w);return new K(this,this.fromBigInteger(new D(A,16)),this.fromBigInteger(new D(M,16)));default:return null}},fe.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},K.prototype.getEncoded=function(f){var g=function(Y,ue){var ie=Y.toByteArrayUnsigned();if(ue<ie.length)ie=ie.slice(ie.length-ue);else for(;ue>ie.length;)ie.unshift(0);return ie},w=this.getX().toBigInteger(),A=this.getY().toBigInteger(),M=g(w,32);return f?A.isEven()?M.unshift(2):M.unshift(3):(M.unshift(4),M=M.concat(g(A,32))),M},K.decodeFrom=function(f,g){g[0];var w=g.length-1,A=g.slice(1,1+w/2),M=g.slice(1+w/2,1+w);A.unshift(0),M.unshift(0);var W=new D(A),Y=new D(M);return new K(f,f.fromBigInteger(W),f.fromBigInteger(Y))},K.decodeFromHex=function(f,g){g.substr(0,2);var w=g.length-2,A=g.substr(2,w/2),M=g.substr(2+w/2,w/2),W=new D(A,16),Y=new D(M,16);return new K(f,f.fromBigInteger(W),f.fromBigInteger(Y))},K.prototype.add2D=function(f){if(this.isInfinity())return f;if(f.isInfinity())return this;if(this.x.equals(f.x))return this.y.equals(f.y)?this.twice():this.curve.getInfinity();var g=f.x.subtract(this.x),w=f.y.subtract(this.y).divide(g),A=w.square().subtract(this.x).subtract(f.x),M=w.multiply(this.x.subtract(A)).subtract(this.y);return new K(this.curve,A,M)},K.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var f=this.curve.fromBigInteger(D.valueOf(2)),g=this.curve.fromBigInteger(D.valueOf(3)),w=this.x.square().multiply(g).add(this.curve.a).divide(this.y.multiply(f)),A=w.square().subtract(this.x.multiply(f)),M=w.multiply(this.x.subtract(A)).subtract(this.y);return new K(this.curve,A,M)},K.prototype.multiply2D=function(f){if(this.isInfinity())return this;if(f.signum()==0)return this.curve.getInfinity();var g,w=f,A=w.multiply(new D("3")),M=this.negate(),W=this;for(g=A.bitLength()-2;g>0;--g){W=W.twice();var Y=A.testBit(g);Y!=w.testBit(g)&&(W=W.add2D(Y?this:M))}return W},K.prototype.isOnCurve=function(){var f=this.getX().toBigInteger(),g=this.getY().toBigInteger(),w=this.curve.getA().toBigInteger(),A=this.curve.getB().toBigInteger(),M=this.curve.getQ(),W=g.multiply(g).mod(M),Y=f.multiply(f).multiply(f).add(w.multiply(f)).add(A).mod(M);return W.equals(Y)},K.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},K.prototype.validate=function(){var f=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var g=this.getX().toBigInteger(),w=this.getY().toBigInteger();if(g.compareTo(D.ONE)<0||g.compareTo(f.subtract(D.ONE))>0)throw new Error("x coordinate out of bounds");if(w.compareTo(D.ONE)<0||w.compareTo(f.subtract(D.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(f).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
 */var U=function(){var f=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),g=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),w={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function A(Y,ue,ie){return ue?w[ue]:String.fromCharCode(parseInt(ie,16))}var M=new String(""),W=Object.hasOwnProperty;return function(Y,ue){var ie,ce,he=Y.match(f),ye=he[0],Ae=!1;ye==="{"?ie={}:ye==="["?ie=[]:(ie=[],Ae=!0);for(var Fe=[ie],Ue=1-Ae,Ge=he.length;Ue<Ge;++Ue){var ze;switch((ye=he[Ue]).charCodeAt(0)){default:(ze=Fe[0])[ce||ze.length]=+ye,ce=void 0;break;case 34:if((ye=ye.substring(1,ye.length-1)).indexOf("\\")!==-1&&(ye=ye.replace(g,A)),ze=Fe[0],!ce){if(!(ze instanceof Array)){ce=ye||M;break}ce=ze.length}ze[ce]=ye,ce=void 0;break;case 91:ze=Fe[0],Fe.unshift(ze[ce||ze.length]=[]),ce=void 0;break;case 93:Fe.shift();break;case 102:(ze=Fe[0])[ce||ze.length]=!1,ce=void 0;break;case 110:(ze=Fe[0])[ce||ze.length]=null,ce=void 0;break;case 116:(ze=Fe[0])[ce||ze.length]=!0,ce=void 0;break;case 123:ze=Fe[0],Fe.unshift(ze[ce||ze.length]={}),ce=void 0;break;case 125:Fe.shift()}}if(Ae){if(Fe.length!==1)throw new Error;ie=ie[0]}else if(Fe.length)throw new Error;return ue&&(ie=function X(pe,ve){var be=pe[ve];if(be&&(be===void 0?"undefined":b(be))==="object"){var He=null;for(var Je in be)if(W.call(be,Je)&&be!==pe){var Ut=X(be,Je);Ut!==void 0?be[Je]=Ut:(He||(He=[]),He.push(Je))}if(He)for(var at=He.length;--at>=0;)delete be[He[at]]}return ue.call(pe,ve,be)}({"":ie},"")),ie}}();k!==void 0&&k||(n.KJUR=k={}),k.asn1!==void 0&&k.asn1||(k.asn1={}),k.asn1.ASN1Util=new function(){this.integerToByteHex=function(f){var g=f.toString(16);return g.length%2==1&&(g="0"+g),g},this.bigIntToMinTwosComplementsHex=function(f){var g=f.toString(16);if(g.substr(0,1)!="-")g.length%2==1?g="0"+g:g.match(/^[0-7]/)||(g="00"+g);else{var w=g.substr(1).length;w%2==1?w+=1:g.match(/^[0-7]/)||(w+=2);for(var A="",M=0;M<w;M++)A+="f";g=new D(A,16).xor(f).add(D.ONE).toString(16).replace(/^-/,"")}return g},this.getPEMStringFromHex=function(f,g){return Gt(f,g)},this.newObject=function(f){var g=k.asn1,w=g.ASN1Object,A=g.DERBoolean,M=g.DERInteger,W=g.DERBitString,Y=g.DEROctetString,ue=g.DERNull,ie=g.DERObjectIdentifier,ce=g.DEREnumerated,he=g.DERUTF8String,ye=g.DERNumericString,Ae=g.DERPrintableString,Fe=g.DERTeletexString,Ue=g.DERIA5String,Ge=g.DERUTCTime,ze=g.DERGeneralizedTime,X=g.DERVisibleString,pe=g.DERBMPString,ve=g.DERSequence,be=g.DERSet,He=g.DERTaggedObject,Je=g.ASN1Util.newObject;if(f instanceof g.ASN1Object)return f;var Ut=Object.keys(f);if(Ut.length!=1)throw new Error("key of param shall be only one.");var at=Ut[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+at+":")==-1)throw new Error("undefined key: "+at);if(at=="bool")return new A(f[at]);if(at=="int")return new M(f[at]);if(at=="bitstr")return new W(f[at]);if(at=="octstr")return new Y(f[at]);if(at=="null")return new ue(f[at]);if(at=="oid")return new ie(f[at]);if(at=="enum")return new ce(f[at]);if(at=="utf8str")return new he(f[at]);if(at=="numstr")return new ye(f[at]);if(at=="prnstr")return new Ae(f[at]);if(at=="telstr")return new Fe(f[at]);if(at=="ia5str")return new Ue(f[at]);if(at=="utctime")return new Ge(f[at]);if(at=="gentime")return new ze(f[at]);if(at=="visstr")return new X(f[at]);if(at=="bmpstr")return new pe(f[at]);if(at=="asn1")return new w(f[at]);if(at=="seq"){for(var Ir=f[at],Tt=[],qt=0;qt<Ir.length;qt++){var Wt=Je(Ir[qt]);Tt.push(Wt)}return new ve({array:Tt})}if(at=="set"){for(Ir=f[at],Tt=[],qt=0;qt<Ir.length;qt++)Wt=Je(Ir[qt]),Tt.push(Wt);return new be({array:Tt})}if(at=="tag"){var Ur=f[at];if(Object.prototype.toString.call(Ur)==="[object Array]"&&Ur.length==3){var Sr=Je(Ur[2]);return new He({tag:Ur[0],explicit:Ur[1],obj:Sr})}return new He(Ur)}},this.jsonToASN1HEX=function(f){return this.newObject(f).getEncodedHex()}},k.asn1.ASN1Util.oidHexToInt=function(f){for(var g="",w=parseInt(f.substr(0,2),16),A=(g=Math.floor(w/40)+"."+w%40,""),M=2;M<f.length;M+=2){var W=("00000000"+parseInt(f.substr(M,2),16).toString(2)).slice(-8);A+=W.substr(1,7),W.substr(0,1)=="0"&&(g=g+"."+new D(A,2).toString(10),A="")}return g},k.asn1.ASN1Util.oidIntToHex=function(f){var g=function(ie){var ce=ie.toString(16);return ce.length==1&&(ce="0"+ce),ce},w=function(ie){var ce="",he=new D(ie,10).toString(2),ye=7-he.length%7;ye==7&&(ye=0);for(var Ae="",Fe=0;Fe<ye;Fe++)Ae+="0";for(he=Ae+he,Fe=0;Fe<he.length-1;Fe+=7){var Ue=he.substr(Fe,7);Fe!=he.length-7&&(Ue="1"+Ue),ce+=g(parseInt(Ue,2))}return ce};if(!f.match(/^[0-9.]+$/))throw"malformed oid string: "+f;var A="",M=f.split("."),W=40*parseInt(M[0])+parseInt(M[1]);A+=g(W),M.splice(0,2);for(var Y=0;Y<M.length;Y++)A+=w(M[Y]);return A},k.asn1.ASN1Object=function(f){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n=0,v="+this.hV);var g=this.hV.length/2,w=g.toString(16);if(w.length%2==1&&(w="0"+w),g<128)return w;var A=w.length/2;if(A>15)throw"ASN.1 length too long to represent by 8x: n = "+g.toString(16);return(128+A).toString(16)+w},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(g){this.params=g},f!=null&&f.tlv!=null&&(this.hTLV=f.tlv,this.isModified=!1)},k.asn1.DERAbstractString=function(f){k.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(g){this.hTLV=null,this.isModified=!0,this.s=g,this.hV=je(this.s).toLowerCase()},this.setStringHex=function(g){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=g},this.getFreshValueHex=function(){return this.hV},f!==void 0&&(typeof f=="string"?this.setString(f):f.str!==void 0?this.setString(f.str):f.hex!==void 0&&this.setStringHex(f.hex))},Mt(k.asn1.DERAbstractString,k.asn1.ASN1Object),k.asn1.DERAbstractTime=function(f){k.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(g){var w=g.getTime()+6e4*g.getTimezoneOffset();return new Date(w)},this.formatDate=function(g,w,A){var M=this.zeroPadding,W=this.localDateToUTC(g),Y=String(W.getFullYear());w=="utc"&&(Y=Y.substr(2,2));var ue=Y+M(String(W.getMonth()+1),2)+M(String(W.getDate()),2)+M(String(W.getHours()),2)+M(String(W.getMinutes()),2)+M(String(W.getSeconds()),2);if(A===!0){var ie=W.getMilliseconds();if(ie!=0){var ce=M(String(ie),3);ue=ue+"."+(ce=ce.replace(/[0]+$/,""))}}return ue+"Z"},this.zeroPadding=function(g,w){return g.length>=w?g:new Array(w-g.length+1).join("0")+g},this.getString=function(){return this.s},this.setString=function(g){this.hTLV=null,this.isModified=!0,this.s=g,this.hV=_t(g)},this.setByDateValue=function(g,w,A,M,W,Y){var ue=new Date(Date.UTC(g,w-1,A,M,W,Y,0));this.setByDate(ue)},this.getFreshValueHex=function(){return this.hV}},Mt(k.asn1.DERAbstractTime,k.asn1.ASN1Object),k.asn1.DERAbstractStructured=function(f){k.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(g){this.hTLV=null,this.isModified=!0,this.asn1Array=g},this.appendASN1Object=function(g){this.hTLV=null,this.isModified=!0,this.asn1Array.push(g)},this.asn1Array=new Array,f!==void 0&&f.array!==void 0&&(this.asn1Array=f.array)},Mt(k.asn1.DERAbstractStructured,k.asn1.ASN1Object),k.asn1.DERBoolean=function(f){k.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=f==0?"010100":"0101ff"},Mt(k.asn1.DERBoolean,k.asn1.ASN1Object),k.asn1.DERInteger=function(f){k.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(g){this.hTLV=null,this.isModified=!0,this.hV=k.asn1.ASN1Util.bigIntToMinTwosComplementsHex(g)},this.setByInteger=function(g){var w=new D(String(g),10);this.setByBigInteger(w)},this.setValueHex=function(g){this.hV=g},this.getFreshValueHex=function(){return this.hV},f!==void 0&&(f.bigint!==void 0?this.setByBigInteger(f.bigint):f.int!==void 0?this.setByInteger(f.int):typeof f=="number"?this.setByInteger(f):f.hex!==void 0&&this.setValueHex(f.hex))},Mt(k.asn1.DERInteger,k.asn1.ASN1Object),k.asn1.DERBitString=function(f){if(f!==void 0&&f.obj!==void 0){var g=k.asn1.ASN1Util.newObject(f.obj);f.hex="00"+g.getEncodedHex()}k.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(w){this.hTLV=null,this.isModified=!0,this.hV=w},this.setUnusedBitsAndHexValue=function(w,A){if(w<0||7<w)throw"unused bits shall be from 0 to 7: u = "+w;var M="0"+w;this.hTLV=null,this.isModified=!0,this.hV=M+A},this.setByBinaryString=function(w){var A=8-(w=w.replace(/0+$/,"")).length%8;A==8&&(A=0);for(var M=0;M<=A;M++)w+="0";var W="";for(M=0;M<w.length-1;M+=8){var Y=w.substr(M,8),ue=parseInt(Y,2).toString(16);ue.length==1&&(ue="0"+ue),W+=ue}this.hTLV=null,this.isModified=!0,this.hV="0"+A+W},this.setByBooleanArray=function(w){for(var A="",M=0;M<w.length;M++)w[M]==1?A+="1":A+="0";this.setByBinaryString(A)},this.newFalseArray=function(w){for(var A=new Array(w),M=0;M<w;M++)A[M]=!1;return A},this.getFreshValueHex=function(){return this.hV},f!==void 0&&(typeof f=="string"&&f.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(f):f.hex!==void 0?this.setHexValueIncludingUnusedBits(f.hex):f.bin!==void 0?this.setByBinaryString(f.bin):f.array!==void 0&&this.setByBooleanArray(f.array))},Mt(k.asn1.DERBitString,k.asn1.ASN1Object),k.asn1.DEROctetString=function(f){if(f!==void 0&&f.obj!==void 0){var g=k.asn1.ASN1Util.newObject(f.obj);f.hex=g.getEncodedHex()}k.asn1.DEROctetString.superclass.constructor.call(this,f),this.hT="04"},Mt(k.asn1.DEROctetString,k.asn1.DERAbstractString),k.asn1.DERNull=function(){k.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},Mt(k.asn1.DERNull,k.asn1.ASN1Object),k.asn1.DERObjectIdentifier=function(f){k.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(g){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=g},this.setValueOidString=function(g){var w=function(M){var W=function(Ae){var Fe=Ae.toString(16);return Fe.length==1&&(Fe="0"+Fe),Fe},Y=function(Ae){var Fe="",Ue=parseInt(Ae,10).toString(2),Ge=7-Ue.length%7;Ge==7&&(Ge=0);for(var ze="",X=0;X<Ge;X++)ze+="0";for(Ue=ze+Ue,X=0;X<Ue.length-1;X+=7){var pe=Ue.substr(X,7);X!=Ue.length-7&&(pe="1"+pe),Fe+=W(parseInt(pe,2))}return Fe};try{if(!M.match(/^[0-9.]+$/))return null;var ue="",ie=M.split("."),ce=40*parseInt(ie[0],10)+parseInt(ie[1],10);ue+=W(ce),ie.splice(0,2);for(var he=0;he<ie.length;he++)ue+=Y(ie[he]);return ue}catch{return null}}(g);if(w==null)throw new Error("malformed oid string: "+g);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=w},this.setValueName=function(g){var w=k.asn1.x509.OID.name2oid(g);if(w==="")throw new Error("DERObjectIdentifier oidName undefined: "+g);this.setValueOidString(w)},this.setValueNameOrOid=function(g){g.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(g):this.setValueName(g)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(g){typeof g=="string"?this.setValueNameOrOid(g):g.oid!==void 0?this.setValueNameOrOid(g.oid):g.name!==void 0?this.setValueNameOrOid(g.name):g.hex!==void 0&&this.setValueHex(g.hex)},f!==void 0&&this.setByParam(f)},Mt(k.asn1.DERObjectIdentifier,k.asn1.ASN1Object),k.asn1.DEREnumerated=function(f){k.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(g){this.hTLV=null,this.isModified=!0,this.hV=k.asn1.ASN1Util.bigIntToMinTwosComplementsHex(g)},this.setByInteger=function(g){var w=new D(String(g),10);this.setByBigInteger(w)},this.setValueHex=function(g){this.hV=g},this.getFreshValueHex=function(){return this.hV},f!==void 0&&(f.int!==void 0?this.setByInteger(f.int):typeof f=="number"?this.setByInteger(f):f.hex!==void 0&&this.setValueHex(f.hex))},Mt(k.asn1.DEREnumerated,k.asn1.ASN1Object),k.asn1.DERUTF8String=function(f){k.asn1.DERUTF8String.superclass.constructor.call(this,f),this.hT="0c"},Mt(k.asn1.DERUTF8String,k.asn1.DERAbstractString),k.asn1.DERNumericString=function(f){k.asn1.DERNumericString.superclass.constructor.call(this,f),this.hT="12"},Mt(k.asn1.DERNumericString,k.asn1.DERAbstractString),k.asn1.DERPrintableString=function(f){k.asn1.DERPrintableString.superclass.constructor.call(this,f),this.hT="13"},Mt(k.asn1.DERPrintableString,k.asn1.DERAbstractString),k.asn1.DERTeletexString=function(f){k.asn1.DERTeletexString.superclass.constructor.call(this,f),this.hT="14"},Mt(k.asn1.DERTeletexString,k.asn1.DERAbstractString),k.asn1.DERIA5String=function(f){k.asn1.DERIA5String.superclass.constructor.call(this,f),this.hT="16"},Mt(k.asn1.DERIA5String,k.asn1.DERAbstractString),k.asn1.DERVisibleString=function(f){k.asn1.DERIA5String.superclass.constructor.call(this,f),this.hT="1a"},Mt(k.asn1.DERVisibleString,k.asn1.DERAbstractString),k.asn1.DERBMPString=function(f){k.asn1.DERBMPString.superclass.constructor.call(this,f),this.hT="1e"},Mt(k.asn1.DERBMPString,k.asn1.DERAbstractString),k.asn1.DERUTCTime=function(f){k.asn1.DERUTCTime.superclass.constructor.call(this,f),this.hT="17",this.setByDate=function(g){this.hTLV=null,this.isModified=!0,this.date=g,this.s=this.formatDate(this.date,"utc"),this.hV=_t(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=_t(this.s)),this.hV},f!==void 0&&(f.str!==void 0?this.setString(f.str):typeof f=="string"&&f.match(/^[0-9]{12}Z$/)?this.setString(f):f.hex!==void 0?this.setStringHex(f.hex):f.date!==void 0&&this.setByDate(f.date))},Mt(k.asn1.DERUTCTime,k.asn1.DERAbstractTime),k.asn1.DERGeneralizedTime=function(f){k.asn1.DERGeneralizedTime.superclass.constructor.call(this,f),this.hT="18",this.withMillis=!1,this.setByDate=function(g){this.hTLV=null,this.isModified=!0,this.date=g,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=_t(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=_t(this.s)),this.hV},f!==void 0&&(f.str!==void 0?this.setString(f.str):typeof f=="string"&&f.match(/^[0-9]{14}Z$/)?this.setString(f):f.hex!==void 0?this.setStringHex(f.hex):f.date!==void 0&&this.setByDate(f.date),f.millis===!0&&(this.withMillis=!0))},Mt(k.asn1.DERGeneralizedTime,k.asn1.DERAbstractTime),k.asn1.DERSequence=function(f){k.asn1.DERSequence.superclass.constructor.call(this,f),this.hT="30",this.getFreshValueHex=function(){for(var g="",w=0;w<this.asn1Array.length;w++)g+=this.asn1Array[w].getEncodedHex();return this.hV=g,this.hV}},Mt(k.asn1.DERSequence,k.asn1.DERAbstractStructured),k.asn1.DERSet=function(f){k.asn1.DERSet.superclass.constructor.call(this,f),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var g=new Array,w=0;w<this.asn1Array.length;w++){var A=this.asn1Array[w];g.push(A.getEncodedHex())}return this.sortFlag==1&&g.sort(),this.hV=g.join(""),this.hV},f!==void 0&&f.sortflag!==void 0&&f.sortflag==0&&(this.sortFlag=!1)},Mt(k.asn1.DERSet,k.asn1.DERAbstractStructured),k.asn1.DERTaggedObject=function(f){k.asn1.DERTaggedObject.superclass.constructor.call(this);var g=k.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(w,A,M){this.hT=A,this.isExplicit=w,this.asn1Object=M,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=M.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,A),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(w){w.tag!=null&&(this.hT=w.tag),w.explicit!=null&&(this.isExplicit=w.explicit),w.tage!=null&&(this.hT=w.tage,this.isExplicit=!0),w.tagi!=null&&(this.hT=w.tagi,this.isExplicit=!1),w.obj!=null&&(w.obj instanceof g.ASN1Object?(this.asn1Object=w.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):b(w.obj)=="object"&&(this.asn1Object=g.ASN1Util.newObject(w.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},f!=null&&this.setByParam(f)},Mt(k.asn1.DERTaggedObject,k.asn1.ASN1Object);var k,ge,Pe,oe=new function(){};function mt(f){for(var g=new Array,w=0;w<f.length;w++)g[w]=f.charCodeAt(w);return g}function Ht(f){for(var g="",w=0;w<f.length;w++)g+=String.fromCharCode(f[w]);return g}function wt(f){for(var g="",w=0;w<f.length;w++){var A=f[w].toString(16);A.length==1&&(A="0"+A),g+=A}return g}function _t(f){return wt(mt(f))}function Se(f){return f=(f=(f=f.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Me(f){return f.length%4==2?f+="==":f.length%4==3&&(f+="="),f=(f=f.replace(/-/g,"+")).replace(/_/g,"/")}function Ne(f){return f.length%2==1&&(f="0"+f),Se(O(f))}function _e(f){return ne(Me(f))}function je(f){return xt(Er(f))}function st(f){return decodeURIComponent(vr(f))}function it(f){for(var g="",w=0;w<f.length-1;w+=2)g+=String.fromCharCode(parseInt(f.substr(w,2),16));return g}function tt(f){for(var g="",w=0;w<f.length;w++)g+=("0"+f.charCodeAt(w).toString(16)).slice(-2);return g}function ct(f){return O(f)}function Dt(f){var g=ct(f).replace(/(.{64})/g,`$1\r
`);return g=g.replace(/\r\n$/,"")}function Qt(f){return ne(f.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Gt(f,g){return"-----BEGIN "+g+`-----\r
`+Dt(f)+`\r
-----END `+g+`-----\r
`}function Zt(f,g){if(f.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+g;return Qt(f=g!==void 0?(f=f.replace(new RegExp("^[^]*-----BEGIN "+g+"-----"),"")).replace(new RegExp("-----END "+g+"-----[^]*$"),""):(f=f.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function hr(f){var g,w,A,M,W,Y,ue,ie,ce,he,ye;if(ye=f.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return ie=ye[1],g=parseInt(ie),ie.length===2&&(50<=g&&g<100?g=1900+g:0<=g&&g<50&&(g=2e3+g)),w=parseInt(ye[2])-1,A=parseInt(ye[3]),M=parseInt(ye[4]),W=parseInt(ye[5]),Y=parseInt(ye[6]),ue=0,(ce=ye[7])!==""&&(he=(ce.substr(1)+"00").substr(0,3),ue=parseInt(he)),Date.UTC(g,w,A,M,W,Y,ue);throw"unsupported zulu format: "+f}function er(f){return~~(hr(f)/1e3)}function xt(f){return f.replace(/%/g,"")}function vr(f){return f.replace(/(..)/g,"%$1")}function ht(f){var g="malformed IPv6 address";if(!f.match(/^[0-9A-Fa-f:]+$/))throw g;var w=(f=f.toLowerCase()).split(":").length-1;if(w<2)throw g;var A=":".repeat(7-w+2),M=(f=f.replace("::",A)).split(":");if(M.length!=8)throw g;for(var W=0;W<8;W++)M[W]=("0000"+M[W]).slice(-4);return M.join("")}function Ct(f){if(!f.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var g=(f=f.toLowerCase()).match(/.{1,4}/g),w=0;w<8;w++)g[w]=g[w].replace(/^0+/,""),g[w]==""&&(g[w]="0");var A=(f=":"+g.join(":")+":").match(/:(0:){2,}/g);if(A===null)return f.slice(1,-1);var M="";for(w=0;w<A.length;w++)A[w].length>M.length&&(M=A[w]);return(f=f.replace(M,"::")).slice(1,-1)}function $t(f){var g="malformed hex value";if(!f.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw g;if(f.length!=8)return f.length==32?Ct(f):f;try{return parseInt(f.substr(0,2),16)+"."+parseInt(f.substr(2,2),16)+"."+parseInt(f.substr(4,2),16)+"."+parseInt(f.substr(6,2),16)}catch{throw g}}function Ft(f){return f.match(/.{4}/g).map(function(w){var A=parseInt(w.substr(0,2),16),M=parseInt(w.substr(2),16);if(A==0&M<128)return String.fromCharCode(M);if(A<8){var W=128|63&M;return st((192|(7&A)<<3|(192&M)>>6).toString(16)+W.toString(16))}W=128|(15&A)<<2|(192&M)>>6;var Y=128|63&M;return st((224|(240&A)>>4).toString(16)+W.toString(16)+Y.toString(16))}).join("")}function Er(f){for(var g=encodeURIComponent(f),w="",A=0;A<g.length;A++)g[A]=="%"?(w+=g.substr(A,3),A+=2):w=w+"%"+_t(g[A]);return w}function sr(f){return!(f.length%2!=0||!f.match(/^[0-9a-f]+$/)&&!f.match(/^[0-9A-F]+$/))}function Hr(f){return f.length%2==1?"0"+f:f.substr(0,1)>"7"?"00"+f:f}oe.getLblen=function(f,g){if(f.substr(g+2,1)!="8")return 1;var w=parseInt(f.substr(g+3,1));return w==0?-1:0<w&&w<10?w+1:-2},oe.getL=function(f,g){var w=oe.getLblen(f,g);return w<1?"":f.substr(g+2,2*w)},oe.getVblen=function(f,g){var w;return(w=oe.getL(f,g))==""?-1:(w.substr(0,1)==="8"?new D(w.substr(2),16):new D(w,16)).intValue()},oe.getVidx=function(f,g){var w=oe.getLblen(f,g);return w<0?w:g+2*(w+1)},oe.getV=function(f,g){var w=oe.getVidx(f,g),A=oe.getVblen(f,g);return f.substr(w,2*A)},oe.getTLV=function(f,g){return f.substr(g,2)+oe.getL(f,g)+oe.getV(f,g)},oe.getTLVblen=function(f,g){return 2+2*oe.getLblen(f,g)+2*oe.getVblen(f,g)},oe.getNextSiblingIdx=function(f,g){return oe.getVidx(f,g)+2*oe.getVblen(f,g)},oe.getChildIdx=function(f,g){var w,A,M,W=oe,Y=[];w=W.getVidx(f,g),A=2*W.getVblen(f,g),f.substr(g,2)=="03"&&(w+=2,A-=2),M=0;for(var ue=w;M<=A;){var ie=W.getTLVblen(f,ue);if((M+=ie)<=A&&Y.push(ue),ue+=ie,M>=A)break}return Y},oe.getNthChildIdx=function(f,g,w){return oe.getChildIdx(f,g)[w]},oe.getIdxbyList=function(f,g,w,A){var M,W,Y=oe;return w.length==0?A!==void 0&&f.substr(g,2)!==A?-1:g:(M=w.shift())>=(W=Y.getChildIdx(f,g)).length?-1:Y.getIdxbyList(f,W[M],w,A)},oe.getIdxbyListEx=function(f,g,w,A){var M,W,Y=oe;if(w.length==0)return A!==void 0&&f.substr(g,2)!==A?-1:g;M=w.shift(),W=Y.getChildIdx(f,g);for(var ue=0,ie=0;ie<W.length;ie++){var ce=f.substr(W[ie],2);if(typeof M=="number"&&!Y.isContextTag(ce)&&ue==M||typeof M=="string"&&Y.isContextTag(ce,M))return Y.getIdxbyListEx(f,W[ie],w,A);Y.isContextTag(ce)||ue++}return-1},oe.getTLVbyList=function(f,g,w,A){var M=oe,W=M.getIdxbyList(f,g,w,A);return W==-1||W>=f.length?null:M.getTLV(f,W)},oe.getTLVbyListEx=function(f,g,w,A){var M=oe,W=M.getIdxbyListEx(f,g,w,A);return W==-1?null:M.getTLV(f,W)},oe.getVbyList=function(f,g,w,A,M){var W,Y,ue=oe;return(W=ue.getIdxbyList(f,g,w,A))==-1||W>=f.length?null:(Y=ue.getV(f,W),M===!0&&(Y=Y.substr(2)),Y)},oe.getVbyListEx=function(f,g,w,A,M){var W,Y,ue=oe;return(W=ue.getIdxbyListEx(f,g,w,A))==-1?null:(Y=ue.getV(f,W),f.substr(W,2)=="03"&&M!==!1&&(Y=Y.substr(2)),Y)},oe.getInt=function(f,g,w){w==null&&(w=-1);try{var A=f.substr(g,2);if(A!="02"&&A!="03")return w;var M=oe.getV(f,g);return A=="02"?parseInt(M,16):function(Y){try{var ue=Y.substr(0,2);if(ue=="00")return parseInt(Y.substr(2),16);var ie=parseInt(ue,16),ce=Y.substr(2),he=parseInt(ce,16).toString(2);return he=="0"&&(he="00000000"),he=he.slice(0,0-ie),parseInt(he,2)}catch{return-1}}(M)}catch{return w}},oe.getOID=function(f,g,w){w==null&&(w=null);try{return f.substr(g,2)!="06"?w:function(M){if(!sr(M))return null;try{var W=[],Y=M.substr(0,2),ue=parseInt(Y,16);W[0]=new String(Math.floor(ue/40)),W[1]=new String(ue%40);for(var ie=M.substr(2),ce=[],he=0;he<ie.length/2;he++)ce.push(parseInt(ie.substr(2*he,2),16));var ye=[],Ae="";for(he=0;he<ce.length;he++)128&ce[he]?Ae+=ir((127&ce[he]).toString(2),7):(Ae+=ir((127&ce[he]).toString(2),7),ye.push(new String(parseInt(Ae,2))),Ae="");var Fe=W.join(".");return ye.length>0&&(Fe=Fe+"."+ye.join(".")),Fe}catch{return null}}(oe.getV(f,g))}catch{return w}},oe.getOIDName=function(f,g,w){w==null&&(w=null);try{var A=oe.getOID(f,g,w);if(A==w)return w;var M=k.asn1.x509.OID.oid2name(A);return M==""?A:M}catch{return w}},oe.getString=function(f,g,w){w==null&&(w=null);try{return it(oe.getV(f,g))}catch{return w}},oe.hextooidstr=function(f){var g=function(Ae,Fe){return Ae.length>=Fe?Ae:new Array(Fe-Ae.length+1).join("0")+Ae},w=[],A=f.substr(0,2),M=parseInt(A,16);w[0]=new String(Math.floor(M/40)),w[1]=new String(M%40);for(var W=f.substr(2),Y=[],ue=0;ue<W.length/2;ue++)Y.push(parseInt(W.substr(2*ue,2),16));var ie=[],ce="";for(ue=0;ue<Y.length;ue++)128&Y[ue]?ce+=g((127&Y[ue]).toString(2),7):(ce+=g((127&Y[ue]).toString(2),7),ie.push(new String(parseInt(ce,2))),ce="");var he=w.join(".");return ie.length>0&&(he=he+"."+ie.join(".")),he},oe.dump=function(f,g,w,A){var M=oe,W=M.getV,Y=M.dump,ue=M.getChildIdx,ie=f;f instanceof k.asn1.ASN1Object&&(ie=f.getEncodedHex());var ce=function(at,Ir){return at.length<=2*Ir?at:at.substr(0,Ir)+"..(total "+at.length/2+"bytes).."+at.substr(at.length-Ir,Ir)};g===void 0&&(g={ommit_long_octet:32}),w===void 0&&(w=0),A===void 0&&(A="");var he,ye=g.ommit_long_octet;if((he=ie.substr(w,2))=="01")return(Ae=W(ie,w))=="00"?A+`BOOLEAN FALSE
`:A+`BOOLEAN TRUE
`;if(he=="02")return A+"INTEGER "+ce(Ae=W(ie,w),ye)+`
`;if(he=="03"){var Ae=W(ie,w);if(M.isASN1HEX(Ae.substr(2))){var Fe=A+`BITSTRING, encapsulates
`;return Fe+=Y(Ae.substr(2),g,0,A+"  ")}return A+"BITSTRING "+ce(Ae,ye)+`
`}if(he=="04")return Ae=W(ie,w),M.isASN1HEX(Ae)?(Fe=A+`OCTETSTRING, encapsulates
`,Fe+=Y(Ae,g,0,A+"  ")):A+"OCTETSTRING "+ce(Ae,ye)+`
`;if(he=="05")return A+`NULL
`;if(he=="06"){var Ue=W(ie,w),Ge=k.asn1.ASN1Util.oidHexToInt(Ue),ze=k.asn1.x509.OID.oid2name(Ge),X=Ge.replace(/\./g," ");return ze!=""?A+"ObjectIdentifier "+ze+" ("+X+`)
`:A+"ObjectIdentifier ("+X+`)
`}if(he=="0a")return A+"ENUMERATED "+parseInt(W(ie,w))+`
`;if(he=="0c")return A+"UTF8String '"+st(W(ie,w))+`'
`;if(he=="13")return A+"PrintableString '"+st(W(ie,w))+`'
`;if(he=="14")return A+"TeletexString '"+st(W(ie,w))+`'
`;if(he=="16")return A+"IA5String '"+st(W(ie,w))+`'
`;if(he=="17")return A+"UTCTime "+st(W(ie,w))+`
`;if(he=="18")return A+"GeneralizedTime "+st(W(ie,w))+`
`;if(he=="1a")return A+"VisualString '"+st(W(ie,w))+`'
`;if(he=="1e")return A+"BMPString '"+Ft(W(ie,w))+`'
`;if(he=="30"){if(ie.substr(w,4)=="3000")return A+`SEQUENCE {}
`;Fe=A+`SEQUENCE
`;var pe=g;if(((He=ue(ie,w)).length==2||He.length==3)&&ie.substr(He[0],2)=="06"&&ie.substr(He[He.length-1],2)=="04"){ze=M.oidname(W(ie,He[0]));var ve=JSON.parse(JSON.stringify(g));ve.x509ExtName=ze,pe=ve}for(var be=0;be<He.length;be++)Fe+=Y(ie,pe,He[be],A+"  ");return Fe}if(he=="31"){Fe=A+`SET
`;var He=ue(ie,w);for(be=0;be<He.length;be++)Fe+=Y(ie,g,He[be],A+"  ");return Fe}if(128&(he=parseInt(he,16))){var Je=31&he;if(32&he){for(Fe=A+"["+Je+`]
`,He=ue(ie,w),be=0;be<He.length;be++)Fe+=Y(ie,g,He[be],A+"  ");return Fe}if(Ae=W(ie,w),oe.isASN1HEX(Ae)){var Fe=A+"["+Je+`]
`;return Fe+=Y(Ae,g,0,A+"  ")}return(Ae.substr(0,8)=="68747470"||g.x509ExtName==="subjectAltName"&&Je==2)&&(Ae=st(Ae)),Fe=A+"["+Je+"] "+Ae+`
`}return A+"UNKNOWN("+he+") "+W(ie,w)+`
`},oe.isContextTag=function(f,g){var w,A;f=f.toLowerCase();try{w=parseInt(f,16)}catch{return-1}if(g===void 0)return(192&w)==128;try{return g.match(/^\[[0-9]+\]$/)!=null&&!((A=parseInt(g.substr(1,g.length-1),10))>31)&&(192&w)==128&&(31&w)==A}catch{return!1}},oe.isASN1HEX=function(f){var g=oe;if(f.length%2==1)return!1;var w=g.getVblen(f,0),A=f.substr(0,2),M=g.getL(f,0);return f.length-A.length-M.length==2*w},oe.checkStrictDER=function(f,g,w,A,M){var W=oe;if(w===void 0){if(typeof f!="string")throw new Error("not hex string");if(f=f.toLowerCase(),!k.lang.String.isHex(f))throw new Error("not hex string");w=f.length,M=(A=f.length/2)<128?1:Math.ceil(A.toString(16))+1}if(W.getL(f,g).length>2*M)throw new Error("L of TLV too long: idx="+g);var Y=W.getVblen(f,g);if(Y>A)throw new Error("value of L too long than hex: idx="+g);var ue=W.getTLV(f,g),ie=ue.length-2-W.getL(f,g).length;if(ie!==2*Y)throw new Error("V string length and L's value not the same:"+ie+"/"+2*Y);if(g===0&&f.length!=ue.length)throw new Error("total length and TLV length unmatch:"+f.length+"!="+ue.length);var ce=f.substr(g,2);if(ce==="02"){var he=W.getVidx(f,g);if(f.substr(he,2)=="00"&&f.charCodeAt(he+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(ce,16)){for(var ye=W.getVblen(f,g),Ae=0,Fe=W.getChildIdx(f,g),Ue=0;Ue<Fe.length;Ue++)Ae+=W.getTLV(f,Fe[Ue]).length,W.checkStrictDER(f,Fe[Ue],w,A,M);if(2*ye!=Ae)throw new Error("sum of children's TLV length and L unmatch: "+2*ye+"!="+Ae)}},oe.oidname=function(f){var g=k.asn1;k.lang.String.isHex(f)&&(f=g.ASN1Util.oidHexToInt(f));var w=g.x509.OID.oid2name(f);return w===""&&(w=f),w},k!==void 0&&k||(n.KJUR=k={}),k.lang!==void 0&&k.lang||(k.lang={}),k.lang.String=function(){},typeof a=="function"?(n.utf8tob64u=ge=function(g){return Se(a.from(g,"utf8").toString("base64"))},n.b64utoutf8=Pe=function(g){return a.from(Me(g),"base64").toString("utf8")}):(n.utf8tob64u=ge=function(g){return Ne(xt(Er(g)))},n.b64utoutf8=Pe=function(g){return decodeURIComponent(vr(_e(g)))}),k.lang.String.isInteger=function(f){return!!f.match(/^[0-9]+$/)||!!f.match(/^-[0-9]+$/)},k.lang.String.isHex=function(f){return sr(f)},k.lang.String.isBase64=function(f){return!(!(f=f.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||f.length%4!=0)},k.lang.String.isBase64URL=function(f){return!f.match(/[+/=]/)&&(f=Me(f),k.lang.String.isBase64(f))},k.lang.String.isIntegerArray=function(f){return!!(f=f.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},k.lang.String.isPrintable=function(f){return f.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},k.lang.String.isIA5=function(f){return f.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},k.lang.String.isMail=function(f){return f.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var ir=function(g,w,A){return A==null&&(A="0"),g.length>=w?g:new Array(w-g.length+1).join(A)+g};function Mt(f,g){var w=function(){};w.prototype=g.prototype,f.prototype=new w,f.prototype.constructor=f,f.superclass=g.prototype,g.prototype.constructor==Object.prototype.constructor&&(g.prototype.constructor=g)}k!==void 0&&k||(n.KJUR=k={}),k.crypto!==void 0&&k.crypto||(k.crypto={}),k.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:j.algo.MD5,sha1:j.algo.SHA1,sha224:j.algo.SHA224,sha256:j.algo.SHA256,sha384:j.algo.SHA384,sha512:j.algo.SHA512,ripemd160:j.algo.RIPEMD160},this.getDigestInfoHex=function(f,g){if(this.DIGESTINFOHEAD[g]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+g;return this.DIGESTINFOHEAD[g]+f},this.getPaddedDigestInfoHex=function(f,g,w){var A=this.getDigestInfoHex(f,g),M=w/4;if(A.length+22>M)throw"key is too short for SigAlg: keylen="+w+","+g;for(var W="0001",Y="00"+A,ue="",ie=M-W.length-Y.length,ce=0;ce<ie;ce+=2)ue+="ff";return W+ue+Y},this.hashString=function(f,g){return new k.crypto.MessageDigest({alg:g}).digestString(f)},this.hashHex=function(f,g){return new k.crypto.MessageDigest({alg:g}).digestHex(f)},this.sha1=function(f){return this.hashString(f,"sha1")},this.sha256=function(f){return this.hashString(f,"sha256")},this.sha256Hex=function(f){return this.hashHex(f,"sha256")},this.sha512=function(f){return this.hashString(f,"sha512")},this.sha512Hex=function(f){return this.hashHex(f,"sha512")},this.isKey=function(f){return f instanceof te||f instanceof k.crypto.DSA||f instanceof k.crypto.ECDSA}},k.crypto.Util.md5=function(f){return new k.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(f)},k.crypto.Util.ripemd160=function(f){return new k.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(f)},k.crypto.Util.SECURERANDOMGEN=new Xt,k.crypto.Util.getRandomHexOfNbytes=function(f){var g=new Array(f);return k.crypto.Util.SECURERANDOMGEN.nextBytes(g),wt(g)},k.crypto.Util.getRandomBigIntegerOfNbytes=function(f){return new D(k.crypto.Util.getRandomHexOfNbytes(f),16)},k.crypto.Util.getRandomHexOfNbits=function(f){var g=f%8,w=new Array((f-g)/8+1);return k.crypto.Util.SECURERANDOMGEN.nextBytes(w),w[0]=(255<<g&255^255)&w[0],wt(w)},k.crypto.Util.getRandomBigIntegerOfNbits=function(f){return new D(k.crypto.Util.getRandomHexOfNbits(f),16)},k.crypto.Util.getRandomBigIntegerZeroToMax=function(f){for(var g=f.bitLength();;){var w=k.crypto.Util.getRandomBigIntegerOfNbits(g);if(f.compareTo(w)!=-1)return w}},k.crypto.Util.getRandomBigIntegerMinToMax=function(f,g){var w=f.compareTo(g);if(w==1)throw"biMin is greater than biMax";if(w==0)return f;var A=g.subtract(f);return k.crypto.Util.getRandomBigIntegerZeroToMax(A).add(f)},k.crypto.MessageDigest=function(f){this.setAlgAndProvider=function(g,w){if((g=k.crypto.MessageDigest.getCanonicalAlgName(g))!==null&&w===void 0&&(w=k.crypto.Util.DEFAULTPROVIDER[g]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(g)!=-1&&w=="cryptojs"){try{this.md=k.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[g].create()}catch(A){throw"setAlgAndProvider hash alg set fail alg="+g+"/"+A}this.updateString=function(A){this.md.update(A)},this.updateHex=function(A){var M=j.enc.Hex.parse(A);this.md.update(M)},this.digest=function(){return this.md.finalize().toString(j.enc.Hex)},this.digestString=function(A){return this.updateString(A),this.digest()},this.digestHex=function(A){return this.updateHex(A),this.digest()}}if(":sha256:".indexOf(g)!=-1&&w=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(A){throw"setAlgAndProvider hash alg set fail alg="+g+"/"+A}this.updateString=function(A){this.md.update(A)},this.updateHex=function(A){var M=sjcl.codec.hex.toBits(A);this.md.update(M)},this.digest=function(){var A=this.md.finalize();return sjcl.codec.hex.fromBits(A)},this.digestString=function(A){return this.updateString(A),this.digest()},this.digestHex=function(A){return this.updateHex(A),this.digest()}}},this.updateString=function(g){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(g){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(g){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(g){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},f!==void 0&&f.alg!==void 0&&(this.algName=f.alg,f.prov===void 0&&(this.provName=k.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},k.crypto.MessageDigest.getCanonicalAlgName=function(f){return typeof f=="string"&&(f=(f=f.toLowerCase()).replace(/-/,"")),f},k.crypto.MessageDigest.getHashLength=function(f){var g=k.crypto.MessageDigest,w=g.getCanonicalAlgName(f);if(g.HASHLENGTH[w]===void 0)throw"not supported algorithm: "+f;return g.HASHLENGTH[w]},k.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},k.crypto.Mac=function(f){this.setAlgAndProvider=function(g,w){if((g=g.toLowerCase())==null&&(g="hmacsha1"),(g=g.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+g;w===void 0&&(w=k.crypto.Util.DEFAULTPROVIDER[g]),this.algProv=g+"/"+w;var A=g.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(A)!=-1&&w=="cryptojs"){try{var M=k.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[A];this.mac=j.algo.HMAC.create(M,this.pass)}catch(W){throw"setAlgAndProvider hash alg set fail hashAlg="+A+"/"+W}this.updateString=function(W){this.mac.update(W)},this.updateHex=function(W){var Y=j.enc.Hex.parse(W);this.mac.update(Y)},this.doFinal=function(){return this.mac.finalize().toString(j.enc.Hex)},this.doFinalString=function(W){return this.updateString(W),this.doFinal()},this.doFinalHex=function(W){return this.updateHex(W),this.doFinal()}}},this.updateString=function(g){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(g){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(g){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(g){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(g){if(typeof g=="string"){var w=g;return g.length%2!=1&&g.match(/^[0-9A-Fa-f]+$/)||(w=tt(g)),void(this.pass=j.enc.Hex.parse(w))}if((g===void 0?"undefined":b(g))!="object")throw"KJUR.crypto.Mac unsupported password type: "+g;if(w=null,g.hex!==void 0){if(g.hex.length%2!=0||!g.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+g.hex;w=g.hex}if(g.utf8!==void 0&&(w=je(g.utf8)),g.rstr!==void 0&&(w=tt(g.rstr)),g.b64!==void 0&&(w=ne(g.b64)),g.b64u!==void 0&&(w=_e(g.b64u)),w==null)throw"KJUR.crypto.Mac unsupported password type: "+g;this.pass=j.enc.Hex.parse(w)},f!==void 0&&(f.pass!==void 0&&this.setPassword(f.pass),f.alg!==void 0&&(this.algName=f.alg,f.prov===void 0&&(this.provName=k.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},k.crypto.Signature=function(f){var g=null;if(this._setAlgNames=function(){var w=this.algName.match(/^(.+)with(.+)$/);w&&(this.mdAlgName=w[1].toLowerCase(),this.pubkeyAlgName=w[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(w,A){for(var M="",W=A/4-w.length,Y=0;Y<W;Y++)M+="0";return M+w},this.setAlgAndProvider=function(w,A){if(this._setAlgNames(),A!="cryptojs/jsrsa")throw new Error("provider not supported: "+A);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new k.crypto.MessageDigest({alg:this.mdAlgName})}catch(M){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+M)}this.init=function(M,W){var Y=null;try{Y=W===void 0?kt.getKey(M):kt.getKey(M,W)}catch(ue){throw"init failed:"+ue}if(Y.isPrivate===!0)this.prvKey=Y,this.state="SIGN";else{if(Y.isPublic!==!0)throw"init failed.:"+Y;this.pubKey=Y,this.state="VERIFY"}},this.updateString=function(M){this.md.updateString(M)},this.updateHex=function(M){this.md.updateHex(M)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&k.crypto.ECDSA!==void 0&&(this.prvKey=new k.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof te&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof te&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof k.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof k.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(M){return this.updateString(M),this.sign()},this.signHex=function(M){return this.updateHex(M),this.sign()},this.verify=function(M){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&k.crypto.ECDSA!==void 0&&(this.pubKey=new k.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof te&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,M,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof te&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,M);if(k.crypto.ECDSA!==void 0&&this.pubKey instanceof k.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,M);if(k.crypto.DSA!==void 0&&this.pubKey instanceof k.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,M);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(w,A){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(w){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(w){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(w){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(w){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(w){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=f,f!==void 0&&(f.alg!==void 0&&(this.algName=f.alg,f.prov===void 0?this.provName=k.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=f.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),f.psssaltlen!==void 0&&(this.pssSaltLen=f.psssaltlen),f.prvkeypem!==void 0)){if(f.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{g=kt.getKey(f.prvkeypem),this.init(g)}catch(w){throw"fatal error to load pem private key: "+w}}},k.crypto.Cipher=function(f){},k.crypto.Cipher.encrypt=function(f,g,w){if(g instanceof te&&g.isPublic){var A=k.crypto.Cipher.getAlgByKeyAndName(g,w);if(A==="RSA")return g.encrypt(f);if(A==="RSAOAEP")return g.encryptOAEP(f,"sha1");var M=A.match(/^RSAOAEP(\d+)$/);if(M!==null)return g.encryptOAEP(f,"sha"+M[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+w}throw"Cipher.encrypt: unsupported key or algorithm"},k.crypto.Cipher.decrypt=function(f,g,w){if(g instanceof te&&g.isPrivate){var A=k.crypto.Cipher.getAlgByKeyAndName(g,w);if(A==="RSA")return g.decrypt(f);if(A==="RSAOAEP")return g.decryptOAEP(f,"sha1");var M=A.match(/^RSAOAEP(\d+)$/);if(M!==null)return g.decryptOAEP(f,"sha"+M[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+w}throw"Cipher.decrypt: unsupported key or algorithm"},k.crypto.Cipher.getAlgByKeyAndName=function(f,g){if(f instanceof te){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(g)!=-1)return g;if(g==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+g}throw"getAlgByKeyAndName: not supported algorithm name: "+g},k.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},k!==void 0&&k||(n.KJUR=k={}),k.crypto!==void 0&&k.crypto||(k.crypto={}),k.crypto.ECDSA=function(f){var g=Error,w=D,A=K,M=k.crypto.ECDSA,W=k.crypto.ECParameterDB,Y=M.getName,ue=oe,ie=ue.getVbyListEx,ce=ue.isASN1HEX,he=new Xt;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(ye){return new w(ye.bitLength(),he).mod(ye.subtract(w.ONE)).add(w.ONE)},this.setNamedCurve=function(ye){this.ecparams=W.getByName(ye),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=ye},this.setPrivateKeyHex=function(ye){this.isPrivate=!0,this.prvKeyHex=ye},this.setPublicKeyHex=function(ye){this.isPublic=!0,this.pubKeyHex=ye},this.getPublicKeyXYHex=function(){var ye=this.pubKeyHex;if(ye.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var Ae=this.ecparams.keylen/4;if(ye.length!==2+2*Ae)throw"malformed public key hex length";var Fe={};return Fe.x=ye.substr(2,Ae),Fe.y=ye.substr(2+Ae),Fe},this.getShortNISTPCurveName=function(){var ye=this.curveName;return ye==="secp256r1"||ye==="NIST P-256"||ye==="P-256"||ye==="prime256v1"?"P-256":ye==="secp384r1"||ye==="NIST P-384"||ye==="P-384"?"P-384":null},this.generateKeyPairHex=function(){var ye=this.ecparams.n,Ae=this.getBigRandom(ye),Fe=this.ecparams.G.multiply(Ae),Ue=Fe.getX().toBigInteger(),Ge=Fe.getY().toBigInteger(),ze=this.ecparams.keylen/4,X=("0000000000"+Ae.toString(16)).slice(-ze),pe="04"+("0000000000"+Ue.toString(16)).slice(-ze)+("0000000000"+Ge.toString(16)).slice(-ze);return this.setPrivateKeyHex(X),this.setPublicKeyHex(pe),{ecprvhex:X,ecpubhex:pe}},this.signWithMessageHash=function(ye){return this.signHex(ye,this.prvKeyHex)},this.signHex=function(ye,Ae){var Fe=new w(Ae,16),Ue=this.ecparams.n,Ge=new w(ye.substring(0,this.ecparams.keylen/4),16);do var ze=this.getBigRandom(Ue),X=this.ecparams.G.multiply(ze).getX().toBigInteger().mod(Ue);while(X.compareTo(w.ZERO)<=0);var pe=ze.modInverse(Ue).multiply(Ge.add(Fe.multiply(X))).mod(Ue);return M.biRSSigToASN1Sig(X,pe)},this.sign=function(ye,Ae){var Fe=Ae,Ue=this.ecparams.n,Ge=w.fromByteArrayUnsigned(ye);do var ze=this.getBigRandom(Ue),X=this.ecparams.G.multiply(ze).getX().toBigInteger().mod(Ue);while(X.compareTo(D.ZERO)<=0);var pe=ze.modInverse(Ue).multiply(Ge.add(Fe.multiply(X))).mod(Ue);return this.serializeSig(X,pe)},this.verifyWithMessageHash=function(ye,Ae){return this.verifyHex(ye,Ae,this.pubKeyHex)},this.verifyHex=function(ye,Ae,Fe){try{var Ue,Ge,ze=M.parseSigHex(Ae);Ue=ze.r,Ge=ze.s;var X=A.decodeFromHex(this.ecparams.curve,Fe),pe=new w(ye.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(pe,Ue,Ge,X)}catch{return!1}},this.verify=function(ye,Ae,Fe){var Ue,Ge,ze;if(Bitcoin.Util.isArray(Ae)){var X=this.parseSig(Ae);Ue=X.r,Ge=X.s}else{if((Ae===void 0?"undefined":b(Ae))!=="object"||!Ae.r||!Ae.s)throw"Invalid value for signature";Ue=Ae.r,Ge=Ae.s}if(Fe instanceof K)ze=Fe;else{if(!Bitcoin.Util.isArray(Fe))throw"Invalid format for pubkey value, must be byte array or ECPointFp";ze=A.decodeFrom(this.ecparams.curve,Fe)}var pe=w.fromByteArrayUnsigned(ye);return this.verifyRaw(pe,Ue,Ge,ze)},this.verifyRaw=function(ye,Ae,Fe,Ue){var Ge=this.ecparams.n,ze=this.ecparams.G;if(Ae.compareTo(w.ONE)<0||Ae.compareTo(Ge)>=0||Fe.compareTo(w.ONE)<0||Fe.compareTo(Ge)>=0)return!1;var X=Fe.modInverse(Ge),pe=ye.multiply(X).mod(Ge),ve=Ae.multiply(X).mod(Ge);return ze.multiply(pe).add(Ue.multiply(ve)).getX().toBigInteger().mod(Ge).equals(Ae)},this.serializeSig=function(ye,Ae){var Fe=ye.toByteArraySigned(),Ue=Ae.toByteArraySigned(),Ge=[];return Ge.push(2),Ge.push(Fe.length),(Ge=Ge.concat(Fe)).push(2),Ge.push(Ue.length),(Ge=Ge.concat(Ue)).unshift(Ge.length),Ge.unshift(48),Ge},this.parseSig=function(ye){var Ae;if(ye[0]!=48)throw new Error("Signature not a valid DERSequence");if(ye[Ae=2]!=2)throw new Error("First element in signature must be a DERInteger");var Fe=ye.slice(Ae+2,Ae+2+ye[Ae+1]);if(ye[Ae+=2+ye[Ae+1]]!=2)throw new Error("Second element in signature must be a DERInteger");var Ue=ye.slice(Ae+2,Ae+2+ye[Ae+1]);return Ae+=2+ye[Ae+1],{r:w.fromByteArrayUnsigned(Fe),s:w.fromByteArrayUnsigned(Ue)}},this.parseSigCompact=function(ye){if(ye.length!==65)throw"Signature has the wrong length";var Ae=ye[0]-27;if(Ae<0||Ae>7)throw"Invalid signature type";var Fe=this.ecparams.n;return{r:w.fromByteArrayUnsigned(ye.slice(1,33)).mod(Fe),s:w.fromByteArrayUnsigned(ye.slice(33,65)).mod(Fe),i:Ae}},this.readPKCS5PrvKeyHex=function(ye){if(ce(ye)===!1)throw new Error("not ASN.1 hex string");var Ae,Fe,Ue;try{Ae=ie(ye,0,["[0]",0],"06"),Fe=ie(ye,0,[1],"04");try{Ue=ie(ye,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=Y(Ae),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(Ue),this.setPrivateKeyHex(Fe),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(ye){if(ce(ye)===!1)throw new g("not ASN.1 hex string");var Ae,Fe,Ue;try{ie(ye,0,[1,0],"06"),Ae=ie(ye,0,[1,1],"06"),Fe=ie(ye,0,[2,0,1],"04");try{Ue=ie(ye,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new g("malformed PKCS#8 plain ECC private key")}if(this.curveName=Y(Ae),this.curveName===void 0)throw new g("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Ue),this.setPrivateKeyHex(Fe),this.isPublic=!1},this.readPKCS8PubKeyHex=function(ye){if(ce(ye)===!1)throw new g("not ASN.1 hex string");var Ae,Fe;try{ie(ye,0,[0,0],"06"),Ae=ie(ye,0,[0,1],"06"),Fe=ie(ye,0,[1],"03")}catch{throw new g("malformed PKCS#8 ECC public key")}if(this.curveName=Y(Ae),this.curveName===null)throw new g("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Fe)},this.readCertPubKeyHex=function(ye,Ae){if(ce(ye)===!1)throw new g("not ASN.1 hex string");var Fe,Ue;try{Fe=ie(ye,0,[0,5,0,1],"06"),Ue=ie(ye,0,[0,5,1],"03")}catch{throw new g("malformed X.509 certificate ECC public key")}if(this.curveName=Y(Fe),this.curveName===null)throw new g("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Ue)},f!==void 0&&f.curve!==void 0&&(this.curveName=f.curve),this.curveName===void 0&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),f!==void 0&&(f.prv!==void 0&&this.setPrivateKeyHex(f.prv),f.pub!==void 0&&this.setPublicKeyHex(f.pub))},k.crypto.ECDSA.parseSigHex=function(f){var g=k.crypto.ECDSA.parseSigHexInHexRS(f);return{r:new D(g.r,16),s:new D(g.s,16)}},k.crypto.ECDSA.parseSigHexInHexRS=function(f){var g=oe,w=g.getChildIdx,A=g.getV;if(g.checkStrictDER(f,0),f.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var M=w(f,0);if(M.length!=2)throw new Error("signature shall have two elements");var W=M[0],Y=M[1];if(f.substr(W,2)!="02")throw new Error("1st item not ASN.1 integer");if(f.substr(Y,2)!="02")throw new Error("2nd item not ASN.1 integer");return{r:A(f,W),s:A(f,Y)}},k.crypto.ECDSA.asn1SigToConcatSig=function(f){var g=k.crypto.ECDSA.parseSigHexInHexRS(f),w=g.r,A=g.s;if(w.substr(0,2)=="00"&&w.length%32==2&&(w=w.substr(2)),A.substr(0,2)=="00"&&A.length%32==2&&(A=A.substr(2)),w.length%32==30&&(w="00"+w),A.length%32==30&&(A="00"+A),w.length%32!=0)throw"unknown ECDSA sig r length error";if(A.length%32!=0)throw"unknown ECDSA sig s length error";return w+A},k.crypto.ECDSA.concatSigToASN1Sig=function(f){if(f.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var g=f.substr(0,f.length/2),w=f.substr(f.length/2);return k.crypto.ECDSA.hexRSSigToASN1Sig(g,w)},k.crypto.ECDSA.hexRSSigToASN1Sig=function(f,g){var w=new D(f,16),A=new D(g,16);return k.crypto.ECDSA.biRSSigToASN1Sig(w,A)},k.crypto.ECDSA.biRSSigToASN1Sig=function(f,g){var w=k.asn1,A=new w.DERInteger({bigint:f}),M=new w.DERInteger({bigint:g});return new w.DERSequence({array:[A,M]}).getEncodedHex()},k.crypto.ECDSA.getName=function(f){return f==="2b8104001f"?"secp192k1":f==="2a8648ce3d030107"?"secp256r1":f==="2b8104000a"?"secp256k1":f==="2b81040021"?"secp224r1":f==="2b81040022"?"secp384r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(f)!==-1?"secp256r1":"|secp256k1|".indexOf(f)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(f)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(f)!==-1?"secp384r1":null},k!==void 0&&k||(n.KJUR=k={}),k.crypto!==void 0&&k.crypto||(k.crypto={}),k.crypto.ECParameterDB=new function(){var f={},g={};function w(A){return new D(A,16)}this.getByName=function(A){var M=A;if(g[M]!==void 0&&(M=g[A]),f[M]!==void 0)return f[M];throw"unregistered EC curve name: "+M},this.regist=function(A,M,W,Y,ue,ie,ce,he,ye,Ae,Fe,Ue){f[A]={};var Ge=w(W),ze=w(Y),X=w(ue),pe=w(ie),ve=w(ce),be=new T(Ge,ze,X),He=be.decodePointHex("04"+he+ye);f[A].name=A,f[A].keylen=M,f[A].curve=be,f[A].G=He,f[A].n=pe,f[A].h=ve,f[A].oid=Fe,f[A].info=Ue;for(var Je=0;Je<Ae.length;Je++)g[Ae[Je]]=A}},k.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),k.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),k.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),k.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),k.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),k.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),k.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),k.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),k.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),k.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var kt=function(){var f=function(ce,he,ye){return g(j.AES,ce,he,ye)},g=function(ce,he,ye,Ae){var Fe=j.enc.Hex.parse(he),Ue=j.enc.Hex.parse(ye),Ge=j.enc.Hex.parse(Ae),ze={};ze.key=Ue,ze.iv=Ge,ze.ciphertext=Fe;var X=ce.decrypt(ze,Ue,{iv:Ge});return j.enc.Hex.stringify(X)},w=function(ce,he,ye){return A(j.AES,ce,he,ye)},A=function(ce,he,ye,Ae){var Fe=j.enc.Hex.parse(he),Ue=j.enc.Hex.parse(ye),Ge=j.enc.Hex.parse(Ae),ze=ce.encrypt(Fe,Ue,{iv:Ge}),X=j.enc.Hex.parse(ze.toString());return j.enc.Base64.stringify(X)},M={"AES-256-CBC":{proc:f,eproc:w,keylen:32,ivlen:16},"AES-192-CBC":{proc:f,eproc:w,keylen:24,ivlen:16},"AES-128-CBC":{proc:f,eproc:w,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(ce,he,ye){return g(j.TripleDES,ce,he,ye)},eproc:function(ce,he,ye){return A(j.TripleDES,ce,he,ye)},keylen:24,ivlen:8},"DES-CBC":{proc:function(ce,he,ye){return g(j.DES,ce,he,ye)},eproc:function(ce,he,ye){return A(j.DES,ce,he,ye)},keylen:8,ivlen:8}},W=function(ce){var he={},ye=ce.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));ye&&(he.cipher=ye[1],he.ivsalt=ye[2]);var Ae=ce.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));Ae&&(he.type=Ae[1]);var Fe=-1,Ue=0;ce.indexOf(`\r
\r
`)!=-1&&(Fe=ce.indexOf(`\r
\r
`),Ue=2),ce.indexOf(`

`)!=-1&&(Fe=ce.indexOf(`

`),Ue=1);var Ge=ce.indexOf("-----END");if(Fe!=-1&&Ge!=-1){var ze=ce.substring(Fe+2*Ue,Ge-Ue);ze=ze.replace(/\s+/g,""),he.data=ze}return he},Y=function(ce,he,ye){for(var Ae=ye.substring(0,16),Fe=j.enc.Hex.parse(Ae),Ue=j.enc.Utf8.parse(he),Ge=M[ce].keylen+M[ce].ivlen,ze="",X=null;;){var pe=j.algo.MD5.create();if(X!=null&&pe.update(X),pe.update(Ue),pe.update(Fe),X=pe.finalize(),(ze+=j.enc.Hex.stringify(X)).length>=2*Ge)break}var ve={};return ve.keyhex=ze.substr(0,2*M[ce].keylen),ve.ivhex=ze.substr(2*M[ce].keylen,2*M[ce].ivlen),ve},ue=function(ce,he,ye,Ae){var Fe=j.enc.Base64.parse(ce),Ue=j.enc.Hex.stringify(Fe);return(0,M[he].proc)(Ue,ye,Ae)};return{version:"1.0.0",parsePKCS5PEM:function(ce){return W(ce)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(ce,he,ye){return Y(ce,he,ye)},decryptKeyB64:function(ce,he,ye,Ae){return ue(ce,he,ye,Ae)},getDecryptedKeyHex:function(ce,he){var ye=W(ce),Ae=ye.cipher,Fe=ye.ivsalt,Ue=ye.data,Ge=Y(Ae,he,Fe).keyhex;return ue(Ue,Ae,Ge,Fe)},getEncryptedPKCS5PEMFromPrvKeyHex:function(ce,he,ye,Ae,Fe){var Ue="";if(Ae!==void 0&&Ae!=null||(Ae="AES-256-CBC"),M[Ae]===void 0)throw new Error("KEYUTIL unsupported algorithm: "+Ae);Fe!==void 0&&Fe!=null||(Fe=function(X){var pe=j.lib.WordArray.random(X);return j.enc.Hex.stringify(pe)}(M[Ae].ivlen).toUpperCase());var Ge=function(X,pe,ve,be){return(0,M[pe].eproc)(X,ve,be)}(he,Ae,Y(Ae,ye,Fe).keyhex,Fe);return Ue="-----BEGIN "+ce+` PRIVATE KEY-----\r
`,Ue+=`Proc-Type: 4,ENCRYPTED\r
`,Ue+="DEK-Info: "+Ae+","+Fe+`\r
`,Ue+=`\r
`,Ue+=Ge.replace(/(.{64})/g,`$1\r
`),Ue+=`\r
-----END `+ce+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(ce){var he=oe,ye=he.getChildIdx,Ae=he.getV,Fe={},Ue=ye(ce,0);if(Ue.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+Ue.length);Fe.ciphertext=Ae(ce,Ue[1]);var Ge=ye(ce,Ue[0]);if(Ge.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+Ge.length);if(Ae(ce,Ge[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var ze=ye(ce,Ge[1]);if(Ge.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+ze.length);var X=ye(ce,ze[1]);if(X.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+X.length);if(Ae(ce,X[0])!="2a864886f70d0307")throw"this only supports TripleDES";Fe.encryptionSchemeAlg="TripleDES",Fe.encryptionSchemeIV=Ae(ce,X[1]);var pe=ye(ce,ze[0]);if(pe.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+pe.length);if(Ae(ce,pe[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var ve=ye(ce,pe[1]);if(ve.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+ve.length);Fe.pbkdf2Salt=Ae(ce,ve[0]);var be=Ae(ce,ve[1]);try{Fe.pbkdf2Iter=parseInt(be,16)}catch{throw new Error("malformed format pbkdf2Iter: "+be)}return Fe},getPBKDF2KeyHexFromParam:function(ce,he){var ye=j.enc.Hex.parse(ce.pbkdf2Salt),Ae=ce.pbkdf2Iter,Fe=j.PBKDF2(he,ye,{keySize:6,iterations:Ae});return j.enc.Hex.stringify(Fe)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(ce,he){var ye=Zt(ce,"ENCRYPTED PRIVATE KEY"),Ae=this.parseHexOfEncryptedPKCS8(ye),Fe=kt.getPBKDF2KeyHexFromParam(Ae,he),Ue={};Ue.ciphertext=j.enc.Hex.parse(Ae.ciphertext);var Ge=j.enc.Hex.parse(Fe),ze=j.enc.Hex.parse(Ae.encryptionSchemeIV),X=j.TripleDES.decrypt(Ue,Ge,{iv:ze});return j.enc.Hex.stringify(X)},getKeyFromEncryptedPKCS8PEM:function(ce,he){var ye=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(ce,he);return this.getKeyFromPlainPrivatePKCS8Hex(ye)},parsePlainPrivatePKCS8Hex:function(ce){var he=oe,ye=he.getChildIdx,Ae=he.getV,Fe={algparam:null};if(ce.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var Ue=ye(ce,0);if(Ue.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(ce.substr(Ue[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var Ge=ye(ce,Ue[1]);if(Ge.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(ce.substr(Ge[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Fe.algoid=Ae(ce,Ge[0]),ce.substr(Ge[1],2)=="06"&&(Fe.algparam=Ae(ce,Ge[1])),ce.substr(Ue[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Fe.keyidx=he.getVidx(ce,Ue[2]),Fe},getKeyFromPlainPrivatePKCS8PEM:function(ce){var he=Zt(ce,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(he)},getKeyFromPlainPrivatePKCS8Hex:function(ce){var he,ye=this.parsePlainPrivatePKCS8Hex(ce);if(ye.algoid=="2a864886f70d010101")he=new te;else if(ye.algoid=="2a8648ce380401")he=new k.crypto.DSA;else{if(ye.algoid!="2a8648ce3d0201")throw new Error("unsupported private key algorithm");he=new k.crypto.ECDSA}return he.readPKCS8PrvKeyHex(ce),he},_getKeyFromPublicPKCS8Hex:function(ce){var he,ye=oe.getVbyList(ce,0,[0,0],"06");if(ye==="2a864886f70d010101")he=new te;else if(ye==="2a8648ce380401")he=new k.crypto.DSA;else{if(ye!=="2a8648ce3d0201")throw new Error("unsupported PKCS#8 public key hex");he=new k.crypto.ECDSA}return he.readPKCS8PubKeyHex(ce),he},parsePublicRawRSAKeyHex:function(ce){var he=oe,ye=he.getChildIdx,Ae=he.getV,Fe={};if(ce.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var Ue=ye(ce,0);if(Ue.length!=2)throw new Error("malformed RSA key(code:002)");if(ce.substr(Ue[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(Fe.n=Ae(ce,Ue[0]),ce.substr(Ue[1],2)!="02")throw new Error("malformed RSA key(code:004)");return Fe.e=Ae(ce,Ue[1]),Fe},parsePublicPKCS8Hex:function(ce){var he=oe,ye=he.getChildIdx,Ae=he.getV,Fe={algparam:null},Ue=ye(ce,0);if(Ue.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+Ue.length);var Ge=Ue[0];if(ce.substr(Ge,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var ze=ye(ce,Ge);if(ze.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(ce.substr(ze[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(Fe.algoid=Ae(ce,ze[0]),ce.substr(ze[1],2)=="06"?Fe.algparam=Ae(ce,ze[1]):ce.substr(ze[1],2)=="30"&&(Fe.algparam={},Fe.algparam.p=he.getVbyList(ce,ze[1],[0],"02"),Fe.algparam.q=he.getVbyList(ce,ze[1],[1],"02"),Fe.algparam.g=he.getVbyList(ce,ze[1],[2],"02")),ce.substr(Ue[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return Fe.key=Ae(ce,Ue[1]).substr(2),Fe}}}();kt.getKey=function(f,g,w){var A=(ze=oe).getChildIdx,M=(ze.getV,ze.getVbyList),W=k.crypto,Y=W.ECDSA,ue=W.DSA,ie=te,ce=Zt,he=kt;if(ie!==void 0&&f instanceof ie||Y!==void 0&&f instanceof Y||ue!==void 0&&f instanceof ue)return f;if(f.curve!==void 0&&f.xy!==void 0&&f.d===void 0)return new Y({pub:f.xy,curve:f.curve});if(f.curve!==void 0&&f.d!==void 0)return new Y({prv:f.d,curve:f.curve});if(f.kty===void 0&&f.n!==void 0&&f.e!==void 0&&f.d===void 0)return(qt=new ie).setPublic(f.n,f.e),qt;if(f.kty===void 0&&f.n!==void 0&&f.e!==void 0&&f.d!==void 0&&f.p!==void 0&&f.q!==void 0&&f.dp!==void 0&&f.dq!==void 0&&f.co!==void 0&&f.qi===void 0)return(qt=new ie).setPrivateEx(f.n,f.e,f.d,f.p,f.q,f.dp,f.dq,f.co),qt;if(f.kty===void 0&&f.n!==void 0&&f.e!==void 0&&f.d!==void 0&&f.p===void 0)return(qt=new ie).setPrivate(f.n,f.e,f.d),qt;if(f.p!==void 0&&f.q!==void 0&&f.g!==void 0&&f.y!==void 0&&f.x===void 0)return(qt=new ue).setPublic(f.p,f.q,f.g,f.y),qt;if(f.p!==void 0&&f.q!==void 0&&f.g!==void 0&&f.y!==void 0&&f.x!==void 0)return(qt=new ue).setPrivate(f.p,f.q,f.g,f.y,f.x),qt;if(f.kty==="RSA"&&f.n!==void 0&&f.e!==void 0&&f.d===void 0)return(qt=new ie).setPublic(_e(f.n),_e(f.e)),qt;if(f.kty==="RSA"&&f.n!==void 0&&f.e!==void 0&&f.d!==void 0&&f.p!==void 0&&f.q!==void 0&&f.dp!==void 0&&f.dq!==void 0&&f.qi!==void 0)return(qt=new ie).setPrivateEx(_e(f.n),_e(f.e),_e(f.d),_e(f.p),_e(f.q),_e(f.dp),_e(f.dq),_e(f.qi)),qt;if(f.kty==="RSA"&&f.n!==void 0&&f.e!==void 0&&f.d!==void 0)return(qt=new ie).setPrivate(_e(f.n),_e(f.e),_e(f.d)),qt;if(f.kty==="EC"&&f.crv!==void 0&&f.x!==void 0&&f.y!==void 0&&f.d===void 0){var ye=(Tt=new Y({curve:f.crv})).ecparams.keylen/4,Ae="04"+("0000000000"+_e(f.x)).slice(-ye)+("0000000000"+_e(f.y)).slice(-ye);return Tt.setPublicKeyHex(Ae),Tt}if(f.kty==="EC"&&f.crv!==void 0&&f.x!==void 0&&f.y!==void 0&&f.d!==void 0){ye=(Tt=new Y({curve:f.crv})).ecparams.keylen/4,Ae="04"+("0000000000"+_e(f.x)).slice(-ye)+("0000000000"+_e(f.y)).slice(-ye);var Fe=("0000000000"+_e(f.d)).slice(-ye);return Tt.setPublicKeyHex(Ae),Tt.setPrivateKeyHex(Fe),Tt}if(w==="pkcs5prv"){var Ue,Ge=f,ze=oe;if((Ue=A(Ge,0)).length===9)(qt=new ie).readPKCS5PrvKeyHex(Ge);else if(Ue.length===6)(qt=new ue).readPKCS5PrvKeyHex(Ge);else{if(!(Ue.length>2&&Ge.substr(Ue[1],2)==="04"))throw new Error("unsupported PKCS#1/5 hexadecimal key");(qt=new Y).readPKCS5PrvKeyHex(Ge)}return qt}if(w==="pkcs8prv")return qt=he.getKeyFromPlainPrivatePKCS8Hex(f);if(w==="pkcs8pub")return he._getKeyFromPublicPKCS8Hex(f);if(w==="x509pub")return wr.getPublicKeyFromCertHex(f);if(f.indexOf("-END CERTIFICATE-",0)!=-1||f.indexOf("-END X509 CERTIFICATE-",0)!=-1||f.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return wr.getPublicKeyFromCertPEM(f);if(f.indexOf("-END PUBLIC KEY-")!=-1){var X=Zt(f,"PUBLIC KEY");return he._getKeyFromPublicPKCS8Hex(X)}if(f.indexOf("-END RSA PRIVATE KEY-")!=-1&&f.indexOf("4,ENCRYPTED")==-1){var pe=ce(f,"RSA PRIVATE KEY");return he.getKey(pe,null,"pkcs5prv")}if(f.indexOf("-END DSA PRIVATE KEY-")!=-1&&f.indexOf("4,ENCRYPTED")==-1){var ve=M(Sr=ce(f,"DSA PRIVATE KEY"),0,[1],"02"),be=M(Sr,0,[2],"02"),He=M(Sr,0,[3],"02"),Je=M(Sr,0,[4],"02"),Ut=M(Sr,0,[5],"02");return(qt=new ue).setPrivate(new D(ve,16),new D(be,16),new D(He,16),new D(Je,16),new D(Ut,16)),qt}if(f.indexOf("-END EC PRIVATE KEY-")!=-1&&f.indexOf("4,ENCRYPTED")==-1)return pe=ce(f,"EC PRIVATE KEY"),he.getKey(pe,null,"pkcs5prv");if(f.indexOf("-END PRIVATE KEY-")!=-1)return he.getKeyFromPlainPrivatePKCS8PEM(f);if(f.indexOf("-END RSA PRIVATE KEY-")!=-1&&f.indexOf("4,ENCRYPTED")!=-1){var at=he.getDecryptedKeyHex(f,g),Ir=new te;return Ir.readPKCS5PrvKeyHex(at),Ir}if(f.indexOf("-END EC PRIVATE KEY-")!=-1&&f.indexOf("4,ENCRYPTED")!=-1){var Tt,qt=M(Sr=he.getDecryptedKeyHex(f,g),0,[1],"04"),Wt=M(Sr,0,[2,0],"06"),Ur=M(Sr,0,[3,0],"03").substr(2);if(k.crypto.OID.oidhex2name[Wt]===void 0)throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+Wt);return(Tt=new Y({curve:k.crypto.OID.oidhex2name[Wt]})).setPublicKeyHex(Ur),Tt.setPrivateKeyHex(qt),Tt.isPublic=!1,Tt}if(f.indexOf("-END DSA PRIVATE KEY-")!=-1&&f.indexOf("4,ENCRYPTED")!=-1){var Sr;return ve=M(Sr=he.getDecryptedKeyHex(f,g),0,[1],"02"),be=M(Sr,0,[2],"02"),He=M(Sr,0,[3],"02"),Je=M(Sr,0,[4],"02"),Ut=M(Sr,0,[5],"02"),(qt=new ue).setPrivate(new D(ve,16),new D(be,16),new D(He,16),new D(Je,16),new D(Ut,16)),qt}if(f.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return he.getKeyFromEncryptedPKCS8PEM(f,g);throw new Error("not supported argument")},kt.generateKeypair=function(f,g){if(f=="RSA"){var w=g;(Y=new te).generate(w,"10001"),Y.isPrivate=!0,Y.isPublic=!0;var A=new te,M=Y.n.toString(16),W=Y.e.toString(16);return A.setPublic(M,W),A.isPrivate=!1,A.isPublic=!0,(ue={}).prvKeyObj=Y,ue.pubKeyObj=A,ue}if(f=="EC"){var Y,ue,ie=g,ce=new k.crypto.ECDSA({curve:ie}).generateKeyPairHex();return(Y=new k.crypto.ECDSA({curve:ie})).setPublicKeyHex(ce.ecpubhex),Y.setPrivateKeyHex(ce.ecprvhex),Y.isPrivate=!0,Y.isPublic=!1,(A=new k.crypto.ECDSA({curve:ie})).setPublicKeyHex(ce.ecpubhex),A.isPrivate=!1,A.isPublic=!0,(ue={}).prvKeyObj=Y,ue.pubKeyObj=A,ue}throw new Error("unknown algorithm: "+f)},kt.getPEM=function(f,g,w,A,M,W){var Y=k,ue=Y.asn1,ie=ue.DERObjectIdentifier,ce=ue.DERInteger,he=ue.ASN1Util.newObject,ye=ue.x509.SubjectPublicKeyInfo,Ae=Y.crypto,Fe=Ae.DSA,Ue=Ae.ECDSA,Ge=te;function ze(Tt){return he({seq:[{int:0},{int:{bigint:Tt.n}},{int:Tt.e},{int:{bigint:Tt.d}},{int:{bigint:Tt.p}},{int:{bigint:Tt.q}},{int:{bigint:Tt.dmp1}},{int:{bigint:Tt.dmq1}},{int:{bigint:Tt.coeff}}]})}function X(Tt){return he({seq:[{int:1},{octstr:{hex:Tt.prvKeyHex}},{tag:["a0",!0,{oid:{name:Tt.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+Tt.pubKeyHex}}]}]})}function pe(Tt){return he({seq:[{int:0},{int:{bigint:Tt.p}},{int:{bigint:Tt.q}},{int:{bigint:Tt.g}},{int:{bigint:Tt.y}},{int:{bigint:Tt.x}}]})}if((Ge!==void 0&&f instanceof Ge||Fe!==void 0&&f instanceof Fe||Ue!==void 0&&f instanceof Ue)&&f.isPublic==1&&(g===void 0||g=="PKCS8PUB"))return Gt(Je=new ye(f).getEncodedHex(),"PUBLIC KEY");if(g=="PKCS1PRV"&&Ge!==void 0&&f instanceof Ge&&(w===void 0||w==null)&&f.isPrivate==1)return Gt(Je=ze(f).getEncodedHex(),"RSA PRIVATE KEY");if(g=="PKCS1PRV"&&Ue!==void 0&&f instanceof Ue&&(w===void 0||w==null)&&f.isPrivate==1){var ve=new ie({name:f.curveName}).getEncodedHex(),be=X(f).getEncodedHex(),He="";return He+=Gt(ve,"EC PARAMETERS"),He+=Gt(be,"EC PRIVATE KEY")}if(g=="PKCS1PRV"&&Fe!==void 0&&f instanceof Fe&&(w===void 0||w==null)&&f.isPrivate==1)return Gt(Je=pe(f).getEncodedHex(),"DSA PRIVATE KEY");if(g=="PKCS5PRV"&&Ge!==void 0&&f instanceof Ge&&w!==void 0&&w!=null&&f.isPrivate==1){var Je=ze(f).getEncodedHex();return A===void 0&&(A="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",Je,w,A,W)}if(g=="PKCS5PRV"&&Ue!==void 0&&f instanceof Ue&&w!==void 0&&w!=null&&f.isPrivate==1)return Je=X(f).getEncodedHex(),A===void 0&&(A="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",Je,w,A,W);if(g=="PKCS5PRV"&&Fe!==void 0&&f instanceof Fe&&w!==void 0&&w!=null&&f.isPrivate==1)return Je=pe(f).getEncodedHex(),A===void 0&&(A="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",Je,w,A,W);var Ut=function(qt,Wt){var Ur=at(qt,Wt);return new he({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Ur.pbkdf2Salt}},{int:Ur.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Ur.encryptionSchemeIV}}]}]}]},{octstr:{hex:Ur.ciphertext}}]}).getEncodedHex()},at=function(qt,Wt){var Ur=j.lib.WordArray.random(8),Sr=j.lib.WordArray.random(8),fn=j.PBKDF2(Wt,Ur,{keySize:6,iterations:100}),Lr=j.enc.Hex.parse(qt),gn=j.TripleDES.encrypt(Lr,fn,{iv:Sr})+"",$r={};return $r.ciphertext=gn,$r.pbkdf2Salt=j.enc.Hex.stringify(Ur),$r.pbkdf2Iter=100,$r.encryptionSchemeAlg="DES-EDE3-CBC",$r.encryptionSchemeIV=j.enc.Hex.stringify(Sr),$r};if(g=="PKCS8PRV"&&Ge!=null&&f instanceof Ge&&f.isPrivate==1){var Ir=ze(f).getEncodedHex();return Je=he({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Ir}}]}).getEncodedHex(),w===void 0||w==null?Gt(Je,"PRIVATE KEY"):Gt(be=Ut(Je,w),"ENCRYPTED PRIVATE KEY")}if(g=="PKCS8PRV"&&Ue!==void 0&&f instanceof Ue&&f.isPrivate==1)return Ir=new he({seq:[{int:1},{octstr:{hex:f.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+f.pubKeyHex}}]}]}).getEncodedHex(),Je=he({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:f.curveName}}]},{octstr:{hex:Ir}}]}).getEncodedHex(),w===void 0||w==null?Gt(Je,"PRIVATE KEY"):Gt(be=Ut(Je,w),"ENCRYPTED PRIVATE KEY");if(g=="PKCS8PRV"&&Fe!==void 0&&f instanceof Fe&&f.isPrivate==1)return Ir=new ce({bigint:f.x}).getEncodedHex(),Je=he({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:f.p}},{int:{bigint:f.q}},{int:{bigint:f.g}}]}]},{octstr:{hex:Ir}}]}).getEncodedHex(),w===void 0||w==null?Gt(Je,"PRIVATE KEY"):Gt(be=Ut(Je,w),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},kt.getKeyFromCSRPEM=function(f){var g=Zt(f,"CERTIFICATE REQUEST");return kt.getKeyFromCSRHex(g)},kt.getKeyFromCSRHex=function(f){var g=kt.parseCSRHex(f);return kt.getKey(g.p8pubkeyhex,null,"pkcs8pub")},kt.parseCSRHex=function(f){var g=oe,w=g.getChildIdx,A=g.getTLV,M={},W=f;if(W.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var Y=w(W,0);if(Y.length<1)throw new Error("malformed CSR(code:002)");if(W.substr(Y[0],2)!="30")throw new Error("malformed CSR(code:003)");var ue=w(W,Y[0]);if(ue.length<3)throw new Error("malformed CSR(code:004)");return M.p8pubkeyhex=A(W,ue[2]),M},kt.getKeyID=function(f){var g=kt,w=oe;typeof f=="string"&&f.indexOf("BEGIN ")!=-1&&(f=g.getKey(f));var A=Zt(g.getPEM(f)),M=w.getIdxbyList(A,0,[1]),W=w.getV(A,M).substring(2);return k.crypto.Util.hashHex(W,"sha1")},kt.getJWKFromKey=function(f){var g={};if(f instanceof te&&f.isPrivate)return g.kty="RSA",g.n=Ne(f.n.toString(16)),g.e=Ne(f.e.toString(16)),g.d=Ne(f.d.toString(16)),g.p=Ne(f.p.toString(16)),g.q=Ne(f.q.toString(16)),g.dp=Ne(f.dmp1.toString(16)),g.dq=Ne(f.dmq1.toString(16)),g.qi=Ne(f.coeff.toString(16)),g;if(f instanceof te&&f.isPublic)return g.kty="RSA",g.n=Ne(f.n.toString(16)),g.e=Ne(f.e.toString(16)),g;if(f instanceof k.crypto.ECDSA&&f.isPrivate){if((A=f.getShortNISTPCurveName())!=="P-256"&&A!=="P-384")throw new Error("unsupported curve name for JWT: "+A);var w=f.getPublicKeyXYHex();return g.kty="EC",g.crv=A,g.x=Ne(w.x),g.y=Ne(w.y),g.d=Ne(f.prvKeyHex),g}if(f instanceof k.crypto.ECDSA&&f.isPublic){var A;if((A=f.getShortNISTPCurveName())!=="P-256"&&A!=="P-384")throw new Error("unsupported curve name for JWT: "+A);return w=f.getPublicKeyXYHex(),g.kty="EC",g.crv=A,g.x=Ne(w.x),g.y=Ne(w.y),g}throw new Error("not supported key object")},te.getPosArrayOfChildrenFromHex=function(f){return oe.getChildIdx(f,0)},te.getHexValueArrayOfChildrenFromHex=function(f){var g,w=oe.getV,A=w(f,(g=te.getPosArrayOfChildrenFromHex(f))[0]),M=w(f,g[1]),W=w(f,g[2]),Y=w(f,g[3]),ue=w(f,g[4]),ie=w(f,g[5]),ce=w(f,g[6]),he=w(f,g[7]),ye=w(f,g[8]);return(g=new Array).push(A,M,W,Y,ue,ie,ce,he,ye),g},te.prototype.readPrivateKeyFromPEMString=function(f){var g=Zt(f),w=te.getHexValueArrayOfChildrenFromHex(g);this.setPrivateEx(w[1],w[2],w[3],w[4],w[5],w[6],w[7],w[8])},te.prototype.readPKCS5PrvKeyHex=function(f){var g=te.getHexValueArrayOfChildrenFromHex(f);this.setPrivateEx(g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8])},te.prototype.readPKCS8PrvKeyHex=function(f){var g,w,A,M,W,Y,ue,ie,ce=oe,he=ce.getVbyListEx;if(ce.isASN1HEX(f)===!1)throw new Error("not ASN.1 hex string");try{g=he(f,0,[2,0,1],"02"),w=he(f,0,[2,0,2],"02"),A=he(f,0,[2,0,3],"02"),M=he(f,0,[2,0,4],"02"),W=he(f,0,[2,0,5],"02"),Y=he(f,0,[2,0,6],"02"),ue=he(f,0,[2,0,7],"02"),ie=he(f,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(g,w,A,M,W,Y,ue,ie)},te.prototype.readPKCS5PubKeyHex=function(f){var g=oe,w=g.getV;if(g.isASN1HEX(f)===!1)throw new Error("keyHex is not ASN.1 hex string");var A=g.getChildIdx(f,0);if(A.length!==2||f.substr(A[0],2)!=="02"||f.substr(A[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var M=w(f,A[0]),W=w(f,A[1]);this.setPublic(M,W)},te.prototype.readPKCS8PubKeyHex=function(f){var g=oe;if(g.isASN1HEX(f)===!1)throw new Error("not ASN.1 hex string");if(g.getTLVbyListEx(f,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var w=g.getTLVbyListEx(f,0,[1,0]);this.readPKCS5PubKeyHex(w)},te.prototype.readCertPubKeyHex=function(f,g){var w,A;(w=new wr).readCertHex(f),A=w.getPublicKeyHex(),this.readPKCS8PubKeyHex(A)};function Kr(f,g){for(var w="",A=g/4-f.length,M=0;M<A;M++)w+="0";return w+f}function Mr(f,g,w){for(var A="",M=0;A.length<g;)A+=it(w(tt(f+String.fromCharCode.apply(String,[(4278190080&M)>>24,(16711680&M)>>16,(65280&M)>>8,255&M])))),M+=1;return A}function Br(f){for(var g in k.crypto.Util.DIGESTINFOHEAD){var w=k.crypto.Util.DIGESTINFOHEAD[g],A=w.length;if(f.substring(0,A)==w)return[g,f.substring(A)]}return[]}function wr(f){var g,w=oe,A=w.getChildIdx,M=w.getV,W=w.getTLV,Y=w.getVbyList,ue=w.getVbyListEx,ie=w.getTLVbyList,ce=w.getTLVbyListEx,he=w.getIdxbyList,ye=w.getIdxbyListEx,Ae=w.getVidx,Fe=w.getInt,Ue=w.oidname,Ge=w.hextooidstr,ze=Zt;try{g=k.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var X=ie(this.hex,0,[0,0]);if(X.substr(0,2)=="a0"){var pe=ie(X,0,[0]),ve=Fe(pe,0);if(ve<0||2<ve)throw new Error("malformed version field");return this.version=ve+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return ue(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var X=ce(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(X)},this.getAlgorithmIdentifierName=function(X){for(var pe in g)if(X===g[pe])return pe;return Ue(ue(X,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return ie(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return ie(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var X=Y(this.hex,0,[0,4+this.foffset,0]);return X=X.replace(/(..)/g,"%$1"),X=decodeURIComponent(X)},this.getNotAfter=function(){var X=Y(this.hex,0,[0,4+this.foffset,1]);return X=X.replace(/(..)/g,"%$1"),X=decodeURIComponent(X)},this.getPublicKeyHex=function(){return w.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return he(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var X=this.getPublicKeyIdx();return he(this.hex,X,[1,0],"30")},this.getPublicKey=function(){return kt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var X=ie(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(X)},this.getSignatureValueHex=function(){return Y(this.hex,0,[2],"03",!0)},this.verifySignature=function(X){var pe=this.getSignatureAlgorithmField(),ve=this.getSignatureValueHex(),be=ie(this.hex,0,[0],"30"),He=new k.crypto.Signature({alg:pe});return He.init(X),He.updateHex(be),He.verify(ve)},this.parseExt=function(X){var pe,ve,be;if(X===void 0){if(be=this.hex,this.version!==3)return-1;pe=he(be,0,[0,7,0],"30"),ve=A(be,pe)}else{be=Zt(X);var He=he(be,0,[0,3,0,0],"06");if(M(be,He)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);pe=he(be,0,[0,3,0,1,0],"30"),ve=A(be,pe),this.hex=be}this.aExtInfo=new Array;for(var Je=0;Je<ve.length;Je++){var Ut={critical:!1},at=0;A(be,ve[Je]).length===3&&(Ut.critical=!0,at=1),Ut.oid=w.hextooidstr(Y(be,ve[Je],[0],"06"));var Ir=he(be,ve[Je],[1+at]);Ut.vidx=Ae(be,Ir),this.aExtInfo.push(Ut)}},this.getExtInfo=function(X){var pe=this.aExtInfo,ve=X;if(X.match(/^[0-9.]+$/)||(ve=k.asn1.x509.OID.name2oid(X)),ve!==""){for(var be=0;be<pe.length;be++)if(pe[be].oid===ve)return pe[be]}},this.getExtBasicConstraints=function(X,pe){if(X===void 0&&pe===void 0){var ve=this.getExtInfo("basicConstraints");if(ve===void 0)return;X=W(this.hex,ve.vidx),pe=ve.critical}var be={extname:"basicConstraints"};if(pe&&(be.critical=!0),X==="3000")return be;if(X==="30030101ff")return be.cA=!0,be;if(X.substr(0,12)==="30060101ff02"){var He=M(X,10),Je=parseInt(He,16);return be.cA=!0,be.pathLen=Je,be}throw new Error("hExtV parse error: "+X)},this.getExtKeyUsage=function(X,pe){if(X===void 0&&pe===void 0){var ve=this.getExtInfo("keyUsage");if(ve===void 0)return;X=W(this.hex,ve.vidx),pe=ve.critical}var be={extname:"keyUsage"};return pe&&(be.critical=!0),be.names=this.getExtKeyUsageString(X).split(","),be},this.getExtKeyUsageBin=function(X){if(X===void 0){var pe=this.getExtInfo("keyUsage");if(pe===void 0)return"";X=W(this.hex,pe.vidx)}if(X.length!=8&&X.length!=10)throw new Error("malformed key usage value: "+X);var ve="000000000000000"+parseInt(X.substr(6),16).toString(2);return X.length==8&&(ve=ve.slice(-8)),X.length==10&&(ve=ve.slice(-16)),(ve=ve.replace(/0+$/,""))==""&&(ve="0"),ve},this.getExtKeyUsageString=function(X){for(var pe=this.getExtKeyUsageBin(X),ve=new Array,be=0;be<pe.length;be++)pe.substr(be,1)=="1"&&ve.push(wr.KEYUSAGE_NAME[be]);return ve.join(",")},this.getExtSubjectKeyIdentifier=function(X,pe){if(X===void 0&&pe===void 0){var ve=this.getExtInfo("subjectKeyIdentifier");if(ve===void 0)return;X=W(this.hex,ve.vidx),pe=ve.critical}var be={extname:"subjectKeyIdentifier"};pe&&(be.critical=!0);var He=M(X,0);return be.kid={hex:He},be},this.getExtAuthorityKeyIdentifier=function(X,pe){if(X===void 0&&pe===void 0){var ve=this.getExtInfo("authorityKeyIdentifier");if(ve===void 0)return;X=W(this.hex,ve.vidx),pe=ve.critical}var be={extname:"authorityKeyIdentifier"};pe&&(be.critical=!0);for(var He=A(X,0),Je=0;Je<He.length;Je++){var Ut=X.substr(He[Je],2);if(Ut==="80"&&(be.kid={hex:M(X,He[Je])}),Ut==="a1"){var at=W(X,He[Je]),Ir=this.getGeneralNames(at);be.issuer=Ir[0].dn}Ut==="82"&&(be.sn={hex:M(X,He[Je])})}return be},this.getExtExtKeyUsage=function(X,pe){if(X===void 0&&pe===void 0){var ve=this.getExtInfo("extKeyUsage");if(ve===void 0)return;X=W(this.hex,ve.vidx),pe=ve.critical}var be={extname:"extKeyUsage",array:[]};pe&&(be.critical=!0);for(var He=A(X,0),Je=0;Je<He.length;Je++)be.array.push(Ue(M(X,He[Je])));return be},this.getExtExtKeyUsageName=function(){var X=this.getExtInfo("extKeyUsage");if(X===void 0)return X;var pe=new Array,ve=W(this.hex,X.vidx);if(ve==="")return pe;for(var be=A(ve,0),He=0;He<be.length;He++)pe.push(Ue(M(ve,be[He])));return pe},this.getExtSubjectAltName=function(X,pe){if(X===void 0&&pe===void 0){var ve=this.getExtInfo("subjectAltName");if(ve===void 0)return;X=W(this.hex,ve.vidx),pe=ve.critical}var be={extname:"subjectAltName",array:[]};return pe&&(be.critical=!0),be.array=this.getGeneralNames(X),be},this.getExtIssuerAltName=function(X,pe){if(X===void 0&&pe===void 0){var ve=this.getExtInfo("issuerAltName");if(ve===void 0)return;X=W(this.hex,ve.vidx),pe=ve.critical}var be={extname:"issuerAltName",array:[]};return pe&&(be.critical=!0),be.array=this.getGeneralNames(X),be},this.getGeneralNames=function(X){for(var pe=A(X,0),ve=[],be=0;be<pe.length;be++){var He=this.getGeneralName(W(X,pe[be]));He!==void 0&&ve.push(He)}return ve},this.getGeneralName=function(X){var pe=X.substr(0,2),ve=M(X,0),be=it(ve);return pe=="81"?{rfc822:be}:pe=="82"?{dns:be}:pe=="86"?{uri:be}:pe=="87"?{ip:$t(ve)}:pe=="a4"?{dn:this.getX500Name(ve)}:void 0},this.getExtSubjectAltName2=function(){var X,pe,ve,be=this.getExtInfo("subjectAltName");if(be===void 0)return be;for(var He=new Array,Je=W(this.hex,be.vidx),Ut=A(Je,0),at=0;at<Ut.length;at++)ve=Je.substr(Ut[at],2),X=M(Je,Ut[at]),ve==="81"&&(pe=st(X),He.push(["MAIL",pe])),ve==="82"&&(pe=st(X),He.push(["DNS",pe])),ve==="84"&&(pe=wr.hex2dn(X,0),He.push(["DN",pe])),ve==="86"&&(pe=st(X),He.push(["URI",pe])),ve==="87"&&(pe=$t(X),He.push(["IP",pe]));return He},this.getExtCRLDistributionPoints=function(X,pe){if(X===void 0&&pe===void 0){var ve=this.getExtInfo("cRLDistributionPoints");if(ve===void 0)return;X=W(this.hex,ve.vidx),pe=ve.critical}var be={extname:"cRLDistributionPoints",array:[]};pe&&(be.critical=!0);for(var He=A(X,0),Je=0;Je<He.length;Je++){var Ut=W(X,He[Je]);be.array.push(this.getDistributionPoint(Ut))}return be},this.getDistributionPoint=function(X){for(var pe={},ve=A(X,0),be=0;be<ve.length;be++){var He=X.substr(ve[be],2),Je=W(X,ve[be]);He=="a0"&&(pe.dpname=this.getDistributionPointName(Je))}return pe},this.getDistributionPointName=function(X){for(var pe={},ve=A(X,0),be=0;be<ve.length;be++){var He=X.substr(ve[be],2),Je=W(X,ve[be]);He=="a0"&&(pe.full=this.getGeneralNames(Je))}return pe},this.getExtCRLDistributionPointsURI=function(){var X=this.getExtInfo("cRLDistributionPoints");if(X===void 0)return X;for(var pe=new Array,ve=A(this.hex,X.vidx),be=0;be<ve.length;be++)try{var He=st(Y(this.hex,ve[be],[0,0,0],"86"));pe.push(He)}catch{}return pe},this.getExtAIAInfo=function(){var X=this.getExtInfo("authorityInfoAccess");if(X===void 0)return X;for(var pe={ocsp:[],caissuer:[]},ve=A(this.hex,X.vidx),be=0;be<ve.length;be++){var He=Y(this.hex,ve[be],[0],"06"),Je=Y(this.hex,ve[be],[1],"86");He==="2b06010505073001"&&pe.ocsp.push(st(Je)),He==="2b06010505073002"&&pe.caissuer.push(st(Je))}return pe},this.getExtAuthorityInfoAccess=function(X,pe){if(X===void 0&&pe===void 0){var ve=this.getExtInfo("authorityInfoAccess");if(ve===void 0)return;X=W(this.hex,ve.vidx),pe=ve.critical}var be={extname:"authorityInfoAccess",array:[]};pe&&(be.critical=!0);for(var He=A(X,0),Je=0;Je<He.length;Je++){var Ut=ue(X,He[Je],[0],"06"),at=st(Y(X,He[Je],[1],"86"));if(Ut=="2b06010505073001")be.array.push({ocsp:at});else{if(Ut!="2b06010505073002")throw new Error("unknown method: "+Ut);be.array.push({caissuer:at})}}return be},this.getExtCertificatePolicies=function(X,pe){if(X===void 0&&pe===void 0){var ve=this.getExtInfo("certificatePolicies");if(ve===void 0)return;X=W(this.hex,ve.vidx),pe=ve.critical}var be={extname:"certificatePolicies",array:[]};pe&&(be.critical=!0);for(var He=A(X,0),Je=0;Je<He.length;Je++){var Ut=W(X,He[Je]),at=this.getPolicyInformation(Ut);be.array.push(at)}return be},this.getPolicyInformation=function(X){var pe={},ve=Y(X,0,[0],"06");pe.policyoid=Ue(ve);var be=ye(X,0,[1],"30");if(be!=-1){pe.array=[];for(var He=A(X,be),Je=0;Je<He.length;Je++){var Ut=W(X,He[Je]),at=this.getPolicyQualifierInfo(Ut);pe.array.push(at)}}return pe},this.getPolicyQualifierInfo=function(X){var pe={},ve=Y(X,0,[0],"06");if(ve==="2b06010505070201"){var be=ue(X,0,[1],"16");pe.cps=it(be)}else if(ve==="2b06010505070202"){var He=ie(X,0,[1],"30");pe.unotice=this.getUserNotice(He)}return pe},this.getUserNotice=function(X){for(var pe={},ve=A(X,0),be=0;be<ve.length;be++){var He=W(X,ve[be]);He.substr(0,2)!="30"&&(pe.exptext=this.getDisplayText(He))}return pe},this.getDisplayText=function(X){var pe={};return pe.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[X.substr(0,2)],pe.str=it(M(X,0)),pe},this.getExtCRLNumber=function(X,pe){var ve={extname:"cRLNumber"};if(pe&&(ve.critical=!0),X.substr(0,2)=="02")return ve.num={hex:M(X,0)},ve;throw new Error("hExtV parse error: "+X)},this.getExtCRLReason=function(X,pe){var ve={extname:"cRLReason"};if(pe&&(ve.critical=!0),X.substr(0,2)=="0a")return ve.code=parseInt(M(X,0),16),ve;throw new Error("hExtV parse error: "+X)},this.getExtOcspNonce=function(X,pe){var ve={extname:"ocspNonce"};pe&&(ve.critical=!0);var be=M(X,0);return ve.hex=be,ve},this.getExtOcspNoCheck=function(X,pe){var ve={extname:"ocspNoCheck"};return pe&&(ve.critical=!0),ve},this.getExtAdobeTimeStamp=function(X,pe){if(X===void 0&&pe===void 0){var ve=this.getExtInfo("adobeTimeStamp");if(ve===void 0)return;X=W(this.hex,ve.vidx),pe=ve.critical}var be={extname:"adobeTimeStamp"};pe&&(be.critical=!0);var He=A(X,0);if(He.length>1){var Je=W(X,He[1]),Ut=this.getGeneralName(Je);Ut.uri!=null&&(be.uri=Ut.uri)}if(He.length>2){var at=W(X,He[2]);at=="0101ff"&&(be.reqauth=!0),at=="010100"&&(be.reqauth=!1)}return be},this.getX500NameRule=function(X){for(var pe=null,ve=[],be=0;be<X.length;be++)for(var He=X[be],Je=0;Je<He.length;Je++)ve.push(He[Je]);for(be=0;be<ve.length;be++){var Ut=ve[be],at=Ut.ds,Ir=Ut.value,Tt=Ut.type;if(at!="prn"&&at!="utf8"&&at!="ia5")return"mixed";if(at=="ia5"){if(Tt!="CN")return"mixed";if(k.lang.String.isMail(Ir))continue;return"mixed"}if(Tt=="C"){if(at=="prn")continue;return"mixed"}if(pe==null)pe=at;else if(pe!==at)return"mixed"}return pe??"prn"},this.getX500Name=function(X){var pe=this.getX500NameArray(X);return{array:pe,str:this.dnarraytostr(pe)}},this.getX500NameArray=function(X){for(var pe=[],ve=A(X,0),be=0;be<ve.length;be++)pe.push(this.getRDN(W(X,ve[be])));return pe},this.getRDN=function(X){for(var pe=[],ve=A(X,0),be=0;be<ve.length;be++)pe.push(this.getAttrTypeAndValue(W(X,ve[be])));return pe},this.getAttrTypeAndValue=function(X){var pe={type:null,value:null,ds:null},ve=A(X,0),be=Y(X,ve[0],[],"06"),He=Y(X,ve[1],[]),Je=k.asn1.ASN1Util.oidHexToInt(be);return pe.type=k.asn1.x509.OID.oid2atype(Je),pe.ds=this.HEX2STAG[X.substr(ve[1],2)],pe.ds!="bmp"?pe.value=st(He):pe.value=Ft(He),pe},this.readCertPEM=function(X){this.readCertHex(ze(X))},this.readCertHex=function(X){this.hex=X,this.getVersion();try{he(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var X={};return X.version=this.getVersion(),X.serial={hex:this.getSerialNumberHex()},X.sigalg=this.getSignatureAlgorithmField(),X.issuer=this.getIssuer(),X.notbefore=this.getNotBefore(),X.notafter=this.getNotAfter(),X.subject=this.getSubject(),X.sbjpubkey=Gt(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(X.ext=this.getExtParamArray()),X.sighex=this.getSignatureValueHex(),X},this.getExtParamArray=function(X){X==null&&ye(this.hex,0,[0,"[3]"])!=-1&&(X=ce(this.hex,0,[0,"[3]",0],"30"));for(var pe=[],ve=A(X,0),be=0;be<ve.length;be++){var He=W(X,ve[be]),Je=this.getExtParam(He);Je!=null&&pe.push(Je)}return pe},this.getExtParam=function(X){var pe=A(X,0).length;if(pe!=2&&pe!=3)throw new Error("wrong number elements in Extension: "+pe+" "+X);var ve=Ge(Y(X,0,[0],"06")),be=!1;pe==3&&ie(X,0,[1])=="0101ff"&&(be=!0);var He=ie(X,0,[pe-1,0]),Je=void 0;if(ve=="2.5.29.14"?Je=this.getExtSubjectKeyIdentifier(He,be):ve=="2.5.29.15"?Je=this.getExtKeyUsage(He,be):ve=="2.5.29.17"?Je=this.getExtSubjectAltName(He,be):ve=="2.5.29.18"?Je=this.getExtIssuerAltName(He,be):ve=="2.5.29.19"?Je=this.getExtBasicConstraints(He,be):ve=="2.5.29.31"?Je=this.getExtCRLDistributionPoints(He,be):ve=="2.5.29.32"?Je=this.getExtCertificatePolicies(He,be):ve=="2.5.29.35"?Je=this.getExtAuthorityKeyIdentifier(He,be):ve=="2.5.29.37"?Je=this.getExtExtKeyUsage(He,be):ve=="1.3.6.1.5.5.7.1.1"?Je=this.getExtAuthorityInfoAccess(He,be):ve=="2.5.29.20"?Je=this.getExtCRLNumber(He,be):ve=="2.5.29.21"?Je=this.getExtCRLReason(He,be):ve=="1.3.6.1.5.5.7.48.1.2"?Je=this.getExtOcspNonce(He,be):ve=="1.3.6.1.5.5.7.48.1.5"?Je=this.getExtOcspNoCheck(He,be):ve=="1.2.840.113583.1.1.9.1"&&(Je=this.getExtAdobeTimeStamp(He,be)),Je!=null)return Je;var Ut={extname:ve,extn:He};return be&&(Ut.critical=!0),Ut},this.findExt=function(X,pe){for(var ve=0;ve<X.length;ve++)if(X[ve].extname==pe)return X[ve];return null},this.updateExtCDPFullURI=function(X,pe){var ve=this.findExt(X,"cRLDistributionPoints");if(ve!=null&&ve.array!=null){for(var be=ve.array,He=0;He<be.length;He++)if(be[He].dpname!=null&&be[He].dpname.full!=null)for(var Je=be[He].dpname.full,Ut=0;Ut<Je.length;Ut++){var at=Je[He];at.uri!=null&&(at.uri=pe)}}},this.updateExtAIAOCSP=function(X,pe){var ve=this.findExt(X,"authorityInfoAccess");if(ve!=null&&ve.array!=null)for(var be=ve.array,He=0;He<be.length;He++)be[He].ocsp!=null&&(be[He].ocsp=pe)},this.updateExtAIACAIssuer=function(X,pe){var ve=this.findExt(X,"authorityInfoAccess");if(ve!=null&&ve.array!=null)for(var be=ve.array,He=0;He<be.length;He++)be[He].caissuer!=null&&(be[He].caissuer=pe)},this.dnarraytostr=function(X){return"/"+X.map(function(pe){return function(be){return be.map(function(He){return function(Ut){return Ut.type+"="+Ut.value}(He).replace(/\+/,"\\+")}).join("+")}(pe).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var X,pe,ve,be=function(fn){return JSON.stringify(fn.array).replace(/[\[\]\{\}\"]/g,"")},He=function(fn){for(var Lr="",gn=fn.array,$r=0;$r<gn.length;$r++){var ar=gn[$r];if(Lr+="    policy oid: "+ar.policyoid+`
`,ar.array!==void 0)for(var En=0;En<ar.array.length;En++){var yn=ar.array[En];yn.cps!==void 0&&(Lr+="    cps: "+yn.cps+`
`)}}return Lr},Je=function(fn){for(var Lr="",gn=fn.array,$r=0;$r<gn.length;$r++){var ar=gn[$r];try{ar.dpname.full[0].uri!==void 0&&(Lr+="    "+ar.dpname.full[0].uri+`
`)}catch{}try{ar.dname.full[0].dn.hex!==void 0&&(Lr+="    "+wr.hex2dn(ar.dpname.full[0].dn.hex)+`
`)}catch{}}return Lr},Ut=function(fn){for(var Lr="",gn=fn.array,$r=0;$r<gn.length;$r++){var ar=gn[$r];ar.caissuer!==void 0&&(Lr+="    caissuer: "+ar.caissuer+`
`),ar.ocsp!==void 0&&(Lr+="    ocsp: "+ar.ocsp+`
`)}return Lr};if(X=`Basic Fields
`,X+="  serial number: "+this.getSerialNumberHex()+`
`,X+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,X+="  issuer: "+this.getIssuerString()+`
`,X+="  notBefore: "+this.getNotBefore()+`
`,X+="  notAfter: "+this.getNotAfter()+`
`,X+="  subject: "+this.getSubjectString()+`
`,X+=`  subject public key info: 
`,X+="    key algorithm: "+(pe=this.getPublicKey()).type+`
`,pe.type==="RSA"&&(X+="    n="+Hr(pe.n.toString(16)).substr(0,16)+`...
`,X+="    e="+Hr(pe.e.toString(16))+`
`),(ve=this.aExtInfo)!=null){X+=`X509v3 Extensions:
`;for(var at=0;at<ve.length;at++){var Ir=ve[at],Tt=k.asn1.x509.OID.oid2name(Ir.oid);Tt===""&&(Tt=Ir.oid);var qt="";if(Ir.critical===!0&&(qt="CRITICAL"),X+="  "+Tt+" "+qt+`:
`,Tt==="basicConstraints"){var Wt=this.getExtBasicConstraints();Wt.cA===void 0?X+=`    {}
`:(X+="    cA=true",Wt.pathLen!==void 0&&(X+=", pathLen="+Wt.pathLen),X+=`
`)}else if(Tt==="keyUsage")X+="    "+this.getExtKeyUsageString()+`
`;else if(Tt==="subjectKeyIdentifier")X+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(Tt==="authorityKeyIdentifier"){var Ur=this.getExtAuthorityKeyIdentifier();Ur.kid!==void 0&&(X+="    kid="+Ur.kid.hex+`
`)}else Tt==="extKeyUsage"?X+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:Tt==="subjectAltName"?X+="    "+be(this.getExtSubjectAltName())+`
`:Tt==="cRLDistributionPoints"?X+=Je(this.getExtCRLDistributionPoints()):Tt==="authorityInfoAccess"?X+=Ut(this.getExtAuthorityInfoAccess()):Tt==="certificatePolicies"&&(X+=He(this.getExtCertificatePolicies()))}}return X+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,X+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof f=="string"&&(f.indexOf("-----BEGIN")!=-1?this.readCertPEM(f):k.lang.String.isHex(f)&&this.readCertHex(f))}te.prototype.sign=function(f,g){var w=function(M){return k.crypto.Util.hashString(M,g)}(f);return this.signWithMessageHash(w,g)},te.prototype.signWithMessageHash=function(f,g){var w=dr(k.crypto.Util.getPaddedDigestInfoHex(f,g,this.n.bitLength()),16);return Kr(this.doPrivate(w).toString(16),this.n.bitLength())},te.prototype.signPSS=function(f,g,w){var A=function(W){return k.crypto.Util.hashHex(W,g)}(tt(f));return w===void 0&&(w=-1),this.signWithMessageHashPSS(A,g,w)},te.prototype.signWithMessageHashPSS=function(f,g,w){var A,M=it(f),W=M.length,Y=this.n.bitLength()-1,ue=Math.ceil(Y/8),ie=function(X){return k.crypto.Util.hashHex(X,g)};if(w===-1||w===void 0)w=W;else if(w===-2)w=ue-W-2;else if(w<-2)throw new Error("invalid salt length");if(ue<W+w+2)throw new Error("data too long");var ce="";w>0&&(ce=new Array(w),new Xt().nextBytes(ce),ce=String.fromCharCode.apply(String,ce));var he=it(ie(tt("\0\0\0\0\0\0\0\0"+M+ce))),ye=[];for(A=0;A<ue-w-W-2;A+=1)ye[A]=0;var Ae=String.fromCharCode.apply(String,ye)+""+ce,Fe=Mr(he,Ae.length,ie),Ue=[];for(A=0;A<Ae.length;A+=1)Ue[A]=Ae.charCodeAt(A)^Fe.charCodeAt(A);var Ge=65280>>8*ue-Y&255;for(Ue[0]&=~Ge,A=0;A<W;A++)Ue.push(he.charCodeAt(A));return Ue.push(188),Kr(this.doPrivate(new D(Ue)).toString(16),this.n.bitLength())},te.prototype.verify=function(f,g){if((g=g.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var w=dr(g,16),A=this.n.bitLength();if(w.bitLength()>A)return!1;var M=this.doPublic(w).toString(16);if(M.length+3!=A/4)return!1;var W=Br(M.replace(/^1f+00/,""));if(W.length==0)return!1;var Y=W[0];return W[1]==function(ie){return k.crypto.Util.hashString(ie,Y)}(f)},te.prototype.verifyWithMessageHash=function(f,g){if(g.length!=Math.ceil(this.n.bitLength()/4))return!1;var w=dr(g,16);if(w.bitLength()>this.n.bitLength())return 0;var A=Br(this.doPublic(w).toString(16).replace(/^1f+00/,""));return A.length==0?!1:(A[0],A[1]==f)},te.prototype.verifyPSS=function(f,g,w,A){var M=function(Y){return k.crypto.Util.hashHex(Y,w)}(tt(f));return A===void 0&&(A=-1),this.verifyWithMessageHashPSS(M,g,w,A)},te.prototype.verifyWithMessageHashPSS=function(f,g,w,A){if(g.length!=Math.ceil(this.n.bitLength()/4))return!1;var M,W=new D(g,16),Y=function(ve){return k.crypto.Util.hashHex(ve,w)},ue=it(f),ie=ue.length,ce=this.n.bitLength()-1,he=Math.ceil(ce/8);if(A===-1||A===void 0)A=ie;else if(A===-2)A=he-ie-2;else if(A<-2)throw new Error("invalid salt length");if(he<ie+A+2)throw new Error("data too long");var ye=this.doPublic(W).toByteArray();for(M=0;M<ye.length;M+=1)ye[M]&=255;for(;ye.length<he;)ye.unshift(0);if(ye[he-1]!==188)throw new Error("encoded message does not end in 0xbc");var Ae=(ye=String.fromCharCode.apply(String,ye)).substr(0,he-ie-1),Fe=ye.substr(Ae.length,ie),Ue=65280>>8*he-ce&255;if(Ae.charCodeAt(0)&Ue)throw new Error("bits beyond keysize not zero");var Ge=Mr(Fe,Ae.length,Y),ze=[];for(M=0;M<Ae.length;M+=1)ze[M]=Ae.charCodeAt(M)^Ge.charCodeAt(M);ze[0]&=~Ue;var X=he-ie-A-2;for(M=0;M<X;M+=1)if(ze[M]!==0)throw new Error("leftmost octets not zero");if(ze[X]!==1)throw new Error("0x01 marker not found");return Fe===it(Y(tt("\0\0\0\0\0\0\0\0"+ue+String.fromCharCode.apply(String,ze.slice(-A)))))},te.SALT_LEN_HLEN=-1,te.SALT_LEN_MAX=-2,te.SALT_LEN_RECOVER=-2,wr.hex2dn=function(f,g){g===void 0&&(g=0);var w=new wr;return oe.getTLV(f,g),w.getX500Name(f).str},wr.hex2rdn=function(f,g){if(g===void 0&&(g=0),f.substr(g,2)!=="31")throw new Error("malformed RDN");for(var w=new Array,A=oe.getChildIdx(f,g),M=0;M<A.length;M++)w.push(wr.hex2attrTypeValue(f,A[M]));return(w=w.map(function(W){return W.replace("+","\\+")})).join("+")},wr.hex2attrTypeValue=function(f,g){var w=oe,A=w.getV;if(g===void 0&&(g=0),f.substr(g,2)!=="30")throw new Error("malformed attribute type and value");var M=w.getChildIdx(f,g);M.length!==2||f.substr(M[0],2);var W=A(f,M[0]),Y=k.asn1.ASN1Util.oidHexToInt(W);return k.asn1.x509.OID.oid2atype(Y)+"="+it(A(f,M[1]))},wr.getPublicKeyFromCertHex=function(f){var g=new wr;return g.readCertHex(f),g.getPublicKey()},wr.getPublicKeyFromCertPEM=function(f){var g=new wr;return g.readCertPEM(f),g.getPublicKey()},wr.getPublicKeyInfoPropOfCertPEM=function(f){var g,w,A=oe.getVbyList,M={};return M.algparam=null,(g=new wr).readCertPEM(f),w=g.getPublicKeyHex(),M.keyhex=A(w,0,[1],"03").substr(2),M.algoid=A(w,0,[0,0],"06"),M.algoid==="2a8648ce3d0201"&&(M.algparam=A(w,0,[0,1],"06")),M},wr.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],k!==void 0&&k||(n.KJUR=k={}),k.jws!==void 0&&k.jws||(k.jws={}),k.jws.JWS=function(){var f=k.jws.JWS.isSafeJSONString;this.parseJWS=function(g,w){if(this.parsedJWS===void 0||!w&&this.parsedJWS.sigvalH===void 0){var A=g.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(A==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var M=A[1],W=A[2],Y=A[3],ue=M+"."+W;if(this.parsedJWS={},this.parsedJWS.headB64U=M,this.parsedJWS.payloadB64U=W,this.parsedJWS.sigvalB64U=Y,this.parsedJWS.si=ue,!w){var ie=_e(Y),ce=dr(ie,16);this.parsedJWS.sigvalH=ie,this.parsedJWS.sigvalBI=ce}var he=Pe(M),ye=Pe(W);if(this.parsedJWS.headS=he,this.parsedJWS.payloadS=ye,!f(he,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+he}}},k.jws.JWS.sign=function(f,g,w,A,M){var W,Y,ue,ie=k,ce=ie.jws.JWS,he=ce.readSafeJSONString,ye=ce.isSafeJSONString,Ae=ie.crypto,Fe=(Ae.ECDSA,Ae.Mac),Ue=Ae.Signature,Ge=JSON;if(typeof g!="string"&&(g===void 0?"undefined":b(g))!="object")throw"spHeader must be JSON string or object: "+g;if((g===void 0?"undefined":b(g))=="object"&&(Y=g,W=Ge.stringify(Y)),typeof g=="string"){if(!ye(W=g))throw"JWS Head is not safe JSON string: "+W;Y=he(W)}if(ue=w,(w===void 0?"undefined":b(w))=="object"&&(ue=Ge.stringify(w)),f!=""&&f!=null||Y.alg===void 0||(f=Y.alg),f!=""&&f!=null&&Y.alg===void 0&&(Y.alg=f,W=Ge.stringify(Y)),f!==Y.alg)throw"alg and sHeader.alg doesn't match: "+f+"!="+Y.alg;var ze=null;if(ce.jwsalg2sigalg[f]===void 0)throw"unsupported alg name: "+f;ze=ce.jwsalg2sigalg[f];var X=ge(W)+"."+ge(ue),pe="";if(ze.substr(0,4)=="Hmac"){if(A===void 0)throw"mac key shall be specified for HS* alg";var ve=new Fe({alg:ze,prov:"cryptojs",pass:A});ve.updateString(X),pe=ve.doFinal()}else if(ze.indexOf("withECDSA")!=-1){(He=new Ue({alg:ze})).init(A,M),He.updateString(X);var be=He.sign();pe=k.crypto.ECDSA.asn1SigToConcatSig(be)}else{var He;ze!="none"&&((He=new Ue({alg:ze})).init(A,M),He.updateString(X),pe=He.sign())}return X+"."+Ne(pe)},k.jws.JWS.verify=function(f,g,w){var A,M=k,W=M.jws.JWS,Y=W.readSafeJSONString,ue=M.crypto,ie=ue.ECDSA,ce=ue.Mac,he=ue.Signature;b(te)!==void 0&&(A=te);var ye=f.split(".");if(ye.length!==3)return!1;var Ae=ye[0]+"."+ye[1],Fe=_e(ye[2]),Ue=Y(Pe(ye[0])),Ge=null,ze=null;if(Ue.alg===void 0)throw"algorithm not specified in header";if(ze=(Ge=Ue.alg).substr(0,2),w!=null&&Object.prototype.toString.call(w)==="[object Array]"&&w.length>0&&(":"+w.join(":")+":").indexOf(":"+Ge+":")==-1)throw"algorithm '"+Ge+"' not accepted in the list";if(Ge!="none"&&g===null)throw"key shall be specified to verify.";if(typeof g=="string"&&g.indexOf("-----BEGIN ")!=-1&&(g=kt.getKey(g)),!(ze!="RS"&&ze!="PS"||g instanceof A))throw"key shall be a RSAKey obj for RS* and PS* algs";if(ze=="ES"&&!(g instanceof ie))throw"key shall be a ECDSA obj for ES* algs";var X=null;if(W.jwsalg2sigalg[Ue.alg]===void 0)throw"unsupported alg name: "+Ge;if((X=W.jwsalg2sigalg[Ge])=="none")throw"not supported";if(X.substr(0,4)=="Hmac"){if(g===void 0)throw"hexadecimal key shall be specified for HMAC";var pe=new ce({alg:X,pass:g});return pe.updateString(Ae),Fe==pe.doFinal()}if(X.indexOf("withECDSA")!=-1){var ve,be=null;try{be=ie.concatSigToASN1Sig(Fe)}catch{return!1}return(ve=new he({alg:X})).init(g),ve.updateString(Ae),ve.verify(be)}return(ve=new he({alg:X})).init(g),ve.updateString(Ae),ve.verify(Fe)},k.jws.JWS.parse=function(f){var g,w,A,M=f.split("."),W={};if(M.length!=2&&M.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return g=M[0],w=M[1],M.length==3&&(A=M[2]),W.headerObj=k.jws.JWS.readSafeJSONString(Pe(g)),W.payloadObj=k.jws.JWS.readSafeJSONString(Pe(w)),W.headerPP=JSON.stringify(W.headerObj,null,"  "),W.payloadObj==null?W.payloadPP=Pe(w):W.payloadPP=JSON.stringify(W.payloadObj,null,"  "),A!==void 0&&(W.sigHex=_e(A)),W},k.jws.JWS.verifyJWT=function(f,g,w){var A=k.jws,M=A.JWS,W=M.readSafeJSONString,Y=M.inArray,ue=M.includedArray,ie=f.split("."),ce=ie[0],he=ie[1],ye=(_e(ie[2]),W(Pe(ce))),Ae=W(Pe(he));if(ye.alg===void 0)return!1;if(w.alg===void 0)throw"acceptField.alg shall be specified";if(!Y(ye.alg,w.alg)||Ae.iss!==void 0&&b(w.iss)==="object"&&!Y(Ae.iss,w.iss)||Ae.sub!==void 0&&b(w.sub)==="object"&&!Y(Ae.sub,w.sub))return!1;if(Ae.aud!==void 0&&b(w.aud)==="object"){if(typeof Ae.aud=="string"){if(!Y(Ae.aud,w.aud))return!1}else if(b(Ae.aud)=="object"&&!ue(Ae.aud,w.aud))return!1}var Fe=A.IntDate.getNow();return w.verifyAt!==void 0&&typeof w.verifyAt=="number"&&(Fe=w.verifyAt),w.gracePeriod!==void 0&&typeof w.gracePeriod=="number"||(w.gracePeriod=0),!(Ae.exp!==void 0&&typeof Ae.exp=="number"&&Ae.exp+w.gracePeriod<Fe)&&!(Ae.nbf!==void 0&&typeof Ae.nbf=="number"&&Fe<Ae.nbf-w.gracePeriod)&&!(Ae.iat!==void 0&&typeof Ae.iat=="number"&&Fe<Ae.iat-w.gracePeriod)&&(Ae.jti===void 0||w.jti===void 0||Ae.jti===w.jti)&&!!M.verify(f,g,w.alg)},k.jws.JWS.includedArray=function(f,g){var w=k.jws.JWS.inArray;if(f===null||(f===void 0?"undefined":b(f))!=="object"||typeof f.length!="number")return!1;for(var A=0;A<f.length;A++)if(!w(f[A],g))return!1;return!0},k.jws.JWS.inArray=function(f,g){if(g===null||(g===void 0?"undefined":b(g))!=="object"||typeof g.length!="number")return!1;for(var w=0;w<g.length;w++)if(g[w]==f)return!0;return!1},k.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},k.jws.JWS.isSafeJSONString=function(f,g,w){var A=null;try{return((A=U(f))===void 0?"undefined":b(A))!="object"||A.constructor===Array?0:(g&&(g[w]=A),1)}catch{return 0}},k.jws.JWS.readSafeJSONString=function(f){var g=null;try{return((g=U(f))===void 0?"undefined":b(g))!="object"||g.constructor===Array?null:g}catch{return null}},k.jws.JWS.getEncodedSignatureValueFromJWS=function(f){var g=f.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(g==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return g[1]},k.jws.JWS.getJWKthumbprint=function(f){if(f.kty!=="RSA"&&f.kty!=="EC"&&f.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var g="{";if(f.kty==="RSA"){if(typeof f.n!="string"||typeof f.e!="string")throw"wrong n and e value for RSA key";g+='"e":"'+f.e+'",',g+='"kty":"'+f.kty+'",',g+='"n":"'+f.n+'"}'}else if(f.kty==="EC"){if(typeof f.crv!="string"||typeof f.x!="string"||typeof f.y!="string")throw"wrong crv, x and y value for EC key";g+='"crv":"'+f.crv+'",',g+='"kty":"'+f.kty+'",',g+='"x":"'+f.x+'",',g+='"y":"'+f.y+'"}'}else if(f.kty==="oct"){if(typeof f.k!="string")throw"wrong k value for oct(symmetric) key";g+='"kty":"'+f.kty+'",',g+='"k":"'+f.k+'"}'}var w=tt(g);return Ne(k.crypto.Util.hashHex(w,"sha256"))},k.jws.IntDate={},k.jws.IntDate.get=function(f){var g=k.jws.IntDate,w=g.getNow,A=g.getZulu;if(f=="now")return w();if(f=="now + 1hour")return w()+3600;if(f=="now + 1day")return w()+86400;if(f=="now + 1month")return w()+2592e3;if(f=="now + 1year")return w()+31536e3;if(f.match(/Z$/))return A(f);if(f.match(/^[0-9]+$/))return parseInt(f);throw"unsupported format: "+f},k.jws.IntDate.getZulu=function(f){return er(f)},k.jws.IntDate.getNow=function(){return~~(new Date/1e3)},k.jws.IntDate.intDate2UTCString=function(f){return new Date(1e3*f).toUTCString()},k.jws.IntDate.intDate2Zulu=function(f){var g=new Date(1e3*f);return("0000"+g.getUTCFullYear()).slice(-4)+("00"+(g.getUTCMonth()+1)).slice(-2)+("00"+g.getUTCDate()).slice(-2)+("00"+g.getUTCHours()).slice(-2)+("00"+g.getUTCMinutes()).slice(-2)+("00"+g.getUTCSeconds()).slice(-2)+"Z"},n.SecureRandom=Xt,n.rng_seed_time=de,n.BigInteger=D,n.RSAKey=te;var Pr=k.crypto.EDSA;n.EDSA=Pr;var At=k.crypto.DSA;n.DSA=At;var nn=k.crypto.Signature;n.Signature=nn;var Wr=k.crypto.MessageDigest;n.MessageDigest=Wr;var Or=k.crypto.Mac;n.Mac=Or;var wn=k.crypto.Cipher;n.Cipher=wn,n.KEYUTIL=kt,n.ASN1HEX=oe,n.X509=wr,n.CryptoJS=j,n.b64tohex=ne,n.b64toBA=ee,n.stoBA=mt,n.BAtos=Ht,n.BAtohex=wt,n.stohex=_t,n.stob64=function(g){return O(_t(g))},n.stob64u=function(g){return Se(O(_t(g)))},n.b64utos=function(g){return Ht(ee(Me(g)))},n.b64tob64u=Se,n.b64utob64=Me,n.hex2b64=O,n.hextob64u=Ne,n.b64utohex=_e,n.utf8tob64u=ge,n.b64utoutf8=Pe,n.utf8tob64=function(g){return O(xt(Er(g)))},n.b64toutf8=function(g){return decodeURIComponent(vr(ne(g)))},n.utf8tohex=je,n.hextoutf8=st,n.hextorstr=it,n.rstrtohex=tt,n.hextob64=ct,n.hextob64nl=Dt,n.b64nltohex=Qt,n.hextopem=Gt,n.pemtohex=Zt,n.hextoArrayBuffer=function(g){if(g.length%2!=0)throw"input is not even length";if(g.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var w=new ArrayBuffer(g.length/2),A=new DataView(w),M=0;M<g.length/2;M++)A.setUint8(M,parseInt(g.substr(2*M,2),16));return w},n.ArrayBuffertohex=function(g){for(var w="",A=new DataView(g),M=0;M<g.byteLength;M++)w+=("00"+A.getUint8(M).toString(16)).slice(-2);return w},n.zulutomsec=hr,n.zulutosec=er,n.zulutodate=function(g){return new Date(hr(g))},n.datetozulu=function(g,w,A){var M,W=g.getUTCFullYear();if(w){if(W<1950||2049<W)throw"not proper year for UTCTime: "+W;M=(""+W).slice(-2)}else M=("000"+W).slice(-4);if(M+=("0"+(g.getUTCMonth()+1)).slice(-2),M+=("0"+g.getUTCDate()).slice(-2),M+=("0"+g.getUTCHours()).slice(-2),M+=("0"+g.getUTCMinutes()).slice(-2),M+=("0"+g.getUTCSeconds()).slice(-2),A){var Y=g.getUTCMilliseconds();Y!==0&&(M+="."+(Y=(Y=("00"+Y).slice(-3)).replace(/0+$/g,"")))}return M+="Z"},n.uricmptohex=xt,n.hextouricmp=vr,n.ipv6tohex=ht,n.hextoipv6=Ct,n.hextoip=$t,n.iptohex=function(g){var w="malformed IP address";if(!(g=g.toLowerCase(g)).match(/^[0-9.]+$/)){if(g.match(/^[0-9a-f:]+$/)&&g.indexOf(":")!==-1)return ht(g);throw w}var A=g.split(".");if(A.length!==4)throw w;var M="";try{for(var W=0;W<4;W++)M+=("0"+parseInt(A[W]).toString(16)).slice(-2);return M}catch{throw w}},n.encodeURIComponentAll=Er,n.newline_toUnix=function(g){return g=g.replace(/\r\n/gm,`
`)},n.newline_toDos=function(g){return g=(g=g.replace(/\r\n/gm,`
`)).replace(/\n/gm,`\r
`)},n.hextoposhex=Hr,n.intarystrtohex=function(g){g=(g=(g=g.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return g.split(/,/).map(function(w,A,M){var W=parseInt(w);if(W<0||255<W)throw"integer not in range 0-255";return("00"+W.toString(16)).slice(-2)}).join("")}catch(w){throw"malformed integer array string: "+w}},n.strdiffidx=function(g,w){var A=g.length;g.length>w.length&&(A=w.length);for(var M=0;M<A;M++)if(g.charCodeAt(M)!=w.charCodeAt(M))return M;return g.length!=w.length?A:-1},n.KJUR=k;var Kn=k.crypto;n.crypto=Kn;var Wn=k.asn1;n.asn1=Wn;var Zr=k.jws;n.jws=Zr;var en=k.lang;n.lang=en}).call(this,o(28).Buffer)},function(r,n,o){(function(a){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var s=o(30),u=o(31),h=o(32);function c(){return y.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function p(Z,I){if(c()<I)throw new RangeError("Invalid typed array length");return y.TYPED_ARRAY_SUPPORT?(Z=new Uint8Array(I)).__proto__=y.prototype:(Z===null&&(Z=new y(I)),Z.length=I),Z}function y(Z,I,S){if(!(y.TYPED_ARRAY_SUPPORT||this instanceof y))return new y(Z,I,S);if(typeof Z=="number"){if(typeof I=="string")throw new Error("If encoding is specified then the first argument must be a string");return C(this,Z)}return m(this,Z,I,S)}function m(Z,I,S,B){if(typeof I=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&I instanceof ArrayBuffer?function(de,Ee,rt,lt){if(Ee.byteLength,rt<0||Ee.byteLength<rt)throw new RangeError("'offset' is out of bounds");if(Ee.byteLength<rt+(lt||0))throw new RangeError("'length' is out of bounds");return Ee=rt===void 0&&lt===void 0?new Uint8Array(Ee):lt===void 0?new Uint8Array(Ee,rt):new Uint8Array(Ee,rt,lt),y.TYPED_ARRAY_SUPPORT?(de=Ee).__proto__=y.prototype:de=R(de,Ee),de}(Z,I,S,B):typeof I=="string"?function(de,Ee,rt){if(typeof rt=="string"&&rt!==""||(rt="utf8"),!y.isEncoding(rt))throw new TypeError('"encoding" must be a valid string encoding');var lt=0|b(Ee,rt),Nt=(de=p(de,lt)).write(Ee,rt);return Nt!==lt&&(de=de.slice(0,Nt)),de}(Z,I,S):function(de,Ee){if(y.isBuffer(Ee)){var rt=0|F(Ee.length);return(de=p(de,rt)).length===0||Ee.copy(de,0,0,rt),de}if(Ee){if(typeof ArrayBuffer<"u"&&Ee.buffer instanceof ArrayBuffer||"length"in Ee)return typeof Ee.length!="number"||function(Nt){return Nt!=Nt}(Ee.length)?p(de,0):R(de,Ee);if(Ee.type==="Buffer"&&h(Ee.data))return R(de,Ee.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(Z,I)}function _(Z){if(typeof Z!="number")throw new TypeError('"size" argument must be a number');if(Z<0)throw new RangeError('"size" argument must not be negative')}function C(Z,I){if(_(I),Z=p(Z,I<0?0:0|F(I)),!y.TYPED_ARRAY_SUPPORT)for(var S=0;S<I;++S)Z[S]=0;return Z}function R(Z,I){var S=I.length<0?0:0|F(I.length);Z=p(Z,S);for(var B=0;B<S;B+=1)Z[B]=255&I[B];return Z}function F(Z){if(Z>=c())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c().toString(16)+" bytes");return 0|Z}function b(Z,I){if(y.isBuffer(Z))return Z.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(Z)||Z instanceof ArrayBuffer))return Z.byteLength;typeof Z!="string"&&(Z=""+Z);var S=Z.length;if(S===0)return 0;for(var B=!1;;)switch(I){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":case void 0:return jt(Z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*S;case"hex":return S>>>1;case"base64":return Yt(Z).length;default:if(B)return jt(Z).length;I=(""+I).toLowerCase(),B=!0}}function E(Z,I,S){var B=!1;if((I===void 0||I<0)&&(I=0),I>this.length||((S===void 0||S>this.length)&&(S=this.length),S<=0)||(S>>>=0)<=(I>>>=0))return"";for(Z||(Z="utf8");;)switch(Z){case"hex":return $e(this,I,S);case"utf8":case"utf-8":return ae(this,I,S);case"ascii":return Be(this,I,S);case"latin1":case"binary":return Ve(this,I,S);case"base64":return De(this,I,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,I,S);default:if(B)throw new TypeError("Unknown encoding: "+Z);Z=(Z+"").toLowerCase(),B=!0}}function P(Z,I,S){var B=Z[I];Z[I]=Z[S],Z[S]=B}function j(Z,I,S,B,G){if(Z.length===0)return-1;if(typeof S=="string"?(B=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),S=+S,isNaN(S)&&(S=G?0:Z.length-1),S<0&&(S=Z.length+S),S>=Z.length){if(G)return-1;S=Z.length-1}else if(S<0){if(!G)return-1;S=0}if(typeof I=="string"&&(I=y.from(I,B)),y.isBuffer(I))return I.length===0?-1:H(Z,I,S,B,G);if(typeof I=="number")return I&=255,y.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?G?Uint8Array.prototype.indexOf.call(Z,I,S):Uint8Array.prototype.lastIndexOf.call(Z,I,S):H(Z,[I],S,B,G);throw new TypeError("val must be string, number or Buffer")}function H(Z,I,S,B,G){var de,Ee=1,rt=Z.length,lt=I.length;if(B!==void 0&&((B=String(B).toLowerCase())==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(Z.length<2||I.length<2)return-1;Ee=2,rt/=2,lt/=2,S/=2}function Nt(dn,te){return Ee===1?dn[te]:dn.readUInt16BE(te*Ee)}if(G){var Kt=-1;for(de=S;de<rt;de++)if(Nt(Z,de)===Nt(I,Kt===-1?0:de-Kt)){if(Kt===-1&&(Kt=de),de-Kt+1===lt)return Kt*Ee}else Kt!==-1&&(de-=de-Kt),Kt=-1}else for(S+lt>rt&&(S=rt-lt),de=S;de>=0;de--){for(var Xt=!0,dr=0;dr<lt;dr++)if(Nt(Z,de+dr)!==Nt(I,dr)){Xt=!1;break}if(Xt)return de}return-1}function $(Z,I,S,B){S=Number(S)||0;var G=Z.length-S;B?(B=Number(B))>G&&(B=G):B=G;var de=I.length;if(de%2!=0)throw new TypeError("Invalid hex string");B>de/2&&(B=de/2);for(var Ee=0;Ee<B;++Ee){var rt=parseInt(I.substr(2*Ee,2),16);if(isNaN(rt))return Ee;Z[S+Ee]=rt}return Ee}function O(Z,I,S,B){return ut(jt(I,Z.length-S),Z,S,B)}function ne(Z,I,S,B){return ut(function(de){for(var Ee=[],rt=0;rt<de.length;++rt)Ee.push(255&de.charCodeAt(rt));return Ee}(I),Z,S,B)}function ee(Z,I,S,B){return ne(Z,I,S,B)}function D(Z,I,S,B){return ut(Yt(I),Z,S,B)}function Q(Z,I,S,B){return ut(function(de,Ee){for(var rt,lt,Nt,Kt=[],Xt=0;Xt<de.length&&!((Ee-=2)<0);++Xt)lt=(rt=de.charCodeAt(Xt))>>8,Nt=rt%256,Kt.push(Nt),Kt.push(lt);return Kt}(I,Z.length-S),Z,S,B)}function De(Z,I,S){return I===0&&S===Z.length?s.fromByteArray(Z):s.fromByteArray(Z.slice(I,S))}function ae(Z,I,S){S=Math.min(Z.length,S);for(var B=[],G=I;G<S;){var de,Ee,rt,lt,Nt=Z[G],Kt=null,Xt=Nt>239?4:Nt>223?3:Nt>191?2:1;if(G+Xt<=S)switch(Xt){case 1:Nt<128&&(Kt=Nt);break;case 2:(192&(de=Z[G+1]))==128&&(lt=(31&Nt)<<6|63&de)>127&&(Kt=lt);break;case 3:de=Z[G+1],Ee=Z[G+2],(192&de)==128&&(192&Ee)==128&&(lt=(15&Nt)<<12|(63&de)<<6|63&Ee)>2047&&(lt<55296||lt>57343)&&(Kt=lt);break;case 4:de=Z[G+1],Ee=Z[G+2],rt=Z[G+3],(192&de)==128&&(192&Ee)==128&&(192&rt)==128&&(lt=(15&Nt)<<18|(63&de)<<12|(63&Ee)<<6|63&rt)>65535&&lt<1114112&&(Kt=lt)}Kt===null?(Kt=65533,Xt=1):Kt>65535&&(Kt-=65536,B.push(Kt>>>10&1023|55296),Kt=56320|1023&Kt),B.push(Kt),G+=Xt}return function(dn){var te=dn.length;if(te<=Ce)return String.fromCharCode.apply(String,dn);for(var fe="",K=0;K<te;)fe+=String.fromCharCode.apply(String,dn.slice(K,K+=Ce));return fe}(B)}n.Buffer=y,n.SlowBuffer=function(I){return+I!=I&&(I=0),y.alloc(+I)},n.INSPECT_MAX_BYTES=50,y.TYPED_ARRAY_SUPPORT=a.TYPED_ARRAY_SUPPORT!==void 0?a.TYPED_ARRAY_SUPPORT:function(){try{var I=new Uint8Array(1);return I.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},I.foo()===42&&typeof I.subarray=="function"&&I.subarray(1,1).byteLength===0}catch{return!1}}(),n.kMaxLength=c(),y.poolSize=8192,y._augment=function(Z){return Z.__proto__=y.prototype,Z},y.from=function(Z,I,S){return m(null,Z,I,S)},y.TYPED_ARRAY_SUPPORT&&(y.prototype.__proto__=Uint8Array.prototype,y.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&y[Symbol.species]===y&&Object.defineProperty(y,Symbol.species,{value:null,configurable:!0})),y.alloc=function(Z,I,S){return function(G,de,Ee,rt){return _(de),de<=0?p(G,de):Ee!==void 0?typeof rt=="string"?p(G,de).fill(Ee,rt):p(G,de).fill(Ee):p(G,de)}(null,Z,I,S)},y.allocUnsafe=function(Z){return C(null,Z)},y.allocUnsafeSlow=function(Z){return C(null,Z)},y.isBuffer=function(I){return!(I==null||!I._isBuffer)},y.compare=function(I,S){if(!y.isBuffer(I)||!y.isBuffer(S))throw new TypeError("Arguments must be Buffers");if(I===S)return 0;for(var B=I.length,G=S.length,de=0,Ee=Math.min(B,G);de<Ee;++de)if(I[de]!==S[de]){B=I[de],G=S[de];break}return B<G?-1:G<B?1:0},y.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(I,S){if(!h(I))throw new TypeError('"list" argument must be an Array of Buffers');if(I.length===0)return y.alloc(0);var B;if(S===void 0)for(S=0,B=0;B<I.length;++B)S+=I[B].length;var G=y.allocUnsafe(S),de=0;for(B=0;B<I.length;++B){var Ee=I[B];if(!y.isBuffer(Ee))throw new TypeError('"list" argument must be an Array of Buffers');Ee.copy(G,de),de+=Ee.length}return G},y.byteLength=b,y.prototype._isBuffer=!0,y.prototype.swap16=function(){var I=this.length;if(I%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var S=0;S<I;S+=2)P(this,S,S+1);return this},y.prototype.swap32=function(){var I=this.length;if(I%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var S=0;S<I;S+=4)P(this,S,S+3),P(this,S+1,S+2);return this},y.prototype.swap64=function(){var I=this.length;if(I%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var S=0;S<I;S+=8)P(this,S,S+7),P(this,S+1,S+6),P(this,S+2,S+5),P(this,S+3,S+4);return this},y.prototype.toString=function(){var I=0|this.length;return I===0?"":arguments.length===0?ae(this,0,I):E.apply(this,arguments)},y.prototype.equals=function(I){if(!y.isBuffer(I))throw new TypeError("Argument must be a Buffer");return this===I||y.compare(this,I)===0},y.prototype.inspect=function(){var I="",S=n.INSPECT_MAX_BYTES;return this.length>0&&(I=this.toString("hex",0,S).match(/.{2}/g).join(" "),this.length>S&&(I+=" ... ")),"<Buffer "+I+">"},y.prototype.compare=function(I,S,B,G,de){if(!y.isBuffer(I))throw new TypeError("Argument must be a Buffer");if(S===void 0&&(S=0),B===void 0&&(B=I?I.length:0),G===void 0&&(G=0),de===void 0&&(de=this.length),S<0||B>I.length||G<0||de>this.length)throw new RangeError("out of range index");if(G>=de&&S>=B)return 0;if(G>=de)return-1;if(S>=B)return 1;if(this===I)return 0;for(var Ee=(de>>>=0)-(G>>>=0),rt=(B>>>=0)-(S>>>=0),lt=Math.min(Ee,rt),Nt=this.slice(G,de),Kt=I.slice(S,B),Xt=0;Xt<lt;++Xt)if(Nt[Xt]!==Kt[Xt]){Ee=Nt[Xt],rt=Kt[Xt];break}return Ee<rt?-1:rt<Ee?1:0},y.prototype.includes=function(I,S,B){return this.indexOf(I,S,B)!==-1},y.prototype.indexOf=function(I,S,B){return j(this,I,S,B,!0)},y.prototype.lastIndexOf=function(I,S,B){return j(this,I,S,B,!1)},y.prototype.write=function(I,S,B,G){if(S===void 0)G="utf8",B=this.length,S=0;else if(B===void 0&&typeof S=="string")G=S,B=this.length,S=0;else{if(!isFinite(S))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");S|=0,isFinite(B)?(B|=0,G===void 0&&(G="utf8")):(G=B,B=void 0)}var de=this.length-S;if((B===void 0||B>de)&&(B=de),I.length>0&&(B<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");for(var Ee=!1;;)switch(G){case"hex":return $(this,I,S,B);case"utf8":case"utf-8":return O(this,I,S,B);case"ascii":return ne(this,I,S,B);case"latin1":case"binary":return ee(this,I,S,B);case"base64":return D(this,I,S,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,I,S,B);default:if(Ee)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),Ee=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ce=4096;function Be(Z,I,S){var B="";S=Math.min(Z.length,S);for(var G=I;G<S;++G)B+=String.fromCharCode(127&Z[G]);return B}function Ve(Z,I,S){var B="";S=Math.min(Z.length,S);for(var G=I;G<S;++G)B+=String.fromCharCode(Z[G]);return B}function $e(Z,I,S){var B=Z.length;(!I||I<0)&&(I=0),(!S||S<0||S>B)&&(S=B);for(var G="",de=I;de<S;++de)G+=St(Z[de]);return G}function we(Z,I,S){for(var B=Z.slice(I,S),G="",de=0;de<B.length;de+=2)G+=String.fromCharCode(B[de]+256*B[de+1]);return G}function Oe(Z,I,S){if(Z%1!=0||Z<0)throw new RangeError("offset is not uint");if(Z+I>S)throw new RangeError("Trying to access beyond buffer length")}function me(Z,I,S,B,G,de){if(!y.isBuffer(Z))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>G||I<de)throw new RangeError('"value" argument is out of bounds');if(S+B>Z.length)throw new RangeError("Index out of range")}function We(Z,I,S,B){I<0&&(I=65535+I+1);for(var G=0,de=Math.min(Z.length-S,2);G<de;++G)Z[S+G]=(I&255<<8*(B?G:1-G))>>>8*(B?G:1-G)}function et(Z,I,S,B){I<0&&(I=4294967295+I+1);for(var G=0,de=Math.min(Z.length-S,4);G<de;++G)Z[S+G]=I>>>8*(B?G:3-G)&255}function Et(Z,I,S,B,G,de){if(S+B>Z.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function Bt(Z,I,S,B,G){return G||Et(Z,0,S,4),u.write(Z,I,S,B,23,4),S+4}function Vt(Z,I,S,B,G){return G||Et(Z,0,S,8),u.write(Z,I,S,B,52,8),S+8}y.prototype.slice=function(I,S){var B,G=this.length;if((I=~~I)<0?(I+=G)<0&&(I=0):I>G&&(I=G),(S=S===void 0?G:~~S)<0?(S+=G)<0&&(S=0):S>G&&(S=G),S<I&&(S=I),y.TYPED_ARRAY_SUPPORT)(B=this.subarray(I,S)).__proto__=y.prototype;else{var de=S-I;B=new y(de,void 0);for(var Ee=0;Ee<de;++Ee)B[Ee]=this[Ee+I]}return B},y.prototype.readUIntLE=function(I,S,B){I|=0,S|=0,B||Oe(I,S,this.length);for(var G=this[I],de=1,Ee=0;++Ee<S&&(de*=256);)G+=this[I+Ee]*de;return G},y.prototype.readUIntBE=function(I,S,B){I|=0,S|=0,B||Oe(I,S,this.length);for(var G=this[I+--S],de=1;S>0&&(de*=256);)G+=this[I+--S]*de;return G},y.prototype.readUInt8=function(I,S){return S||Oe(I,1,this.length),this[I]},y.prototype.readUInt16LE=function(I,S){return S||Oe(I,2,this.length),this[I]|this[I+1]<<8},y.prototype.readUInt16BE=function(I,S){return S||Oe(I,2,this.length),this[I]<<8|this[I+1]},y.prototype.readUInt32LE=function(I,S){return S||Oe(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+16777216*this[I+3]},y.prototype.readUInt32BE=function(I,S){return S||Oe(I,4,this.length),16777216*this[I]+(this[I+1]<<16|this[I+2]<<8|this[I+3])},y.prototype.readIntLE=function(I,S,B){I|=0,S|=0,B||Oe(I,S,this.length);for(var G=this[I],de=1,Ee=0;++Ee<S&&(de*=256);)G+=this[I+Ee]*de;return G>=(de*=128)&&(G-=Math.pow(2,8*S)),G},y.prototype.readIntBE=function(I,S,B){I|=0,S|=0,B||Oe(I,S,this.length);for(var G=S,de=1,Ee=this[I+--G];G>0&&(de*=256);)Ee+=this[I+--G]*de;return Ee>=(de*=128)&&(Ee-=Math.pow(2,8*S)),Ee},y.prototype.readInt8=function(I,S){return S||Oe(I,1,this.length),128&this[I]?-1*(255-this[I]+1):this[I]},y.prototype.readInt16LE=function(I,S){S||Oe(I,2,this.length);var B=this[I]|this[I+1]<<8;return 32768&B?4294901760|B:B},y.prototype.readInt16BE=function(I,S){S||Oe(I,2,this.length);var B=this[I+1]|this[I]<<8;return 32768&B?4294901760|B:B},y.prototype.readInt32LE=function(I,S){return S||Oe(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},y.prototype.readInt32BE=function(I,S){return S||Oe(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},y.prototype.readFloatLE=function(I,S){return S||Oe(I,4,this.length),u.read(this,I,!0,23,4)},y.prototype.readFloatBE=function(I,S){return S||Oe(I,4,this.length),u.read(this,I,!1,23,4)},y.prototype.readDoubleLE=function(I,S){return S||Oe(I,8,this.length),u.read(this,I,!0,52,8)},y.prototype.readDoubleBE=function(I,S){return S||Oe(I,8,this.length),u.read(this,I,!1,52,8)},y.prototype.writeUIntLE=function(I,S,B,G){I=+I,S|=0,B|=0,G||me(this,I,S,B,Math.pow(2,8*B)-1,0);var de=1,Ee=0;for(this[S]=255&I;++Ee<B&&(de*=256);)this[S+Ee]=I/de&255;return S+B},y.prototype.writeUIntBE=function(I,S,B,G){I=+I,S|=0,B|=0,G||me(this,I,S,B,Math.pow(2,8*B)-1,0);var de=B-1,Ee=1;for(this[S+de]=255&I;--de>=0&&(Ee*=256);)this[S+de]=I/Ee&255;return S+B},y.prototype.writeUInt8=function(I,S,B){return I=+I,S|=0,B||me(this,I,S,1,255,0),y.TYPED_ARRAY_SUPPORT||(I=Math.floor(I)),this[S]=255&I,S+1},y.prototype.writeUInt16LE=function(I,S,B){return I=+I,S|=0,B||me(this,I,S,2,65535,0),y.TYPED_ARRAY_SUPPORT?(this[S]=255&I,this[S+1]=I>>>8):We(this,I,S,!0),S+2},y.prototype.writeUInt16BE=function(I,S,B){return I=+I,S|=0,B||me(this,I,S,2,65535,0),y.TYPED_ARRAY_SUPPORT?(this[S]=I>>>8,this[S+1]=255&I):We(this,I,S,!1),S+2},y.prototype.writeUInt32LE=function(I,S,B){return I=+I,S|=0,B||me(this,I,S,4,4294967295,0),y.TYPED_ARRAY_SUPPORT?(this[S+3]=I>>>24,this[S+2]=I>>>16,this[S+1]=I>>>8,this[S]=255&I):et(this,I,S,!0),S+4},y.prototype.writeUInt32BE=function(I,S,B){return I=+I,S|=0,B||me(this,I,S,4,4294967295,0),y.TYPED_ARRAY_SUPPORT?(this[S]=I>>>24,this[S+1]=I>>>16,this[S+2]=I>>>8,this[S+3]=255&I):et(this,I,S,!1),S+4},y.prototype.writeIntLE=function(I,S,B,G){if(I=+I,S|=0,!G){var de=Math.pow(2,8*B-1);me(this,I,S,B,de-1,-de)}var Ee=0,rt=1,lt=0;for(this[S]=255&I;++Ee<B&&(rt*=256);)I<0&&lt===0&&this[S+Ee-1]!==0&&(lt=1),this[S+Ee]=(I/rt>>0)-lt&255;return S+B},y.prototype.writeIntBE=function(I,S,B,G){if(I=+I,S|=0,!G){var de=Math.pow(2,8*B-1);me(this,I,S,B,de-1,-de)}var Ee=B-1,rt=1,lt=0;for(this[S+Ee]=255&I;--Ee>=0&&(rt*=256);)I<0&&lt===0&&this[S+Ee+1]!==0&&(lt=1),this[S+Ee]=(I/rt>>0)-lt&255;return S+B},y.prototype.writeInt8=function(I,S,B){return I=+I,S|=0,B||me(this,I,S,1,127,-128),y.TYPED_ARRAY_SUPPORT||(I=Math.floor(I)),I<0&&(I=255+I+1),this[S]=255&I,S+1},y.prototype.writeInt16LE=function(I,S,B){return I=+I,S|=0,B||me(this,I,S,2,32767,-32768),y.TYPED_ARRAY_SUPPORT?(this[S]=255&I,this[S+1]=I>>>8):We(this,I,S,!0),S+2},y.prototype.writeInt16BE=function(I,S,B){return I=+I,S|=0,B||me(this,I,S,2,32767,-32768),y.TYPED_ARRAY_SUPPORT?(this[S]=I>>>8,this[S+1]=255&I):We(this,I,S,!1),S+2},y.prototype.writeInt32LE=function(I,S,B){return I=+I,S|=0,B||me(this,I,S,4,2147483647,-2147483648),y.TYPED_ARRAY_SUPPORT?(this[S]=255&I,this[S+1]=I>>>8,this[S+2]=I>>>16,this[S+3]=I>>>24):et(this,I,S,!0),S+4},y.prototype.writeInt32BE=function(I,S,B){return I=+I,S|=0,B||me(this,I,S,4,2147483647,-2147483648),I<0&&(I=4294967295+I+1),y.TYPED_ARRAY_SUPPORT?(this[S]=I>>>24,this[S+1]=I>>>16,this[S+2]=I>>>8,this[S+3]=255&I):et(this,I,S,!1),S+4},y.prototype.writeFloatLE=function(I,S,B){return Bt(this,I,S,!0,B)},y.prototype.writeFloatBE=function(I,S,B){return Bt(this,I,S,!1,B)},y.prototype.writeDoubleLE=function(I,S,B){return Vt(this,I,S,!0,B)},y.prototype.writeDoubleBE=function(I,S,B){return Vt(this,I,S,!1,B)},y.prototype.copy=function(I,S,B,G){if(B||(B=0),G||G===0||(G=this.length),S>=I.length&&(S=I.length),S||(S=0),G>0&&G<B&&(G=B),G===B||I.length===0||this.length===0)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("sourceStart out of bounds");if(G<0)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),I.length-S<G-B&&(G=I.length-S+B);var de,Ee=G-B;if(this===I&&B<S&&S<G)for(de=Ee-1;de>=0;--de)I[de+S]=this[de+B];else if(Ee<1e3||!y.TYPED_ARRAY_SUPPORT)for(de=0;de<Ee;++de)I[de+S]=this[de+B];else Uint8Array.prototype.set.call(I,this.subarray(B,B+Ee),S);return Ee},y.prototype.fill=function(I,S,B,G){if(typeof I=="string"){if(typeof S=="string"?(G=S,S=0,B=this.length):typeof B=="string"&&(G=B,B=this.length),I.length===1){var de=I.charCodeAt(0);de<256&&(I=de)}if(G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!y.isEncoding(G))throw new TypeError("Unknown encoding: "+G)}else typeof I=="number"&&(I&=255);if(S<0||this.length<S||this.length<B)throw new RangeError("Out of range index");if(B<=S)return this;var Ee;if(S>>>=0,B=B===void 0?this.length:B>>>0,I||(I=0),typeof I=="number")for(Ee=S;Ee<B;++Ee)this[Ee]=I;else{var rt=y.isBuffer(I)?I:jt(new y(I,G).toString()),lt=rt.length;for(Ee=0;Ee<B-S;++Ee)this[Ee+S]=rt[Ee%lt]}return this};var Ke=/[^+\/0-9A-Za-z-_]/g;function St(Z){return Z<16?"0"+Z.toString(16):Z.toString(16)}function jt(Z,I){var S;I=I||1/0;for(var B=Z.length,G=null,de=[],Ee=0;Ee<B;++Ee){if((S=Z.charCodeAt(Ee))>55295&&S<57344){if(!G){if(S>56319){(I-=3)>-1&&de.push(239,191,189);continue}if(Ee+1===B){(I-=3)>-1&&de.push(239,191,189);continue}G=S;continue}if(S<56320){(I-=3)>-1&&de.push(239,191,189),G=S;continue}S=65536+(G-55296<<10|S-56320)}else G&&(I-=3)>-1&&de.push(239,191,189);if(G=null,S<128){if((I-=1)<0)break;de.push(S)}else if(S<2048){if((I-=2)<0)break;de.push(S>>6|192,63&S|128)}else if(S<65536){if((I-=3)<0)break;de.push(S>>12|224,S>>6&63|128,63&S|128)}else{if(!(S<1114112))throw new Error("Invalid code point");if((I-=4)<0)break;de.push(S>>18|240,S>>12&63|128,S>>6&63|128,63&S|128)}}return de}function Yt(Z){return s.toByteArray(function(S){if((S=function(G){return G.trim?G.trim():G.replace(/^\s+|\s+$/g,"")}(S).replace(Ke,"")).length<2)return"";for(;S.length%4!=0;)S+="=";return S}(Z))}function ut(Z,I,S,B){for(var G=0;G<B&&!(G+S>=I.length||G>=Z.length);++G)I[G+S]=Z[G];return G}}).call(this,o(29))},function(r,n){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}r.exports=o},function(r,n,o){n.byteLength=function(C){var R=y(C),F=R[0],b=R[1];return 3*(F+b)/4-b},n.toByteArray=function(C){var R,F,b=y(C),E=b[0],P=b[1],j=new u(function(ne,ee,D){return 3*(ee+D)/4-D}(0,E,P)),H=0,$=P>0?E-4:E;for(F=0;F<$;F+=4)R=s[C.charCodeAt(F)]<<18|s[C.charCodeAt(F+1)]<<12|s[C.charCodeAt(F+2)]<<6|s[C.charCodeAt(F+3)],j[H++]=R>>16&255,j[H++]=R>>8&255,j[H++]=255&R;return P===2&&(R=s[C.charCodeAt(F)]<<2|s[C.charCodeAt(F+1)]>>4,j[H++]=255&R),P===1&&(R=s[C.charCodeAt(F)]<<10|s[C.charCodeAt(F+1)]<<4|s[C.charCodeAt(F+2)]>>2,j[H++]=R>>8&255,j[H++]=255&R),j},n.fromByteArray=function(C){for(var R,F=C.length,b=F%3,E=[],P=16383,j=0,H=F-b;j<H;j+=P)E.push(m(C,j,j+P>H?H:j+P));return b===1?(R=C[F-1],E.push(a[R>>2]+a[R<<4&63]+"==")):b===2&&(R=(C[F-2]<<8)+C[F-1],E.push(a[R>>10]+a[R>>4&63]+a[R<<2&63]+"=")),E.join("")};for(var a=[],s=[],u=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,p=h.length;c<p;++c)a[c]=h[c],s[h.charCodeAt(c)]=c;function y(_){var C=_.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var R=_.indexOf("=");return R===-1&&(R=C),[R,R===C?0:4-R%4]}function m(_,C,R){for(var F,b,E=[],P=C;P<R;P+=3)F=(_[P]<<16&16711680)+(_[P+1]<<8&65280)+(255&_[P+2]),E.push(a[(b=F)>>18&63]+a[b>>12&63]+a[b>>6&63]+a[63&b]);return E.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(r,n){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */n.read=function(o,a,s,u,h){var c,p,y=8*h-u-1,m=(1<<y)-1,_=m>>1,C=-7,R=s?h-1:0,F=s?-1:1,b=o[a+R];for(R+=F,c=b&(1<<-C)-1,b>>=-C,C+=y;C>0;c=256*c+o[a+R],R+=F,C-=8);for(p=c&(1<<-C)-1,c>>=-C,C+=u;C>0;p=256*p+o[a+R],R+=F,C-=8);if(c===0)c=1-_;else{if(c===m)return p?NaN:1/0*(b?-1:1);p+=Math.pow(2,u),c-=_}return(b?-1:1)*p*Math.pow(2,c-u)},n.write=function(o,a,s,u,h,c){var p,y,m,_=8*c-h-1,C=(1<<_)-1,R=C>>1,F=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=u?0:c-1,E=u?1:-1,P=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(y=isNaN(a)?1:0,p=C):(p=Math.floor(Math.log(a)/Math.LN2),a*(m=Math.pow(2,-p))<1&&(p--,m*=2),(a+=p+R>=1?F/m:F*Math.pow(2,1-R))*m>=2&&(p++,m/=2),p+R>=C?(y=0,p=C):p+R>=1?(y=(a*m-1)*Math.pow(2,h),p+=R):(y=a*Math.pow(2,R-1)*Math.pow(2,h),p=0));h>=8;o[s+b]=255&y,b+=E,y/=256,h-=8);for(p=p<<h|y,_+=h;_>0;o[s+b]=255&p,b+=E,p/=256,_-=8);o[s+b-E]|=128*P}},function(r,n){var o={}.toString;r.exports=Array.isArray||function(a){return o.call(a)=="[object Array]"}},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(u){var h=u.jws,c=u.KeyUtil,p=u.X509,y=u.crypto,m=u.hextob64u,_=u.b64tohex,C=u.AllowedSigningAlgs;return function(){function R(){(function(b,E){if(!(b instanceof E))throw new TypeError("Cannot call a class as a function")})(this,R)}return R.parseJwt=function(b){a.Log.debug("JoseUtil.parseJwt");try{var E=h.JWS.parse(b);return{header:E.headerObj,payload:E.payloadObj}}catch(P){a.Log.error(P)}},R.validateJwt=function(b,E,P,j,H,$,O){a.Log.debug("JoseUtil.validateJwt");try{if(E.kty==="RSA")if(E.e&&E.n)E=c.getKey(E);else{if(!E.x5c||!E.x5c.length)return a.Log.error("JoseUtil.validateJwt: RSA key missing key material",E),Promise.reject(new Error("RSA key missing key material"));var ne=_(E.x5c[0]);E=p.getPublicKeyFromCertHex(ne)}else{if(E.kty!=="EC")return a.Log.error("JoseUtil.validateJwt: Unsupported key type",E&&E.kty),Promise.reject(new Error(E.kty));if(!(E.crv&&E.x&&E.y))return a.Log.error("JoseUtil.validateJwt: EC key missing key material",E),Promise.reject(new Error("EC key missing key material"));E=c.getKey(E)}return R._validateJwt(b,E,P,j,H,$,O)}catch(ee){return a.Log.error(ee&&ee.message||ee),Promise.reject("JWT validation failed")}},R.validateJwtAttributes=function(b,E,P,j,H,$){j||(j=0),H||(H=parseInt(Date.now()/1e3));var O=R.parseJwt(b).payload;if(!O.iss)return a.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(O.iss!==E)return a.Log.error("JoseUtil._validateJwt: Invalid issuer in token",O.iss),Promise.reject(new Error("Invalid issuer in token: "+O.iss));if(!O.aud)return a.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(O.aud===P||Array.isArray(O.aud)&&O.aud.indexOf(P)>=0))return a.Log.error("JoseUtil._validateJwt: Invalid audience in token",O.aud),Promise.reject(new Error("Invalid audience in token: "+O.aud));if(O.azp&&O.azp!==P)return a.Log.error("JoseUtil._validateJwt: Invalid azp in token",O.azp),Promise.reject(new Error("Invalid azp in token: "+O.azp));if(!$){var ne=H+j,ee=H-j;if(!O.iat)return a.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(ne<O.iat)return a.Log.error("JoseUtil._validateJwt: iat is in the future",O.iat),Promise.reject(new Error("iat is in the future: "+O.iat));if(O.nbf&&ne<O.nbf)return a.Log.error("JoseUtil._validateJwt: nbf is in the future",O.nbf),Promise.reject(new Error("nbf is in the future: "+O.nbf));if(!O.exp)return a.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(O.exp<ee)return a.Log.error("JoseUtil._validateJwt: exp is in the past",O.exp),Promise.reject(new Error("exp is in the past:"+O.exp))}return Promise.resolve(O)},R._validateJwt=function(b,E,P,j,H,$,O){return R.validateJwtAttributes(b,P,j,H,$,O).then(function(ne){try{return h.JWS.verify(b,E,C)?ne:(a.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(ee){return a.Log.error(ee&&ee.message||ee),Promise.reject(new Error("signature validation failed"))}})},R.hashString=function(b,E){try{return y.Util.hashString(b,E)}catch(P){a.Log.error(P)}},R.hexToBase64Url=function(b){try{return m(b)}catch(E){a.Log.error(E)}},R}()};var a=o(0);r.exports=n.default},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.SigninResponse=void 0;var a=function(){function h(c,p){for(var y=0;y<p.length;y++){var m=p[y];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(c,m.key,m)}}return function(c,p,y){return p&&h(c.prototype,p),y&&h(c,y),c}}(),s=o(3);function u(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}n.SigninResponse=function(){function h(c){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#";u(this,h);var y=s.UrlUtility.parseUrlFragment(c,p);this.error=y.error,this.error_description=y.error_description,this.error_uri=y.error_uri,this.code=y.code,this.state=y.state,this.id_token=y.id_token,this.session_state=y.session_state,this.access_token=y.access_token,this.token_type=y.token_type,this.scope=y.scope,this.profile=void 0,this.expires_in=y.expires_in}return a(h,[{key:"expires_in",get:function(){if(this.expires_at){var p=parseInt(Date.now()/1e3);return this.expires_at-p}},set:function(p){var y=parseInt(p);if(typeof y=="number"&&y>0){var m=parseInt(Date.now()/1e3);this.expires_at=m+y}}},{key:"expired",get:function(){var p=this.expires_in;if(p!==void 0)return p<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),h}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.SignoutRequest=void 0;var a=o(0),s=o(3),u=o(9);n.SignoutRequest=function h(c){var p=c.url,y=c.id_token_hint,m=c.post_logout_redirect_uri,_=c.data,C=c.extraQueryParams,R=c.request_type;if(function(E,P){if(!(E instanceof P))throw new TypeError("Cannot call a class as a function")}(this,h),!p)throw a.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var F in y&&(p=s.UrlUtility.addQueryParam(p,"id_token_hint",y)),m&&(p=s.UrlUtility.addQueryParam(p,"post_logout_redirect_uri",m),_&&(this.state=new u.State({data:_,request_type:R}),p=s.UrlUtility.addQueryParam(p,"state",this.state.id))),C)p=s.UrlUtility.addQueryParam(p,F,C[F]);this.url=p}},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.SignoutResponse=void 0;var a=o(3);n.SignoutResponse=function s(u){(function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")})(this,s);var h=a.UrlUtility.parseUrlFragment(u,"?");this.error=h.error,this.error_description=h.error_description,this.error_uri=h.error_uri,this.state=h.state}},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.InMemoryWebStorage=void 0;var a=function(){function u(h,c){for(var p=0;p<c.length;p++){var y=c[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,c,p){return c&&u(h.prototype,c),p&&u(h,p),h}}(),s=o(0);n.InMemoryWebStorage=function(){function u(){(function(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u),this._data={}}return u.prototype.getItem=function(c){return s.Log.debug("InMemoryWebStorage.getItem",c),this._data[c]},u.prototype.setItem=function(c,p){s.Log.debug("InMemoryWebStorage.setItem",c),this._data[c]=p},u.prototype.removeItem=function(c){s.Log.debug("InMemoryWebStorage.removeItem",c),delete this._data[c]},u.prototype.key=function(c){return Object.getOwnPropertyNames(this._data)[c]},a(u,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.UserManager=void 0;var a=function(){function P(j,H){for(var $=0;$<H.length;$++){var O=H[$];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(j,O.key,O)}}return function(j,H,$){return H&&P(j.prototype,H),$&&P(j,$),j}}(),s=o(0),u=o(10),h=o(39),c=o(15),p=o(45),y=o(47),m=o(18),_=o(8),C=o(20),R=o(11),F=o(4);function b(P,j){if(!(P instanceof j))throw new TypeError("Cannot call a class as a function")}function E(P,j){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!j||typeof j!="object"&&typeof j!="function"?P:j}n.UserManager=function(P){function j(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.SilentRenewService,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m.SessionMonitor,ne=arguments.length>3&&arguments[3]!==void 0?arguments[3]:C.TokenRevocationClient,ee=arguments.length>4&&arguments[4]!==void 0?arguments[4]:R.TokenClient,D=arguments.length>5&&arguments[5]!==void 0?arguments[5]:F.JoseUtil;b(this,j),H instanceof h.UserManagerSettings||(H=new h.UserManagerSettings(H));var Q=E(this,P.call(this,H));return Q._events=new p.UserManagerEvents(H),Q._silentRenewService=new $(Q),Q.settings.automaticSilentRenew&&(s.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),Q.startSilentRenew()),Q.settings.monitorSession&&(s.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),Q._sessionMonitor=new O(Q)),Q._tokenRevocationClient=new ne(Q._settings),Q._tokenClient=new ee(Q._settings),Q._joseUtil=D,Q}return function($,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);$.prototype=Object.create(O&&O.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf($,O):$.__proto__=O)}(j,P),j.prototype.getUser=function(){var $=this;return this._loadUser().then(function(O){return O?(s.Log.info("UserManager.getUser: user loaded"),$._events.load(O,!1),O):(s.Log.info("UserManager.getUser: user not found in storage"),null)})},j.prototype.removeUser=function(){var $=this;return this.storeUser(null).then(function(){s.Log.info("UserManager.removeUser: user removed from storage"),$._events.unload()})},j.prototype.signinRedirect=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};($=Object.assign({},$)).request_type="si:r";var O={useReplaceToNavigate:$.useReplaceToNavigate};return this._signinStart($,this._redirectNavigator,O).then(function(){s.Log.info("UserManager.signinRedirect: successful")})},j.prototype.signinRedirectCallback=function($){return this._signinEnd($||this._redirectNavigator.url).then(function(O){return O.profile&&O.profile.sub?s.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",O.profile.sub):s.Log.info("UserManager.signinRedirectCallback: no sub"),O})},j.prototype.signinPopup=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};($=Object.assign({},$)).request_type="si:p";var O=$.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return O?($.redirect_uri=O,$.display="popup",this._signin($,this._popupNavigator,{startUrl:O,popupWindowFeatures:$.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:$.popupWindowTarget||this.settings.popupWindowTarget}).then(function(ne){return ne&&(ne.profile&&ne.profile.sub?s.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",ne.profile.sub):s.Log.info("UserManager.signinPopup: no sub")),ne})):(s.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},j.prototype.signinPopupCallback=function($){return this._signinCallback($,this._popupNavigator).then(function(O){return O&&(O.profile&&O.profile.sub?s.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",O.profile.sub):s.Log.info("UserManager.signinPopupCallback: no sub")),O}).catch(function(O){s.Log.error(O.message)})},j.prototype.signinSilent=function(){var $=this,O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return O=Object.assign({},O),this._loadUser().then(function(ne){return ne&&ne.refresh_token?(O.refresh_token=ne.refresh_token,$._useRefreshToken(O)):(O.request_type="si:s",O.id_token_hint=O.id_token_hint||$.settings.includeIdTokenInSilentRenew&&ne&&ne.id_token,ne&&$._settings.validateSubOnSilentRenew&&(s.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",ne.profile.sub),O.current_sub=ne.profile.sub),$._signinSilentIframe(O))})},j.prototype._useRefreshToken=function(){var $=this,O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._tokenClient.exchangeRefreshToken(O).then(function(ne){return ne?ne.access_token?$._loadUser().then(function(ee){if(ee){var D=Promise.resolve();return ne.id_token&&(D=$._validateIdTokenFromTokenRefreshToken(ee.profile,ne.id_token)),D.then(function(){return s.Log.debug("UserManager._useRefreshToken: refresh token response success"),ee.id_token=ne.id_token||ee.id_token,ee.access_token=ne.access_token,ee.refresh_token=ne.refresh_token||ee.refresh_token,ee.expires_in=ne.expires_in,$.storeUser(ee).then(function(){return $._events.load(ee),ee})})}return null}):(s.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(s.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},j.prototype._validateIdTokenFromTokenRefreshToken=function($,O){var ne=this;return this._metadataService.getIssuer().then(function(ee){return ne.settings.getEpochTime().then(function(D){return ne._joseUtil.validateJwtAttributes(O,ee,ne._settings.client_id,ne._settings.clockSkew,D).then(function(Q){return Q?Q.sub!==$.sub?(s.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):Q.auth_time&&Q.auth_time!==$.auth_time?(s.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):Q.azp&&Q.azp!==$.azp?(s.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!Q.azp&&$.azp?(s.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(s.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})})},j.prototype._signinSilentIframe=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O=$.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return O?($.redirect_uri=O,$.prompt=$.prompt||"none",this._signin($,this._iframeNavigator,{startUrl:O,silentRequestTimeout:$.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(ne){return ne&&(ne.profile&&ne.profile.sub?s.Log.info("UserManager.signinSilent: successful, signed in sub: ",ne.profile.sub):s.Log.info("UserManager.signinSilent: no sub")),ne})):(s.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},j.prototype.signinSilentCallback=function($){return this._signinCallback($,this._iframeNavigator).then(function(O){return O&&(O.profile&&O.profile.sub?s.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",O.profile.sub):s.Log.info("UserManager.signinSilentCallback: no sub")),O})},j.prototype.signinCallback=function($){var O=this;return this.readSigninResponseState($).then(function(ne){var ee=ne.state;return ne.response,ee.request_type==="si:r"?O.signinRedirectCallback($):ee.request_type==="si:p"?O.signinPopupCallback($):ee.request_type==="si:s"?O.signinSilentCallback($):Promise.reject(new Error("invalid response_type in state"))})},j.prototype.signoutCallback=function($,O){var ne=this;return this.readSignoutResponseState($).then(function(ee){var D=ee.state,Q=ee.response;return D?D.request_type==="so:r"?ne.signoutRedirectCallback($):D.request_type==="so:p"?ne.signoutPopupCallback($,O):Promise.reject(new Error("invalid response_type in state")):Q})},j.prototype.querySessionStatus=function(){var $=this,O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(O=Object.assign({},O)).request_type="si:s";var ne=O.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return ne?(O.redirect_uri=ne,O.prompt="none",O.response_type=O.response_type||this.settings.query_status_response_type,O.scope=O.scope||"openid",O.skipUserInfo=!0,this._signinStart(O,this._iframeNavigator,{startUrl:ne,silentRequestTimeout:O.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(ee){return $.processSigninResponse(ee.url).then(function(D){if(s.Log.debug("UserManager.querySessionStatus: got signin response"),D.session_state&&D.profile.sub)return s.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",D.profile.sub),{session_state:D.session_state,sub:D.profile.sub,sid:D.profile.sid};s.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(D){if(D.session_state&&$.settings.monitorAnonymousSession&&(D.message=="login_required"||D.message=="consent_required"||D.message=="interaction_required"||D.message=="account_selection_required"))return s.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:D.session_state};throw D})})):(s.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},j.prototype._signin=function($,O){var ne=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._signinStart($,O,ee).then(function(D){return ne._signinEnd(D.url,$)})},j.prototype._signinStart=function($,O){var ne=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O.prepare(ee).then(function(D){return s.Log.debug("UserManager._signinStart: got navigator window handle"),ne.createSigninRequest($).then(function(Q){return s.Log.debug("UserManager._signinStart: got signin request"),ee.url=Q.url,ee.id=Q.state.id,D.navigate(ee)}).catch(function(Q){throw D.close&&(s.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),D.close()),Q})})},j.prototype._signinEnd=function($){var O=this,ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.processSigninResponse($).then(function(ee){s.Log.debug("UserManager._signinEnd: got signin response");var D=new c.User(ee);if(ne.current_sub){if(ne.current_sub!==D.profile.sub)return s.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",D.profile.sub),Promise.reject(new Error("login_required"));s.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return O.storeUser(D).then(function(){return s.Log.debug("UserManager._signinEnd: user stored"),O._events.load(D),D})})},j.prototype._signinCallback=function($,O){s.Log.debug("UserManager._signinCallback");var ne=this._settings.response_mode==="query"||!this._settings.response_mode&&_.SigninRequest.isCode(this._settings.response_type)?"?":"#";return O.callback($,void 0,ne)},j.prototype.signoutRedirect=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};($=Object.assign({},$)).request_type="so:r";var O=$.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;O&&($.post_logout_redirect_uri=O);var ne={useReplaceToNavigate:$.useReplaceToNavigate};return this._signoutStart($,this._redirectNavigator,ne).then(function(){s.Log.info("UserManager.signoutRedirect: successful")})},j.prototype.signoutRedirectCallback=function($){return this._signoutEnd($||this._redirectNavigator.url).then(function(O){return s.Log.info("UserManager.signoutRedirectCallback: successful"),O})},j.prototype.signoutPopup=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};($=Object.assign({},$)).request_type="so:p";var O=$.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return $.post_logout_redirect_uri=O,$.display="popup",$.post_logout_redirect_uri&&($.state=$.state||{}),this._signout($,this._popupNavigator,{startUrl:O,popupWindowFeatures:$.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:$.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){s.Log.info("UserManager.signoutPopup: successful")})},j.prototype.signoutPopupCallback=function($,O){return O===void 0&&typeof $=="boolean"&&(O=$,$=null),this._popupNavigator.callback($,O,"?").then(function(){s.Log.info("UserManager.signoutPopupCallback: successful")})},j.prototype._signout=function($,O){var ne=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._signoutStart($,O,ee).then(function(D){return ne._signoutEnd(D.url)})},j.prototype._signoutStart=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O=this,ne=arguments[1],ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ne.prepare(ee).then(function(D){return s.Log.debug("UserManager._signoutStart: got navigator window handle"),O._loadUser().then(function(Q){return s.Log.debug("UserManager._signoutStart: loaded current user from storage"),(O._settings.revokeAccessTokenOnSignout?O._revokeInternal(Q):Promise.resolve()).then(function(){var De=$.id_token_hint||Q&&Q.id_token;return De&&(s.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),$.id_token_hint=De),O.removeUser().then(function(){return s.Log.debug("UserManager._signoutStart: user removed, creating signout request"),O.createSignoutRequest($).then(function(ae){return s.Log.debug("UserManager._signoutStart: got signout request"),ee.url=ae.url,ae.state&&(ee.id=ae.state.id),D.navigate(ee)})})})}).catch(function(Q){throw D.close&&(s.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),D.close()),Q})})},j.prototype._signoutEnd=function($){return this.processSignoutResponse($).then(function(O){return s.Log.debug("UserManager._signoutEnd: got signout response"),O})},j.prototype.revokeAccessToken=function(){var $=this;return this._loadUser().then(function(O){return $._revokeInternal(O,!0).then(function(ne){if(ne)return s.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),O.access_token=null,O.refresh_token=null,O.expires_at=null,O.token_type=null,$.storeUser(O).then(function(){s.Log.debug("UserManager.revokeAccessToken: user stored"),$._events.load(O)})})}).then(function(){s.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},j.prototype._revokeInternal=function($,O){var ne=this;if($){var ee=$.access_token,D=$.refresh_token;return this._revokeAccessTokenInternal(ee,O).then(function(Q){return ne._revokeRefreshTokenInternal(D,O).then(function(De){return Q||De||s.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),Q||De})})}return Promise.resolve(!1)},j.prototype._revokeAccessTokenInternal=function($,O){return!$||$.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke($,O).then(function(){return!0})},j.prototype._revokeRefreshTokenInternal=function($,O){return $?this._tokenRevocationClient.revoke($,O,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},j.prototype.startSilentRenew=function(){this._silentRenewService.start()},j.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},j.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function($){return $?(s.Log.debug("UserManager._loadUser: user storageString loaded"),c.User.fromStorageString($)):(s.Log.debug("UserManager._loadUser: no user storageString"),null)})},j.prototype.storeUser=function($){if($){s.Log.debug("UserManager.storeUser: storing user");var O=$.toStorageString();return this._userStore.set(this._userStoreKey,O)}return s.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},a(j,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),j}(u.OidcClient)},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.UserManagerSettings=void 0;var a=function(){function R(F,b){for(var E=0;E<b.length;E++){var P=b[E];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(F,P.key,P)}}return function(F,b,E){return b&&R(F.prototype,b),E&&R(F,E),F}}(),s=(o(0),o(5)),u=o(40),h=o(41),c=o(43),p=o(6),y=o(1),m=o(8);function _(R,F){if(!(R instanceof F))throw new TypeError("Cannot call a class as a function")}function C(R,F){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!F||typeof F!="object"&&typeof F!="function"?R:F}n.UserManagerSettings=function(R){function F(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},E=b.popup_redirect_uri,P=b.popup_post_logout_redirect_uri,j=b.popupWindowFeatures,H=b.popupWindowTarget,$=b.silent_redirect_uri,O=b.silentRequestTimeout,ne=b.automaticSilentRenew,ee=ne!==void 0&&ne,D=b.validateSubOnSilentRenew,Q=D!==void 0&&D,De=b.includeIdTokenInSilentRenew,ae=De===void 0||De,Ce=b.monitorSession,Be=Ce===void 0||Ce,Ve=b.monitorAnonymousSession,$e=Ve!==void 0&&Ve,we=b.checkSessionInterval,Oe=we===void 0?2e3:we,me=b.stopCheckSessionOnError,We=me===void 0||me,et=b.query_status_response_type,Et=b.revokeAccessTokenOnSignout,Bt=Et!==void 0&&Et,Vt=b.accessTokenExpiringNotificationTime,Ke=Vt===void 0?60:Vt,St=b.redirectNavigator,jt=St===void 0?new u.RedirectNavigator:St,Yt=b.popupNavigator,ut=Yt===void 0?new h.PopupNavigator:Yt,Z=b.iframeNavigator,I=Z===void 0?new c.IFrameNavigator:Z,S=b.userStore,B=S===void 0?new p.WebStorageStateStore({store:y.Global.sessionStorage}):S;_(this,F);var G=C(this,R.call(this,arguments[0]));return G._popup_redirect_uri=E,G._popup_post_logout_redirect_uri=P,G._popupWindowFeatures=j,G._popupWindowTarget=H,G._silent_redirect_uri=$,G._silentRequestTimeout=O,G._automaticSilentRenew=ee,G._validateSubOnSilentRenew=Q,G._includeIdTokenInSilentRenew=ae,G._accessTokenExpiringNotificationTime=Ke,G._monitorSession=Be,G._monitorAnonymousSession=$e,G._checkSessionInterval=Oe,G._stopCheckSessionOnError=We,et?G._query_status_response_type=et:arguments[0]&&arguments[0].response_type?G._query_status_response_type=m.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":G._query_status_response_type="id_token",G._revokeAccessTokenOnSignout=Bt,G._redirectNavigator=jt,G._popupNavigator=ut,G._iframeNavigator=I,G._userStore=B,G}return function(E,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);E.prototype=Object.create(P&&P.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(E,P):E.__proto__=P)}(F,R),a(F,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),F}(s.OidcClientSettings)},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.RedirectNavigator=void 0;var a=function(){function u(h,c){for(var p=0;p<c.length;p++){var y=c[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,c,p){return c&&u(h.prototype,c),p&&u(h,p),h}}(),s=o(0);n.RedirectNavigator=function(){function u(){(function(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u)}return u.prototype.prepare=function(){return Promise.resolve(this)},u.prototype.navigate=function(c){return c&&c.url?(c.useReplaceToNavigate?window.location.replace(c.url):window.location=c.url,Promise.resolve()):(s.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},a(u,[{key:"url",get:function(){return window.location.href}}]),u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.PopupNavigator=void 0;var a=o(0),s=o(42);n.PopupNavigator=function(){function u(){(function(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u)}return u.prototype.prepare=function(c){var p=new s.PopupWindow(c);return Promise.resolve(p)},u.prototype.callback=function(c,p,y){a.Log.debug("PopupNavigator.callback");try{return s.PopupWindow.notifyOpener(c,p,y),Promise.resolve()}catch(m){return Promise.reject(m)}},u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.PopupWindow=void 0;var a=function(){function h(c,p){for(var y=0;y<p.length;y++){var m=p[y];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(c,m.key,m)}}return function(c,p,y){return p&&h(c.prototype,p),y&&h(c,y),c}}(),s=o(0),u=o(3);n.PopupWindow=function(){function h(c){var p=this;(function(C,R){if(!(C instanceof R))throw new TypeError("Cannot call a class as a function")})(this,h),this._promise=new Promise(function(_,C){p._resolve=_,p._reject=C});var y=c.popupWindowTarget||"_blank",m=c.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;";this._popup=window.open("",y,m),this._popup&&(s.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return h.prototype.navigate=function(p){return this._popup?p&&p.url?(s.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=p.id,this._id&&(window["popupCallback_"+p.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=p.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},h.prototype._success=function(p){s.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(p)},h.prototype._error=function(p){s.Log.error("PopupWindow.error: ",p),this._cleanup(),this._reject(new Error(p))},h.prototype.close=function(){this._cleanup(!1)},h.prototype._cleanup=function(p){s.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!p&&this._popup.close(),this._popup=null},h.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},h.prototype._callback=function(p,y){this._cleanup(y),p?(s.Log.debug("PopupWindow.callback success"),this._success({url:p})):(s.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},h.notifyOpener=function(p,y,m){if(window.opener){if(p=p||window.location.href){var _=u.UrlUtility.parseUrlFragment(p,m);if(_.state){var C="popupCallback_"+_.state,R=window.opener[C];R?(s.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),R(p,y)):s.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else s.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else s.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},a(h,[{key:"promise",get:function(){return this._promise}}]),h}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.IFrameNavigator=void 0;var a=o(0),s=o(44);n.IFrameNavigator=function(){function u(){(function(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u)}return u.prototype.prepare=function(c){var p=new s.IFrameWindow(c);return Promise.resolve(p)},u.prototype.callback=function(c){a.Log.debug("IFrameNavigator.callback");try{return s.IFrameWindow.notifyParent(c),Promise.resolve()}catch(p){return Promise.reject(p)}},u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.IFrameWindow=void 0;var a=function(){function u(h,c){for(var p=0;p<c.length;p++){var y=c[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,c,p){return c&&u(h.prototype,c),p&&u(h,p),h}}(),s=o(0);n.IFrameWindow=function(){function u(h){var c=this;(function(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")})(this,u),this._promise=new Promise(function(p,y){c._resolve=p,c._reject=y}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return u.prototype.navigate=function(c){if(c&&c.url){var p=c.silentRequestTimeout||1e4;s.Log.debug("IFrameWindow.navigate: Using timeout of:",p),this._timer=window.setTimeout(this._timeout.bind(this),p),this._frame.src=c.url}else this._error("No url provided");return this.promise},u.prototype._success=function(c){this._cleanup(),s.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(c)},u.prototype._error=function(c){this._cleanup(),s.Log.error(c),this._reject(new Error(c))},u.prototype.close=function(){this._cleanup()},u.prototype._cleanup=function(){this._frame&&(s.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},u.prototype._timeout=function(){s.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},u.prototype._message=function(c){if(s.Log.debug("IFrameWindow.message"),this._timer&&c.origin===this._origin&&c.source===this._frame.contentWindow&&typeof c.data=="string"&&(c.data.startsWith("http://")||c.data.startsWith("https://"))){var p=c.data;p?this._success({url:p}):this._error("Invalid response from frame")}},u.notifyParent=function(c){s.Log.debug("IFrameWindow.notifyParent"),(c=c||window.location.href)&&(s.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(c,location.protocol+"//"+location.host))},a(u,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),u}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.UserManagerEvents=void 0;var a=o(0),s=o(16),u=o(17);n.UserManagerEvents=function(h){function c(p){(function(_,C){if(!(_ instanceof C))throw new TypeError("Cannot call a class as a function")})(this,c);var y=function(_,C){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||typeof C!="object"&&typeof C!="function"?_:C}(this,h.call(this,p));return y._userLoaded=new u.Event("User loaded"),y._userUnloaded=new u.Event("User unloaded"),y._silentRenewError=new u.Event("Silent renew error"),y._userSignedIn=new u.Event("User signed in"),y._userSignedOut=new u.Event("User signed out"),y._userSessionChanged=new u.Event("User session changed"),y}return function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);y.prototype=Object.create(m&&m.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(y,m):y.__proto__=m)}(c,h),c.prototype.load=function(y){var m=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];a.Log.debug("UserManagerEvents.load"),h.prototype.load.call(this,y),m&&this._userLoaded.raise(y)},c.prototype.unload=function(){a.Log.debug("UserManagerEvents.unload"),h.prototype.unload.call(this),this._userUnloaded.raise()},c.prototype.addUserLoaded=function(y){this._userLoaded.addHandler(y)},c.prototype.removeUserLoaded=function(y){this._userLoaded.removeHandler(y)},c.prototype.addUserUnloaded=function(y){this._userUnloaded.addHandler(y)},c.prototype.removeUserUnloaded=function(y){this._userUnloaded.removeHandler(y)},c.prototype.addSilentRenewError=function(y){this._silentRenewError.addHandler(y)},c.prototype.removeSilentRenewError=function(y){this._silentRenewError.removeHandler(y)},c.prototype._raiseSilentRenewError=function(y){a.Log.debug("UserManagerEvents._raiseSilentRenewError",y.message),this._silentRenewError.raise(y)},c.prototype.addUserSignedIn=function(y){this._userSignedIn.addHandler(y)},c.prototype.removeUserSignedIn=function(y){this._userSignedIn.removeHandler(y)},c.prototype._raiseUserSignedIn=function(){a.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},c.prototype.addUserSignedOut=function(y){this._userSignedOut.addHandler(y)},c.prototype.removeUserSignedOut=function(y){this._userSignedOut.removeHandler(y)},c.prototype._raiseUserSignedOut=function(){a.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},c.prototype.addUserSessionChanged=function(y){this._userSessionChanged.addHandler(y)},c.prototype.removeUserSessionChanged=function(y){this._userSessionChanged.removeHandler(y)},c.prototype._raiseUserSessionChanged=function(){a.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},c}(s.AccessTokenEvents)},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.Timer=void 0;var a=function(){function y(m,_){for(var C=0;C<_.length;C++){var R=_[C];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(m,R.key,R)}}return function(m,_,C){return _&&y(m.prototype,_),C&&y(m,C),m}}(),s=o(0),u=o(1),h=o(17);function c(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")}function p(y,m){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||typeof m!="object"&&typeof m!="function"?y:m}n.Timer=function(y){function m(_){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.Global.timer,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;c(this,m);var F=p(this,y.call(this,_));return F._timer=C,F._nowFunc=R||function(){return Date.now()/1e3},F}return function(C,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);C.prototype=Object.create(R&&R.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(C,R):C.__proto__=R)}(m,y),m.prototype.init=function(C){C<=0&&(C=1),C=parseInt(C);var R=this.now+C;if(this.expiration===R&&this._timerHandle)s.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),s.Log.debug("Timer.init timer "+this._name+" for duration:",C),this._expiration=R;var F=5;C<F&&(F=C),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*F)}},m.prototype.cancel=function(){this._timerHandle&&(s.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},m.prototype._callback=function(){var C=this._expiration-this.now;s.Log.debug("Timer.callback; "+this._name+" timer expires in:",C),this._expiration<=this.now&&(this.cancel(),y.prototype.raise.call(this))},a(m,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),m}(h.Event)},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.SilentRenewService=void 0;var a=o(0);n.SilentRenewService=function(){function s(u){(function(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")})(this,s),this._userManager=u}return s.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(h){}).catch(function(h){a.Log.error("SilentRenewService.start: Error from getUser:",h.message)}))},s.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},s.prototype._tokenExpiring=function(){var h=this;this._userManager.signinSilent().then(function(c){a.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(c){a.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",c.message),h._userManager.events._raiseSilentRenewError(c)})},s}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.CordovaPopupNavigator=void 0;var a=o(21);n.CordovaPopupNavigator=function(){function s(){(function(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")})(this,s)}return s.prototype.prepare=function(h){var c=new a.CordovaPopupWindow(h);return Promise.resolve(c)},s}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.CordovaIFrameNavigator=void 0;var a=o(21);n.CordovaIFrameNavigator=function(){function s(){(function(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")})(this,s)}return s.prototype.prepare=function(h){h.popupWindowFeatures="hidden=yes";var c=new a.CordovaPopupWindow(h);return Promise.resolve(c)},s}()},function(r,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.Version="1.11.6"}])})})(ND);var Fi=Ri(),aP=Sa();function kD(e,t){var r,n,o,a;throw e.error==="invalid_redirect_uri"?new Error(`Dynamic client registration failed: the provided redirect uri [${(r=t.redirectUrl)===null||r===void 0?void 0:r.toString()}] is invalid - ${(n=e.error_description)!==null&&n!==void 0?n:""}`):e.error==="invalid_client_metadata"?new Error(`Dynamic client registration failed: the provided client metadata ${JSON.stringify(t)} is invalid - ${(o=e.error_description)!==null&&o!==void 0?o:""}`):new Error(`Dynamic client registration failed: ${e.error} - ${(a=e.error_description)!==null&&a!==void 0?a:""}`)}function DD(e,t){if(e.client_id===void 0)throw new Error(`Dynamic client registration failed: no client_id has been found on ${JSON.stringify(e)}`);if(t.redirectUrl&&(e.redirect_uris===void 0||e.redirect_uris[0]!==t.redirectUrl.toString()))throw new Error(`Dynamic client registration failed: the returned redirect URIs ${JSON.stringify(e.redirect_uris)} don't match the provided ${JSON.stringify([t.redirectUrl.toString()])}`)}async function LD(e,t){var r;if(!t.registrationEndpoint)throw new Error("Dynamic Registration could not be completed because the issuer has no registration endpoint.");if(!Array.isArray(t.idTokenSigningAlgValuesSupported))throw new Error("The OIDC issuer discovery profile is missing the 'id_token_signing_alg_values_supported' value, which is mandatory.");const n=Fi.determineSigningAlg(t.idTokenSigningAlgValuesSupported,Fi.PREFERRED_SIGNING_ALG),o={client_name:e.clientName,application_type:"web",redirect_uris:[(r=e.redirectUrl)===null||r===void 0?void 0:r.toString()],subject_type:"public",token_endpoint_auth_method:"client_secret_basic",id_token_signed_response_alg:n,grant_types:["authorization_code","refresh_token"]},a={"Content-Type":"application/json"},s=await fetch(t.registrationEndpoint.toString(),{method:"POST",headers:a,body:JSON.stringify(o)});if(s.ok){const u=await s.json();return DD(u,e),{clientId:u.client_id,clientSecret:u.client_secret,idTokenSignedResponseAlg:u.id_token_signed_response_alg,clientType:"dynamic"}}throw s.status===400&&kD(await s.json(),e),new Error(`Dynamic client registration failed: the server returned ${s.status} ${s.statusText} - ${await s.text()}`)}function UD(e){return e.error!==void 0&&typeof e.error=="string"}function tA(e){return e.error_description!==void 0&&typeof e.error_description=="string"}function MD(e){return e.error_uri!==void 0&&typeof e.error_uri=="string"}function BD(e){return e.access_token!==void 0&&typeof e.access_token=="string"}function jD(e){return e.id_token!==void 0&&typeof e.id_token=="string"}function HD(e){return e.refresh_token!==void 0&&typeof e.refresh_token=="string"}function $D(e){return e.token_type!==void 0&&typeof e.token_type=="string"}function VD(e){return e.expires_in===void 0||typeof e.expires_in=="number"}function KD(e,t){if(t.grantType&&(!e.grantTypesSupported||!e.grantTypesSupported.includes(t.grantType)))throw new Error(`The issuer [${e.issuer}] does not support the [${t.grantType}] grant`);if(!e.tokenEndpoint)throw new Error(`This issuer [${e.issuer}] does not have a token endpoint`)}function lP(e,t){if(UD(e))throw new Fi.OidcProviderError(`Token endpoint returned error [${e.error}]${tA(e)?`: ${e.error_description}`:""}${MD(e)?` (see ${e.error_uri})`:""}`,e.error,tA(e)?e.error_description:void 0);if(!BD(e))throw new Fi.InvalidResponseError(["access_token"]);if(!jD(e))throw new Fi.InvalidResponseError(["id_token"]);if(!$D(e))throw new Fi.InvalidResponseError(["token_type"]);if(!VD(e))throw new Fi.InvalidResponseError(["expires_in"]);if(!t&&e.token_type.toLowerCase()!=="bearer")throw new Error(`Invalid token endpoint response: requested a [Bearer] token, but got a 'token_type' value of [${e.token_type}].`);return e}async function WD(e,t,r,n){KD(e,r);const o={"content-type":"application/x-www-form-urlencoded"};let a;n&&(a=await Fi.generateDpopKeyPair(),o.DPoP=await Fi.createDpopHeader(e.tokenEndpoint,"POST",a)),t.clientSecret&&(o.Authorization=`Basic ${btoa(`${t.clientId}:${t.clientSecret}`)}`);const s={grant_type:r.grantType,redirect_uri:r.redirectUrl,code:r.code,code_verifier:r.codeVerifier,client_id:t.clientId},u={method:"POST",headers:o,body:new URLSearchParams(s).toString()},c=await(await aP.fetch(e.tokenEndpoint,u)).json(),p=lP(c,n),y=await Fi.getWebidFromTokenPayload(p.id_token,e.jwksUri,e.issuer,t.clientId);return{accessToken:p.access_token,idToken:p.id_token,refreshToken:HD(p)?p.refresh_token:void 0,webId:y,dpopKey:a,expiresIn:p.expires_in}}async function GD(e){let t;try{const r=new vi.OidcClient({response_mode:"query",loadUserInfo:!1});if(t=await r.processSigninResponse(e),r.settings.metadata===void 0)throw new Error("Cannot retrieve issuer metadata from client information in storage.");if(r.settings.metadata.jwks_uri===void 0)throw new Error("Missing some issuer metadata from client information in storage: 'jwks_uri' is undefined");if(r.settings.metadata.issuer===void 0)throw new Error("Missing some issuer metadata from client information in storage: 'issuer' is undefined");if(r.settings.client_id===void 0)throw new Error("Missing some client information in storage: 'client_id' is undefined");const n=await Fi.getWebidFromTokenPayload(t.id_token,r.settings.metadata.jwks_uri,r.settings.metadata.issuer,r.settings.client_id);return{accessToken:t.access_token,idToken:t.id_token,webId:n,refreshToken:t.refresh_token}}catch(r){throw new Error(`Problem handling Auth Code Grant (Flow) redirect - URL [${e}]: ${r}`)}}async function qD(e,t,r){return WD(e,t,r,!0)}const zD=e=>{try{return new URL(e),!0}catch{return!1}};async function JD(e,t,r,n){if(r.clientId===void 0)throw new Error("No client ID available when trying to refresh the access token.");const o={grant_type:"refresh_token",refresh_token:e,scope:Fi.DEFAULT_SCOPES};let a={};n!==void 0&&(a={DPoP:await Fi.createDpopHeader(t.tokenEndpoint,"POST",n)});let s={};r.clientSecret!==void 0?s={Authorization:`Basic ${btoa(`${r.clientId}:${r.clientSecret}`)}`}:zD(r.clientId)&&(o.client_id=r.clientId);const u=await aP.fetch(t.tokenEndpoint,{method:"POST",body:new URLSearchParams(o).toString(),headers:{...a,...s,"Content-Type":"application/x-www-form-urlencoded"}});let h;try{h=await u.json()}catch{throw new Error(`The token endpoint of issuer ${t.issuer} returned a malformed response.`)}const c=lP(h,n!==void 0),p=await Fi.getWebidFromTokenPayload(c.id_token,t.jwksUri,t.issuer,r.clientId);return{accessToken:c.access_token,idToken:c.id_token,refreshToken:typeof c.refresh_token=="string"?c.refresh_token:void 0,webId:p,dpopKey:n,expiresIn:c.expires_in}}function QD(e){const t=new URL(e);return t.searchParams.delete("code"),t.searchParams.delete("state"),t.hash="",e.includes(`${t.origin}/`)?t.href:`${t.origin}${t.href.substring(t.origin.length+1)}`}async function YD(){await new vi.OidcClient({response_mode:"query"}).clearStaleState(new vi.WebStorageStateStore({}));const t=window.localStorage,r=[];for(let n=0;n<=t.length;n+=1){const o=t.key(n);o&&(o.match(/^oidc\..+$/)||o.match(/^solidClientAuthenticationUser:.+$/))&&r.push(o)}r.forEach(n=>t.removeItem(n))}const XD=Object.freeze(Object.defineProperty({__proto__:null,CordovaIFrameNavigator:vi.CordovaIFrameNavigator,CordovaPopupNavigator:vi.CordovaPopupNavigator,InMemoryWebStorage:vi.InMemoryWebStorage,Log:vi.Log,OidcClient:vi.OidcClient,SessionMonitor:vi.SessionMonitor,User:vi.User,UserManager:vi.UserManager,Version:vi.Version,WebStorageStateStore:vi.WebStorageStateStore,clearOidcPersistentStorage:YD,getBearerToken:GD,getDpopToken:qD,refresh:JD,registerClient:LD,removeOidcQueryParam:QD},Symbol.toStringTag,{value:"Module"})),Kl=ip(XD);var rA;function ZD(){if(rA)return Jf;rA=1,Object.defineProperty(Jf,"__esModule",{value:!0});const e=Ri(),t=Sa(),r=Kl,n=(a,s)=>(0,t.fetch)(a,s);let o=class{constructor(s,u,h,c,p){this.loginHandler=s,this.redirectHandler=u,this.logoutHandler=h,this.sessionInfoManager=c,this.issuerConfigFetcher=p,this.login=async(y,m)=>{var _,C;await this.sessionInfoManager.clear(y.sessionId);const R=(_=y.redirectUrl)!==null&&_!==void 0?_:(0,r.removeOidcQueryParam)(window.location.href);if(!(0,e.isValidRedirectUrl)(R))throw new Error(`${R} is not a valid redirect URL, it is either a malformed IRI or it includes a hash fragment.`);await this.loginHandler.handle({...y,redirectUrl:R,clientName:(C=y.clientName)!==null&&C!==void 0?C:y.clientId,eventEmitter:m})},this.fetch=n,this.logout=async y=>{await this.logoutHandler.handle(y),this.fetch=n},this.getSessionInfo=async y=>this.sessionInfoManager.get(y),this.getAllSessionInfo=async()=>this.sessionInfoManager.getAll(),this.validateCurrentSession=async y=>{const m=await this.sessionInfoManager.get(y);return m===void 0||m.clientAppId===void 0||m.issuer===void 0?null:m},this.handleIncomingRedirect=async(y,m)=>{try{const _=await this.redirectHandler.handle(y,m);return this.fetch=_.fetch.bind(window),this.cleanUrlAfterRedirect(y),{isLoggedIn:_.isLoggedIn,webId:_.webId,sessionId:_.sessionId,expirationDate:_.expirationDate}}catch(_){this.cleanUrlAfterRedirect(y),m.emit(e.EVENTS.ERROR,"redirect",_);return}}}cleanUrlAfterRedirect(s){const u=new URL(s);u.searchParams.delete("state"),u.searchParams.delete("code"),u.searchParams.delete("id_token"),u.searchParams.delete("access_token"),u.searchParams.delete("error"),u.searchParams.delete("error_description"),u.searchParams.delete("iss"),window.history.replaceState(null,"",u.toString())}};return Jf.default=o,Jf}var Qf={},nA;function eL(){if(nA)return Qf;nA=1,Object.defineProperty(Qf,"__esModule",{value:!0});const e=Ri();function t(o){return typeof o.oidcIssuer=="string"}function r(o){return typeof o.redirectUrl=="string"}let n=class{constructor(a,s,u,h){this.storageUtility=a,this.oidcHandler=s,this.issuerConfigFetcher=u,this.clientRegistrar=h}async canHandle(a){return t(a)&&r(a)}async handle(a){if(!t(a))throw new e.ConfigurationError(`OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ${JSON.stringify(a)}`);if(!r(a))throw new e.ConfigurationError(`OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ${JSON.stringify(a)}`);const s=await this.issuerConfigFetcher.fetchConfig(a.oidcIssuer),u=await(0,e.handleRegistration)(a,s,this.storageUtility,this.clientRegistrar),h={issuer:s.issuer,dpop:a.tokenType.toLowerCase()==="dpop",...a,issuerConfiguration:s,client:u};return this.oidcHandler.handle(h)}};return Qf.default=n,Qf}var Yf={},iA;function tL(){if(iA)return Yf;iA=1,Object.defineProperty(Yf,"__esModule",{value:!0});const e=Ri(),t=Kl;let r=class{constructor(o,a){this.storageUtility=o,this.redirector=a}async canHandle(o){return!!(o.issuerConfiguration.grantTypesSupported&&o.issuerConfiguration.grantTypesSupported.indexOf("authorization_code")>-1)}async handle(o){var a;const s={authority:o.issuer.toString(),client_id:o.client.clientId,client_secret:o.client.clientSecret,redirect_uri:o.redirectUrl.toString(),post_logout_redirect_uri:o.redirectUrl.toString(),response_type:"code",scope:e.DEFAULT_SCOPES,filterProtocolClaims:!0,loadUserInfo:!1,code_verifier:!0,prompt:(a=o.prompt)!==null&&a!==void 0?a:"consent"},u=new t.OidcClient(s),{redirector:h}=this,c=this.storageUtility;try{const p=await u.createSigninRequest();await Promise.all([c.setForUser(p.state._id,{sessionId:o.sessionId}),c.setForUser(o.sessionId,{codeVerifier:p.state._code_verifier,issuer:o.issuer.toString(),redirectUrl:o.redirectUrl,dpop:o.dpop?"true":"false"})]),h.redirect(p.url.toString(),{handleRedirect:o.handleRedirect})}catch(p){console.error(p)}}};return Yf.default=r,Yf}var pm={},oA;function rL(){return oA||(oA=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WELL_KNOWN_OPENID_CONFIG=void 0;const t=Ri(),r=Sa();e.WELL_KNOWN_OPENID_CONFIG=".well-known/openid-configuration";const n={issuer:{toKey:"issuer",convertToUrl:!0},authorization_endpoint:{toKey:"authorizationEndpoint",convertToUrl:!0},token_endpoint:{toKey:"tokenEndpoint",convertToUrl:!0},userinfo_endpoint:{toKey:"userinfoEndpoint",convertToUrl:!0},jwks_uri:{toKey:"jwksUri",convertToUrl:!0},registration_endpoint:{toKey:"registrationEndpoint",convertToUrl:!0},scopes_supported:{toKey:"scopesSupported"},response_types_supported:{toKey:"responseTypesSupported"},response_modes_supported:{toKey:"responseModesSupported"},grant_types_supported:{toKey:"grantTypesSupported"},acr_values_supported:{toKey:"acrValuesSupported"},subject_types_supported:{toKey:"subjectTypesSupported"},id_token_signing_alg_values_supported:{toKey:"idTokenSigningAlgValuesSupported"},id_token_encryption_alg_values_supported:{toKey:"idTokenEncryptionAlgValuesSupported"},id_token_encryption_enc_values_supported:{toKey:"idTokenEncryptionEncValuesSupported"},userinfo_signing_alg_values_supported:{toKey:"userinfoSigningAlgValuesSupported"},userinfo_encryption_alg_values_supported:{toKey:"userinfoEncryptionAlgValuesSupported"},userinfo_encryption_enc_values_supported:{toKey:"userinfoEncryptionEncValuesSupported"},request_object_signing_alg_values_supported:{toKey:"requestObjectSigningAlgValuesSupported"},request_object_encryption_alg_values_supported:{toKey:"requestObjectEncryptionAlgValuesSupported"},request_object_encryption_enc_values_supported:{toKey:"requestObjectEncryptionEncValuesSupported"},token_endpoint_auth_methods_supported:{toKey:"tokenEndpointAuthMethodsSupported"},token_endpoint_auth_signing_alg_values_supported:{toKey:"tokenEndpointAuthSigningAlgValuesSupported"},display_values_supported:{toKey:"displayValuesSupported"},claim_types_supported:{toKey:"claimTypesSupported"},claims_supported:{toKey:"claimsSupported"},service_documentation:{toKey:"serviceDocumentation"},claims_locales_supported:{toKey:"claimsLocalesSupported"},ui_locales_supported:{toKey:"uiLocalesSupported"},claims_parameter_supported:{toKey:"claimsParameterSupported"},request_parameter_supported:{toKey:"requestParameterSupported"},request_uri_parameter_supported:{toKey:"requestUriParameterSupported"},require_request_uri_registration:{toKey:"requireRequestUriRegistration"},op_policy_uri:{toKey:"opPolicyUri",convertToUrl:!0},op_tos_uri:{toKey:"opTosUri",convertToUrl:!0}};function o(s){const u={};return Object.keys(s).forEach(h=>{n[h]&&(u[n[h].toKey]=s[h])}),Array.isArray(u.scopesSupported)||(u.scopesSupported=["openid"]),u}class a{constructor(u){this.storageUtility=u}static getLocalStorageKey(u){return`issuerConfig:${u}`}async fetchConfig(u){let h;const c=new URL(e.WELL_KNOWN_OPENID_CONFIG,u.endsWith("/")?u:`${u}/`).href,p=await(0,r.fetch)(c);try{h=o(await p.json())}catch(y){throw new t.ConfigurationError(`[${u.toString()}] has an invalid configuration: ${y.message}`)}return await this.storageUtility.set(a.getLocalStorageKey(u),JSON.stringify(h)),h}}e.default=a}(pm)),pm}var wc={},Bo={},sA;function zv(){if(sA)return Bo;sA=1,Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.SessionInfoManager=Bo.clear=Bo.getUnauthenticatedSession=void 0;const e=Ri(),t=Op(),r=Kl,n=Sa();function o(){return{isLoggedIn:!1,sessionId:(0,t.v4)(),fetch:n.fetch}}Bo.getUnauthenticatedSession=o;async function a(u,h){await Promise.all([h.deleteAllUserData(u,{secure:!1}),h.deleteAllUserData(u,{secure:!0}),h.delete("clientKey",{secure:!1})]),await(0,r.clearOidcPersistentStorage)()}Bo.clear=a;let s=class{constructor(h){this.storageUtility=h}update(h,c){throw new Error("Not Implemented")}async get(h){var c;const p=await this.storageUtility.getForUser(h,"isLoggedIn",{secure:!0}),y=await this.storageUtility.getForUser(h,"webId",{secure:!0}),m=await this.storageUtility.getForUser(h,"clientId",{secure:!1}),_=await this.storageUtility.getForUser(h,"clientSecret",{secure:!1}),C=await this.storageUtility.getForUser(h,"redirectUrl",{secure:!1}),R=await this.storageUtility.getForUser(h,"refreshToken",{secure:!0}),F=await this.storageUtility.getForUser(h,"issuer",{secure:!1}),b=(c=await this.storageUtility.getForUser(h,"tokenType",{secure:!1}))!==null&&c!==void 0?c:"DPoP";if(!(0,e.isSupportedTokenType)(b))throw new Error(`Tokens of type [${b}] are not supported.`);if(!(m===void 0&&p===void 0&&y===void 0&&R===void 0))return{sessionId:h,webId:y,isLoggedIn:p==="true",redirectUrl:C,refreshToken:R,issuer:F,clientAppId:m,clientAppSecret:_,tokenType:b}}async getAll(){throw new Error("Not implemented")}async clear(h){return a(h,this.storageUtility)}async register(h){throw new Error("Not implemented")}async getRegisteredSessionIdAll(){throw new Error("Not implemented")}async clearAll(){throw new Error("Not implemented")}};return Bo.SessionInfoManager=s,Bo}var aA;function nL(){if(aA)return wc;aA=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.FallbackRedirectHandler=void 0;const e=zv();let t=class{async canHandle(n){try{return new URL(n),!0}catch(o){throw new Error(`[${n}] is not a valid URL, and cannot be used as a redirect URL: ${o}`)}}async handle(n){return(0,e.getUnauthenticatedSession)()}};return wc.FallbackRedirectHandler=t,wc}var Xf={},lA;function iL(){if(lA)return Xf;lA=1,Object.defineProperty(Xf,"__esModule",{value:!0});let e=class{constructor(r){this.sessionInfoManager=r}async canHandle(){return!0}async handle(r){await this.sessionInfoManager.clear(r)}};return Xf.default=e,Xf}var _c={},uA;function oL(){if(uA)return _c;uA=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.AuthCodeRedirectHandler=void 0;const e=Sa(),t=Ri(),r=Kl;let n=class{constructor(a,s,u,h,c){this.storageUtility=a,this.sessionInfoManager=s,this.issuerConfigFetcher=u,this.clientRegistrar=h,this.tokerRefresher=c}async canHandle(a){try{const s=new URL(a);return s.searchParams.get("code")!==null&&s.searchParams.get("state")!==null}catch(s){throw new Error(`[${a}] is not a valid URL, and cannot be used as a redirect URL: ${s}`)}}async handle(a,s){if(!await this.canHandle(a))throw new Error(`AuthCodeRedirectHandler cannot handle [${a}]: it is missing one of [code, state].`);const u=new URL(a),h=u.searchParams.get("state"),c=await this.storageUtility.getForUser(h,"sessionId",{errorIfNull:!0}),{issuerConfig:p,codeVerifier:y,redirectUrl:m,dpop:_}=await(0,t.loadOidcContextFromStorage)(c,this.storageUtility,this.issuerConfigFetcher),C=u.searchParams.get("iss");if(typeof C=="string"&&C!==p.issuer)throw new Error(`The value of the iss parameter (${C}) does not match the issuer identifier of the authorization server (${p.issuer}). See [rfc9207](https://www.rfc-editor.org/rfc/rfc9207.html#section-2.3-3.1.1)`);if(y===void 0)throw new Error(`The code verifier for session ${c} is missing from storage.`);if(m===void 0)throw new Error(`The redirect URL for session ${c} is missing from storage.`);const R=await this.clientRegistrar.getClient({sessionId:c},p);let F;const b=Date.now();_?(F=await(0,r.getDpopToken)(p,R,{grantType:"authorization_code",code:u.searchParams.get("code"),codeVerifier:y,redirectUrl:m}),window.localStorage.removeItem(`oidc.${h}`)):F=await(0,r.getBearerToken)(u.toString());let E;F.refreshToken!==void 0&&(E={sessionId:c,refreshToken:F.refreshToken,tokenRefresher:this.tokerRefresher});const P=await(0,t.buildAuthenticatedFetch)(e.fetch,F.accessToken,{dpopKey:F.dpopKey,refreshOptions:E,eventEmitter:s,expiresIn:F.expiresIn});await this.storageUtility.setForUser(c,{webId:F.webId,isLoggedIn:"true"},{secure:!0});const j=await this.sessionInfoManager.get(c);if(!j)throw new Error(`Could not retrieve session: [${c}].`);return Object.assign(j,{fetch:P,expirationDate:typeof F.expiresIn=="number"?b+F.expiresIn*1e3:null})}};return _c.AuthCodeRedirectHandler=n,_c}var Zf={},cA;function sL(){if(cA)return Zf;cA=1,Object.defineProperty(Zf,"__esModule",{value:!0});const e=Ri();let t=class extends e.AggregateHandler{constructor(n){super(n)}};return Zf.default=t,Zf}var eh={},dA;function aL(){if(dA)return eh;dA=1,Object.defineProperty(eh,"__esModule",{value:!0});let e=class{get storage(){return window.localStorage}async get(r){return this.storage.getItem(r)||void 0}async set(r,n){this.storage.setItem(r,n)}async delete(r){this.storage.removeItem(r)}};return eh.default=e,eh}var th={},fA;function lL(){if(fA)return th;fA=1,Object.defineProperty(th,"__esModule",{value:!0});let e=class{redirect(r,n){n&&n.handleRedirect?n.handleRedirect(r):n&&n.redirectByReplacingState?window.history.replaceState({},"",r):window.location.href=r}};return th.default=e,th}var rh={},hA;function uL(){if(hA)return rh;hA=1,Object.defineProperty(rh,"__esModule",{value:!0});const e=Kl;let t=class{constructor(n){this.storageUtility=n}async getClient(n,o){const[a,s]=await Promise.all([this.storageUtility.getForUser(n.sessionId,"clientId",{secure:!1}),this.storageUtility.getForUser(n.sessionId,"clientSecret",{secure:!1})]);if(a)return{clientId:a,clientSecret:s,clientType:"dynamic"};try{const u=await(0,e.registerClient)(n,o),h={clientId:u.clientId};return u.clientSecret&&(h.clientSecret=u.clientSecret),u.idTokenSignedResponseAlg&&(h.idTokenSignedResponseAlg=u.idTokenSignedResponseAlg),await this.storageUtility.setForUser(n.sessionId,h,{secure:!1}),u}catch(u){throw new Error(`Client registration failed: [${u}]`)}}};return rh.default=t,rh}var Sc={},pA;function cL(){if(pA)return Sc;pA=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.ErrorOidcHandler=void 0;const e=Ri(),t=zv();let r=class{async canHandle(o){try{return new URL(o).searchParams.has("error")}catch(a){throw new Error(`[${o}] is not a valid URL, and cannot be used as a redirect URL: ${a}`)}}async handle(o,a){if(a!==void 0){const s=new URL(o),u=s.searchParams.get("error"),h=s.searchParams.get("error_description");a.emit(e.EVENTS.ERROR,u,h)}return(0,t.getUnauthenticatedSession)()}};return Sc.ErrorOidcHandler=r,Sc}var nh={},gA;function dL(){if(gA)return nh;gA=1,Object.defineProperty(nh,"__esModule",{value:!0});const e=Ri(),t=Kl;let r=class{constructor(o,a,s){this.storageUtility=o,this.issuerConfigFetcher=a,this.clientRegistrar=s}async refresh(o,a,s,u){const h=await(0,e.loadOidcContextFromStorage)(o,this.storageUtility,this.issuerConfigFetcher),c=await this.clientRegistrar.getClient({sessionId:o},h.issuerConfig);if(a===void 0)throw new Error(`Session [${o}] has no refresh token to allow it to refresh its access token.`);if(h.dpop&&s===void 0)throw new Error(`For session [${o}], the key bound to the DPoP access token must be provided to refresh said access token.`);const p=await(0,t.refresh)(a,h.issuerConfig,c,s);return p.refreshToken!==void 0&&(u==null||u.emit(e.EVENTS.NEW_REFRESH_TOKEN,p.refreshToken),await this.storageUtility.setForUser(o,{refreshToken:p.refreshToken})),p}};return nh.default=r,nh}var yA;function uP(){if(yA)return vc;yA=1;var e=an&&an.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(vc,"__esModule",{value:!0}),vc.getClientAuthenticationWithDependencies=void 0;const t=Ri(),r=e(OD()),n=e(ZD()),o=e(eL()),a=e(tL()),s=e(rL()),u=nL(),h=e(iL()),c=zv(),p=oL(),y=e(sL()),m=e(aL()),_=e(lL()),C=e(uL()),R=cL(),F=e(dL());function b(E){const P=new t.InMemoryStorage,j=E.secureStorage||P,H=E.insecureStorage||new m.default,$=new r.default(j,H),O=new s.default($),ne=new C.default($),ee=new c.SessionInfoManager($),D=new F.default($,O,ne),Q=new o.default($,new a.default($,new _.default),O,ne),De=new y.default([new R.ErrorOidcHandler,new p.AuthCodeRedirectHandler($,ee,O,ne,D),new u.FallbackRedirectHandler]);return new n.default(Q,De,new h.default(ee),ee,O)}return vc.getClientAuthenticationWithDependencies=b,vc}var Zs={},mA;function fL(){if(mA)return Zs;mA=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.KEY_CURRENT_URL=Zs.KEY_CURRENT_SESSION=void 0;const e=Ri();return Zs.KEY_CURRENT_SESSION=`${e.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentSession`,Zs.KEY_CURRENT_URL=`${e.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentUrl`,Zs}var vA;function dP(){if(vA)return Xs;vA=1;var e=an&&an.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.Session=Xs.silentlyAuthenticate=void 0;const t=Ri(),r=Op(),n=e(fd()),o=uP(),a=fL();async function s(c,p,y){var m;const _=await p.validateCurrentSession(c);return _!==null?(window.localStorage.setItem(a.KEY_CURRENT_URL,window.location.href),await p.login({sessionId:c,prompt:"none",oidcIssuer:_.issuer,redirectUrl:_.redirectUrl,clientId:_.clientAppId,clientSecret:_.clientAppSecret,tokenType:(m=_.tokenType)!==null&&m!==void 0?m:"DPoP"},y.events),!0):!1}Xs.silentlyAuthenticate=s;function u(c){return!!(c!=null&&c.isLoggedIn)}let h=class cP extends n.default{constructor(p={},y=void 0){super(),this.tokenRequestInProgress=!1,this.login=async m=>{var _;return await this.clientAuthentication.login({sessionId:this.info.sessionId,...m,tokenType:(_=m.tokenType)!==null&&_!==void 0?_:"DPoP"},this.events),new Promise(()=>{})},this.fetch=async(m,_)=>this.clientAuthentication.fetch(m,_),this.internalLogout=async m=>{window.localStorage.removeItem(a.KEY_CURRENT_SESSION),await this.clientAuthentication.logout(this.info.sessionId),this.info.isLoggedIn=!1,m&&this.events.emit(t.EVENTS.LOGOUT)},this.logout=async()=>this.internalLogout(!0),this.handleIncomingRedirect=async(m={})=>{var _;if(this.info.isLoggedIn)return this.info;if(this.tokenRequestInProgress)return;const C=typeof m=="string"?{url:m}:m,R=(_=C.url)!==null&&_!==void 0?_:window.location.href;this.tokenRequestInProgress=!0;const F=await this.clientAuthentication.handleIncomingRedirect(R,this.events);if(u(F)){this.setSessionInfo(F);const b=window.localStorage.getItem(a.KEY_CURRENT_URL);b===null?this.events.emit(t.EVENTS.LOGIN):(window.localStorage.removeItem(a.KEY_CURRENT_URL),this.events.emit(t.EVENTS.SESSION_RESTORED,b))}else if(C.restorePreviousSession===!0){const b=window.localStorage.getItem(a.KEY_CURRENT_SESSION);if(b!==null&&await s(b,this.clientAuthentication,this))return new Promise(()=>{})}return this.tokenRequestInProgress=!1,F},this.events=new Proxy(this,(0,t.buildProxyHandler)(cP.prototype,"events only implements ISessionEventListener")),p.clientAuthentication?this.clientAuthentication=p.clientAuthentication:p.secureStorage&&p.insecureStorage?this.clientAuthentication=(0,o.getClientAuthenticationWithDependencies)({secureStorage:p.secureStorage,insecureStorage:p.insecureStorage}):this.clientAuthentication=(0,o.getClientAuthenticationWithDependencies)({}),p.sessionInfo?this.info={sessionId:p.sessionInfo.sessionId,isLoggedIn:!1,webId:p.sessionInfo.webId}:this.info={sessionId:y??(0,r.v4)(),isLoggedIn:!1},this.events.on(t.EVENTS.LOGIN,()=>window.localStorage.setItem(a.KEY_CURRENT_SESSION,this.info.sessionId)),this.events.on(t.EVENTS.SESSION_EXPIRED,()=>this.internalLogout(!1)),this.events.on(t.EVENTS.ERROR,()=>this.internalLogout(!1))}onLogin(p){this.events.on(t.EVENTS.LOGIN,p)}onLogout(p){this.events.on(t.EVENTS.LOGOUT,p)}onError(p){this.events.on(t.EVENTS.ERROR,p)}onSessionRestore(p){this.events.on(t.EVENTS.SESSION_RESTORED,p)}onSessionExpiration(p){this.events.on(t.EVENTS.SESSION_EXPIRED,p)}setSessionInfo(p){this.info.isLoggedIn=p.isLoggedIn,this.info.webId=p.webId,this.info.sessionId=p.sessionId,this.info.expirationDate=p.expirationDate,this.events.on(t.EVENTS.SESSION_EXTENDED,y=>{this.info.expirationDate=Date.now()+y*1e3})}};return Xs.Session=h,Xs}var Un={},wA;function hL(){if(wA)return Un;wA=1,Object.defineProperty(Un,"__esModule",{value:!0}),Un.events=Un.onSessionRestore=Un.onLogout=Un.onLogin=Un.handleIncomingRedirect=Un.logout=Un.login=Un.fetch=Un.getDefaultSession=void 0;const e=dP();let t;function r(){return typeof t>"u"&&(t=new e.Session),t}Un.getDefaultSession=r;const n=(...y)=>r().fetch(...y);Un.fetch=n;const o=(...y)=>r().login(...y);Un.login=o;const a=(...y)=>r().logout(...y);Un.logout=a;const s=(...y)=>r().handleIncomingRedirect(...y);Un.handleIncomingRedirect=s;const u=(...y)=>r().onLogin(...y);Un.onLogin=u;const h=(...y)=>r().onLogout(...y);Un.onLogout=h;const c=(...y)=>r().onSessionRestore(...y);Un.onSessionRestore=c;const p=()=>r().events;return Un.events=p,Un}var _A;function pL(){return _A||(_A=1,function(e){var t=an&&an.__createBinding||(Object.create?function(s,u,h,c){c===void 0&&(c=h);var p=Object.getOwnPropertyDescriptor(u,h);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[h]}}),Object.defineProperty(s,c,p)}:function(s,u,h,c){c===void 0&&(c=h),s[c]=u[h]}),r=an&&an.__exportStar||function(s,u){for(var h in s)h!=="default"&&!Object.prototype.hasOwnProperty.call(u,h)&&t(u,s,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.EVENTS=e.InMemoryStorage=e.ConfigurationError=e.NotImplementedError=e.getClientAuthenticationWithDependencies=e.Session=void 0;var n=dP();Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return n.Session}});var o=uP();Object.defineProperty(e,"getClientAuthenticationWithDependencies",{enumerable:!0,get:function(){return o.getClientAuthenticationWithDependencies}}),r(hL(),e);var a=Ri();Object.defineProperty(e,"NotImplementedError",{enumerable:!0,get:function(){return a.NotImplementedError}}),Object.defineProperty(e,"ConfigurationError",{enumerable:!0,get:function(){return a.ConfigurationError}}),Object.defineProperty(e,"InMemoryStorage",{enumerable:!0,get:function(){return a.InMemoryStorage}}),Object.defineProperty(e,"EVENTS",{enumerable:!0,get:function(){return a.EVENTS}})}(dm)),dm}var gm={},SA;function gL(){return SA||(SA=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=bt;/*! *****************************************************************************
		Copyright (c) Microsoft Corporation.

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.
		***************************************************************************** */function r(T,U,k,ge){function Pe(oe){return oe instanceof k?oe:new k(function(mt){mt(oe)})}return new(k||(k=Promise))(function(oe,mt){function Ht(Se){try{_t(ge.next(Se))}catch(Me){mt(Me)}}function wt(Se){try{_t(ge.throw(Se))}catch(Me){mt(Me)}}function _t(Se){Se.done?oe(Se.value):Pe(Se.value).then(Ht,wt)}_t((ge=ge.apply(T,U||[])).next())})}function n(T,U){var k={label:0,sent:function(){if(oe[0]&1)throw oe[1];return oe[1]},trys:[],ops:[]},ge,Pe,oe,mt;return mt={next:Ht(0),throw:Ht(1),return:Ht(2)},typeof Symbol=="function"&&(mt[Symbol.iterator]=function(){return this}),mt;function Ht(_t){return function(Se){return wt([_t,Se])}}function wt(_t){if(ge)throw new TypeError("Generator is already executing.");for(;k;)try{if(ge=1,Pe&&(oe=_t[0]&2?Pe.return:_t[0]?Pe.throw||((oe=Pe.return)&&oe.call(Pe),0):Pe.next)&&!(oe=oe.call(Pe,_t[1])).done)return oe;switch(Pe=0,oe&&(_t=[_t[0]&2,oe.value]),_t[0]){case 0:case 1:oe=_t;break;case 4:return k.label++,{value:_t[1],done:!1};case 5:k.label++,Pe=_t[1],_t=[0];continue;case 7:_t=k.ops.pop(),k.trys.pop();continue;default:if(oe=k.trys,!(oe=oe.length>0&&oe[oe.length-1])&&(_t[0]===6||_t[0]===2)){k=0;continue}if(_t[0]===3&&(!oe||_t[1]>oe[0]&&_t[1]<oe[3])){k.label=_t[1];break}if(_t[0]===6&&k.label<oe[1]){k.label=oe[1],oe=_t;break}if(oe&&k.label<oe[2]){k.label=oe[2],k.ops.push(_t);break}oe[2]&&k.ops.pop(),k.trys.pop();continue}_t=U.call(T,k)}catch(Se){_t=[6,Se],Pe=0}finally{ge=oe=0}if(_t[0]&5)throw _t[1];return{value:_t[0]?_t[1]:void 0,done:!0}}}var o=function(){},a=o(),s=Object,u=function(T){return T===a},h=function(T){return typeof T=="function"},c=function(T,U){return s.assign({},T,U)},p="undefined",y=function(){return typeof window!=p},m=function(){return typeof document!=p},_=function(){return y()&&typeof window.requestAnimationFrame!=p},C=new WeakMap,R=0,F=function(T){var U=typeof T,k=T&&T.constructor,ge=k==Date,Pe,oe;if(s(T)===T&&!ge&&k!=RegExp){if(Pe=C.get(T),Pe)return Pe;if(Pe=++R+"~",C.set(T,Pe),k==Array){for(Pe="@",oe=0;oe<T.length;oe++)Pe+=F(T[oe])+",";C.set(T,Pe)}if(k==s){Pe="#";for(var mt=s.keys(T).sort();!u(oe=mt.pop());)u(T[oe])||(Pe+=oe+":"+F(T[oe])+",");C.set(T,Pe)}}else Pe=ge?T.toJSON():U=="symbol"?T.toString():U=="string"?JSON.stringify(T):""+T;return Pe},b=!0,E=function(){return b},P=y(),j=m(),H=P&&window.addEventListener?window.addEventListener.bind(window):o,$=j?document.addEventListener.bind(document):o,O=P&&window.removeEventListener?window.removeEventListener.bind(window):o,ne=j?document.removeEventListener.bind(document):o,ee=function(){var T=j&&document.visibilityState;return u(T)||T!=="hidden"},D=function(T){return $("visibilitychange",T),H("focus",T),function(){ne("visibilitychange",T),O("focus",T)}},Q=function(T){var U=function(){b=!0,T()},k=function(){b=!1};return H("online",U),H("offline",k),function(){O("online",U),O("offline",k)}},De={isOnline:E,isVisible:ee},ae={initFocus:D,initReconnect:Q},Ce=!y()||"Deno"in window,Be=function(T){return _()?window.requestAnimationFrame(T):setTimeout(T,1)},Ve=Ce?t.useEffect:t.useLayoutEffect,$e=typeof navigator<"u"&&navigator.connection,we=!Ce&&$e&&(["slow-2g","2g"].includes($e.effectiveType)||$e.saveData),Oe=function(T){if(h(T))try{T=T()}catch{T=""}var U=[].concat(T);T=typeof T=="string"?T:(Array.isArray(T)?T.length:T)?F(T):"";var k=T?"$swr$"+T:"";return[T,U,k]},me=new WeakMap,We=0,et=1,Et=2,Bt=function(T,U,k,ge,Pe,oe,mt){mt===void 0&&(mt=!0);var Ht=me.get(T),wt=Ht[0],_t=Ht[1],Se=Ht[3],Me=wt[U],Ne=_t[U];if(mt&&Ne)for(var _e=0;_e<Ne.length;++_e)Ne[_e](k,ge,Pe);return oe&&(delete Se[U],Me&&Me[0])?Me[0](Et).then(function(){return T.get(U)}):T.get(U)},Vt=0,Ke=function(){return++Vt},St=function(){for(var T=[],U=0;U<arguments.length;U++)T[U]=arguments[U];return r(void 0,void 0,void 0,function(){var k,ge,Pe,oe,mt,Ht,wt,_t,Se,Me,Ne,_e,je,st,it,tt,ct,Dt,Qt,Gt,Zt;return n(this,function(hr){switch(hr.label){case 0:if(k=T[0],ge=T[1],Pe=T[2],oe=T[3],mt=typeof oe=="boolean"?{revalidate:oe}:oe||{},Ht=u(mt.populateCache)?!0:mt.populateCache,wt=mt.revalidate!==!1,_t=mt.rollbackOnError!==!1,Se=mt.optimisticData,Me=Oe(ge),Ne=Me[0],_e=Me[2],!Ne)return[2];if(je=me.get(k),st=je[2],T.length<3)return[2,Bt(k,Ne,k.get(Ne),a,a,wt,!0)];if(it=Pe,ct=Ke(),st[Ne]=[ct,0],Dt=!u(Se),Qt=k.get(Ne),Dt&&(Gt=h(Se)?Se(Qt):Se,k.set(Ne,Gt),Bt(k,Ne,Gt)),h(it))try{it=it(k.get(Ne))}catch(er){tt=er}return it&&h(it.then)?[4,it.catch(function(er){tt=er})]:[3,2];case 1:if(it=hr.sent(),ct!==st[Ne][0]){if(tt)throw tt;return[2,it]}else tt&&Dt&&_t&&(Ht=!0,it=Qt,k.set(Ne,Qt));hr.label=2;case 2:return Ht&&(tt||(h(Ht)&&(it=Ht(it,Qt)),k.set(Ne,it)),k.set(_e,c(k.get(_e),{error:tt}))),st[Ne][1]=Ke(),[4,Bt(k,Ne,it,tt,a,wt,!!Ht)];case 3:if(Zt=hr.sent(),tt)throw tt;return[2,Ht?Zt:it]}})})},jt=function(T,U){for(var k in T)T[k][0]&&T[k][0](U)},Yt=function(T,U){if(!me.has(T)){var k=c(ae,U),ge={},Pe=St.bind(a,T),oe=o;if(me.set(T,[ge,{},{},{},Pe]),!Ce){var mt=k.initFocus(setTimeout.bind(a,jt.bind(a,ge,We))),Ht=k.initReconnect(setTimeout.bind(a,jt.bind(a,ge,et)));oe=function(){mt&&mt(),Ht&&Ht(),me.delete(T)}}return[T,Pe,oe]}return[T,me.get(T)[4]]},ut=function(T,U,k,ge,Pe){var oe=k.errorRetryCount,mt=Pe.retryCount,Ht=~~((Math.random()+.5)*(1<<(mt<8?mt:8)))*k.errorRetryInterval;!u(oe)&&mt>oe||setTimeout(ge,Ht,Pe)},Z=Yt(new Map),I=Z[0],S=Z[1],B=c({onLoadingSlow:o,onSuccess:o,onError:o,onErrorRetry:ut,onDiscarded:o,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:we?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:we?5e3:3e3,compare:function(T,U){return F(T)==F(U)},isPaused:function(){return!1},cache:I,mutate:S,fallback:{}},De),G=function(T,U){var k=c(T,U);if(U){var ge=T.use,Pe=T.fallback,oe=U.use,mt=U.fallback;ge&&oe&&(k.use=ge.concat(oe)),Pe&&mt&&(k.fallback=c(Pe,mt))}return k},de=t.createContext({}),Ee=function(T){var U=T.value,k=G(t.useContext(de),U),ge=U&&U.provider,Pe=t.useState(function(){return ge?Yt(ge(k.cache||I),U):a})[0];return Pe&&(k.cache=Pe[0],k.mutate=Pe[1]),Ve(function(){return Pe?Pe[2]:a},[]),t.createElement(de.Provider,c(T,{value:k}))},rt=function(T,U){var k=t.useState({})[1],ge=t.useRef(T),Pe=t.useRef({data:!1,error:!1,isValidating:!1}),oe=t.useCallback(function(mt){var Ht=!1,wt=ge.current;for(var _t in mt){var Se=_t;wt[Se]!==mt[Se]&&(wt[Se]=mt[Se],Pe.current[Se]&&(Ht=!0))}Ht&&!U.current&&k({})},[]);return Ve(function(){ge.current=T}),[ge,Pe.current,oe]},lt=function(T){return h(T[1])?[T[0],T[1],T[2]||{}]:[T[0],null,(T[1]===null?T[2]:T[1])||{}]},Nt=function(){return c(B,t.useContext(de))},Kt=function(T){return function(){for(var k=[],ge=0;ge<arguments.length;ge++)k[ge]=arguments[ge];var Pe=Nt(),oe=lt(k),mt=oe[0],Ht=oe[1],wt=oe[2],_t=G(Pe,wt),Se=T,Me=_t.use;if(Me)for(var Ne=Me.length;Ne-- >0;)Se=Me[Ne](Se);return Se(mt,Ht||_t.fetcher,_t)}},Xt=function(T,U,k){var ge=U[T]||(U[T]=[]);return ge.push(k),function(){var Pe=ge.indexOf(k);Pe>=0&&(ge[Pe]=ge[ge.length-1],ge.pop())}},dr={dedupe:!0},dn=function(T,U,k){var ge=k.cache,Pe=k.compare,oe=k.fallbackData,mt=k.suspense,Ht=k.revalidateOnMount,wt=k.refreshInterval,_t=k.refreshWhenHidden,Se=k.refreshWhenOffline,Me=me.get(ge),Ne=Me[0],_e=Me[1],je=Me[2],st=Me[3],it=Oe(T),tt=it[0],ct=it[1],Dt=it[2],Qt=t.useRef(!1),Gt=t.useRef(!1),Zt=t.useRef(tt),hr=t.useRef(U),er=t.useRef(k),xt=function(){return er.current},vr=function(){return xt().isVisible()&&xt().isOnline()},ht=function(nn){return ge.set(Dt,c(ge.get(Dt),nn))},Ct=ge.get(tt),$t=u(oe)?k.fallback[tt]:oe,Ft=u(Ct)?$t:Ct,Er=ge.get(Dt)||{},sr=Er.error,Hr=!Qt.current,ir=function(){return Hr&&!u(Ht)?Ht:xt().isPaused()?!1:mt?u(Ft)?!1:k.revalidateIfStale:u(Ft)||k.revalidateIfStale},Mt=function(){return!tt||!U?!1:Er.isValidating?!0:Hr&&ir()},kt=Mt(),Kr=rt({data:Ft,error:sr,isValidating:kt},Gt),Mr=Kr[0],Br=Kr[1],wr=Kr[2],Pr=t.useCallback(function(nn){return r(void 0,void 0,void 0,function(){var Wr,Or,wn,Kn,Wn,Zr,en,f,g,w,A,M,W;return n(this,function(Y){switch(Y.label){case 0:if(Wr=hr.current,!tt||!Wr||Gt.current||xt().isPaused())return[2,!1];Kn=!0,Wn=nn||{},Zr=!st[tt]||!Wn.dedupe,en=function(){return!Gt.current&&tt===Zt.current&&Qt.current},f=function(){var ue=st[tt];ue&&ue[1]===wn&&delete st[tt]},g={isValidating:!1},w=function(){ht({isValidating:!1}),en()&&wr(g)},ht({isValidating:!0}),wr({isValidating:!0}),Y.label=1;case 1:return Y.trys.push([1,3,,4]),Zr&&(Bt(ge,tt,Mr.current.data,Mr.current.error,!0),k.loadingTimeout&&!ge.get(tt)&&setTimeout(function(){Kn&&en()&&xt().onLoadingSlow(tt,k)},k.loadingTimeout),st[tt]=[Wr.apply(void 0,ct),Ke()]),W=st[tt],Or=W[0],wn=W[1],[4,Or];case 2:return Or=Y.sent(),Zr&&setTimeout(f,k.dedupingInterval),!st[tt]||st[tt][1]!==wn?(Zr&&en()&&xt().onDiscarded(tt),[2,!1]):(ht({error:a}),g.error=a,A=je[tt],!u(A)&&(wn<=A[0]||wn<=A[1]||A[1]===0)?(w(),Zr&&en()&&xt().onDiscarded(tt),[2,!1]):(Pe(Mr.current.data,Or)?g.data=Mr.current.data:g.data=Or,Pe(ge.get(tt),Or)||ge.set(tt,Or),Zr&&en()&&xt().onSuccess(Or,tt,k),[3,4]));case 3:return M=Y.sent(),f(),xt().isPaused()||(ht({error:M}),g.error=M,Zr&&en()&&(xt().onError(M,tt,k),(typeof k.shouldRetryOnError=="boolean"&&k.shouldRetryOnError||h(k.shouldRetryOnError)&&k.shouldRetryOnError(M))&&vr()&&xt().onErrorRetry(M,tt,k,Pr,{retryCount:(Wn.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return Kn=!1,w(),en()&&Zr&&Bt(ge,tt,g.data,g.error,!1),[2,!0]}})})},[tt]),At=t.useCallback(St.bind(a,ge,function(){return Zt.current}),[]);if(Ve(function(){hr.current=U,er.current=k}),Ve(function(){if(tt){var nn=tt!==Zt.current,Wr=Pr.bind(a,dr),Or=function(en,f,g){wr(c({error:f,isValidating:g},Pe(Mr.current.data,en)?a:{data:en}))},wn=0,Kn=function(en){if(en==We){var f=Date.now();xt().revalidateOnFocus&&f>wn&&vr()&&(wn=f+xt().focusThrottleInterval,Wr())}else if(en==et)xt().revalidateOnReconnect&&vr()&&Wr();else if(en==Et)return Pr()},Wn=Xt(tt,_e,Or),Zr=Xt(tt,Ne,Kn);return Gt.current=!1,Zt.current=tt,Qt.current=!0,nn&&wr({data:Ft,error:sr,isValidating:kt}),ir()&&(u(Ft)||Ce?Wr():Be(Wr)),function(){Gt.current=!0,Wn(),Zr()}}},[tt,Pr]),Ve(function(){var nn;function Wr(){var wn=h(wt)?wt(Ft):wt;wn&&nn!==-1&&(nn=setTimeout(Or,wn))}function Or(){!Mr.current.error&&(_t||xt().isVisible())&&(Se||xt().isOnline())?Pr(dr).then(Wr):Wr()}return Wr(),function(){nn&&(clearTimeout(nn),nn=-1)}},[wt,_t,Se,Pr]),t.useDebugValue(Ft),mt&&u(Ft)&&tt)throw hr.current=U,er.current=k,Gt.current=!1,u(sr)?Pr(dr):sr;return{mutate:At,get data(){return Br.data=!0,Ft},get error(){return Br.error=!0,sr},get isValidating(){return Br.isValidating=!0,kt}}},te=s.defineProperty(Ee,"default",{value:B}),fe=function(T){return Oe(T)[0]},K=Kt(dn);e.SWRConfig=te,e.default=K,e.mutate=S,e.unstable_serialize=fe,e.useSWRConfig=Nt}(gm)),gm}var np={},yL={get exports(){return np},set exports(e){np=e}},Uc={},mL={get exports(){return Uc},set exports(e){Uc=e}},EA;function vL(){return EA||(EA=1,function(e,t){(function(r,n){n(t,bt)})(an,function(r,n){function o(N,q,J,re,Re,le,xe){try{var Ye=N[le](xe),qe=Ye.value}catch(Ze){return void J(Ze)}Ye.done?q(qe):Promise.resolve(qe).then(re,Re)}function a(N){return function(){var q=this,J=arguments;return new Promise(function(re,Re){var le=N.apply(q,J);function xe(qe){o(le,re,Re,xe,Ye,"next",qe)}function Ye(qe){o(le,re,Re,xe,Ye,"throw",qe)}xe(void 0)})}}function s(){return(s=Object.assign||function(N){for(var q=1;q<arguments.length;q++){var J=arguments[q];for(var re in J)Object.prototype.hasOwnProperty.call(J,re)&&(N[re]=J[re])}return N}).apply(this,arguments)}function u(N,q){if(N==null)return{};var J,re,Re={},le=Object.keys(N);for(re=0;re<le.length;re++)J=le[re],q.indexOf(J)>=0||(Re[J]=N[J]);return Re}function h(N){var q=function(J,re){if(typeof J!="object"||J===null)return J;var Re=J[Symbol.toPrimitive];if(Re!==void 0){var le=Re.call(J,re||"default");if(typeof le!="object")return le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(re==="string"?String:Number)(J)}(N,"string");return typeof q=="symbol"?q:String(q)}n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var c={init:"init"},p=function(N){var q=N.value;return q===void 0?"":q},y=function(){return n.createElement(n.Fragment,null," ")},m={Cell:p,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function _(){for(var N=arguments.length,q=new Array(N),J=0;J<N;J++)q[J]=arguments[J];return q.reduce(function(re,Re){var le=Re.style,xe=Re.className;return re=s({},re,{},u(Re,["style","className"])),le&&(re.style=re.style?s({},re.style||{},{},le||{}):le),xe&&(re.className=re.className?re.className+" "+xe:xe),re.className===""&&delete re.className,re},{})}var C=function(N,q){return q===void 0&&(q={}),function(J){return J===void 0&&(J={}),[].concat(N,[J]).reduce(function(re,Re){return function le(xe,Ye,qe){return typeof Ye=="function"?le({},Ye(xe,qe)):Array.isArray(Ye)?_.apply(void 0,[xe].concat(Ye)):_(xe,Ye)}(re,Re,s({},q,{userProps:J}))},{})}},R=function(N,q,J,re){return J===void 0&&(J={}),N.reduce(function(Re,le){return le(Re,J)},q)},F=function(N,q,J){return J===void 0&&(J={}),N.forEach(function(re){re(q,J)})};function b(N,q,J,re){N.findIndex(function(Re){return Re.pluginName===J}),q.forEach(function(Re){N.findIndex(function(le){return le.pluginName===Re})})}function E(N,q){return typeof N=="function"?N(q):N}function P(N){var q=n.useRef();return q.current=N,n.useCallback(function(){return q.current},[])}var j=typeof document<"u"?n.useLayoutEffect:n.useEffect;function H(N,q){var J=n.useRef(!1);j(function(){J.current&&N(),J.current=!0},q)}function $(N,q,J){return J===void 0&&(J={}),function(re,Re){Re===void 0&&(Re={});var le=typeof re=="string"?q[re]:re;if(le===void 0)throw console.info(q),new Error("Renderer Error ☝️");return O(le,s({},N,{column:q},J,{},Re))}}function O(N,q){return function(re){return typeof re=="function"&&(Re=Object.getPrototypeOf(re)).prototype&&Re.prototype.isReactComponent;var Re}(J=N)||typeof J=="function"||function(re){return typeof re=="object"&&typeof re.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(re.$$typeof.description)}(J)?n.createElement(N,q):N;var J}function ne(N,q,J){return J===void 0&&(J=0),N.map(function(re){return D(re=s({},re,{parent:q,depth:J})),re.columns&&(re.columns=ne(re.columns,re,J+1)),re})}function ee(N){return Ve(N,"columns")}function D(N){var q=N.id,J=N.accessor,re=N.Header;if(typeof J=="string"){q=q||J;var Re=J.split(".");J=function(le){return function(xe,Ye,qe){if(!Ye)return xe;var Ze,pt=typeof Ye=="function"?Ye:JSON.stringify(Ye),dt=ae.get(pt)||function(){var gt=function(nt){return function yt(Ot,Lt){if(Lt===void 0&&(Lt=[]),Array.isArray(Ot))for(var tr=0;tr<Ot.length;tr+=1)yt(Ot[tr],Lt);else Lt.push(Ot);return Lt}(nt).map(function(yt){return String(yt).replace(".","_")}).join(".").replace(et,".").replace(Et,"").split(".")}(Ye);return ae.set(pt,gt),gt}();try{Ze=dt.reduce(function(gt,nt){return gt[nt]},xe)}catch{}return Ze!==void 0?Ze:qe}(le,Re)}}if(!q&&typeof re=="string"&&re&&(q=re),!q&&N.columns)throw console.error(N),new Error('A column ID (or unique "Header" value) is required!');if(!q)throw console.error(N),new Error("A column ID (or string accessor) is required!");return Object.assign(N,{id:q,accessor:J}),N}function Q(N,q){if(!q)throw new Error;return Object.assign(N,s({Header:y,Footer:y},m,{},q,{},N)),Object.assign(N,{originalWidth:N.width}),N}function De(N,q,J){J===void 0&&(J=function(){return{}});for(var re=[],Re=N,le=0,xe=function(){return le++},Ye=function(){var qe={headers:[]},Ze=[],pt=Re.some(function(dt){return dt.parent});Re.forEach(function(dt){var gt,nt=[].concat(Ze).reverse()[0];pt&&(dt.parent?gt=s({},dt.parent,{originalId:dt.parent.id,id:dt.parent.id+"_"+xe(),headers:[dt]},J(dt)):gt=Q(s({originalId:dt.id+"_placeholder",id:dt.id+"_placeholder_"+xe(),placeholderOf:dt,headers:[dt]},J(dt)),q),nt&&nt.originalId===gt.originalId?nt.headers.push(dt):Ze.push(gt)),qe.headers.push(dt)}),re.push(qe),Re=Ze};Re.length;)Ye();return re.reverse()}var ae=new Map;function Ce(){for(var N=arguments.length,q=new Array(N),J=0;J<N;J++)q[J]=arguments[J];for(var re=0;re<q.length;re+=1)if(q[re]!==void 0)return q[re]}function Be(N){if(typeof N=="function")return N}function Ve(N,q){var J=[];return function re(Re){Re.forEach(function(le){le[q]?re(le[q]):J.push(le)})}(N),J}function $e(N,q){var J=q.manualExpandedKey,re=q.expanded,Re=q.expandSubRows,le=Re===void 0||Re,xe=[];return N.forEach(function(Ye){return function qe(Ze,pt){pt===void 0&&(pt=!0),Ze.isExpanded=Ze.original&&Ze.original[J]||re[Ze.id],Ze.canExpand=Ze.subRows&&!!Ze.subRows.length,pt&&xe.push(Ze),Ze.subRows&&Ze.subRows.length&&Ze.isExpanded&&Ze.subRows.forEach(function(dt){return qe(dt,le)})}(Ye)}),xe}function we(N,q,J){return Be(N)||q[N]||J[N]||J.text}function Oe(N,q,J){return N?N(q,J):q===void 0}function me(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")}var We=null,et=/\[/g,Et=/\]/g,Bt=function(N){return s({role:"table"},N)},Vt=function(N){return s({role:"rowgroup"},N)},Ke=function(N,q){var J=q.column;return s({key:"header_"+J.id,colSpan:J.totalVisibleHeaderCount,role:"columnheader"},N)},St=function(N,q){var J=q.column;return s({key:"footer_"+J.id,colSpan:J.totalVisibleHeaderCount},N)},jt=function(N,q){return s({key:"headerGroup_"+q.index,role:"row"},N)},Yt=function(N,q){return s({key:"footerGroup_"+q.index},N)},ut=function(N,q){return s({key:"row_"+q.row.id,role:"row"},N)},Z=function(N,q){var J=q.cell;return s({key:"cell_"+J.row.id+"_"+J.column.id,role:"cell"},N)};function I(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],allColumns:[],allColumnsDeps:[],accessValue:[],materializedColumns:[],materializedColumnsDeps:[],useInstanceAfterData:[],visibleColumns:[],visibleColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],prepareRow:[],getTableProps:[Bt],getTableBodyProps:[Vt],getHeaderGroupProps:[jt],getFooterGroupProps:[Yt],getHeaderProps:[Ke],getFooterProps:[St],getRowProps:[ut],getCellProps:[Z],useFinalInstance:[]}}c.resetHiddenColumns="resetHiddenColumns",c.toggleHideColumn="toggleHideColumn",c.setHiddenColumns="setHiddenColumns",c.toggleHideAllColumns="toggleHideAllColumns";var S=function(N){N.getToggleHiddenProps=[B],N.getToggleHideAllColumnsProps=[G],N.stateReducers.push(de),N.useInstanceBeforeDimensions.push(Ee),N.headerGroupsDeps.push(function(q,J){var re=J.instance;return[].concat(q,[re.state.hiddenColumns])}),N.useInstance.push(rt)};S.pluginName="useColumnVisibility";var B=function(N,q){var J=q.column;return[N,{onChange:function(re){J.toggleHidden(!re.target.checked)},style:{cursor:"pointer"},checked:J.isVisible,title:"Toggle Column Visible"}]},G=function(N,q){var J=q.instance;return[N,{onChange:function(re){J.toggleHideAllColumns(!re.target.checked)},style:{cursor:"pointer"},checked:!J.allColumnsHidden&&!J.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!J.allColumnsHidden&&J.state.hiddenColumns.length}]};function de(N,q,J,re){if(q.type===c.init)return s({hiddenColumns:[]},N);if(q.type===c.resetHiddenColumns)return s({},N,{hiddenColumns:re.initialState.hiddenColumns||[]});if(q.type===c.toggleHideColumn){var Re=(q.value!==void 0?q.value:!N.hiddenColumns.includes(q.columnId))?[].concat(N.hiddenColumns,[q.columnId]):N.hiddenColumns.filter(function(le){return le!==q.columnId});return s({},N,{hiddenColumns:Re})}return q.type===c.setHiddenColumns?s({},N,{hiddenColumns:E(q.value,N.hiddenColumns)}):q.type===c.toggleHideAllColumns?s({},N,{hiddenColumns:(q.value!==void 0?q.value:!N.hiddenColumns.length)?re.allColumns.map(function(le){return le.id}):[]}):void 0}function Ee(N){var q=N.headers,J=N.state.hiddenColumns;n.useRef(!1).current;var re=0;q.forEach(function(Re){return re+=function le(xe,Ye){xe.isVisible=Ye&&!J.includes(xe.id);var qe=0;return xe.headers&&xe.headers.length?xe.headers.forEach(function(Ze){return qe+=le(Ze,xe.isVisible)}):qe=xe.isVisible?1:0,xe.totalVisibleHeaderCount=qe,qe}(Re,!0)})}function rt(N){var q=N.columns,J=N.flatHeaders,re=N.dispatch,Re=N.allColumns,le=N.getHooks,xe=N.state.hiddenColumns,Ye=N.autoResetHiddenColumns,qe=Ye===void 0||Ye,Ze=P(N),pt=Re.length===xe.length,dt=n.useCallback(function(Lt,tr){return re({type:c.toggleHideColumn,columnId:Lt,value:tr})},[re]),gt=n.useCallback(function(Lt){return re({type:c.setHiddenColumns,value:Lt})},[re]),nt=n.useCallback(function(Lt){return re({type:c.toggleHideAllColumns,value:Lt})},[re]),yt=C(le().getToggleHideAllColumnsProps,{instance:Ze()});J.forEach(function(Lt){Lt.toggleHidden=function(tr){re({type:c.toggleHideColumn,columnId:Lt.id,value:tr})},Lt.getToggleHiddenProps=C(le().getToggleHiddenProps,{instance:Ze(),column:Lt})});var Ot=P(qe);H(function(){Ot()&&re({type:c.resetHiddenColumns})},[re,q]),Object.assign(N,{allColumnsHidden:pt,toggleHideColumn:dt,setHiddenColumns:gt,toggleHideAllColumns:nt,getToggleHideAllColumnsProps:yt})}var lt={},Nt={},Kt=function(N,q,J){return N},Xt=function(N,q){return N.subRows||[]},dr=function(N,q,J){return""+(J?[J.id,q].join("."):q)},dn=function(N){return N};function te(N){var q=N.initialState,J=q===void 0?lt:q,re=N.defaultColumn,Re=re===void 0?Nt:re,le=N.getSubRows,xe=le===void 0?Xt:le,Ye=N.getRowId,qe=Ye===void 0?dr:Ye,Ze=N.stateReducer,pt=Ze===void 0?Kt:Ze,dt=N.useControlledState,gt=dt===void 0?dn:dt;return s({},u(N,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:J,defaultColumn:Re,getSubRows:xe,getRowId:qe,stateReducer:pt,useControlledState:gt})}function fe(N,q){q===void 0&&(q=0);var J=0,re=0,Re=0,le=0;return N.forEach(function(xe){var Ye=xe.headers;if(xe.totalLeft=q,Ye&&Ye.length){var qe=fe(Ye,q),Ze=qe[0],pt=qe[1],dt=qe[2],gt=qe[3];xe.totalMinWidth=Ze,xe.totalWidth=pt,xe.totalMaxWidth=dt,xe.totalFlexWidth=gt}else xe.totalMinWidth=xe.minWidth,xe.totalWidth=Math.min(Math.max(xe.minWidth,xe.width),xe.maxWidth),xe.totalMaxWidth=xe.maxWidth,xe.totalFlexWidth=xe.canResize?xe.totalWidth:0;xe.isVisible&&(q+=xe.totalWidth,J+=xe.totalMinWidth,re+=xe.totalWidth,Re+=xe.totalMaxWidth,le+=xe.totalFlexWidth)}),[J,re,Re,le]}function K(N){var q=N.data,J=N.rows,re=N.flatRows,Re=N.rowsById,le=N.column,xe=N.getRowId,Ye=N.getSubRows,qe=N.accessValueHooks,Ze=N.getInstance;q.forEach(function(pt,dt){return function gt(nt,yt,Ot,Lt,tr){Ot===void 0&&(Ot=0);var Cr=nt,nr=xe(nt,yt,Lt),Rt=Re[nr];if(Rt)Rt.subRows&&Rt.originalSubRows.forEach(function(Xe,gr){return gt(Xe,gr,Ot+1,Rt)});else if((Rt={id:nr,original:Cr,index:yt,depth:Ot,cells:[{}]}).cells.map=me,Rt.cells.filter=me,Rt.cells.forEach=me,Rt.cells[0].getCellProps=me,Rt.values={},tr.push(Rt),re.push(Rt),Re[nr]=Rt,Rt.originalSubRows=Ye(nt,yt),Rt.originalSubRows){var pr=[];Rt.originalSubRows.forEach(function(Xe,gr){return gt(Xe,gr,Ot+1,Rt,pr)}),Rt.subRows=pr}le.accessor&&(Rt.values[le.id]=le.accessor(nt,yt,Rt,tr,q)),Rt.values[le.id]=R(qe,Rt.values[le.id],{row:Rt,column:le,instance:Ze()})}(pt,dt,0,void 0,J)})}c.resetExpanded="resetExpanded",c.toggleRowExpanded="toggleRowExpanded",c.toggleAllRowsExpanded="toggleAllRowsExpanded";var T=function(N){N.getToggleAllRowsExpandedProps=[U],N.getToggleRowExpandedProps=[k],N.stateReducers.push(ge),N.useInstance.push(Pe),N.prepareRow.push(oe)};T.pluginName="useExpanded";var U=function(N,q){var J=q.instance;return[N,{onClick:function(re){J.toggleAllRowsExpanded()},style:{cursor:"pointer"},title:"Toggle All Rows Expanded"}]},k=function(N,q){var J=q.row;return[N,{onClick:function(){J.toggleRowExpanded()},style:{cursor:"pointer"},title:"Toggle Row Expanded"}]};function ge(N,q,J,re){if(q.type===c.init)return s({expanded:{}},N);if(q.type===c.resetExpanded)return s({},N,{expanded:re.initialState.expanded||{}});if(q.type===c.toggleAllRowsExpanded){var Re=q.value,le=re.rowsById,xe=Object.keys(le).length===Object.keys(N.expanded).length;if(Re!==void 0?Re:!xe){var Ye={};return Object.keys(le).forEach(function(yt){Ye[yt]=!0}),s({},N,{expanded:Ye})}return s({},N,{expanded:{}})}if(q.type===c.toggleRowExpanded){var qe,Ze=q.id,pt=q.value,dt=N.expanded[Ze],gt=pt!==void 0?pt:!dt;if(!dt&&gt)return s({},N,{expanded:s({},N.expanded,(qe={},qe[Ze]=!0,qe))});if(dt&&!gt){var nt=N.expanded;return nt[Ze],s({},N,{expanded:u(nt,[Ze].map(h))})}return N}}function Pe(N){var q=N.data,J=N.rows,re=N.rowsById,Re=N.manualExpandedKey,le=Re===void 0?"expanded":Re,xe=N.paginateExpandedRows,Ye=xe===void 0||xe,qe=N.expandSubRows,Ze=qe===void 0||qe,pt=N.autoResetExpanded,dt=pt===void 0||pt,gt=N.getHooks,nt=N.plugins,yt=N.state.expanded,Ot=N.dispatch;b(nt,["useSortBy","useGroupBy","usePivotColumns","useGlobalFilter"],"useExpanded");var Lt=P(dt),tr=!!(Object.keys(re).length&&Object.keys(yt).length);tr&&Object.keys(re).some(function(Nr){return!yt[Nr]})&&(tr=!1),H(function(){Lt()&&Ot({type:c.resetExpanded})},[Ot,q]);var Cr=n.useCallback(function(Nr,lr){Ot({type:c.toggleRowExpanded,id:Nr,value:lr})},[Ot]),nr=n.useCallback(function(Nr){return Ot({type:c.toggleAllRowsExpanded,value:Nr})},[Ot]),Rt=n.useMemo(function(){return Ye?$e(J,{manualExpandedKey:le,expanded:yt,expandSubRows:Ze}):J},[Ye,J,le,yt,Ze]),pr=n.useMemo(function(){return function(Nr){var lr=0;return Object.keys(Nr).forEach(function(fr){var Vr=fr.split(".");lr=Math.max(lr,Vr.length)}),lr}(yt)},[yt]),Xe=P(N),gr=C(gt().getToggleAllRowsExpandedProps,{instance:Xe()});Object.assign(N,{preExpandedRows:J,expandedRows:Rt,rows:Rt,expandedDepth:pr,isAllRowsExpanded:tr,toggleRowExpanded:Cr,toggleAllRowsExpanded:nr,getToggleAllRowsExpandedProps:gr})}function oe(N,q){var J=q.instance.getHooks,re=q.instance;N.toggleRowExpanded=function(Re){return re.toggleRowExpanded(N.id,Re)},N.getToggleRowExpandedProps=C(J().getToggleRowExpandedProps,{instance:re,row:N})}var mt=function(N,q,J){return N=N.filter(function(re){return q.some(function(Re){var le=re.values[Re];return String(le).toLowerCase().includes(String(J).toLowerCase())})})};mt.autoRemove=function(N){return!N};var Ht=function(N,q,J){return N.filter(function(re){return q.some(function(Re){var le=re.values[Re];return le===void 0||String(le).toLowerCase()===String(J).toLowerCase()})})};Ht.autoRemove=function(N){return!N};var wt=function(N,q,J){return N.filter(function(re){return q.some(function(Re){var le=re.values[Re];return le===void 0||String(le)===String(J)})})};wt.autoRemove=function(N){return!N};var _t=function(N,q,J){return N.filter(function(re){return q.some(function(Re){return re.values[Re].includes(J)})})};_t.autoRemove=function(N){return!N||!N.length};var Se=function(N,q,J){return N.filter(function(re){return q.some(function(Re){var le=re.values[Re];return le&&le.length&&J.every(function(xe){return le.includes(xe)})})})};Se.autoRemove=function(N){return!N||!N.length};var Me=function(N,q,J){return N.filter(function(re){return q.some(function(Re){var le=re.values[Re];return le&&le.length&&J.some(function(xe){return le.includes(xe)})})})};Me.autoRemove=function(N){return!N||!N.length};var Ne=function(N,q,J){return N.filter(function(re){return q.some(function(Re){var le=re.values[Re];return J.includes(le)})})};Ne.autoRemove=function(N){return!N||!N.length};var _e=function(N,q,J){return N.filter(function(re){return q.some(function(Re){return re.values[Re]===J})})};_e.autoRemove=function(N){return N===void 0};var je=function(N,q,J){return N.filter(function(re){return q.some(function(Re){return re.values[Re]==J})})};je.autoRemove=function(N){return N==null};var st=function(N,q,J){var re=J||[],Re=re[0],le=re[1];if((Re=typeof Re=="number"?Re:-1/0)>(le=typeof le=="number"?le:1/0)){var xe=Re;Re=le,le=xe}return N.filter(function(Ye){return q.some(function(qe){var Ze=Ye.values[qe];return Ze>=Re&&Ze<=le})})};st.autoRemove=function(N){return!N||typeof N[0]!="number"&&typeof N[1]!="number"};var it=Object.freeze({__proto__:null,text:mt,exactText:Ht,exactTextCase:wt,includes:_t,includesAll:Se,includesSome:Me,includesValue:Ne,exact:_e,equals:je,between:st});c.resetFilters="resetFilters",c.setFilter="setFilter",c.setAllFilters="setAllFilters";var tt=function(N){N.stateReducers.push(ct),N.useInstance.push(Dt)};function ct(N,q,J,re){if(q.type===c.init)return s({filters:[]},N);if(q.type===c.resetFilters)return s({},N,{filters:re.initialState.filters||[]});if(q.type===c.setFilter){var Re=q.columnId,le=q.filterValue,xe=re.allColumns,Ye=re.filterTypes,qe=xe.find(function(Ot){return Ot.id===Re});if(!qe)throw new Error("React-Table: Could not find a column with id: "+Re);var Ze=we(qe.filter,Ye||{},it),pt=N.filters.find(function(Ot){return Ot.id===Re}),dt=E(le,pt&&pt.value);return Oe(Ze.autoRemove,dt,qe)?s({},N,{filters:N.filters.filter(function(Ot){return Ot.id!==Re})}):s({},N,pt?{filters:N.filters.map(function(Ot){return Ot.id===Re?{id:Re,value:dt}:Ot})}:{filters:[].concat(N.filters,[{id:Re,value:dt}])})}if(q.type===c.setAllFilters){var gt=q.filters,nt=re.allColumns,yt=re.filterTypes;return s({},N,{filters:E(gt,N.filters).filter(function(Ot){var Lt=nt.find(function(tr){return tr.id===Ot.id});return!Oe(we(Lt.filter,yt||{},it).autoRemove,Ot.value,Lt)})})}}function Dt(N){var q=N.data,J=N.rows,re=N.flatRows,Re=N.rowsById,le=N.allColumns,xe=N.filterTypes,Ye=N.manualFilters,qe=N.defaultCanFilter,Ze=qe!==void 0&&qe,pt=N.disableFilters,dt=N.state.filters,gt=N.dispatch,nt=N.autoResetFilters,yt=nt===void 0||nt,Ot=n.useCallback(function(Xe,gr){gt({type:c.setFilter,columnId:Xe,filterValue:gr})},[gt]),Lt=n.useCallback(function(Xe){gt({type:c.setAllFilters,filters:Xe})},[gt]);le.forEach(function(Xe){var gr=Xe.id,Nr=Xe.accessor,lr=Xe.defaultCanFilter,fr=Xe.disableFilters;Xe.canFilter=Nr?Ce(fr!==!0&&void 0,pt!==!0&&void 0,!0):Ce(lr,Ze,!1),Xe.setFilter=function(_r){return Ot(Xe.id,_r)};var Vr=dt.find(function(_r){return _r.id===gr});Xe.filterValue=Vr&&Vr.value});var tr=n.useMemo(function(){if(Ye||!dt.length)return[J,re,Re];var Xe=[],gr={};return[function Nr(lr,fr){fr===void 0&&(fr=0);var Vr=lr;return(Vr=dt.reduce(function(_r,Gr){var Fr=Gr.id,Jr=Gr.value,rr=le.find(function(mn){return mn.id===Fr});if(!rr)return _r;fr===0&&(rr.preFilteredRows=_r);var kr=we(rr.filter,xe||{},it);return kr?(rr.filteredRows=kr(_r,[Fr],Jr),rr.filteredRows):(console.warn("Could not find a valid 'column.filter' for column with the ID: "+rr.id+"."),_r)},lr)).forEach(function(_r){Xe.push(_r),gr[_r.id]=_r,_r.subRows&&(_r.subRows=_r.subRows&&_r.subRows.length>0?Nr(_r.subRows,fr+1):_r.subRows)}),Vr}(J),Xe,gr]},[Ye,dt,J,re,Re,le,xe]),Cr=tr[0],nr=tr[1],Rt=tr[2];n.useMemo(function(){le.filter(function(Xe){return!dt.find(function(gr){return gr.id===Xe.id})}).forEach(function(Xe){Xe.preFilteredRows=Cr,Xe.filteredRows=Cr})},[Cr,dt,le]);var pr=P(yt);H(function(){pr()&&gt({type:c.resetFilters})},[gt,Ye?null:q]),Object.assign(N,{preFilteredRows:J,preFilteredFlatRows:re,preFilteredRowsById:Re,filteredRows:Cr,filteredFlatRows:nr,filteredRowsById:Rt,rows:Cr,flatRows:nr,rowsById:Rt,setFilter:Ot,setAllFilters:Lt})}tt.pluginName="useFilters",c.resetGlobalFilter="resetGlobalFilter",c.setGlobalFilter="setGlobalFilter";var Qt=function(N){N.stateReducers.push(Gt),N.useInstance.push(Zt)};function Gt(N,q,J,re){if(q.type===c.resetGlobalFilter)return s({},N,{globalFilter:re.initialState.globalFilter||void 0});if(q.type===c.setGlobalFilter){var Re=q.filterValue,le=re.userFilterTypes,xe=we(re.globalFilter,le||{},it),Ye=E(Re,N.globalFilter);return Oe(xe.autoRemove,Ye)?(N.globalFilter,u(N,["globalFilter"])):s({},N,{globalFilter:Ye})}}function Zt(N){var q=N.data,J=N.rows,re=N.flatRows,Re=N.rowsById,le=N.allColumns,xe=N.filterTypes,Ye=N.globalFilter,qe=N.manualGlobalFilter,Ze=N.state.globalFilter,pt=N.dispatch,dt=N.autoResetGlobalFilter,gt=dt===void 0||dt,nt=N.disableGlobalFilter,yt=n.useCallback(function(Rt){pt({type:c.setGlobalFilter,filterValue:Rt})},[pt]),Ot=n.useMemo(function(){if(qe||Ze===void 0)return[J,re,Re];var Rt=[],pr={},Xe=we(Ye,xe||{},it);if(!Xe)return console.warn("Could not find a valid 'globalFilter' option."),J;le.forEach(function(Nr){var lr=Nr.disableGlobalFilter;Nr.canFilter=Ce(lr!==!0&&void 0,nt!==!0&&void 0,!0)});var gr=le.filter(function(Nr){return Nr.canFilter===!0});return[function Nr(lr){return(lr=Xe(lr,gr.map(function(fr){return fr.id}),Ze)).forEach(function(fr){Rt.push(fr),pr[fr.id]=fr,fr.subRows=fr.subRows&&fr.subRows.length?Nr(fr.subRows):fr.subRows}),lr}(J),Rt,pr]},[qe,Ze,Ye,xe,le,J,re,Re,nt]),Lt=Ot[0],tr=Ot[1],Cr=Ot[2],nr=P(gt);H(function(){nr()&&pt({type:c.resetGlobalFilter})},[pt,qe?null:q]),Object.assign(N,{preGlobalFilteredRows:J,preGlobalFilteredFlatRows:re,preGlobalFilteredRowsById:Re,globalFilteredRows:Lt,globalFilteredFlatRows:tr,globalFilteredRowsById:Cr,rows:Lt,flatRows:tr,rowsById:Cr,setGlobalFilter:yt,disableGlobalFilter:nt})}function hr(N,q){return q.reduce(function(J,re){return J+(typeof re=="number"?re:0)},0)}Qt.pluginName="useGlobalFilter";var er=Object.freeze({__proto__:null,sum:hr,min:function(N){var q=N[0]||0;return N.forEach(function(J){typeof J=="number"&&(q=Math.min(q,J))}),q},max:function(N){var q=N[0]||0;return N.forEach(function(J){typeof J=="number"&&(q=Math.max(q,J))}),q},minMax:function(N){var q=N[0]||0,J=N[0]||0;return N.forEach(function(re){typeof re=="number"&&(q=Math.min(q,re),J=Math.max(J,re))}),q+".."+J},average:function(N){return hr(0,N)/N.length},median:function(N){if(!N.length)return null;var q=Math.floor(N.length/2),J=[].concat(N).sort(function(re,Re){return re-Re});return N.length%2!=0?J[q]:(J[q-1]+J[q])/2},unique:function(N){return Array.from(new Set(N).values())},uniqueCount:function(N){return new Set(N).size},count:function(N){return N.length}}),xt=[],vr={};c.resetGroupBy="resetGroupBy",c.setGroupBy="setGroupBy",c.toggleGroupBy="toggleGroupBy";var ht=function(N){N.getGroupByToggleProps=[Ct],N.stateReducers.push($t),N.visibleColumnsDeps.push(function(q,J){var re=J.instance;return[].concat(q,[re.state.groupBy])}),N.visibleColumns.push(Ft),N.useInstance.push(sr),N.prepareRow.push(Hr)};ht.pluginName="useGroupBy";var Ct=function(N,q){var J=q.header;return[N,{onClick:J.canGroupBy?function(re){re.persist(),J.toggleGroupBy()}:void 0,style:{cursor:J.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};function $t(N,q,J,re){if(q.type===c.init)return s({groupBy:[]},N);if(q.type===c.resetGroupBy)return s({},N,{groupBy:re.initialState.groupBy||[]});if(q.type===c.setGroupBy)return s({},N,{groupBy:q.value});if(q.type===c.toggleGroupBy){var Re=q.columnId,le=q.value,xe=le!==void 0?le:!N.groupBy.includes(Re);return s({},N,xe?{groupBy:[].concat(N.groupBy,[Re])}:{groupBy:N.groupBy.filter(function(Ye){return Ye!==Re})})}}function Ft(N,q){var J=q.instance.state.groupBy,re=J.map(function(le){return N.find(function(xe){return xe.id===le})}).filter(Boolean),Re=N.filter(function(le){return!J.includes(le.id)});return(N=[].concat(re,Re)).forEach(function(le){le.isGrouped=J.includes(le.id),le.groupedIndex=J.indexOf(le.id)}),N}var Er={};function sr(N){var q=N.data,J=N.rows,re=N.flatRows,Re=N.rowsById,le=N.allColumns,xe=N.flatHeaders,Ye=N.groupByFn,qe=Ye===void 0?ir:Ye,Ze=N.manualGroupBy,pt=N.aggregations,dt=pt===void 0?Er:pt,gt=N.plugins,nt=N.state.groupBy,yt=N.dispatch,Ot=N.autoResetGroupBy,Lt=Ot===void 0||Ot,tr=N.disableGroupBy,Cr=N.defaultCanGroupBy,nr=N.getHooks;b(gt,["useColumnOrder","useFilters"],"useGroupBy");var Rt=P(N);le.forEach(function(rr){var kr=rr.accessor,mn=rr.defaultGroupBy,bn=rr.disableGroupBy;rr.canGroupBy=kr?Ce(rr.canGroupBy,bn!==!0&&void 0,tr!==!0&&void 0,!0):Ce(rr.canGroupBy,mn,Cr,!1),rr.canGroupBy&&(rr.toggleGroupBy=function(){return N.toggleGroupBy(rr.id)}),rr.Aggregated=rr.Aggregated||rr.Cell});var pr=n.useCallback(function(rr,kr){yt({type:c.toggleGroupBy,columnId:rr,value:kr})},[yt]),Xe=n.useCallback(function(rr){yt({type:c.setGroupBy,value:rr})},[yt]);xe.forEach(function(rr){rr.getGroupByToggleProps=C(nr().getGroupByToggleProps,{instance:Rt(),header:rr})});var gr=n.useMemo(function(){if(Ze||!nt.length)return[J,re,Re,xt,vr,re,Re];var rr=nt.filter(function(Ln){return le.find(function(fo){return fo.id===Ln})}),kr=[],mn={},bn=[],It={},sn=[],yr={},Xn=function Ln(fo,Ji,Gl){if(Ji===void 0&&(Ji=0),Ji===rr.length)return fo.map(function(Eo){return s({},Eo,{depth:Ji})});var Aa=rr[Ji],jp=qe(fo,Aa);return Object.entries(jp).map(function(Eo,ql){var zl=Eo[0],Ls=Eo[1],Qi=Aa+":"+zl,Yi=Ln(Ls,Ji+1,Qi=Gl?Gl+">"+Qi:Qi),hn=Ji?Ve(Ls,"leafRows"):Ls,yd=function(gi,Ra,vd){var Us={};return le.forEach(function(An){if(rr.includes(An.id))Us[An.id]=Ra[0]?Ra[0].values[An.id]:null;else{var Jl=typeof An.aggregate=="function"?An.aggregate:dt[An.aggregate]||er[An.aggregate];if(Jl){var wd=Ra.map(function(Ms){return Ms.values[An.id]}),_d=gi.map(function(Ms){var yi=Ms.values[An.id];if(!vd&&An.aggregateValue){var Sd=typeof An.aggregateValue=="function"?An.aggregateValue:dt[An.aggregateValue]||er[An.aggregateValue];if(!Sd)throw console.info({column:An}),new Error("React Table: Invalid column.aggregateValue option for column listed above");yi=Sd(yi,Ms,An)}return yi});Us[An.id]=Jl(_d,wd)}else{if(An.aggregate)throw console.info({column:An}),new Error("React Table: Invalid column.aggregate option for column listed above");Us[An.id]=null}}}),Us}(hn,Ls,Ji),md={id:Qi,isGrouped:!0,groupByID:Aa,groupByVal:zl,values:yd,subRows:Yi,leafRows:hn,depth:Ji,index:ql};return Yi.forEach(function(gi){kr.push(gi),mn[gi.id]=gi,gi.isGrouped?(bn.push(gi),It[gi.id]=gi):(sn.push(gi),yr[gi.id]=gi)}),md})}(J);return Xn.forEach(function(Ln){kr.push(Ln),mn[Ln.id]=Ln,Ln.isGrouped?(bn.push(Ln),It[Ln.id]=Ln):(sn.push(Ln),yr[Ln.id]=Ln)}),[Xn,kr,mn,bn,It,sn,yr]},[Ze,nt,J,re,Re,le,dt,qe]),Nr=gr[0],lr=gr[1],fr=gr[2],Vr=gr[3],_r=gr[4],Gr=gr[5],Fr=gr[6],Jr=P(Lt);H(function(){Jr()&&yt({type:c.resetGroupBy})},[yt,Ze?null:q]),Object.assign(N,{preGroupedRows:J,preGroupedFlatRow:re,preGroupedRowsById:Re,groupedRows:Nr,groupedFlatRows:lr,groupedRowsById:fr,onlyGroupedFlatRows:Vr,onlyGroupedRowsById:_r,nonGroupedFlatRows:Gr,nonGroupedRowsById:Fr,rows:Nr,flatRows:lr,rowsById:fr,toggleGroupBy:pr,setGroupBy:Xe})}function Hr(N){N.allCells.forEach(function(q){var J;q.isGrouped=q.column.isGrouped&&q.column.id===N.groupByID,q.isPlaceholder=!q.isGrouped&&q.column.isGrouped,q.isAggregated=!q.isGrouped&&!q.isPlaceholder&&((J=N.subRows)==null?void 0:J.length)})}function ir(N,q){return N.reduce(function(J,re,Re){var le=""+re.values[q];return J[le]=Array.isArray(J[le])?J[le]:[],J[le].push(re),J},{})}var Mt=/([0-9]+)/gm;function kt(N,q){return N===q?0:N>q?1:-1}function Kr(N,q,J){return[N.values[J],q.values[J]]}function Mr(N){return typeof N=="number"?isNaN(N)||N===1/0||N===-1/0?"":String(N):typeof N=="string"?N:""}var Br=Object.freeze({__proto__:null,alphanumeric:function(N,q,J){var re=Kr(N,q,J),Re=re[0],le=re[1];for(Re=Mr(Re),le=Mr(le),Re=Re.split(Mt).filter(Boolean),le=le.split(Mt).filter(Boolean);Re.length&&le.length;){var xe=Re.shift(),Ye=le.shift(),qe=parseInt(xe,10),Ze=parseInt(Ye,10),pt=[qe,Ze].sort();if(isNaN(pt[0])){if(xe>Ye)return 1;if(Ye>xe)return-1}else{if(isNaN(pt[1]))return isNaN(qe)?-1:1;if(qe>Ze)return 1;if(Ze>qe)return-1}}return Re.length-le.length},datetime:function(N,q,J){var re=Kr(N,q,J),Re=re[0],le=re[1];return kt(Re=Re.getTime(),le=le.getTime())},basic:function(N,q,J){var re=Kr(N,q,J);return kt(re[0],re[1])},string:function(N,q,J){var re=Kr(N,q,J),Re=re[0],le=re[1];for(Re=Re.split("").filter(Boolean),le=le.split("").filter(Boolean);Re.length&&le.length;){var xe=Re.shift(),Ye=le.shift(),qe=xe.toLowerCase(),Ze=Ye.toLowerCase();if(qe>Ze)return 1;if(Ze>qe)return-1;if(xe>Ye)return 1;if(Ye>xe)return-1}return Re.length-le.length},number:function(N,q,J){var re=Kr(N,q,J),Re=re[0],le=re[1],xe=/[^0-9.]/gi;return kt(Re=Number(String(Re).replace(xe,"")),le=Number(String(le).replace(xe,"")))}});c.resetSortBy="resetSortBy",c.setSortBy="setSortBy",c.toggleSortBy="toggleSortBy",c.clearSortBy="clearSortBy",m.sortType="alphanumeric",m.sortDescFirst=!1;var wr=function(N){N.getSortByToggleProps=[Pr],N.stateReducers.push(At),N.useInstance.push(nn)};wr.pluginName="useSortBy";var Pr=function(N,q){var J=q.instance,re=q.column,Re=J.isMultiSortEvent,le=Re===void 0?function(xe){return xe.shiftKey}:Re;return[N,{onClick:re.canSort?function(xe){xe.persist(),re.toggleSortBy(void 0,!J.disableMultiSort&&le(xe))}:void 0,style:{cursor:re.canSort?"pointer":void 0},title:re.canSort?"Toggle SortBy":void 0}]};function At(N,q,J,re){if(q.type===c.init)return s({sortBy:[]},N);if(q.type===c.resetSortBy)return s({},N,{sortBy:re.initialState.sortBy||[]});if(q.type===c.clearSortBy)return s({},N,{sortBy:N.sortBy.filter(function(Rt){return Rt.id!==q.columnId})});if(q.type===c.setSortBy)return s({},N,{sortBy:q.sortBy});if(q.type===c.toggleSortBy){var Re,le=q.columnId,xe=q.desc,Ye=q.multi,qe=re.allColumns,Ze=re.disableMultiSort,pt=re.disableSortRemove,dt=re.disableMultiRemove,gt=re.maxMultiSortColCount,nt=gt===void 0?Number.MAX_SAFE_INTEGER:gt,yt=N.sortBy,Ot=qe.find(function(Rt){return Rt.id===le}).sortDescFirst,Lt=yt.find(function(Rt){return Rt.id===le}),tr=yt.findIndex(function(Rt){return Rt.id===le}),Cr=xe!=null,nr=[];return(Re=!Ze&&Ye?Lt?"toggle":"add":tr!==yt.length-1||yt.length!==1?"replace":Lt?"toggle":"replace")!="toggle"||pt||Cr||Ye&&dt||!(Lt&&Lt.desc&&!Ot||!Lt.desc&&Ot)||(Re="remove"),Re==="replace"?nr=[{id:le,desc:Cr?xe:Ot}]:Re==="add"?(nr=[].concat(yt,[{id:le,desc:Cr?xe:Ot}])).splice(0,nr.length-nt):Re==="toggle"?nr=yt.map(function(Rt){return Rt.id===le?s({},Rt,{desc:Cr?xe:!Lt.desc}):Rt}):Re==="remove"&&(nr=yt.filter(function(Rt){return Rt.id!==le})),s({},N,{sortBy:nr})}}function nn(N){var q=N.data,J=N.rows,re=N.flatRows,Re=N.allColumns,le=N.orderByFn,xe=le===void 0?Wr:le,Ye=N.sortTypes,qe=N.manualSortBy,Ze=N.defaultCanSort,pt=N.disableSortBy,dt=N.flatHeaders,gt=N.state.sortBy,nt=N.dispatch,yt=N.plugins,Ot=N.getHooks,Lt=N.autoResetSortBy,tr=Lt===void 0||Lt;b(yt,["useFilters","useGlobalFilter","useGroupBy","usePivotColumns"],"useSortBy");var Cr=n.useCallback(function(lr){nt({type:c.setSortBy,sortBy:lr})},[nt]),nr=n.useCallback(function(lr,fr,Vr){nt({type:c.toggleSortBy,columnId:lr,desc:fr,multi:Vr})},[nt]),Rt=P(N);dt.forEach(function(lr){var fr=lr.accessor,Vr=lr.canSort,_r=lr.disableSortBy,Gr=lr.id,Fr=fr?Ce(_r!==!0&&void 0,pt!==!0&&void 0,!0):Ce(Ze,Vr,!1);lr.canSort=Fr,lr.canSort&&(lr.toggleSortBy=function(rr,kr){return nr(lr.id,rr,kr)},lr.clearSortBy=function(){nt({type:c.clearSortBy,columnId:lr.id})}),lr.getSortByToggleProps=C(Ot().getSortByToggleProps,{instance:Rt(),column:lr});var Jr=gt.find(function(rr){return rr.id===Gr});lr.isSorted=!!Jr,lr.sortedIndex=gt.findIndex(function(rr){return rr.id===Gr}),lr.isSortedDesc=lr.isSorted?Jr.desc:void 0});var pr=n.useMemo(function(){if(qe||!gt.length)return[J,re];var lr=[],fr=gt.filter(function(Vr){return Re.find(function(_r){return _r.id===Vr.id})});return[function Vr(_r){var Gr=xe(_r,fr.map(function(Fr){var Jr=Re.find(function(mn){return mn.id===Fr.id});if(!Jr)throw new Error("React-Table: Could not find a column with id: "+Fr.id+" while sorting");var rr=Jr.sortType,kr=Be(rr)||(Ye||{})[rr]||Br[rr];if(!kr)throw new Error("React-Table: Could not find a valid sortType of '"+rr+"' for column '"+Fr.id+"'.");return function(mn,bn){return kr(mn,bn,Fr.id,Fr.desc)}}),fr.map(function(Fr){var Jr=Re.find(function(rr){return rr.id===Fr.id});return Jr&&Jr.sortInverted?Fr.desc:!Fr.desc}));return Gr.forEach(function(Fr){lr.push(Fr),Fr.subRows&&Fr.subRows.length!==0&&(Fr.subRows=Vr(Fr.subRows))}),Gr}(J),lr]},[qe,gt,J,re,Re,xe,Ye]),Xe=pr[0],gr=pr[1],Nr=P(tr);H(function(){Nr()&&nt({type:c.resetSortBy})},[qe?null:q]),Object.assign(N,{preSortedRows:J,preSortedFlatRows:re,sortedRows:Xe,sortedFlatRows:gr,rows:Xe,flatRows:gr,setSortBy:Cr,toggleSortBy:nr})}function Wr(N,q,J){return[].concat(N).sort(function(re,Re){for(var le=0;le<q.length;le+=1){var xe=q[le],Ye=J[le]===!1||J[le]==="desc",qe=xe(re,Re);if(qe!==0)return Ye?-qe:qe}return J[0]?re.index-Re.index:Re.index-re.index})}c.resetPage="resetPage",c.gotoPage="gotoPage",c.setPageSize="setPageSize";var Or=function(N){N.stateReducers.push(wn),N.useInstance.push(Kn)};function wn(N,q,J,re){if(q.type===c.init)return s({pageSize:10,pageIndex:0},N);if(q.type===c.resetPage)return s({},N,{pageIndex:re.initialState.pageIndex||0});if(q.type===c.gotoPage){var Re=re.pageCount,le=re.page,xe=E(q.pageIndex,N.pageIndex),Ye=!1;return xe>N.pageIndex?Ye=Re===-1?le.length>=N.pageSize:xe<Re:xe<N.pageIndex&&(Ye=xe>-1),Ye?s({},N,{pageIndex:xe}):N}if(q.type===c.setPageSize){var qe=q.pageSize,Ze=N.pageSize*N.pageIndex;return s({},N,{pageIndex:Math.floor(Ze/qe),pageSize:qe})}}function Kn(N){var q=N.rows,J=N.autoResetPage,re=J===void 0||J,Re=N.manualExpandedKey,le=Re===void 0?"expanded":Re,xe=N.plugins,Ye=N.pageCount,qe=N.paginateExpandedRows,Ze=qe===void 0||qe,pt=N.expandSubRows,dt=pt===void 0||pt,gt=N.state,nt=gt.pageSize,yt=gt.pageIndex,Ot=gt.expanded,Lt=gt.globalFilter,tr=gt.filters,Cr=gt.groupBy,nr=gt.sortBy,Rt=N.dispatch,pr=N.data,Xe=N.manualPagination;b(xe,["useGlobalFilter","useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination");var gr=P(re);H(function(){gr()&&Rt({type:c.resetPage})},[Rt,Xe?null:pr,Lt,tr,Cr,nr]);var Nr=Xe?Ye:Math.ceil(q.length/nt),lr=n.useMemo(function(){return Nr>0?[].concat(new Array(Nr)).fill(null).map(function(kr,mn){return mn}):[]},[Nr]),fr=n.useMemo(function(){var kr;if(Xe)kr=q;else{var mn=nt*yt,bn=mn+nt;kr=q.slice(mn,bn)}return Ze?kr:$e(kr,{manualExpandedKey:le,expanded:Ot,expandSubRows:dt})},[dt,Ot,le,Xe,yt,nt,Ze,q]),Vr=yt>0,_r=Nr===-1?fr.length>=nt:yt<Nr-1,Gr=n.useCallback(function(kr){Rt({type:c.gotoPage,pageIndex:kr})},[Rt]),Fr=n.useCallback(function(){return Gr(function(kr){return kr-1})},[Gr]),Jr=n.useCallback(function(){return Gr(function(kr){return kr+1})},[Gr]),rr=n.useCallback(function(kr){Rt({type:c.setPageSize,pageSize:kr})},[Rt]);Object.assign(N,{pageOptions:lr,pageCount:Nr,page:fr,canPreviousPage:Vr,canNextPage:_r,gotoPage:Gr,previousPage:Fr,nextPage:Jr,setPageSize:rr})}Or.pluginName="usePagination",c.resetPivot="resetPivot",c.togglePivot="togglePivot";var Wn=function(N){N.getPivotToggleProps=[en],N.stateReducers.push(f),N.useInstanceAfterData.push(g),N.allColumns.push(w),N.accessValue.push(A),N.materializedColumns.push(M),N.materializedColumnsDeps.push(W),N.visibleColumns.push(Y),N.visibleColumnsDeps.push(ue),N.useInstance.push(ie),N.prepareRow.push(ce)};Wn.pluginName="usePivotColumns";var Zr=[],en=function(N,q){var J=q.header;return[N,{onClick:J.canPivot?function(re){re.persist(),J.togglePivot()}:void 0,style:{cursor:J.canPivot?"pointer":void 0},title:"Toggle Pivot"}]};function f(N,q,J,re){if(q.type===c.init)return s({pivotColumns:Zr},N);if(q.type===c.resetPivot)return s({},N,{pivotColumns:re.initialState.pivotColumns||Zr});if(q.type===c.togglePivot){var Re=q.columnId,le=q.value,xe=le!==void 0?le:!N.pivotColumns.includes(Re);return s({},N,xe?{pivotColumns:[].concat(N.pivotColumns,[Re])}:{pivotColumns:N.pivotColumns.filter(function(Ye){return Ye!==Re})})}}function g(N){N.allColumns.forEach(function(q){q.isPivotSource=N.state.pivotColumns.includes(q.id)})}function w(N,q){var J=q.instance;return N.forEach(function(re){re.isPivotSource=J.state.pivotColumns.includes(re.id),re.uniqueValues=new Set}),N}function A(N,q){var J=q.column;return J.uniqueValues&&N!==void 0&&J.uniqueValues.add(N),N}function M(N,q){var J=q.instance,re=J.allColumns,Re=J.state;if(!Re.pivotColumns.length||!Re.groupBy||!Re.groupBy.length)return N;var le=Re.pivotColumns.map(function(qe){return re.find(function(Ze){return Ze.id===qe})}).filter(Boolean),xe=re.filter(function(qe){return!qe.isPivotSource&&!Re.groupBy.includes(qe.id)&&!Re.pivotColumns.includes(qe.id)}),Ye=ee(function qe(Ze,pt,dt){Ze===void 0&&(Ze=0),dt===void 0&&(dt=[]);var gt=le[Ze];return gt?Array.from(gt.uniqueValues).sort().map(function(nt){var yt=s({},gt,{Header:gt.PivotHeader||typeof gt.header=="string"?gt.Header+": "+nt:nt,isPivotGroup:!0,parent:pt,depth:Ze,id:pt?pt.id+"."+gt.id+"."+nt:gt.id+"."+nt,pivotValue:nt});return yt.columns=qe(Ze+1,yt,[].concat(dt,[function(Ot){return Ot.values[gt.id]===nt}])),yt}):xe.map(function(nt){return s({},nt,{canPivot:!1,isPivoted:!0,parent:pt,depth:Ze,id:""+(pt?pt.id+"."+nt.id:nt.id),accessor:function(yt,Ot,Lt){if(dt.every(function(tr){return tr(Lt)}))return Lt.values[nt.id]}})})}());return[].concat(N,Ye)}function W(N,q){var J=q.instance.state,re=J.pivotColumns,Re=J.groupBy;return[].concat(N,[re,Re])}function Y(N,q){var J=q.instance.state;return N=N.filter(function(re){return!re.isPivotSource}),J.pivotColumns.length&&J.groupBy&&J.groupBy.length&&(N=N.filter(function(re){return re.isGrouped||re.isPivoted})),N}function ue(N,q){var J=q.instance;return[].concat(N,[J.state.pivotColumns,J.state.groupBy])}function ie(N){var q=N.columns,J=N.allColumns,re=N.flatHeaders,Re=N.getHooks,le=N.plugins,xe=N.dispatch,Ye=N.autoResetPivot,qe=Ye===void 0||Ye,Ze=N.manaulPivot,pt=N.disablePivot,dt=N.defaultCanPivot;b(le,["useGroupBy"],"usePivotColumns");var gt=P(N);J.forEach(function(yt){var Ot=yt.accessor,Lt=yt.defaultPivot,tr=yt.disablePivot;yt.canPivot=Ot?Ce(yt.canPivot,tr!==!0&&void 0,pt!==!0&&void 0,!0):Ce(yt.canPivot,Lt,dt,!1),yt.canPivot&&(yt.togglePivot=function(){return N.togglePivot(yt.id)}),yt.Aggregated=yt.Aggregated||yt.Cell}),re.forEach(function(yt){yt.getPivotToggleProps=C(Re().getPivotToggleProps,{instance:gt(),header:yt})});var nt=P(qe);H(function(){nt()&&xe({type:c.resetPivot})},[xe,Ze?null:q]),Object.assign(N,{togglePivot:function(yt,Ot){xe({type:c.togglePivot,columnId:yt,value:Ot})}})}function ce(N){N.allCells.forEach(function(q){q.isPivoted=q.column.isPivoted})}c.resetSelectedRows="resetSelectedRows",c.toggleAllRowsSelected="toggleAllRowsSelected",c.toggleRowSelected="toggleRowSelected",c.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var he=function(N){N.getToggleRowSelectedProps=[ye],N.getToggleAllRowsSelectedProps=[Ae],N.getToggleAllPageRowsSelectedProps=[Fe],N.stateReducers.push(Ue),N.useInstance.push(Ge),N.prepareRow.push(ze)};he.pluginName="useRowSelect";var ye=function(N,q){var J=q.instance,re=q.row,Re=J.manualRowSelectedKey,le=Re===void 0?"isSelected":Re;return[N,{onChange:function(xe){re.toggleRowSelected(xe.target.checked)},style:{cursor:"pointer"},checked:!(!re.original||!re.original[le])||re.isSelected,title:"Toggle Row Selected",indeterminate:re.isSomeSelected}]},Ae=function(N,q){var J=q.instance;return[N,{onChange:function(re){J.toggleAllRowsSelected(re.target.checked)},style:{cursor:"pointer"},checked:J.isAllRowsSelected,title:"Toggle All Rows Selected",indeterminate:!!(!J.isAllRowsSelected&&Object.keys(J.state.selectedRowIds).length)}]},Fe=function(N,q){var J=q.instance;return[N,{onChange:function(re){J.toggleAllPageRowsSelected(re.target.checked)},style:{cursor:"pointer"},checked:J.isAllPageRowsSelected,title:"Toggle All Current Page Rows Selected",indeterminate:!!(!J.isAllPageRowsSelected&&J.page.some(function(re){var Re=re.id;return J.state.selectedRowIds[Re]}))}]};function Ue(N,q,J,re){if(q.type===c.init)return s({selectedRowIds:{}},N);if(q.type===c.resetSelectedRows)return s({},N,{selectedRowIds:re.initialState.selectedRowIds||{}});if(q.type===c.toggleAllRowsSelected){var Re=q.value,le=re.isAllRowsSelected,xe=re.rowsById,Ye=re.nonGroupedRowsById,qe=Ye===void 0?xe:Ye,Ze=Re!==void 0?Re:!le,pt=Object.assign({},N.selectedRowIds);return Ze?Object.keys(qe).forEach(function(Gr){pt[Gr]=!0}):Object.keys(qe).forEach(function(Gr){delete pt[Gr]}),s({},N,{selectedRowIds:pt})}if(q.type===c.toggleRowSelected){var dt=q.id,gt=q.value,nt=re.rowsById,yt=re.selectSubRows,Ot=yt===void 0||yt,Lt=re.getSubRows,tr=N.selectedRowIds[dt],Cr=gt!==void 0?gt:!tr;if(tr===Cr)return N;var nr=s({},N.selectedRowIds);return function Gr(Fr){var Jr=nt[Fr];if(Jr&&(Jr.isGrouped||(Cr?nr[Fr]=!0:delete nr[Fr]),Ot&&Lt(Jr)))return Lt(Jr).forEach(function(rr){return Gr(rr.id)})}(dt),s({},N,{selectedRowIds:nr})}if(q.type===c.toggleAllPageRowsSelected){var Rt=q.value,pr=re.page,Xe=re.rowsById,gr=re.selectSubRows,Nr=gr===void 0||gr,lr=re.isAllPageRowsSelected,fr=re.getSubRows,Vr=Rt!==void 0?Rt:!lr,_r=s({},N.selectedRowIds);return pr.forEach(function(Gr){return function Fr(Jr){var rr=Xe[Jr];if(rr.isGrouped||(Vr?_r[Jr]=!0:delete _r[Jr]),Nr&&fr(rr))return fr(rr).forEach(function(kr){return Fr(kr.id)})}(Gr.id)}),s({},N,{selectedRowIds:_r})}return N}function Ge(N){var q=N.data,J=N.rows,re=N.getHooks,Re=N.plugins,le=N.rowsById,xe=N.nonGroupedRowsById,Ye=xe===void 0?le:xe,qe=N.autoResetSelectedRows,Ze=qe===void 0||qe,pt=N.state.selectedRowIds,dt=N.selectSubRows,gt=dt===void 0||dt,nt=N.dispatch,yt=N.page,Ot=N.getSubRows;b(Re,["useFilters","useGroupBy","useSortBy","useExpanded","usePagination"],"useRowSelect");var Lt=n.useMemo(function(){var fr=[];return J.forEach(function(Vr){var _r=gt?function Gr(Fr,Jr,rr){if(Jr[Fr.id])return!0;var kr=rr(Fr);if(kr&&kr.length){var mn=!0,bn=!1;return kr.forEach(function(It){bn&&!mn||(Gr(It,Jr,rr)?bn=!0:mn=!1)}),!!mn||!!bn&&null}return!1}(Vr,pt,Ot):!!pt[Vr.id];Vr.isSelected=!!_r,Vr.isSomeSelected=_r===null,_r&&fr.push(Vr)}),fr},[J,gt,pt,Ot]),tr=!!(Object.keys(Ye).length&&Object.keys(pt).length),Cr=tr;tr&&Object.keys(Ye).some(function(fr){return!pt[fr]})&&(tr=!1),tr||yt&&yt.length&&yt.some(function(fr){var Vr=fr.id;return!pt[Vr]})&&(Cr=!1);var nr=P(Ze);H(function(){nr()&&nt({type:c.resetSelectedRows})},[nt,q]);var Rt=n.useCallback(function(fr){return nt({type:c.toggleAllRowsSelected,value:fr})},[nt]),pr=n.useCallback(function(fr){return nt({type:c.toggleAllPageRowsSelected,value:fr})},[nt]),Xe=n.useCallback(function(fr,Vr){return nt({type:c.toggleRowSelected,id:fr,value:Vr})},[nt]),gr=P(N),Nr=C(re().getToggleAllRowsSelectedProps,{instance:gr()}),lr=C(re().getToggleAllPageRowsSelectedProps,{instance:gr()});Object.assign(N,{selectedFlatRows:Lt,isAllRowsSelected:tr,isAllPageRowsSelected:Cr,toggleRowSelected:Xe,toggleAllRowsSelected:Rt,getToggleAllRowsSelectedProps:Nr,getToggleAllPageRowsSelectedProps:lr,toggleAllPageRowsSelected:pr})}function ze(N,q){var J=q.instance;N.toggleRowSelected=function(re){return J.toggleRowSelected(N.id,re)},N.getToggleRowSelectedProps=C(J.getHooks().getToggleRowSelectedProps,{instance:J,row:N})}var X=function(N){return{}},pe=function(N){return{}};c.setRowState="setRowState",c.setCellState="setCellState",c.resetRowState="resetRowState";var ve=function(N){N.stateReducers.push(be),N.useInstance.push(He),N.prepareRow.push(Je)};function be(N,q,J,re){var Re=re.initialRowStateAccessor,le=Re===void 0?X:Re,xe=re.initialCellStateAccessor,Ye=xe===void 0?pe:xe,qe=re.rowsById;if(q.type===c.init)return s({rowState:{}},N);if(q.type===c.resetRowState)return s({},N,{rowState:re.initialState.rowState||{}});if(q.type===c.setRowState){var Ze,pt=q.rowId,dt=q.value,gt=N.rowState[pt]!==void 0?N.rowState[pt]:le(qe[pt]);return s({},N,{rowState:s({},N.rowState,(Ze={},Ze[pt]=E(dt,gt),Ze))})}if(q.type===c.setCellState){var nt,yt,Ot,Lt,tr,Cr=q.rowId,nr=q.columnId,Rt=q.value,pr=N.rowState[Cr]!==void 0?N.rowState[Cr]:le(qe[Cr]),Xe=(pr==null||(nt=pr.cellState)==null?void 0:nt[nr])!==void 0?pr.cellState[nr]:Ye((yt=qe[Cr])==null||(Ot=yt.cells)==null?void 0:Ot.find(function(gr){return gr.column.id===nr}));return s({},N,{rowState:s({},N.rowState,(tr={},tr[Cr]=s({},pr,{cellState:s({},pr.cellState||{},(Lt={},Lt[nr]=E(Rt,Xe),Lt))}),tr))})}}function He(N){var q=N.autoResetRowState,J=q===void 0||q,re=N.data,Re=N.dispatch,le=n.useCallback(function(qe,Ze){return Re({type:c.setRowState,rowId:qe,value:Ze})},[Re]),xe=n.useCallback(function(qe,Ze,pt){return Re({type:c.setCellState,rowId:qe,columnId:Ze,value:pt})},[Re]),Ye=P(J);H(function(){Ye()&&Re({type:c.resetRowState})},[re]),Object.assign(N,{setRowState:le,setCellState:xe})}function Je(N,q){var J=q.instance,re=J.initialRowStateAccessor,Re=re===void 0?X:re,le=J.initialCellStateAccessor,xe=le===void 0?pe:le,Ye=J.state.rowState;N&&(N.state=Ye[N.id]!==void 0?Ye[N.id]:Re(N),N.setState=function(qe){return J.setRowState(N.id,qe)},N.cells.forEach(function(qe){N.state.cellState||(N.state.cellState={}),qe.state=N.state.cellState[qe.column.id]!==void 0?N.state.cellState[qe.column.id]:xe(qe),qe.setState=function(Ze){return J.setCellState(N.id,qe.column.id,Ze)}}))}ve.pluginName="useRowState",c.resetColumnOrder="resetColumnOrder",c.setColumnOrder="setColumnOrder";var Ut=function(N){N.stateReducers.push(at),N.visibleColumnsDeps.push(function(q,J){var re=J.instance;return[].concat(q,[re.state.columnOrder])}),N.visibleColumns.push(Ir),N.useInstance.push(Tt)};function at(N,q,J,re){return q.type===c.init?s({columnOrder:[]},N):q.type===c.resetColumnOrder?s({},N,{columnOrder:re.initialState.columnOrder||[]}):q.type===c.setColumnOrder?s({},N,{columnOrder:E(q.columnOrder,N.columnOrder)}):void 0}function Ir(N,q){var J=q.instance.state.columnOrder;if(!J||!J.length)return N;for(var re=[].concat(J),Re=[].concat(N),le=[],xe=function(){var Ye=re.shift(),qe=Re.findIndex(function(Ze){return Ze.id===Ye});qe>-1&&le.push(Re.splice(qe,1)[0])};Re.length&&re.length;)xe();return[].concat(le,Re)}function Tt(N){var q=N.dispatch;N.setColumnOrder=n.useCallback(function(J){return q({type:c.setColumnOrder,columnOrder:J})},[q])}Ut.pluginName="useColumnOrder",m.canResize=!0,c.columnStartResizing="columnStartResizing",c.columnResizing="columnResizing",c.columnDoneResizing="columnDoneResizing",c.resetResize="resetResize";var qt=function(N){N.getResizerProps=[Wt],N.getHeaderProps.push({style:{position:"relative"}}),N.stateReducers.push(Ur),N.useInstance.push(fn),N.useInstanceBeforeDimensions.push(Sr)},Wt=function(N,q){var J=q.instance,re=q.header,Re=J.dispatch,le=function(xe,Ye){var qe=!1;if(xe.type==="touchstart"){if(xe.touches&&xe.touches.length>1)return;qe=!0}var Ze,pt,dt=function(nr){var Rt=[];return function pr(Xe){Xe.columns&&Xe.columns.length&&Xe.columns.map(pr),Rt.push(Xe)}(nr),Rt}(Ye).map(function(nr){return[nr.id,nr.totalWidth]}),gt=qe?Math.round(xe.touches[0].clientX):xe.clientX,nt=function(){window.cancelAnimationFrame(Ze),Ze=null,Re({type:c.columnDoneResizing})},yt=function(){window.cancelAnimationFrame(Ze),Ze=null,Re({type:c.columnResizing,clientX:pt})},Ot=function(nr){pt=nr,Ze||(Ze=window.requestAnimationFrame(yt))},Lt={mouse:{moveEvent:"mousemove",moveHandler:function(nr){return Ot(nr.clientX)},upEvent:"mouseup",upHandler:function(nr){document.removeEventListener("mousemove",Lt.mouse.moveHandler),document.removeEventListener("mouseup",Lt.mouse.upHandler),nt()}},touch:{moveEvent:"touchmove",moveHandler:function(nr){return nr.cancelable&&(nr.preventDefault(),nr.stopPropagation()),Ot(nr.touches[0].clientX),!1},upEvent:"touchend",upHandler:function(nr){document.removeEventListener(Lt.touch.moveEvent,Lt.touch.moveHandler),document.removeEventListener(Lt.touch.upEvent,Lt.touch.moveHandler),nt()}}},tr=qe?Lt.touch:Lt.mouse,Cr=!!function(){if(typeof We=="boolean")return We;var nr=!1;try{var Rt={get passive(){return nr=!0,!1}};window.addEventListener("test",null,Rt),window.removeEventListener("test",null,Rt)}catch{nr=!1}return We=nr}()&&{passive:!1};document.addEventListener(tr.moveEvent,tr.moveHandler,Cr),document.addEventListener(tr.upEvent,tr.upHandler,Cr),Re({type:c.columnStartResizing,columnId:Ye.id,columnWidth:Ye.totalWidth,headerIdWidths:dt,clientX:gt})};return[N,{onMouseDown:function(xe){return xe.persist()||le(xe,re)},onTouchStart:function(xe){return xe.persist()||le(xe,re)},style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function Ur(N,q){if(q.type===c.init)return s({columnResizing:{columnWidths:{}}},N);if(q.type===c.resetResize)return s({},N,{columnResizing:{columnWidths:{}}});if(q.type===c.columnStartResizing){var J=q.clientX,re=q.columnId,Re=q.columnWidth,le=q.headerIdWidths;return s({},N,{columnResizing:s({},N.columnResizing,{startX:J,headerIdWidths:le,columnWidth:Re,isResizingColumn:re})})}if(q.type===c.columnResizing){var xe=q.clientX,Ye=N.columnResizing,qe=Ye.startX,Ze=Ye.columnWidth,pt=Ye.headerIdWidths,dt=(xe-qe)/Ze,gt={};return(pt===void 0?[]:pt).forEach(function(nt){var yt=nt[0],Ot=nt[1];gt[yt]=Math.max(Ot+Ot*dt,0)}),s({},N,{columnResizing:s({},N.columnResizing,{columnWidths:s({},N.columnResizing.columnWidths,{},gt)})})}return q.type===c.columnDoneResizing?s({},N,{columnResizing:s({},N.columnResizing,{startX:null,isResizingColumn:null})}):void 0}qt.pluginName="useResizeColumns";var Sr=function(N){var q=N.flatHeaders,J=N.disableResizing,re=N.getHooks,Re=N.state.columnResizing,le=P(N);q.forEach(function(xe){var Ye=Ce(xe.disableResizing!==!0&&void 0,J!==!0&&void 0,!0);xe.canResize=Ye,xe.width=Re.columnWidths[xe.id]||xe.originalWidth||xe.width,xe.isResizing=Re.isResizingColumn===xe.id,Ye&&(xe.getResizerProps=C(re().getResizerProps,{instance:le(),header:xe}))})};function fn(N){var q=N.plugins,J=N.dispatch,re=N.autoResetResize,Re=re===void 0||re,le=N.columns;b(q,["useAbsoluteLayout"],"useResizeColumns");var xe=P(Re);H(function(){xe()&&J({type:c.resetResize})},[le]);var Ye=n.useCallback(function(){return J({type:c.resetResize})},[J]);Object.assign(N,{resetResizing:Ye})}var Lr={position:"absolute",top:0},gn=function(N){N.getTableBodyProps.push($r),N.getRowProps.push($r),N.getHeaderGroupProps.push($r),N.getFooterGroupProps.push($r),N.getHeaderProps.push(function(q,J){var re=J.column;return[q,{style:s({},Lr,{left:re.totalLeft+"px",width:re.totalWidth+"px"})}]}),N.getCellProps.push(function(q,J){var re=J.cell;return[q,{style:s({},Lr,{left:re.column.totalLeft+"px",width:re.column.totalWidth+"px"})}]}),N.getFooterProps.push(function(q,J){var re=J.column;return[q,{style:s({},Lr,{left:re.totalLeft+"px",width:re.totalWidth+"px"})}]})};gn.pluginName="useAbsoluteLayout";var $r=function(N,q){return[N,{style:{position:"relative",width:q.instance.totalColumnsWidth+"px"}}]},ar={display:"inline-block",boxSizing:"border-box"},En=function(N,q){return[N,{style:{display:"flex",width:q.instance.totalColumnsWidth+"px"}}]},yn=function(N){N.getRowProps.push(En),N.getHeaderGroupProps.push(En),N.getFooterGroupProps.push(En),N.getHeaderProps.push(function(q,J){var re=J.column;return[q,{style:s({},ar,{width:re.totalWidth+"px"})}]}),N.getCellProps.push(function(q,J){var re=J.cell;return[q,{style:s({},ar,{width:re.column.totalWidth+"px"})}]}),N.getFooterProps.push(function(q,J){var re=J.column;return[q,{style:s({},ar,{width:re.totalWidth+"px"})}]})};function uo(N){N.getTableProps.push(on),N.getRowProps.push(Mi),N.getHeaderGroupProps.push(Mi),N.getFooterGroupProps.push(Mi),N.getHeaderProps.push(co),N.getCellProps.push(Ds),N.getFooterProps.push(Ci)}yn.pluginName="useBlockLayout",uo.pluginName="useFlexLayout";var on=function(N,q){return[N,{style:{minWidth:q.instance.totalColumnsMinWidth+"px"}}]},Mi=function(N,q){return[N,{style:{display:"flex",flex:"1 0 auto",minWidth:q.instance.totalColumnsMinWidth+"px"}}]},co=function(N,q){var J=q.column;return[N,{style:{boxSizing:"border-box",flex:J.totalFlexWidth?J.totalFlexWidth+" 0 auto":void 0,minWidth:J.totalMinWidth+"px",width:J.totalWidth+"px"}}]},Ds=function(N,q){var J=q.cell;return[N,{style:{boxSizing:"border-box",flex:J.column.totalFlexWidth+" 0 auto",minWidth:J.column.totalMinWidth+"px",width:J.column.totalWidth+"px"}}]},Ci=function(N,q){var J=q.column;return[N,{style:{boxSizing:"border-box",flex:J.totalFlexWidth?J.totalFlexWidth+" 0 auto":void 0,minWidth:J.totalMinWidth+"px",width:J.totalWidth+"px"}}]};function Dn(N){N.stateReducers.push(es),N.getTableProps.push(ni),N.getHeaderProps.push(Fn),N.getRowProps.push(Oo)}c.columnStartResizing="columnStartResizing",c.columnResizing="columnResizing",c.columnDoneResizing="columnDoneResizing",c.resetResize="resetResize",Dn.pluginName="useGridLayout";var ni=function(N,q){var J=q.instance;return[N,{style:{display:"grid",gridTemplateColumns:J.visibleColumns.map(function(re){var Re;return J.state.gridLayout.columnWidths[re.id]?J.state.gridLayout.columnWidths[re.id]+"px":(Re=J.state.columnResizing)!=null&&Re.isResizingColumn?J.state.gridLayout.startWidths[re.id]+"px":typeof re.width=="number"?re.width+"px":re.width}).join(" ")}}]},Fn=function(N,q){var J=q.column;return[N,{id:"header-cell-"+J.id,style:{position:"sticky",gridColumn:"span "+J.totalVisibleHeaderCount}}]},Oo=function(N,q){var J=q.row;return J.isExpanded?[N,{style:{gridColumn:"1 / "+(J.cells.length+1)}}]:[N,{}]};function es(N,q,J,re){if(q.type===c.init)return s({gridLayout:{columnWidths:{}}},N);if(q.type===c.resetResize)return s({},N,{gridLayout:{columnWidths:{}}});if(q.type===c.columnStartResizing){var Re=q.columnId,le=q.headerIdWidths,xe=Bi(Re);if(xe!==void 0){var Ye=re.visibleColumns.reduce(function(Rt,pr){var Xe;return s({},Rt,((Xe={})[pr.id]=Bi(pr.id),Xe))},{}),qe=re.visibleColumns.reduce(function(Rt,pr){var Xe;return s({},Rt,((Xe={})[pr.id]=pr.minWidth,Xe))},{}),Ze=re.visibleColumns.reduce(function(Rt,pr){var Xe;return s({},Rt,((Xe={})[pr.id]=pr.maxWidth,Xe))},{}),pt=le.map(function(Rt){var pr=Rt[0];return[pr,Bi(pr)]});return s({},N,{gridLayout:s({},N.gridLayout,{startWidths:Ye,minWidths:qe,maxWidths:Ze,headerIdGridWidths:pt,columnWidth:xe})})}return N}if(q.type===c.columnResizing){var dt=q.clientX,gt=N.columnResizing.startX,nt=N.gridLayout,yt=nt.columnWidth,Ot=nt.minWidths,Lt=nt.maxWidths,tr=nt.headerIdGridWidths,Cr=(dt-gt)/yt,nr={};return(tr===void 0?[]:tr).forEach(function(Rt){var pr=Rt[0],Xe=Rt[1];nr[pr]=Math.min(Math.max(Ot[pr],Xe+Xe*Cr),Lt[pr])}),s({},N,{gridLayout:s({},N.gridLayout,{columnWidths:s({},N.gridLayout.columnWidths,{},nr)})})}return q.type===c.columnDoneResizing?s({},N,{gridLayout:s({},N.gridLayout,{startWidths:{},minWidths:{},maxWidths:{}})}):void 0}function Bi(N){var q,J=(q=document.getElementById("header-cell-"+N))==null?void 0:q.offsetWidth;if(J!==void 0)return J}r._UNSTABLE_usePivotColumns=Wn,r.actions=c,r.defaultColumn=m,r.defaultGroupByFn=ir,r.defaultOrderByFn=Wr,r.defaultRenderer=p,r.emptyRenderer=y,r.ensurePluginOrder=b,r.flexRender=O,r.functionalUpdate=E,r.loopHooks=F,r.makePropGetter=C,r.makeRenderer=$,r.reduceHooks=R,r.safeUseLayoutEffect=j,r.useAbsoluteLayout=gn,r.useAsyncDebounce=function(N,q){q===void 0&&(q=0);var J=n.useRef({}),re=P(N),Re=P(q);return n.useCallback(function(){var le=a(regeneratorRuntime.mark(function xe(){var Ye,qe,Ze,pt=arguments;return regeneratorRuntime.wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:for(Ye=pt.length,qe=new Array(Ye),Ze=0;Ze<Ye;Ze++)qe[Ze]=pt[Ze];return J.current.promise||(J.current.promise=new Promise(function(gt,nt){J.current.resolve=gt,J.current.reject=nt})),J.current.timeout&&clearTimeout(J.current.timeout),J.current.timeout=setTimeout(a(regeneratorRuntime.mark(function gt(){return regeneratorRuntime.wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return delete J.current.timeout,nt.prev=1,nt.t0=J.current,nt.next=5,re().apply(void 0,qe);case 5:nt.t1=nt.sent,nt.t0.resolve.call(nt.t0,nt.t1),nt.next=12;break;case 9:nt.prev=9,nt.t2=nt.catch(1),J.current.reject(nt.t2);case 12:return nt.prev=12,delete J.current.promise,nt.finish(12);case 15:case"end":return nt.stop()}},gt,null,[[1,9,12,15]])})),Re()),dt.abrupt("return",J.current.promise);case 5:case"end":return dt.stop()}},xe)}));return function(){return le.apply(this,arguments)}}(),[re,Re])},r.useBlockLayout=yn,r.useColumnOrder=Ut,r.useExpanded=T,r.useFilters=tt,r.useFlexLayout=uo,r.useGetLatest=P,r.useGlobalFilter=Qt,r.useGridLayout=Dn,r.useGroupBy=ht,r.useMountedLayoutEffect=H,r.usePagination=Or,r.useResizeColumns=qt,r.useRowSelect=he,r.useRowState=ve,r.useSortBy=wr,r.useTable=function(N){for(var q=arguments.length,J=new Array(q>1?q-1:0),re=1;re<q;re++)J[re-1]=arguments[re];N=te(N),J=[S].concat(J);var Re=n.useRef({}),le=P(Re.current);Object.assign(le(),s({},N,{plugins:J,hooks:I()})),J.filter(Boolean).forEach(function(It){It(le().hooks)});var xe=P(le().hooks);le().getHooks=xe,delete le().hooks,Object.assign(le(),R(xe().useOptions,te(N)));var Ye=le(),qe=Ye.data,Ze=Ye.columns,pt=Ye.initialState,dt=Ye.defaultColumn,gt=Ye.getSubRows,nt=Ye.getRowId,yt=Ye.stateReducer,Ot=Ye.useControlledState,Lt=P(yt),tr=n.useCallback(function(It,sn){if(!sn.type)throw console.info({action:sn}),new Error("Unknown Action 👆");return[].concat(xe().stateReducers,Array.isArray(Lt())?Lt():[Lt()]).reduce(function(yr,Xn){return Xn(yr,sn,It,le())||yr},It)},[xe,Lt,le]),Cr=n.useReducer(tr,void 0,function(){return tr(pt,{type:c.init})}),nr=Cr[0],Rt=Cr[1],pr=R([].concat(xe().useControlledState,[Ot]),nr,{instance:le()});Object.assign(le(),{state:pr,dispatch:Rt});var Xe=n.useMemo(function(){return ne(R(xe().columns,Ze,{instance:le()}))},[xe,le,Ze].concat(R(xe().columnsDeps,[],{instance:le()})));le().columns=Xe;var gr=n.useMemo(function(){return R(xe().allColumns,ee(Xe),{instance:le()}).map(D)},[Xe,xe,le].concat(R(xe().allColumnsDeps,[],{instance:le()})));le().allColumns=gr;var Nr=n.useMemo(function(){for(var It=[],sn=[],yr={},Xn=[].concat(gr);Xn.length;){var Ln=Xn.shift();K({data:qe,rows:It,flatRows:sn,rowsById:yr,column:Ln,getRowId:nt,getSubRows:gt,accessValueHooks:xe().accessValue,getInstance:le})}return[It,sn,yr]},[gr,qe,nt,gt,xe,le]),lr=Nr[0],fr=Nr[1],Vr=Nr[2];Object.assign(le(),{rows:lr,initialRows:[].concat(lr),flatRows:fr,rowsById:Vr}),F(xe().useInstanceAfterData,le());var _r=n.useMemo(function(){return R(xe().visibleColumns,gr,{instance:le()}).map(function(It){return Q(It,dt)})},[xe,gr,le,dt].concat(R(xe().visibleColumnsDeps,[],{instance:le()})));gr=n.useMemo(function(){var It=[].concat(_r);return gr.forEach(function(sn){It.find(function(yr){return yr.id===sn.id})||It.push(sn)}),It},[gr,_r]),le().allColumns=gr;var Gr=n.useMemo(function(){return R(xe().headerGroups,De(_r,dt),le())},[xe,_r,dt,le].concat(R(xe().headerGroupsDeps,[],{instance:le()})));le().headerGroups=Gr;var Fr=n.useMemo(function(){return Gr.length?Gr[0].headers:[]},[Gr]);le().headers=Fr,le().flatHeaders=Gr.reduce(function(It,sn){return[].concat(It,sn.headers)},[]),F(xe().useInstanceBeforeDimensions,le());var Jr=_r.filter(function(It){return It.isVisible}).map(function(It){return It.id}).sort().join("_");_r=n.useMemo(function(){return _r.filter(function(It){return It.isVisible})},[_r,Jr]),le().visibleColumns=_r;var rr=fe(Fr),kr=rr[0],mn=rr[1],bn=rr[2];return le().totalColumnsMinWidth=kr,le().totalColumnsWidth=mn,le().totalColumnsMaxWidth=bn,F(xe().useInstance,le()),[].concat(le().flatHeaders,le().allColumns).forEach(function(It){It.render=$(le(),It),It.getHeaderProps=C(xe().getHeaderProps,{instance:le(),column:It}),It.getFooterProps=C(xe().getFooterProps,{instance:le(),column:It})}),le().headerGroups=n.useMemo(function(){return Gr.filter(function(It,sn){return It.headers=It.headers.filter(function(yr){return yr.headers?function Xn(Ln){return Ln.filter(function(fo){return fo.headers?Xn(fo.headers):fo.isVisible}).length}(yr.headers):yr.isVisible}),!!It.headers.length&&(It.getHeaderGroupProps=C(xe().getHeaderGroupProps,{instance:le(),headerGroup:It,index:sn}),It.getFooterGroupProps=C(xe().getFooterGroupProps,{instance:le(),headerGroup:It,index:sn}),!0)})},[Gr,le,xe]),le().footerGroups=[].concat(le().headerGroups).reverse(),le().prepareRow=n.useCallback(function(It){It.getRowProps=C(xe().getRowProps,{instance:le(),row:It}),It.allCells=gr.map(function(sn){var yr=It.values[sn.id],Xn={column:sn,row:It,value:yr};return Xn.getCellProps=C(xe().getCellProps,{instance:le(),cell:Xn}),Xn.render=$(le(),sn,{row:It,cell:Xn,value:yr}),Xn}),It.cells=_r.map(function(sn){return It.allCells.find(function(yr){return yr.column.id===sn.id})}),F(xe().prepareRow,It,{instance:le()})},[xe,le,gr,_r]),le().getTableProps=C(xe().getTableProps,{instance:le()}),le().getTableBodyProps=C(xe().getTableBodyProps,{instance:le()}),F(xe().useFinalInstance,le()),le()},Object.defineProperty(r,"__esModule",{value:!0})})}(mL,Uc)),Uc}var bA;function wL(){return bA||(bA=1,function(e){e.exports=vL()}(yL)),np}(function(e,t){(function(n,o){e.exports=o(bt,Ex(),pL(),gL(),wL())})(an,(r,n,o,a,s)=>(()=>{var u={577:y=>{y.exports=n},606:y=>{y.exports=o},156:y=>{y.exports=r},767:y=>{y.exports=s},928:y=>{y.exports=a}},h={};function c(y){var m=h[y];if(m!==void 0)return m.exports;var _=h[y]={exports:{}};return u[y](_,_.exports,c),_.exports}c.n=y=>{var m=y&&y.__esModule?()=>y.default:()=>y;return c.d(m,{a:m}),m},c.d=(y,m)=>{for(var _ in m)c.o(m,_)&&!c.o(y,_)&&Object.defineProperty(y,_,{enumerable:!0,get:m[_]})},c.o=(y,m)=>Object.prototype.hasOwnProperty.call(y,m),c.r=y=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})};var p={};return(()=>{c.r(p),c.d(p,{CombinedDataProvider:()=>T,DatasetContext:()=>$,DatasetProvider:()=>O,FileUpload:()=>b,Image:()=>We,Link:()=>dr,LoginButton:()=>dn,LogoutButton:()=>te,SessionContext:()=>R,SessionProvider:()=>F,Table:()=>ge,TableColumn:()=>k,Text:()=>oe,ThingContext:()=>ee,ThingProvider:()=>D,Value:()=>Kt,Video:()=>Ht,useDataset:()=>j,useFile:()=>Oe,useSession:()=>wt,useThing:()=>_t});var y=c(156),m=c.n(y),_=c(577),C=c(606);const R=(0,y.createContext)({login:C.login,logout:C.logout,fetch:C.fetch,session:(0,C.getDefaultSession)(),sessionRequestInProgress:!0,profile:void 0}),F=({sessionId:Se,children:Me,onError:Ne,sessionRequestInProgress:_e,restorePreviousSession:je,skipLoadingProfile:st,onSessionRestore:it})=>{const tt=je||typeof it<"u",[ct,Dt]=(0,y.useState)((0,C.getDefaultSession)()),[Qt,Gt]=(0,y.useState)();(0,y.useEffect)(()=>{it!==void 0&&(0,C.onSessionRestore)(it)},[it]);const Zt=typeof _e>"u"?!ct.info.isLoggedIn:_e,[hr,er]=(0,y.useState)(Zt);let xt;typeof window<"u"&&(xt=window.location),(0,y.useEffect)(()=>{(0,C.handleIncomingRedirect)({url:window.location.href,restorePreviousSession:tt}).then(async Ct=>{if(st!==!0&&(Ct==null?void 0:Ct.webId)!==void 0){const $t=await(0,_.getProfileAll)(Ct==null?void 0:Ct.webId,{fetch:ct.fetch});Gt($t)}}).catch(Ct=>{if(Ne)Ne(Ct);else throw Ct}).finally(()=>{er(!1)}),(0,C.getDefaultSession)().on("logout",()=>{Dt((0,C.getDefaultSession)())})},[ct,Se,Ne,xt,tt,st]);const vr=async Ct=>{er(!0);try{await(0,C.login)(Ct)}catch($t){if(Ne)Ne($t);else throw $t}finally{er(!1)}},ht=async()=>{try{await(0,C.logout)(),Gt(void 0)}catch(Ct){if(Ne)Ne(Ct);else throw Ct}};return m().createElement(R.Provider,{value:{session:ct,login:vr,logout:ht,sessionRequestInProgress:hr,setSessionRequestInProgress:er,fetch:C.fetch,profile:Qt}},Me)};function b({saveLocation:Se,onError:Me,onSave:Ne,inputProps:_e,autosave:je}){const{fetch:st}=(0,y.useContext)(R),it=async tt=>{const ct=tt.target;if(ct.files&&je)try{const Dt=await(0,_.saveFileInContainer)(Se,ct.files[0],{slug:ct.files[0].name?ct.files[0].name:void 0,fetch:st});Ne&&Ne(Dt)}catch(Dt){Me&&Me(Dt)}};return m().createElement(m().Fragment,null,m().createElement("input",Object.assign({type:"file"},_e,{onChange:tt=>it(tt),"data-testid":"form-input"})))}var E=c(928),P=c.n(E);function j(Se,Me){const{fetch:Ne}=(0,y.useContext)(R),{solidDataset:_e}=(0,y.useContext)($),{data:je,error:st}=P()(Se?[Se,Me,Ne]:null,()=>{const tt=Object.assign({fetch:Ne},Me);return(0,_.getSolidDataset)(Se,tt)});return{dataset:Se?je:_e,error:st}}const H=(0,y.createContext)({solidDataset:void 0,setDataset:()=>{}}),$=H,O=({children:Se,onError:Me,solidDataset:Ne,datasetUrl:_e,loading:je,loadingComponent:st})=>{const{dataset:it,error:tt}=j(_e);tt&&Me&&Me(tt);const ct=Ne??it,[Dt,Qt]=(0,y.useState)(ct);(0,y.useEffect)(()=>{Qt(ct)},[ct]);let Gt=st&&m().createElement(st,null)||je||m().createElement("span",null,"Fetching data...");return st===null&&(Gt=null),m().createElement(H.Provider,{value:{solidDataset:Dt,setDataset:Qt}},Dt?Se:Gt)},ne=(0,y.createContext)({thing:null,setThing:()=>{}}),ee=ne,D=({children:Se,thing:Me,thingUrl:Ne})=>{const{solidDataset:_e}=(0,y.useContext)($);let je=Me;_e&&Ne&&(je=(0,_.getThing)(_e,Ne));const[st,it]=(0,y.useState)(je||null);return(0,y.useEffect)(()=>{_e&&Ne?it((0,_.getThing)(_e,Ne)):Me&&it(Me)},[_e,Ne,Me]),m().createElement(ne.Provider,{value:{thing:st,setThing:it}},Se)},Q=async(Se,Me,Ne,_e,je,st,it)=>{try{return je!==void 0&&Me.size>je*1024?(Ne.setCustomValidity(`The selected file must not be larger than ${je}kB`),Ne.reportValidity(),null):(Ne.setCustomValidity(""),await(0,_.overwriteFile)(Se,Me,{fetch:_e}),st&&st(),URL.createObjectURL(Me))}catch(tt){return it&&it(tt),null}},De=async(Se,Me)=>await(0,_.getFile)(Se,{fetch:Me});function ae(Se,Me,Ne,_e){switch(Se){case"boolean":return(0,_.getBoolean)(Me,Ne);case"datetime":return(0,_.getDatetime)(Me,Ne);case"decimal":return(0,_.getDecimal)(Me,Ne);case"integer":return(0,_.getInteger)(Me,Ne);case"url":return(0,_.getUrl)(Me,Ne);default:return _e?(0,_.getStringWithLocale)(Me,Ne,_e):(0,_.getStringNoLocale)(Me,Ne)}}function Ce(Se,Me,Ne,_e){switch(Se){case"boolean":return(0,_.getBooleanAll)(Me,Ne);case"datetime":return(0,_.getDatetimeAll)(Me,Ne);case"decimal":return(0,_.getDecimalAll)(Me,Ne);case"integer":return(0,_.getIntegerAll)(Me,Ne);case"url":return(0,_.getUrlAll)(Me,Ne);default:return _e?(0,_.getStringWithLocaleAll)(Me,Ne,_e):(0,_.getStringNoLocaleAll)(Me,Ne)}}function Be(Se,Me,Ne,_e,je){return _e.find(st=>Se(Me,Ne,st,je))||_e[0]}function Ve(Se){const{dataset:Me,thing:Ne,properties:_e,property:je,type:st,locale:it}=Se,{solidDataset:tt,setDataset:ct=()=>{}}=(0,y.useContext)($),Dt=Me||tt,{thing:Qt,setThing:Gt=()=>{}}=(0,y.useContext)(ee),Zt=Ne||Qt||void 0;let hr;Zt||(hr=new Error("Thing not found as property or in context"));const er=Zt&&_e?Be(ae,st,Zt,_e,it)||_e[0]:je;if(!er)throw new Error("No property provided");const xt=Zt&&er?ae(st,Zt,er,it):null;return{dataset:Dt,thing:Zt,property:er,error:hr,value:xt,setDataset:ct,setThing:Gt}}function $e(){const[Se,Me]=(0,y.useState)(null);return(0,y.useEffect)(()=>{const Ne=document.createElement("input");Ne.type="datetime-local",Me(Ne.type!=="text")},[]),Se}async function we(Se,Me){const Ne=await(0,_.getSolidDataset)(Se);Me(Ne)}function Oe(Se){const[Me,Ne]=(0,y.useState)(),[_e,je]=(0,y.useState)(!1),[st,it]=(0,y.useState)(),{fetch:tt}=(0,y.useContext)(R);return(0,y.useEffect)(()=>{Se&&(je(!0),De(Se,tt).then(ct=>{it(ct),je(!1)}).catch(ct=>{Ne(ct),je(!1)}))},[Se,tt]),{error:Me,inProgress:_e,data:st}}var me=function(Se,Me){var Ne={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Me.indexOf(_e)<0&&(Ne[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,_e=Object.getOwnPropertySymbols(Se);je<_e.length;je++)Me.indexOf(_e[je])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[je])&&(Ne[_e[je]]=Se[_e[je]]);return Ne};function We(Se){var{thing:Me,property:Ne,properties:_e,edit:je,autosave:st,allowDelete:it,onSave:tt,onError:ct,maxSize:Dt,alt:Qt,inputProps:Gt,errorComponent:Zt,loadingComponent:hr,deleteComponent:er,saveLocation:xt,solidDataset:vr}=Se,ht=me(Se,["thing","property","properties","edit","autosave","allowDelete","onSave","onError","maxSize","alt","inputProps","errorComponent","loadingComponent","deleteComponent","saveLocation","solidDataset"]);const{fetch:Ct}=(0,y.useContext)(R),$t=Ve({thing:Me,property:Ne,properties:_e,type:"url"}),{value:Ft,thing:Er,error:sr}=$t;let Hr;Ft||(Hr=new Error("No value found for property."));const ir=!Er&&!sr,[Mt,kt]=(0,y.useState)(sr??Hr);(0,y.useEffect)(()=>{Mt&&ct&&ct(Mt)},[Mt,ct,Zt]);const[Kr,Mr]=(0,y.useState)(),{data:Br,error:wr,inProgress:Pr}=Oe(Ft);(0,y.useEffect)(()=>{if(Pr)return;if(wr){kt(wr);return}const Or=Br&&URL.createObjectURL(Br);Or&&Mr(Or)},[Br,Pr,wr]);const At=async()=>{if(!(!Me||!vr||!Ne||typeof Ft!="string"||!st))try{const Or=(0,_.removeUrl)(Me,Ne,Ft),wn=(0,_.setThing)(vr,Or),Kn=(0,_.getSourceUrl)(vr);if(!Kn)return;await(0,_.saveSolidDatasetAt)(Kn,wn,{fetch:Ct})}catch(Or){kt(Or)}},nn=async Or=>{const wn=Or.files;if(st&&wn&&wn.length>0){if(Ft){const Kn=await Q(Ft,wn[0],Or,Ct,Dt,tt,ct);Kn&&Mr(Kn)}else if(!Ft&&xt){const Kn=await(0,_.saveFileInContainer)(xt,wn[0],{fetch:Ct}),Wn=(0,_.getSourceUrl)(Kn);if(Wn&&Me&&Ne&&vr){Mr(Wn);try{const Zr=(0,_.addUrl)(Me,Ne,Wn),en=(0,_.setThing)(vr,Zr),f=(0,_.getSourceUrl)(vr);if(!f)return;await(0,_.saveSolidDatasetAt)(f,en,{fetch:Ct})}catch(Zr){kt(Zr)}}}}};let Wr=null;if(ir||Pr){let Or=hr&&m().createElement(hr,null)||m().createElement("span",null,"fetching data in progress");return hr===null&&(Or=null),Or}return Mt?Wr=Zt?m().createElement(Zt,{error:Mt}):m().createElement("span",null,Mt.toString()):Ft&&(Wr=m().createElement("img",Object.assign({src:Kr,alt:Qt??""},ht))),m().createElement(m().Fragment,null,Wr,je&&m().createElement("input",Object.assign({},Gt,{type:"file",accept:"image/*",onChange:Or=>nn(Or.target)})),it&&(er?m().createElement(er,{onClick:At}):m().createElement("button",{type:"button",onClick:At},"Delete")))}var et=function(Se,Me){var Ne={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Me.indexOf(_e)<0&&(Ne[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,_e=Object.getOwnPropertySymbols(Se);je<_e.length;je++)Me.indexOf(_e[je])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[je])&&(Ne[_e[je]]=Se[_e[je]]);return Ne};const Et=Se=>{var Me;const{thing:Ne,solidDataset:_e,property:je,properties:st,saveDatasetTo:it,onSave:tt,onError:ct,edit:Dt,autosave:Qt,inputProps:Gt}=Se,Zt=et(Se,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:hr}=(0,y.useContext)(R),{value:er,thing:xt,property:vr,dataset:ht,setDataset:Ct,error:$t}=Ve({dataset:_e,thing:Ne,type:"datetime",property:je,properties:st}),Ft=$e();(0,y.useEffect)(()=>{$t&&ct&&ct($t)},[$t,ct]);const Er=er?er.toISOString().substring(0,er.toISOString().length-5):null,[sr,Hr]=(0,y.useState)(Er);let ir="";Ft||(ir=sr==null?void 0:sr.split(/T(.+)/)[0].toString());let Mt="00:00";Ft||(Mt=(Me=sr==null?void 0:sr.split(/T(.+)/)[1])===null||Me===void 0?void 0:Me.toString());const[kt,Kr]=(0,y.useState)(Mt),[Mr,Br]=(0,y.useState)(ir);(0,y.useEffect)(()=>{!kt&&!Mr||Ft||Hr(`${Mr??""}T${kt??"00:00"}`)},[kt,Mr,Ft]);const wr=async At=>{if(Er!==sr&&xt&&ht&&At.target.reportValidity()){const nn=sr,Wr=(0,_.setDatetime)(xt,vr,new Date(`${nn}Z`));try{let Or;it?(Or=await(0,_.saveSolidDatasetAt)(it,(0,_.setThing)(ht,Wr),{fetch:hr}),await we(it,Ct)):(0,_.hasResourceInfo)(ht)?(Or=await(0,_.saveSolidDatasetAt)((0,_.getSourceUrl)(ht),(0,_.setThing)(ht,Wr),{fetch:hr}),await we((0,_.getSourceUrl)(ht),Ct)):ct&&ct(new Error("Please provide saveDatasetTo location for new data")),!$t&&tt&&tt(Or,Wr)}catch(Or){ct&&ct(Or)}}};let Pr;return Ft?Pr="datetime-local":Pr="datetime-workaround",m().createElement(m().Fragment,null,!Dt&&ht&&xt&&m().createElement("span",Object.assign({},Zt),`${sr}`),Dt&&ht&&xt&&Pr==="datetime-local"&&m().createElement("input",Object.assign({type:Pr,"aria-label":"Date and Time",step:"any"},Gt,{onChange:At=>{Hr(At.target.value)},onBlur:At=>Qt&&wr(At),value:sr,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}",placeholder:"yyyy-mm-ddThh:mm"})),Dt&&ht&&xt&&Pr==="datetime-workaround"&&m().createElement(m().Fragment,null,m().createElement("input",Object.assign({type:"date","aria-label":"Date",step:"any"},Gt,{onChange:At=>{Br(At.target.value)},onBlur:At=>Qt&&wr(At),value:Mr,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}",placeholder:"yyyy-mm-dd"})),m().createElement("input",{type:"time","aria-label":"Time",value:kt,onChange:At=>Kr(At.target.value),onBlur:At=>Qt&&wr(At),pattern:"[0-9]{2}:[0-9]{2}"})))};Et.defaultProps={autosave:!1,edit:!1};const Bt=Et;var Vt=function(Se,Me){var Ne={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Me.indexOf(_e)<0&&(Ne[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,_e=Object.getOwnPropertySymbols(Se);je<_e.length;je++)Me.indexOf(_e[je])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[je])&&(Ne[_e[je]]=Se[_e[je]]);return Ne};const Ke=Se=>{var Me;const{thing:Ne,solidDataset:_e,property:je,properties:st,saveDatasetTo:it,locale:tt,onSave:ct,onError:Dt,edit:Qt,autosave:Gt,inputProps:Zt}=Se,hr=Vt(Se,["thing","solidDataset","property","properties","saveDatasetTo","locale","onSave","onError","edit","autosave","inputProps"]),{fetch:er}=(0,y.useContext)(R),{value:xt,thing:vr,property:ht,dataset:Ct,setDataset:$t,error:Ft}=Ve({dataset:_e,thing:Ne,type:"string",property:je,properties:st,locale:tt});(0,y.useEffect)(()=>{Ft&&Dt&&Dt(Ft)},[Ft,Dt]);const Er=(Me=xt==null?void 0:xt.toString())!==null&&Me!==void 0?Me:"",[sr,Hr]=(0,y.useState)(Er),ir=async Mt=>{if(Er!==sr&&vr&&Ct&&Mt.target.reportValidity()){let kt;tt?kt=(0,_.setStringWithLocale)(vr,ht,sr,tt):kt=(0,_.setStringNoLocale)(vr,ht,sr);try{let Kr;it?(Kr=await(0,_.saveSolidDatasetAt)(it,(0,_.setThing)(Ct,kt),{fetch:er}),await we(it,$t)):(0,_.hasResourceInfo)(Ct)?(Kr=await(0,_.saveSolidDatasetAt)((0,_.getSourceUrl)(Ct),(0,_.setThing)(Ct,kt),{fetch:er}),await we((0,_.getSourceUrl)(Ct),$t)):Dt&&Dt(new Error("Please provide saveDatasetTo location for new data")),!Ft&&ct&&ct(Kr,kt)}catch(Kr){Dt&&Dt(Kr)}}};return m().createElement(m().Fragment,null,!Qt&&Ct&&vr&&m().createElement("span",Object.assign({},hr),sr),Qt&&Ct&&vr&&m().createElement("input",Object.assign({type:"text"},Zt,{onChange:Mt=>{Hr(Mt.target.value)},onBlur:Mt=>Gt&&ir(Mt),value:sr})))};Ke.defaultProps={autosave:!1,edit:!1};const St=Ke;var jt=function(Se,Me){var Ne={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Me.indexOf(_e)<0&&(Ne[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,_e=Object.getOwnPropertySymbols(Se);je<_e.length;je++)Me.indexOf(_e[je])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[je])&&(Ne[_e[je]]=Se[_e[je]]);return Ne};const Yt=Se=>{var Me;const{thing:Ne,solidDataset:_e,property:je,properties:st,saveDatasetTo:it,onSave:tt,onError:ct,edit:Dt,autosave:Qt,inputProps:Gt}=Se,Zt=jt(Se,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:hr}=(0,y.useContext)(R),{value:er,thing:xt,property:vr,dataset:ht,setDataset:Ct,error:$t}=Ve({dataset:_e,thing:Ne,type:"boolean",property:je,properties:st});(0,y.useEffect)(()=>{$t&&ct&&ct($t)},[$t,ct]);let Ft=er,Er=!1;Er=(Me=er)!==null&&Me!==void 0?Me:!1,Ft=Er.toString();const[sr,Hr]=(0,y.useState)(Ft),[ir,Mt]=(0,y.useState)(Er);(0,y.useEffect)(()=>{Hr(ir.toString())},[ir]);const kt=async Kr=>{if(Ft!==sr&&xt&&ht&&Kr.target.reportValidity()){const Mr=(0,_.setBoolean)(xt,vr,ir);try{let Br;it?(Br=await(0,_.saveSolidDatasetAt)(it,(0,_.setThing)(ht,Mr),{fetch:hr}),await we(it,Ct)):(0,_.hasResourceInfo)(ht)?(Br=await(0,_.saveSolidDatasetAt)((0,_.getSourceUrl)(ht),(0,_.setThing)(ht,Mr),{fetch:hr}),await we((0,_.getSourceUrl)(ht),Ct)):ct&&ct(new Error("Please provide saveDatasetTo location for new data")),!$t&&tt&&tt(Br,Mr)}catch(Br){ct&&ct(Br)}}};return m().createElement(m().Fragment,null,!Dt&&ht&&xt&&m().createElement("span",Object.assign({},Zt),`${sr}`),Dt&&ht&&xt&&m().createElement("input",Object.assign({type:"checkbox",checked:ir},Gt,{onChange:Kr=>{Mt(Kr.target.checked)},onBlur:Kr=>Qt&&kt(Kr),value:sr})))};Yt.defaultProps={autosave:!1,edit:!1};const ut=Yt;var Z=function(Se,Me){var Ne={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Me.indexOf(_e)<0&&(Ne[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,_e=Object.getOwnPropertySymbols(Se);je<_e.length;je++)Me.indexOf(_e[je])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[je])&&(Ne[_e[je]]=Se[_e[je]]);return Ne};const I=Se=>{var Me;const{thing:Ne,solidDataset:_e,property:je,properties:st,saveDatasetTo:it,onSave:tt,onError:ct,edit:Dt,autosave:Qt,inputProps:Gt}=Se,Zt=Z(Se,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:hr}=(0,y.useContext)(R),{value:er,thing:xt,property:vr,dataset:ht,setDataset:Ct,error:$t}=Ve({dataset:_e,thing:Ne,type:"url",property:je,properties:st});(0,y.useEffect)(()=>{$t&&ct&&ct($t)},[$t,ct]);const Ft=(Me=er==null?void 0:er.toString())!==null&&Me!==void 0?Me:"",[Er,sr]=(0,y.useState)(Ft),Hr=async ir=>{if(Ft!==Er&&xt&&ht&&ir.target.reportValidity()){const Mt=(0,_.setUrl)(xt,vr,Er);try{let kt;it?(kt=await(0,_.saveSolidDatasetAt)(it,(0,_.setThing)(ht,Mt),{fetch:hr}),await we(it,Ct)):(0,_.hasResourceInfo)(ht)?(kt=await(0,_.saveSolidDatasetAt)((0,_.getSourceUrl)(ht),(0,_.setThing)(ht,Mt),{fetch:hr}),await we((0,_.getSourceUrl)(ht),Ct)):ct&&ct(new Error("Please provide saveDatasetTo location for new data")),!$t&&tt&&tt(kt,Mt)}catch(kt){ct&&ct(kt)}}};return m().createElement(m().Fragment,null,!Dt&&ht&&xt&&m().createElement("span",Object.assign({},Zt),`${Er}`),Dt&&ht&&xt&&m().createElement("input",Object.assign({type:"url"},Gt,{onChange:ir=>{sr(ir.target.value)},onBlur:ir=>Qt&&Hr(ir),value:Er})))};I.defaultProps={autosave:!1,edit:!1};const S=I;var B=function(Se,Me){var Ne={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Me.indexOf(_e)<0&&(Ne[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,_e=Object.getOwnPropertySymbols(Se);je<_e.length;je++)Me.indexOf(_e[je])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[je])&&(Ne[_e[je]]=Se[_e[je]]);return Ne};const G=Se=>{var Me;const{thing:Ne,solidDataset:_e,property:je,properties:st,saveDatasetTo:it,onSave:tt,onError:ct,edit:Dt,autosave:Qt,inputProps:Gt}=Se,Zt=B(Se,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:hr}=(0,y.useContext)(R),{value:er,thing:xt,property:vr,dataset:ht,setDataset:Ct,error:$t}=Ve({dataset:_e,thing:Ne,type:"integer",property:je,properties:st});(0,y.useEffect)(()=>{$t&&ct&&ct($t)},[$t,ct]);const Ft=(Me=er==null?void 0:er.toString())!==null&&Me!==void 0?Me:"",[Er,sr]=(0,y.useState)(Ft),Hr=async ir=>{if(Ft!==Er&&xt&&ht&&ir.target.reportValidity()){const Mt=(0,_.setInteger)(xt,vr,parseInt(Er,10));try{let kt;it?(kt=await(0,_.saveSolidDatasetAt)(it,(0,_.setThing)(ht,Mt),{fetch:hr}),await we(it,Ct)):(0,_.hasResourceInfo)(ht)?(kt=await(0,_.saveSolidDatasetAt)((0,_.getSourceUrl)(ht),(0,_.setThing)(ht,Mt),{fetch:hr}),await we((0,_.getSourceUrl)(ht),Ct)):ct&&ct(new Error("Please provide saveDatasetTo location for new data")),!$t&&tt&&tt(kt,Mt)}catch(kt){ct&&ct(kt)}}};return m().createElement(m().Fragment,null,!Dt&&ht&&xt&&m().createElement("span",Object.assign({},Zt),`${Er}`),Dt&&ht&&xt&&m().createElement("input",Object.assign({type:"number",step:"any"},Gt,{onChange:ir=>{sr(ir.target.value)},onBlur:ir=>Qt&&Hr(ir),value:Er})))};G.defaultProps={autosave:!1,edit:!1};const de=G;var Ee=function(Se,Me){var Ne={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Me.indexOf(_e)<0&&(Ne[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,_e=Object.getOwnPropertySymbols(Se);je<_e.length;je++)Me.indexOf(_e[je])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[je])&&(Ne[_e[je]]=Se[_e[je]]);return Ne};const rt=Se=>{var Me;const{thing:Ne,solidDataset:_e,property:je,properties:st,saveDatasetTo:it,onSave:tt,onError:ct,edit:Dt,autosave:Qt,inputProps:Gt}=Se,Zt=Ee(Se,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:hr}=(0,y.useContext)(R),{value:er,thing:xt,property:vr,dataset:ht,setDataset:Ct,error:$t}=Ve({dataset:_e,thing:Ne,type:"decimal",property:je,properties:st});(0,y.useEffect)(()=>{$t&&ct&&ct($t)},[$t,ct]);const Ft=(Me=er==null?void 0:er.toString())!==null&&Me!==void 0?Me:"",[Er,sr]=(0,y.useState)(Ft),Hr=async ir=>{if(Ft!==Er&&xt&&ht&&ir.target.reportValidity()){const Mt=(0,_.setDecimal)(xt,vr,parseFloat(Er));try{let kt;it?(kt=await(0,_.saveSolidDatasetAt)(it,(0,_.setThing)(ht,Mt),{fetch:hr}),await we(it,Ct)):(0,_.hasResourceInfo)(ht)?(kt=await(0,_.saveSolidDatasetAt)((0,_.getSourceUrl)(ht),(0,_.setThing)(ht,Mt),{fetch:hr}),await we((0,_.getSourceUrl)(ht),Ct)):ct&&ct(new Error("Please provide saveDatasetTo location for new data")),!$t&&tt&&tt(kt,Mt)}catch(kt){ct&&ct(kt)}}};return m().createElement(m().Fragment,null,!Dt&&ht&&xt&&m().createElement("span",Object.assign({},Zt),`${Er}`),Dt&&ht&&xt&&m().createElement("input",Object.assign({type:"number",step:"any"},Gt,{onChange:ir=>{sr(ir.target.value)},onBlur:ir=>Qt&&Hr(ir),value:Er})))};rt.defaultProps={autosave:!1,edit:!1};const lt=rt;var Nt=function(Se,Me){var Ne={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Me.indexOf(_e)<0&&(Ne[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,_e=Object.getOwnPropertySymbols(Se);je<_e.length;je++)Me.indexOf(_e[je])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[je])&&(Ne[_e[je]]=Se[_e[je]]);return Ne};function Kt(Se){const Me=Se,{dataType:Ne}=Me,_e=Nt(Me,["dataType"]),{thing:je,solidDataset:st,property:it,properties:tt,edit:ct,loadingComponent:Dt,errorComponent:Qt,locale:Gt}=_e,{thing:Zt,value:hr,error:er}=Ve({dataset:st,thing:je,property:it,properties:tt,type:Ne,locale:Gt});let xt;!ct&&!hr&&Ne!=="boolean"&&(xt=new Error("No value found for property."));const vr=!Zt&&!er,[ht]=(0,y.useState)(er??xt);if(vr){let $t=Dt&&m().createElement(Dt,null)||m().createElement("span",null,"fetching data in progress");return Dt===null&&($t=null),$t}if(ht)return Qt?m().createElement(Qt,{error:ht}):m().createElement("span",null,ht.toString());let Ct=St;switch(Ne){case"boolean":Ct=ut;break;case"datetime":Ct=Bt;break;case"decimal":Ct=lt;break;case"integer":Ct=de;break;case"url":Ct=S;break;default:Ct=St}return m().createElement(Ct,Object.assign({},_e))}Kt.defaultProps={autosave:!1,edit:!1};var Xt=function(Se,Me){var Ne={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Me.indexOf(_e)<0&&(Ne[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,_e=Object.getOwnPropertySymbols(Se);je<_e.length;je++)Me.indexOf(_e[je])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[je])&&(Ne[_e[je]]=Se[_e[je]]);return Ne};function dr(Se){var{children:Me,property:Ne,properties:_e,thing:je,solidDataset:st,autosave:it,rel:tt,target:ct,edit:Dt,loadingComponent:Qt,errorComponent:Gt,onSave:Zt,onError:hr}=Se,er=Xt(Se,["children","property","properties","thing","solidDataset","autosave","rel","target","edit","loadingComponent","errorComponent","onSave","onError"]);const{value:xt,thing:vr,property:ht,dataset:Ct,error:$t}=Ve({dataset:st,thing:je,property:Ne,properties:_e,type:"url"});let Ft;!Dt&&!xt&&(Ft=new Error("URL not found for given property"));const Er=!vr&&!$t,[sr]=(0,y.useState)($t??Ft);if(Er){let ir=Qt&&m().createElement(Qt,null)||m().createElement("span",null,"fetching data in progress");return Qt===null&&(ir=null),ir}if(sr)return Gt?m().createElement(Gt,{error:sr}):m().createElement("span",null,sr.toString());const Hr=tt||(ct==="_blank"?"noopener noreferrer":"nofollow");return Dt?m().createElement(Kt,{dataType:"url",solidDataset:Ct,thing:vr,property:ht,autosave:it,onSave:Zt,onError:hr,edit:!0}):m().createElement("a",Object.assign({href:xt,rel:Hr,target:ct},er),Me??xt)}const dn=({oidcIssuer:Se,redirectUrl:Me,children:Ne,authOptions:_e,onError:je})=>{const st=Object.assign({redirectUrl:Me,oidcIssuer:Se},_e),{login:it,setSessionRequestInProgress:tt}=(0,y.useContext)(R);async function ct(){tt(!0);try{await it(st),tt(!1)}catch(Qt){tt(!1),je&&je(Qt)}}function Dt(Qt){return Qt.preventDefault(),Qt.key==="Enter"?ct():Promise.resolve()}return Ne?m().createElement("div",{role:"button",tabIndex:0,onClick:ct,onKeyDown:Dt},Ne):m().createElement("button",{type:"button",onClick:ct,onKeyDown:Dt},"Log In")},te=({children:Se,onLogout:Me,onError:Ne})=>{const{logout:_e}=(0,y.useContext)(R);async function je(){try{await _e(),Me&&Me()}catch(it){Ne&&Ne(it)}}function st(it){return it.preventDefault(),it.key==="Enter"?je():Promise.resolve()}return Se?m().createElement("div",{role:"button",tabIndex:0,onClick:je,onKeyDown:st},Se):m().createElement("button",{type:"button",onClick:je,onKeyDown:st},"Log Out")};var fe=c(767);function K(Se){const{children:Me,solidDataset:Ne,datasetUrl:_e,thing:je,thingUrl:st,onError:it,loadingComponent:tt}=Se;return m().createElement(O,{onError:it,solidDataset:Ne,datasetUrl:_e,loadingComponent:tt},m().createElement(D,{thing:je,thingUrl:st},Me))}const T=K;var U=function(Se,Me){var Ne={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Me.indexOf(_e)<0&&(Ne[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,_e=Object.getOwnPropertySymbols(Se);je<_e.length;je++)Me.indexOf(_e[je])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[je])&&(Ne[_e[je]]=Se[_e[je]]);return Ne};function k(Se){throw new Error("Can't use TableColumn outside a Table.")}function ge(Se){var{children:Me,emptyStateComponent:Ne,things:_e,filter:je,ascIndicator:st,descIndicator:it,getRowProps:tt}=Se,ct=U(Se,["children","emptyStateComponent","things","filter","ascIndicator","descIndicator","getRowProps"]);const{columns:Dt,data:Qt}=(0,y.useMemo)(()=>{const ht=[],Ct=_e.map(()=>({}));return y.Children.forEach(Me,($t,Ft)=>{if($t){const{property:Er,header:sr,body:Hr,dataType:ir="string",locale:Mt,multiple:kt=!1,sortable:Kr,sortFn:Mr,filterable:Br}=$t.props;if(ht.push({Header:sr??`${Er}`,accessor:`col${Ft}`,disableGlobalFilter:!Br,disableSortBy:!Kr,Cell:Hr??(({value:wr})=>wr!=null?`${wr}`:"")}),Mr){const wr=(Pr,At,nn)=>{const Wr=Pr.values[nn],Or=At.values[nn];return Mr(Wr,Or)};ht[Ft].sortType=wr}else ir==="string"&&(ht[Ft].sortType=ir),(ir==="integer"||ir==="decimal")&&(ht[Ft].sortType="number");_e.forEach((wr,Pr)=>{Ct[Pr][`col${Ft}`]=kt?Ce(ir,wr.thing,Er,Mt):ae(ir,wr.thing,Er,Mt)})}}),{columns:ht,data:Ct}},[Me,_e]),Gt=(0,fe.useTable)({columns:Dt,data:Qt,initialState:{globalFilter:je||void 0}},fe.useGlobalFilter,fe.useSortBy),{getTableProps:Zt,getTableBodyProps:hr,headerGroups:er,rows:xt,prepareRow:vr}=Gt;return xt.length?m().createElement("table",Object.assign({},Zt(),ct),m().createElement("thead",null,er.map(ht=>m().createElement("tr",Object.assign({},ht.getHeaderGroupProps()),ht.headers.map(Ct=>m().createElement("th",Object.assign({},Ct.getHeaderProps(Ct.getSortByToggleProps())),Ct.render("Header"),Ct.isSorted&&(Ct.isSortedDesc?it:st)))))),m().createElement("tbody",Object.assign({},hr()),xt.map(ht=>{vr(ht);const Ct=_e[ht.index].dataset,$t=_e[ht.index].thing;return m().createElement("tr",Object.assign({},ht.getRowProps(tt(ht,$t,Ct))),m().createElement(T,{solidDataset:Ct,thing:$t},ht.cells.map(Ft=>m().createElement("td",Object.assign({},Ft.getCellProps()),Ft.render("Cell")))))}))):Ne?m().createElement(Ne,null):null}ge.defaultProps={filter:void 0,ascIndicator:m().createElement("span",{role:"img","aria-label":"Sorted in ascending order"}," ","🔼"),descIndicator:m().createElement("span",{role:"img","aria-label":"Sorted in descending order"}," ","🔽"),getRowProps:()=>({})};var Pe=function(Se,Me){var Ne={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Me.indexOf(_e)<0&&(Ne[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,_e=Object.getOwnPropertySymbols(Se);je<_e.length;je++)Me.indexOf(_e[je])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[je])&&(Ne[_e[je]]=Se[_e[je]]);return Ne};function oe(Se){var{thing:Me,solidDataset:Ne,property:_e,properties:je,saveDatasetTo:st,locale:it,onSave:tt,onError:ct,inputProps:Dt,errorComponent:Qt,loadingComponent:Gt,edit:Zt=!1,autosave:hr=!1}=Se,er=Pe(Se,["thing","solidDataset","property","properties","saveDatasetTo","locale","onSave","onError","inputProps","errorComponent","loadingComponent","edit","autosave"]);const{fetch:xt}=(0,y.useContext)(R),{error:vr,value:ht,thing:Ct,property:$t,dataset:Ft,setDataset:Er}=Ve({dataset:Ne,thing:Me,property:_e,properties:je,type:"string",locale:it});let sr;!Zt&&!ht&&(sr=new Error("No value found for property."));const Hr=!Ct&&!vr,[ir]=(0,y.useState)(vr??sr);(0,y.useEffect)(()=>{ir&&ct&&ct(ir)},[ir,ct]);const[Mt,kt]=(0,y.useState)(ht),[,Kr]=(0,y.useState)(),[Mr,Br]=(0,y.useState)(ht),wr=async Pr=>{if(Mr!==Pr.target.value&&Ct&&Ft){const At=Pr.target.value;let nn;it?nn=(0,_.setStringWithLocale)(Ct,$t,At,it):nn=(0,_.setStringNoLocale)(Ct,$t,At);try{let Wr;st?(Wr=await(0,_.saveSolidDatasetAt)(st,(0,_.setThing)(Ft,nn),{fetch:xt}),await we(st,Er)):(0,_.hasResourceInfo)(Ft)?(Wr=await(0,_.saveSolidDatasetAt)((0,_.getSourceUrl)(Ft),(0,_.setThing)(Ft,nn),{fetch:xt}),await we((0,_.getSourceUrl)(Ft),Er)):Kr(()=>{throw new Error("Please provide saveDatasetTo location for new data")}),tt&&tt(Wr,nn)}catch(Wr){ct&&ct(Wr)}}};if(Hr){let Pr=Gt&&m().createElement(Gt,null)||m().createElement("span",null,"fetching data in progress");return Gt===null&&(Pr=null),Pr}return ir?Qt?m().createElement(Qt,{error:ir}):m().createElement("span",null,ir.toString()):m().createElement(m().Fragment,null,!Zt&&Ft&&Ct&&m().createElement("span",Object.assign({},er),Mt),Zt&&Ft&&Ct&&m().createElement("input",Object.assign({type:Dt&&Dt.type?Dt.type:"text"},Dt,{onFocus:Pr=>Br(Pr.target.value),onChange:Pr=>kt(Pr.target.value),onBlur:Pr=>hr&&wr(Pr),value:Mt||""})))}var mt=function(Se,Me){var Ne={};for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&Me.indexOf(_e)<0&&(Ne[_e]=Se[_e]);if(Se!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,_e=Object.getOwnPropertySymbols(Se);je<_e.length;je++)Me.indexOf(_e[je])<0&&Object.prototype.propertyIsEnumerable.call(Se,_e[je])&&(Ne[_e[je]]=Se[_e[je]]);return Ne};function Ht(Se){var{property:Me,properties:Ne,thing:_e,edit:je,autosave:st,onSave:it,onError:tt,maxSize:ct,inputProps:Dt,errorComponent:Qt,loadingComponent:Gt}=Se,Zt=mt(Se,["property","properties","thing","edit","autosave","onSave","onError","maxSize","inputProps","errorComponent","loadingComponent"]);const{fetch:hr}=(0,y.useContext)(R),er=Ve({thing:_e,property:Me,properties:Ne,type:"url"}),{value:xt,thing:vr,error:ht}=er;let Ct;!je&&!xt&&(Ct=new Error("No value found for property."));const $t=!vr&&!ht,[Ft,Er]=(0,y.useState)(ht??Ct);(0,y.useEffect)(()=>{Ft&&tt&&tt(Ft)},[Ft,tt,Qt]);const[sr,Hr]=(0,y.useState)(""),{data:ir,error:Mt,inProgress:kt}=Oe(xt);(0,y.useEffect)(()=>{if(kt)return;if(Mt){Er(Mt);return}const Br=ir&&URL.createObjectURL(ir);Br&&Hr(Br)},[ir,kt,Mt]);const Kr=async Br=>{const wr=Br.files;if(st&&wr&&wr.length>0&&xt){const Pr=await Q(xt,wr[0],Br,hr,ct,it,tt);Pr&&Hr(Pr)}};let Mr=null;if($t||kt){let Br=Gt&&m().createElement(Gt,null)||m().createElement("span",null,"fetching data in progress");return Gt===null&&(Br=null),Br}return Ft?Mr=Qt?m().createElement(Qt,{error:Ft}):m().createElement("span",null,Ft.toString()):xt&&(Mr=m().createElement("video",Object.assign({src:sr||xt,controls:!0},Zt))),m().createElement(m().Fragment,null,Mr,je&&m().createElement("input",Object.assign({},Dt,{type:"file",accept:"video/*",onChange:Br=>Kr(Br.target)})))}function wt(){const{session:Se,sessionRequestInProgress:Me,fetch:Ne,login:_e,logout:je}=(0,y.useContext)(R);return{session:Se,sessionRequestInProgress:Me,fetch:Ne,login:_e,logout:je}}function _t(Se,Me,Ne){const{dataset:_e,error:je}=j(Se,Ne),{thing:st}=(0,y.useContext)(ee);return Me?_e?{thing:(0,_.getThing)(_e,Me),error:je}:{thing:null,error:je}:{thing:st||void 0,error:je}}})(),p})())})(OO);const fP={documentUrl:null,message:"",timeoutID:null,file:null,processing:!1},_L=(e,t)=>{switch(t.type){case"SET_DOCUMENT_LOCATION":return{...e,documentUrl:t.payload};case"SET_MESSAGE":return{...e,message:t.payload};case"SET_TIMEOUT_ID":return{...e,timeoutID:t.payload};case"SET_FILE":return{...e,file:t.payload};case"SET_PROCESSING":return{...e,processing:!0};case"CLEAR_DOCUMENT_LOCATION":return{...e,documentUrl:null};case"CLEAR_MESSAGE":return{...e,message:""};case"CLEAR_TIMEOUT_ID":return{...e,timeoutID:null};case"CLEAR_FILE":return{...e,file:null};case"CLEAR_PROCESSING":return{...e,processing:!1};default:return fP}},ua=e=>{const[t,r]=bt.useState("");return{type:e,value:t,onChange:a=>{r(a.target.value)},clearValue:()=>{r("")}}},Ea=()=>{const[e,t]=bt.useReducer(_L,fP);return{state:e,dispatch:t}},hP=()=>{const[e,t]=bt.useState(window.location.href);return bt.useEffect(()=>{localStorage.getItem("redirectUrl")?t(localStorage.getItem("redirectUrl")):(localStorage.setItem("redirectUrl",window.location.href),t(window.location.href))},[e]),e},SL=["Bank Statement","Passport","Drivers License"],cn=(e,t,r,n)=>{r.timeoutID&&clearTimeout(r.timeoutID),n({type:"SET_MESSAGE",payload:e});const o=setTimeout(()=>{n({type:"CLEAR_MESSAGE"}),n({type:"CLEAR_DOCUMENT_LOCATION"})},t*1e3);n({type:"SET_TIMEOUT_ID",payload:o})};var Jt=Ex(),pP="http://schema.org/";function xr(e){return pP+e}var kn={PREFIX:"schema-inrupt",NAMESPACE:pP,PREFIX_AND_NAMESPACE:{"schema-inrupt":"http://schema.org/"},NS:xr,Organization:xr("Organization"),Person:xr("Person"),ImageObject:xr("ImageObject"),URL:xr("URL"),MedicalTherapy:xr("MedicalTherapy"),EducationalOccupationalCredential:xr("EducationalOccupationalCredential"),PostalAddress:xr("PostalAddress"),Product:xr("Product"),Event:xr("Event"),alternateName:xr("alternateName"),givenName:xr("givenName"),familyName:xr("familyName"),additionalName:xr("additionalName"),license:xr("license"),name:xr("name"),text:xr("text"),identifier:xr("identifier"),description:xr("description"),image:xr("image"),url:xr("url"),startTime:xr("startTime"),endTime:xr("endTime"),startDate:xr("startDate"),endDate:xr("endDate"),email:xr("email"),primaryPrevention:xr("primaryPrevention"),qualifications:xr("qualifications"),attendee:xr("attendee"),address:xr("address"),streetAddress:xr("streetAddress"),addressLocality:xr("addressLocality"),addressRegion:xr("addressRegion"),postalCode:xr("postalCode"),addressCountry:xr("addressCountry"),accessCode:xr("accessCode"),accountId:xr("accountId"),serialNumber:xr("serialNumber"),productID:xr("productID"),brand:xr("brand"),model:xr("model"),value:xr("value"),distance:xr("distance"),latitude:xr("latitude"),longitude:xr("longitude"),dateModified:xr("dateModified")};const wh="https://opencommons.net",EL=async(e,t,r)=>{await Jt.saveFileInContainer(r,t.file,{slug:t.file.name,fetch:e.fetch})},Jv=e=>{const t=Jt.getThingAll(e);return t?!!t.find(n=>n.url.slice(-3)==="ttl"):!1},gP=e=>{const t=Jt.getThingAll(e);if(!t)return null;let r="";const n=[];return t.forEach(o=>{o.url.slice(-3).includes("/")?r=o:n.push(o)}),[r,n]},Zo=(e,t,r,n)=>{let o;switch(r==="self-fetch"?o=String(e.info.webId.split("profile")[0]):o=`https://${n}/`,t){case"Bank Statement":return`${o}Bank%20Statement/`;case"Passport":return`${o}Passport/`;case"Drivers License":return`${o}Drivers%20License/`;case"none":return`${o}Users/`;default:return null}},yP=(e,t,r)=>{let n=Jt.setAgentResourceAccess(e,t,r);return n=Jt.setAgentDefaultAccess(n,t,r),n},Qv=async(e,t)=>{const r=await Jt.getSolidDataset(t,{fetch:e.fetch}),n=Jt.createAcl(r),o={read:!0,append:!0,write:!0,control:!0},a=yP(n,e.info.webId,o);await Jt.saveAclFor(r,a,{fetch:e.fetch})},AA=async(e,t,r)=>{let n=await Jt.getSolidDataset(`${t}document.ttl`,{fetch:e.fetch}),o=Jt.getThingAll(n)[0];o=Jt.buildThing(o).setStringNoLocale(kn.endDate,r.date).setStringNoLocale(kn.description,r.description).setDatetime(kn.dateModified,new Date).build(),n=Jt.setThing(n,o);try{await Jt.saveSolidDatasetAt(`${t}document.ttl`,n,{fetch:e.fetch})}catch{throw new Error("Failed to update ttl file.")}},bL=async(e,t,r,n)=>{const o=Zo(e,t,"self-fetch"),a=await Jt.getSolidDatasetWithAcl(o,{fetch:e.fetch}),s=Jt.getResourceAcl(a),u=`https://${n}/profile/card#me`;let h;switch(r){case"Give":h={read:!0};break;default:h={read:!1};break}const c=yP(s,u,h);await Jt.saveAclFor(a,c,{fetch:e.fetch})},AL=async(e,t)=>{const r=Zo(e,t.type,"self-fetch");await Jt.createContainerAt(r,{fetch:e.fetch});const n=await Jt.getSolidDataset(r,{fetch:e.fetch});if(Jv(n))throw new Error("Container already exist. Updating files inside...");await EL(e,t,r);const a=Jt.buildThing(Jt.createThing({name:"document"})).addDatetime("https://schema.org/uploadDate",new Date).addStringNoLocale(kn.name,t.file.name).addStringNoLocale(kn.identifier,t.type).addStringNoLocale(kn.endDate,t.date).addStringNoLocale(kn.description,t.description).addUrl(kn.url,`${r}${t.file.name}`).build();let s=Jt.createSolidDataset();s=Jt.setThing(s,a),await Jt.saveSolidDatasetInContainer(r,s,{slugSuggestion:"document.ttl",contentType:"text/turtle",fetch:e.fetch}),await Qv(e,r)},RL=async(e,t)=>{const r=Zo(e,t.type,"self-fetch"),n=await Jt.getSolidDataset(r,{fetch:e.fetch}),[,o]=gP(n),a=t.file.name,s=o.map(u=>u.url).includes(`${r}${a}`);if(s){if(window.confirm(`File ${a} exist in Pod container, do you wish to update it?`))await Jt.overwriteFile(`${r}${a}`,t.file,{fetch:e.fetch}),await AA(e,r,t);else throw new Error("File update cancelled.");return s}if(window.confirm(`File ${a} does not exist in Pod container, do you wish to upload it?`))await Jt.overwriteFile(`${r}${a}`,t.file,{fetch:e.fetch}),await AA(e,r,t);else throw new Error("New file upload cancelled.");return s},mP=async(e,t,r,n="")=>{const o=Zo(e,t,r,n);try{return await Jt.getSolidDataset(o,{fetch:e.fetch}),o}catch{throw new Error("No data found")}},CL=async(e,t)=>{const r=Zo(e,t,"self-fetch"),n=await Jt.getSolidDataset(r,{fetch:e.fetch}),[o,a]=gP(n);return a.filter(async s=>{s.url.slice(-3).includes("/")||await Jt.deleteFile(s.url,{fetch:e.fetch})}),o.url},xL=async(e,t)=>{await Jt.deleteContainer(t,{fetch:e.fetch})},PL=async e=>{const t=Zo(e,"none","self-fetch");await Jt.createContainerAt(t,{fetch:e.fetch});const r=await Jt.getSolidDataset(t,{fetch:e.fetch});if(!Jv(r)){const o=Jt.buildThing(Jt.createThing({name:"userlist"})).addStringNoLocale(kn.name,"Users List").addStringNoLocale(kn.description,"A list of users").addUrl(kn.url,`${t}userlist.ttl`).build();let a=Jt.createSolidDataset();a=Jt.setThing(a,o),await Jt.saveSolidDatasetInContainer(t,a,{slugSuggestion:"userlist.ttl",contentType:"text/turtle",fetch:e.fetch}),await Qv(e,t)}},Yv=async(e,t)=>await Promise.all(t.map(async n=>{try{const o=await Jt.getSolidDataset(`${n.podUrl.split("profile")[0]}public/active.ttl`,{fetch:e.fetch}),a=Jt.getThingAll(o)[0],s=Jt.getDatetime(a,kn.dateModified);return n.dateModified=s,n}catch{return n}})),Xv=async e=>{const t=Zo(e,"none","self-fetch");let r=[];try{const n=await Jt.getSolidDataset(`${t}userlist.ttl`,{fetch:e.fetch});Jt.getThingAll(n).filter(s=>!s.url.includes("#userlist")).forEach(s=>{const u=Jt.getStringNoLocale(s,kn.Person),h=Jt.getStringNoLocale(s,kn.givenName),c=Jt.getStringNoLocale(s,kn.familyName),p=Jt.getUrl(s,kn.url);r.push({person:u,givenName:h,familyName:c,podUrl:p})})}catch{r=[]}return r},TL=async(e,t,r)=>{const n=Zo(e,"none","self-fetch");let o=await Jt.getSolidDataset(`${n}userlist.ttl`,{fetch:e.fetch});const a=Jt.getThingAll(o),s=r.split(".")[0].split("/")[2],u=a.find(c=>c.url.includes(`#${t.replace(" ","%20")}%20${s}`));return o=Jt.removeThing(o,u),await Jt.saveSolidDatasetAt(`${n}userlist.ttl`,o,{fetch:e.fetch}),await Xv(e)},IL=async(e,t)=>{const r=Zo(e,"none","self-fetch");let n=await Jt.getSolidDataset(`${r}userlist.ttl`,{fetch:e.fetch});const o=Jt.buildThing(Jt.createThing({name:`${t.givenName} ${t.url.split(".")[0]}`})).addStringNoLocale(kn.Person,`${t.givenName} ${t.familyName}`).addStringNoLocale(kn.givenName,t.givenName).addStringNoLocale(kn.familyName,t.familyName).addUrl(kn.url,`https://${t.url}/`).build();return n=Jt.setThing(n,o),await Jt.saveSolidDatasetAt(`${r}userlist.ttl`,n,{fetch:e.fetch}),await Xv(e)},FL=async e=>{const r=`${String(e.info.webId.split("profile")[0])}public/`,n=await Jt.getSolidDataset(r,{fetch:e.fetch});if(!Jv(n)){const a=Jt.buildThing(Jt.createThing({name:"active"})).addDatetime(kn.dateModified,new Date).build();let s=Jt.createSolidDataset();s=Jt.setThing(s,a),await Jt.saveSolidDatasetInContainer(r,s,{slugSuggestion:"active.ttl",contentType:"text/turtle",fetch:e.fetch}),await Qv(e,r)}},OL=async e=>{const r=`${String(e.info.webId.split("profile")[0])}public/`;let n=await Jt.getSolidDataset(`${r}active.ttl`,{fetch:e.fetch}),o=Jt.getThingAll(n)[0];o=Jt.buildThing(o).setDatetime(kn.dateModified,new Date).build(),n=Jt.setThing(n,o),await Jt.saveSolidDatasetAt(`${r}active.ttl`,n,{fetch:e.fetch})},Zv=()=>{const{session:e}=Si.useSession();return Ar("header",{style:{width:"100%",gap:"20px",display:"flex",alignItems:"center",justifyContents:"center"},children:[Qe("h2",{children:"Getting Started with PASS"}),e.info.isLoggedIn?Ar(sp,{children:[Qe(j1,{to:"/PASS/home/",children:"Home"}),Qe(j1,{to:"/PASS/forms/",children:"Forms"})]}):null]})},NL=()=>{const e=hP();return Ar(sp,{children:[Qe(Zv,{}),Qe("section",{id:"login",className:"panel",children:Ar("div",{className:"row",children:[Ar("label",{id:"labelLogin",htmlFor:"btnLogin",children:["Click the following login button to log into your pod at [",Qe("a",{href:wh,target:"_blank",rel:"noreferrer",children:wh}),"]:"," "]}),Qe(Si.LoginButton,{oidcIssuer:wh,redirectUrl:e,onError:console.error}),Qe("p",{children:"Not logged in"})]})})]})},vP=()=>{const{session:e}=Si.useSession(),[t,r]=bt.useState(!1);localStorage.setItem("loggedIn",!0);const n=()=>{localStorage.removeItem("loggedIn"),localStorage.removeItem("redirectUrl"),localStorage.removeItem("restorePath"),localStorage.removeItem("issuerConfig:https://opencommons.net")};return Qe("section",{id:"logout",className:"panel",children:Ar("div",{className:"row",children:[Ar("label",{id:"labelLogout",htmlFor:"btnLogout",children:["Click the following logout button to log out of your pod:"," "]}),Qe("button",{type:"button",onClick:()=>r(!0),children:"Log Out"}),Ar("dialog",{open:t,children:[Qe("p",{children:"Do you want to log out now?"}),Ar("div",{style:{display:"flex",justifyContent:"center",gap:"20px"},children:[Qe(Si.LogoutButton,{onLogout:n}),Qe("button",{type:"button",onClick:()=>r(!1),children:"Cancel"})]})]}),Ar("p",{className:"labelStatus",role:"alert",children:["Your session is now logged in with the WebID [",Qe("a",{href:e.info.webId,target:"_blank",rel:"noreferrer",children:e.info.webId}),"]."]})]})})},Wl=({htmlId:e})=>Qe("select",{id:e,name:"document",children:SL.map(t=>Qe("option",{children:t},t.split(" ")[0]))}),kL=({notification:e,locationUrl:t})=>t?Ar("dd",{className:"labelStatus",role:"alert",children:[e," ",Qe("a",{href:t,target:"_blank",rel:"noreferrer",children:t})]}):Qe("dd",{className:"labelStatus",role:"alert",children:e}),wP=({notification:e,statusType:t,defaultMessage:r,locationUrl:n=""})=>Ar("dl",{className:"display",children:[Ar("dt",{children:[t,":"]}),e?Qe(kL,{notification:e,locationUrl:n}):Qe("dd",{children:r})]}),ba=({title:e,state:t,statusType:r,defaultMessage:n,children:o})=>Ar("section",{className:"panel",children:[Qe("strong",{children:e}),o,Qe(wP,{notification:t.message,statusType:r,defaultMessage:n,locationUrl:t.documentUrl})]}),DL=()=>{const{session:e}=Si.useSession(),{state:t,dispatch:r}=Ea(),n=p=>{p.target.files.length===1?r({type:"SET_FILE",payload:p.target.files[0]}):r({type:"CLEAR_FILE"})},{clearValue:o,_type:a,...s}=ua("textarea"),u=()=>{o(),r({type:"CLEAR_FILE"}),r({type:"CLEAR_PROCESSING"})},h=async p=>{p.preventDefault(),r({type:"SET_PROCESSING"});const y=p.target.document.value,m=p.target.date.value,_=p.target.description.value;if(!t.file){cn("Submission failed. Reason: missing file",5,t,r),setTimeout(()=>{r({type:"CLEAR_PROCESSING"})},3e3);return}const C={type:y,date:m||"Not available",description:_||"No description provided",file:t.file},R=C.file.name;try{await AL(e,C),cn(`Uploading "${R}" to Solid...`,3,t,r),setTimeout(()=>{cn(`File "${R}" uploaded to Solid.`,5,t,r),setTimeout(()=>{p.target.uploadDoctype.value="",p.target.date.value="",u()},3e3)},3e3)}catch{try{const F=await RL(e,C);cn("Updating contents in Solid Pod...",3,t,r),setTimeout(F?()=>{cn(`File "${R}" updated on Solid.`,5,t,r),setTimeout(()=>{p.target.uploadDoctype.value="",p.target.date.value="",u()},3e3)}:()=>{cn(`File "${R}" uploaded on Solid.`,5,t,r),setTimeout(()=>{p.target.uploadDoctype.value="",p.target.date.value="",u()},3e3)},3e3)}catch(F){cn(`Operation failed. Reason: ${F.message}`,5,t,r),setTimeout(()=>{p.target.uploadDoctype.value="",p.target.date.value="",u()},3e3)}}},c={margin:"20px 0"};return Qe(ba,{title:"Upload Document",state:t,statusType:"Upload status",defaultMessage:"To be uploaded...",children:Ar("form",{onSubmit:h,autoComplete:"off",children:[Ar("div",{style:c,children:[Qe("label",{htmlFor:"upload-doc",children:"Select document type to upload: "}),Qe(Wl,{htmlId:"upload-doc"})]}),Ar("div",{style:c,children:[Qe("label",{htmlFor:"upload-doc-expiration",children:"Expiration date (if applicable): "}),Qe("input",{id:"upload-doc-expiration",name:"date",type:"date"})]}),Ar("div",{style:c,children:[Qe("label",{htmlFor:"upload-doc-desc",children:"Enter description: "}),Qe("br",{}),Qe("br",{}),Qe("textarea",{id:"upload-doc-desc",name:"description",...s})]}),Ar("div",{style:c,children:[Qe("label",{htmlFor:"upload-doctype",children:"File to upload: "}),Qe("input",{id:"upload-doctype",type:"file",name:"uploadDoctype",accept:".pdf, .docx, .doc, .txt, .rtf",onChange:n}),Qe("button",{disabled:t.processing,type:"submit",children:"Upload file"})]})]})})},LL=()=>{const{session:e}=Si.useSession(),{state:t,dispatch:r}=Ea();return Qe(ba,{title:"Search Document",state:t,statusType:"Search status",defaultMessage:"To be searched...",children:Qe("form",{onSubmit:async a=>{a.preventDefault(),r({type:"SET_PROCESSING"});const s=a.target.document.value;try{const u=await mP(e,s,"self-fetch");t.documentUrl&&r({type:"CLEAR_DOCUMENT_LOCATION"}),cn("Locating document...",3,t,r),setTimeout(()=>{r({type:"SET_DOCUMENT_LOCATION",payload:u}),cn("Document found! Document located at: ",5,t,r),setTimeout(()=>{r({type:"CLEAR_PROCESSING"})},3e3)},3e3)}catch{r({type:"CLEAR_DOCUMENT_LOCATION"}),cn("Search failed. Reason: Document not found.",5,t,r),setTimeout(()=>{r({type:"CLEAR_PROCESSING"})},3e3)}},autoComplete:"off",children:Ar("div",{style:{margin:"20px 0"},children:[Qe("label",{htmlFor:"search-doctype",children:"Select document type to search: "}),Qe(Wl,{htmlId:"search-doctype"})," ",Qe("button",{disabled:t.processing,type:"submit",children:"Get Document"})]})})})},UL=()=>{const{session:e}=Si.useSession(),{state:t,dispatch:r}=Ea();return Qe(ba,{title:"Delete Document",state:t,statusType:"Deletion status",defaultMessage:"To be deleted...",children:Qe("form",{onSubmit:async a=>{a.preventDefault(),r({type:"SET_PROCESSING"});const s=a.target.document.value;try{const u=await CL(e,s);cn("File being deleted from Pod...",3,t,r),setTimeout(()=>{xL(e,u),cn("Removing file container from Pod...",5,t,r),setTimeout(()=>{r({type:"CLEAR_PROCESSING"})},3e3)},3e3)}catch{cn("Deletion failed. Reason: Data not found.",5,t,r),setTimeout(()=>{r({type:"CLEAR_PROCESSING"})},3e3)}},autoComplete:"off",children:Ar("div",{style:{margin:"20px 0"},children:[Qe("label",{htmlFor:"delete-doctype",children:"Select document type to delete: "}),Qe(Wl,{htmlId:"delete-doctype"})," ",Qe("button",{disabled:t.processing,type:"submit",children:"Delete Document"})]})})})},Bp=bt.createContext(""),ew=bt.createContext([]),ML=()=>{const{session:e}=Si.useSession(),{state:t,dispatch:r}=Ea(),{clearValue:n,...o}=ua("text"),{selectedUser:a,setSelectedUser:s}=bt.useContext(Bp),u=()=>{n(),s(""),r({type:"CLEAR_PROCESSING"})},h=async p=>{p.preventDefault(),r({type:"SET_PROCESSING"});const y=p.target.document.value;let m=p.target.crossPodQuery.value;if(m||(m=a),!m){cn("Search failed. Reason: Pod URL not provided.",5,t,r),setTimeout(()=>{r({type:"CLEAR_PROCESSING"})},3e3);return}try{const _=await mP(e,y,"cross-fetch",m);t.documentUrl&&r({type:"CLEAR_DOCUMENT_LOCATION"}),cn("Locating document...",3,t,r),setTimeout(()=>{r({type:"SET_DOCUMENT_LOCATION",payload:_}),cn("Document found! Document located at: ",3,t,r),u()},3e3)}catch{r({type:"CLEAR_DOCUMENT_LOCATION"}),cn("Search failed. Reason: Document not found.",5,t,r),setTimeout(()=>{u()},3e3)}},c={margin:"20px 0"};return Qe(ba,{title:"Cross Pod Search",state:t,statusType:"Search status",defaultMessage:"To be searched...",children:Ar("form",{onSubmit:h,autoComplete:"off",children:[Ar("div",{style:c,children:[Ar("label",{htmlFor:"cross-search-doc",children:["Search document from (i.e., username.opencommons.net):"," "]}),Qe("br",{}),Qe("br",{}),Qe("input",{id:"cross-search-doc",size:"60",name:"crossPodQuery",...o,placeholder:a})]}),Ar("div",{style:c,children:[Qe("label",{htmlFor:"cross-search-doctype",children:"Select document type to search: "}),Qe(Wl,{htmlId:"cross-search-doctype"})," ",Qe("button",{disabled:t.processing,type:"submit",children:"Search Pod"})]})]})})},BL=()=>{const{clearValue:e,_type:t,...r}=ua("textarea"),[n,o]=bt.useState([]),a=h=>{o(h.target.files[0])},s=h=>{h.preventDefault(),console.log(h.target.document.value),console.log(h.target.date.value),console.log(h.target.description.value),console.log(n)},u={margin:"20px 0"};return Ar("section",{className:"panel",children:[Qe("strong",{children:"Cross Pod Upload"}),Ar("form",{onSubmit:s,autoComplete:"off",children:[Ar("div",{style:u,children:[Qe("label",{htmlFor:"cross-upload-doc",children:"Other user's Pod you wish to upload to: "}),Qe("br",{}),Qe("br",{}),Qe("input",{id:"cross-upload-doc",size:"60",type:"text",name:"crossPodUpload"})]}),Ar("div",{style:u,children:[Qe("label",{htmlFor:"cross-upload-doctype",children:"Choose document type to upload: "}),Qe(Wl,{htmlId:"cross-upload-doctype"})]}),Ar("div",{style:u,children:[Qe("label",{htmlFor:"cross-upload-doc-expiration",children:"Expiration date (if applicable): "}),Qe("input",{id:"cross-upload-doc-expiration",name:"date",type:"date"})]}),Ar("div",{style:u,children:[Qe("label",{htmlFor:"cross-upload-doc-desc",children:"Enter description:"}),Qe("br",{}),Qe("br",{}),Qe("textarea",{id:"cross-upload-doc-desc",name:"description",...r})]}),Ar("div",{style:u,children:[Qe("label",{htmlFor:"cross-upload-doctype",children:"File to upload: "}),Qe("input",{id:"cross-upload-doctype",type:"file",name:"crossUploadDoctype",accept:".pdf, .docx, .doc, .txt, .rtf",onChange:a}),Qe("button",{type:"submit",children:"Upload to Pod"})]})]}),Qe(wP,{notification:"",statusType:"Upload status",defaultMessage:"To be uploaded..."})]})},jL=()=>{const{session:e}=Si.useSession(),{state:t,dispatch:r}=Ea(),{clearValue:n,...o}=ua("text"),{selectedUser:a,setSelectedUser:s}=bt.useContext(Bp),u=()=>{n(),s(""),r({type:"CLEAR_PROCESSING"})},h=async p=>{p.preventDefault(),r({type:"SET_PROCESSING"});const y=p.target.document.value,m=p.target.setAclPerms.value;let _=p.target.setAclTo.value;if(_||(_=a),!_){cn("Set permissions failed. Reason: Pod URL not provided.",5,t,r),setTimeout(()=>{u()},3e3);return}if(`https://${_}/`===String(e.info.webId.split("profile")[0])){cn("Set permissions failed. Reason: Current user Pod cannot change container permissions to itself.",5,t,r),setTimeout(()=>{u()},3e3);return}if(!m){cn("Set permissions failed. Reason: Permissions not set.",5,t,r),setTimeout(()=>{u()},3e3);return}try{await bL(e,y,m,_),cn(`${m} permission to ${_} for ${y}.`,5,t,r),setTimeout(()=>{u()},3e3)}catch{cn("Set permissions failed. Reason: File not found.",5,t,r),setTimeout(()=>{u()},3e3)}},c={margin:"20px 0"};return Qe(ba,{title:"Permission to Files",state:t,statusType:"Permission status",defaultMessage:"To be set...",children:Ar("form",{onSubmit:h,autoComplete:"off",children:[Ar("div",{style:c,children:[Qe("label",{htmlFor:"set-acl-to",children:"Set permissions to (i.e., username.opencommons.net): "}),Qe("br",{}),Qe("br",{}),Qe("input",{id:"set-acl-to",size:"60",name:"setAclTo",...o,placeholder:a})]}),Ar("div",{style:c,children:[Qe("label",{htmlFor:"set-acl-doctype",children:"Select document type: "}),Qe(Wl,{htmlId:"set-acl-doctype"})," "]}),Ar("div",{style:c,children:[Qe("p",{children:"Select permission setting:"}),Qe("input",{type:"radio",id:"set-acl-perm-give",name:"setAclPerms",value:"Give"}),Qe("label",{htmlFor:"set-acl-perm-give",children:"Give"}),Qe("input",{type:"radio",id:"set-acl-perm-revoke",name:"setAclPerms",value:"Revoke"}),Qe("label",{htmlFor:"set-acl-perm-revoke",children:"Revoke"})]}),Qe("button",{disabled:t.processing,type:"submit",children:"Set Permission"})]})})},HL=()=>{const{session:e}=Si.useSession(),{state:t,dispatch:r}=Ea(),{clearValue:n,...o}=ua("text"),{clearValue:a,...s}=ua("text"),{clearValue:u,...h}=ua("text"),{setUserList:c}=bt.useContext(ew);return Qe(ba,{title:"Manage Users",state:t,statusType:"Status",defaultMessage:"To be added...",children:Ar("form",{onSubmit:async m=>{m.preventDefault(),r({type:"SET_PROCESSING"});const _={givenName:m.target.addUserGivenName.value,familyName:m.target.addUserFamilyName.value,url:m.target.addUserUrl.value};if(!_.url){cn("Operation failed. Reason: No URL provided",5,t,r),setTimeout(()=>{r({type:"CLEAR_PROCESSING"})},3e3);return}if(!_.givenName){cn("Operation failed. Reason: User's first/given name is not provided",5,t,r),setTimeout(()=>{r({type:"CLEAR_PROCESSING"})},3e3);return}if(!_.familyName){cn("Operation failed. Reason: User's last/family name is not provided",5,t,r),setTimeout(()=>{r({type:"CLEAR_PROCESSING"})},3e3);return}let C=await IL(e,_);C=await Yv(e,C),c(C),cn(`Adding user "${_.givenName} ${_.familyName}" to Solid...`,5,t,r),setTimeout(()=>{n(),a(),u(),r({type:"CLEAR_PROCESSING"})},3e3)},style:{margin:"20px 0"},autoComplete:"off",children:[Ar("div",{children:[Qe("label",{htmlFor:"add-user-given-name",children:"User's first/given name: "}),Qe("input",{id:"add-user-given-name",name:"addUserGivenName",...o})," "]}),Qe("br",{}),Ar("div",{children:[Qe("label",{htmlFor:"add-user-last-name",children:"User's last/family name: "}),Qe("input",{id:"add-user-last-name",name:"addUserFamilyName",...s})," "]}),Qe("br",{}),Ar("div",{children:[Ar("label",{htmlFor:"add-user-url",children:["Add Pod URL to users list (i.e., username.opencommons.net):"," "]}),Qe("br",{}),Qe("br",{}),Qe("input",{id:"add-user-url",name:"addUserUrl",size:"60",...h})," "]}),Qe("br",{}),Qe("button",{type:"submit",disabled:t.processing,children:"Add User"})]})})},$L=()=>{const e=jl();return localStorage.setItem("restorePath",e.pathname),Ar(sp,{children:[Qe(Zv,{}),Qe(vP,{}),Qe(DL,{}),Qe(LL,{}),Qe(UL,{}),Qe(jL,{}),Qe(ML,{}),Qe(BL,{})]})},VL=({loadingActive:e})=>{const{session:t}=Si.useSession(),{state:r,dispatch:n}=Ea(),{setSelectedUser:o}=bt.useContext(Bp),{userList:a,setUserList:s}=bt.useContext(ew),u=async(p,y)=>{cn(`User "${p}" selected.`,3,r,n),o(y.split("/")[2])},h=async(p,y,m)=>{if(window.confirm(`You're about to delete user ${p} from users list, do you wish to continue?`)){cn(`Deleting user "${p}" from Solid...`,3,r,n);let _=await TL(t,y,m);_=await Yv(t,_),s(_)}};return Qe(ba,{title:"Users List",state:r,statusType:"Status",defaultMessage:"No actions",children:Ar("table",{style:{margin:"20px 0",width:"100%",textAlign:"center"},children:[Qe("thead",{children:Ar("tr",{children:[Qe("th",{children:"First Name"}),Qe("th",{children:"Last Name"}),Qe("th",{children:"Pod URL"}),Qe("th",{children:"Last Active Date"}),Qe("th",{children:"Select User"}),Qe("th",{children:"Delete User"})]})}),Qe("tbody",{children:a?a.map(p=>Ar("tr",{children:[Qe("td",{children:p.givenName}),Qe("td",{children:p.familyName}),Qe("td",{children:Qe("a",{href:p.podUrl,target:"_blank",rel:"noreferrer",children:p.podUrl})}),e?Qe("td",{children:"Loading..."}):Qe("td",{children:p.dateModified?p.dateModified.toLocaleDateString():null}),Qe("td",{children:Qe("button",{type:"button",onClick:()=>u(p.person,p.podUrl),children:"select"})}),Qe("td",{children:Qe("button",{type:"button",onClick:()=>h(p.person,p.givenName,p.podUrl),children:"delete"})})]},p.podUrl)):null})]})})},KL=({loadingUsers:e,loadingActive:t})=>{const r=jl();return localStorage.setItem("restorePath",r.pathname),Ar(sp,{children:[Qe(Zv,{}),Qe(vP,{}),Qe(HL,{}),e?Qe(VL,{loadingActive:t}):Ar("section",{className:"panel",children:[Qe("strong",{children:"Users List"}),Qe("br",{}),Qe("br",{}),Qe("div",{style:{marginBottom:"20px",textAlign:"center"},children:"Loading users list..."})]})]})},WL=()=>{const{session:e}=Si.useSession(),t=hP(),[r,n]=bt.useState(!1);bt.useEffect(()=>{const C=window.performance.getEntriesByType("navigation");C[0].type==="reload"&&C.length===1&&n(!0),r&&localStorage.getItem("loggedIn")&&(console.log("restoring session"),e.login({oidcIssuer:wh,redirectUrl:t,onError:console.error}))},[r]);const[o,a]=bt.useState(""),[s,u]=bt.useState([]),[h,c]=bt.useState(!1),[p,y]=bt.useState(!1),m=bt.useMemo(()=>({selectedUser:o,setSelectedUser:a}),[o]),_=bt.useMemo(()=>({userList:s,setUserList:u}),[s]);return bt.useEffect(()=>{async function C(){await PL(e),await FL(e),await OL(e);try{let R=await Xv(e);u(R),c(!0),y(!0),R=await Yv(e,R),u(R),y(!1)}catch{u([]),c(!1),y(!1)}}e.info.isLoggedIn&&C()},[e.info.isLoggedIn]),Qe(Bp.Provider,{value:m,children:Qe(ew.Provider,{value:_,children:Ar(bO,{children:[Qe(yh,{exact:!0,path:"/PASS/",element:e.info.isLoggedIn?Qe(wy,{to:localStorage.getItem("restorePath")?localStorage.getItem("restorePath"):"/PASS/home/"}):Qe(NL,{})}),Qe(yh,{path:"/PASS/home/",element:e.info.isLoggedIn?Qe(KL,{loadingUsers:h,loadingActive:p}):Qe(wy,{to:"/PASS/"})}),Qe(yh,{path:"/PASS/forms/",element:e.info.isLoggedIn?Qe($L,{}):Qe(wy,{to:"/PASS/"})})]})})})},GL=mm.createRoot(document.getElementById("root"));GL.render(Qe(OA.StrictMode,{children:Qe(PO,{children:Qe(Si.SessionProvider,{children:Qe(WL,{})})})}));
